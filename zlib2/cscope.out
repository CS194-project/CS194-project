cscope 15 /mnt/0e42e0a1-b4a4-4842-8752-3c52eeed7a8a/194/zlib               0000729455
	@adler32.c

8 
	~"zut.h
"

10 
	#loÿl
 

	)

12 
loÿl
 
uLÚg
 
adËr32_combše_


13 
OF
 ((
uLÚg
 
adËr1
, uLÚg 
adËr2
, 
z_off64_t
 
Ën2
));

15 
	#BASE
 65521

	)

16 
	#NMAX
 5552

	)

19 
	#DO1
(
buf
,
i
è{
adËr
 +ğ(buf)[i]; 
sum2
 +ğadËr;}

	)

20 
	#DO2
(
buf
,
i
è
	`DO1
(buf,i); DO1(buf,i+1);

	)

21 
	#DO4
(
buf
,
i
è
	`DO2
(buf,i); DO2(buf,i+2);

	)

22 
	#DO8
(
buf
,
i
è
	`DO4
(buf,i); DO4(buf,i+4);

	)

23 
	#DO16
(
buf
è
	`DO8
(buf,0); DO8(buf,8);

	)

27 #ifdeà
NO_DIVIDE


30 
	#CHOP
(
a
) \

32 
tmp
 = 
a
 >> 16; \

33 
a
 &= 0xffffUL; \

34 
a
 +ğ(
tmp
 << 4) -mp; \

35 } 0)

	)

36 
	#MOD28
(
a
) \

38 
	`CHOP
(
a
); \

39 ià(
a
 >ğ
BASE
)‡ -= BASE; \

40 } 0)

	)

41 
	#MOD
(
a
) \

43 
	`CHOP
(
a
); \

44 
	`MOD28
(
a
); \

45 } 0)

	)

46 
	#MOD63
(
a
) \

48 
z_off64_t
 
tmp
 = 
a
 >> 32; \

49 
a
 &= 0xffffffffL; \

50 
a
 +ğ(
tmp
 << 8) - (tmp << 5) +mp; \

51 
tmp
 = 
a
 >> 16; \

52 
a
 &= 0xffffL; \

53 
a
 +ğ(
tmp
 << 4) -mp; \

54 
tmp
 = 
a
 >> 16; \

55 
a
 &= 0xffffL; \

56 
a
 +ğ(
tmp
 << 4) -mp; \

57 ià(
a
 >ğ
BASE
)‡ -= BASE; \

58 } 0)

	)

60 
	#MOD
(
a
è¨%ğ
BASE


	)

61 
	#MOD28
(
a
è¨%ğ
BASE


	)

62 
	#MOD63
(
a
è¨%ğ
BASE


	)

66 
uLÚg
 
ZEXPORT


67 
	$adËr32
 (
uLÚg
 
adËr
, cÚ¡ 
By‹f
 * 
buf
, 
uIÁ
 
Ën
)

69 
sum2
;

70 
n
;

73 
sum2
 = (
adËr
 >> 16) & 0xffff;

74 
adËr
 &= 0xffff;

77 ià(
Ën
 == 1)

79 
adËr
 +ğ
buf
[0];

80 ià(
adËr
 >ğ
BASE
)

81 
adËr
 -ğ
BASE
;

82 
sum2
 +ğ
adËr
;

83 ià(
sum2
 >ğ
BASE
)

84 
sum2
 -ğ
BASE
;

85  
adËr
 | (
sum2
 << 16);

89 ià(
buf
 =ğ
Z_NULL
)

93 ià(
Ën
 < 16)

95 
Ën
--)

97 
adËr
 +ğ*
buf
++;

98 
sum2
 +ğ
adËr
;

100 ià(
adËr
 >ğ
BASE
)

101 
adËr
 -ğ
BASE
;

102 
	`MOD28
 (
sum2
);

103  
adËr
 | (
sum2
 << 16);

107 
Ën
 >ğ
NMAX
)

109 
Ën
 -ğ
NMAX
;

110 
n
 = 
NMAX
 / 16;

113 
	`DO16
 (
buf
);

114 
buf
 += 16;

116 --
n
);

117 
	`MOD
 (
adËr
);

118 
	`MOD
 (
sum2
);

122 ià(
Ën
)

124 
Ën
 >= 16)

126 
Ën
 -= 16;

127 
	`DO16
 (
buf
);

128 
buf
 += 16;

130 
Ën
--)

132 
adËr
 +ğ*
buf
++;

133 
sum2
 +ğ
adËr
;

135 
	`MOD
 (
adËr
);

136 
	`MOD
 (
sum2
);

140  
adËr
 | (
sum2
 << 16);

141 
	}
}

144 
loÿl
 
uLÚg


145 
	$adËr32_combše_
 (
uLÚg
 
adËr1
, uLÚg 
adËr2
, 
z_off64_t
 
Ën2
)

147 
sum1
;

148 
sum2
;

149 
»m
;

152 ià(
Ën2
 < 0)

156 
	`MOD63
 (
Ën2
);

157 
»m
 = (è
Ën2
;

158 
sum1
 = 
adËr1
 & 0xffff;

159 
sum2
 = 
»m
 * 
sum1
;

160 
	`MOD
 (
sum2
);

161 
sum1
 +ğ(
adËr2
 & 0xffffè+ 
BASE
 - 1;

162 
sum2
 +ğ((
adËr1
 >> 16è& 0xffffè+ ((
adËr2
 >> 16è& 0xffffè+ 
BASE
 - 
»m
;

163 ià(
sum1
 >ğ
BASE
)

164 
sum1
 -ğ
BASE
;

165 ià(
sum1
 >ğ
BASE
)

166 
sum1
 -ğ
BASE
;

167 ià(
sum2
 >ğ(
BASE
 << 1))

168 
sum2
 -ğ(
BASE
 << 1);

169 ià(
sum2
 >ğ
BASE
)

170 
sum2
 -ğ
BASE
;

171  
sum1
 | (
sum2
 << 16);

172 
	}
}

175 
uLÚg
 
ZEXPORT


176 
	$adËr32_combše
 (
uLÚg
 
adËr1
, uLÚg 
adËr2
, 
z_off_t
 
Ën2
)

178  
	`adËr32_combše_
 (
adËr1
, 
adËr2
, 
Ën2
);

179 
	}
}

181 
uLÚg
 
ZEXPORT


182 
	$adËr32_combše64
 (
uLÚg
 
adËr1
, uLÚg 
adËr2
, 
z_off64_t
 
Ën2
)

184  
	`adËr32_combše_
 (
adËr1
, 
adËr2
, 
Ën2
);

185 
	}
}

	@compress.c

8 
	#ZLIB_INTERNAL


	)

9 
	~"zlib.h
"

22 
ZEXPORT


23 
	$com´ess2
 (
By‹f
 * 
de¡
, 
uLÚgf
 * 
de¡L’
, cÚ¡ By‹à* 
sourû
,

24 
uLÚg
 
sourûL’
, 
Ëv–
)

26 
z_¡»am
 
¡»am
;

27 
”r
;

29 
¡»am
.
Ãxt_š
 = (
z_cÚ¡
 
By‹f
 *è
sourû
;

30 
¡»am
.
ava_š
 = (
uIÁ
è
sourûL’
;

31 #ifdeà
MAXSEG_64K


33 ià((
uLÚg
è
¡»am
.
ava_š
 !ğ
sourûL’
)

34  
Z_BUF_ERROR
;

36 
¡»am
.
Ãxt_out
 = 
de¡
;

37 
¡»am
.
ava_out
 = (
uIÁ
è* 
de¡L’
;

38 ià((
uLÚg
è
¡»am
.
ava_out
 !ğ*
de¡L’
)

39  
Z_BUF_ERROR
;

41 
¡»am
.
z®loc
 = (
®loc_func
) 0;

42 
¡»am
.
zä“
 = (
ä“_func
) 0;

43 
¡»am
.
İaque
 = (
voidpf
) 0;

45 
”r
 = 
	`deæ©eIn™
 (&
¡»am
, 
Ëv–
);

46 ià(
”r
 !ğ
Z_OK
)

47  
”r
;

49 
”r
 = 
	`deæ©e
 (&
¡»am
, 
Z_FINISH
);

50 ià(
”r
 !ğ
Z_STREAM_END
)

52 
	`deæ©eEnd
 (&
¡»am
);

53  
”r
 =ğ
Z_OK
 ? 
Z_BUF_ERROR
 :ƒrr;

55 *
de¡L’
 = 
¡»am
.
tÙ®_out
;

57 
”r
 = 
	`deæ©eEnd
 (&
¡»am
);

58  
”r
;

59 
	}
}

63 
ZEXPORT


64 
	$com´ess
 (
By‹f
 * 
de¡
, 
uLÚgf
 * 
de¡L’
, cÚ¡ By‹à* 
sourû
,

65 
uLÚg
 
sourûL’
)

67  
	`com´ess2
 (
de¡
, 
de¡L’
, 
sourû
, 
sourûL’
, 
Z_DEFAULT_COMPRESSION
);

68 
	}
}

74 
uLÚg
 
ZEXPORT


75 
	$com´essBound
 (
uLÚg
 
sourûL’
)

77  
sourûL’
 + (sourceLen >> 12) + (sourceLen >> 14) +

78 (
sourûL’
 >> 25) + 13;

79 
	}
}

	@contrib/blast/blast.c

29 
	~<£tjmp.h
>

30 
	~"bÏ¡.h
"

32 
	#loÿl
 

	)

33 
	#MAXBITS
 13

	)

34 
	#MAXWIN
 4096

	)

37 
	s¡©e


40 
bÏ¡_š
 
	mšfun
;

41 *
	mšhow
;

42 *
	mš
;

43 
	mËá
;

44 
	mb™buf
;

45 
	mb™út
;

48 
jmp_buf
 
	m’v
;

51 
bÏ¡_out
 
	moutfun
;

52 *
	mouthow
;

53 
	mÃxt
;

54 
	mfœ¡
;

55 
	mout
[
MAXWIN
];

69 
loÿl
 

70 
	$b™s
 (
¡©e
 *
s
, 
Ãed
)

72 
v®
;

75 
v®
 = 
s
->
b™buf
;

76 
s
->
b™út
 < 
Ãed
)

78 ià(
s
->
Ëá
 == 0)

80 
s
->
Ëá
 = s->
	`šfun
 (s->
šhow
, &(s->
š
));

81 ià(
s
->
Ëá
 == 0)

82 
	`lÚgjmp
 (
s
->
’v
, 1);

84 
v®
 |ğ(è(*(
s
->
š
)++è<< s->
b™út
;

85 
s
->
Ëá
--;

86 
s
->
b™út
 += 8;

90 
s
->
b™buf
 = 
v®
 >> 
Ãed
;

91 
s
->
b™út
 -ğ
Ãed
;

94  
v®
 & ((1 << 
Ãed
) - 1);

95 
	}
}

104 
	shuffmª


106 *
	mcouÁ
;

107 *
	msymbŞ
;

131 
loÿl
 

132 
	$decode
 (
¡©e
 *
s
, 
huffmª
 *
h
)

134 
Ën
;

135 
code
;

136 
fœ¡
;

137 
couÁ
;

138 
šdex
;

139 
b™buf
;

140 
Ëá
;

141 *
Ãxt
;

143 
b™buf
 = 
s
->bitbuf;

144 
Ëá
 = 
s
->
b™út
;

145 
code
 = 
fœ¡
 = 
šdex
 = 0;

146 
Ën
 = 1;

147 
Ãxt
 = 
h
->
couÁ
 + 1;

150 
Ëá
--)

152 
code
 |ğ(
b™buf
 & 1) ^ 1;

153 
b™buf
 >>= 1;

154 
couÁ
 = *
Ãxt
++;

155 ià(
code
 < 
fœ¡
 + 
couÁ
)

157 
s
->
b™buf
 = bitbuf;

158 
s
->
b™út
 = (s->b™úˆ- 
Ën
) & 7;

159  
h
->
symbŞ
[
šdex
 + (
code
 - 
fœ¡
)];

161 
šdex
 +ğ
couÁ
;

162 
fœ¡
 +ğ
couÁ
;

163 
fœ¡
 <<= 1;

164 
code
 <<= 1;

165 
Ën
++;

167 
Ëá
 = (
MAXBITS
 + 1è- 
Ën
;

168 ià(
Ëá
 == 0)

170 ià(
s
->
Ëá
 == 0)

172 
s
->
Ëá
 = s->
	`šfun
 (s->
šhow
, &(s->
š
));

173 ià(
s
->
Ëá
 == 0)

174 
	`lÚgjmp
 (
s
->
’v
, 1);

176 
b™buf
 = *(
s
->
š
)++;

177 
s
->
Ëá
--;

178 ià(
Ëá
 > 8)

179 
Ëá
 = 8;

182 
	}
}

201 
loÿl
 

202 
	$cÚ¡ruù
 (
huffmª
 *
h
, cÚ¡ *
»p
, 
n
)

204 
symbŞ
;

205 
Ën
;

206 
Ëá
;

207 
offs
[
MAXBITS
 + 1];

208 
Ëngth
[256];

211 
symbŞ
 = 0;

214 
Ën
 = *
»p
++;

215 
Ëá
 = (
Ën
 >> 4) + 1;

216 
Ën
 &= 15;

219 
Ëngth
[
symbŞ
++] = 
Ën
;

221 --
Ëá
);

223 --
n
);

224 
n
 = 
symbŞ
;

227 
Ën
 = 0;†’ <ğ
MAXBITS
;†en++)

228 
h
->
couÁ
[
Ën
] = 0;

229 
symbŞ
 = 0; symbŞ < 
n
; symbol++)

230 (
h
->
couÁ
[
Ëngth
[
symbŞ
]])++;

231 ià(
h
->
couÁ
[0] =ğ
n
)

235 
Ëá
 = 1;

236 
Ën
 = 1;†’ <ğ
MAXBITS
;†en++)

238 
Ëá
 <<= 1;

239 
Ëá
 -ğ
h
->
couÁ
[
Ën
];

240 ià(
Ëá
 < 0)

241  
Ëá
;

245 
offs
[1] = 0;

246 
Ën
 = 1;†’ < 
MAXBITS
;†en++)

247 
offs
[
Ën
 + 1] = offs[Ën] + 
h
->
couÁ
[len];

253 
symbŞ
 = 0; symbŞ < 
n
; symbol++)

254 ià(
Ëngth
[
symbŞ
] != 0)

255 
h
->
symbŞ
[
offs
[
Ëngth
[symbol]]++] = symbol;

258  
Ëá
;

259 
	}
}

299 
loÿl
 

300 
	$decomp
 (
¡©e
 *
s
)

302 
l™
;

303 
diù
;

304 
symbŞ
;

305 
Ën
;

306 
di¡
;

307 
cİy
;

308 *
äom
, *
to
;

309 
vœgš
 = 1;

310 
l™út
[
MAXBITS
 + 1], 
l™sym
[256];

311 
Ënút
[
MAXBITS
 + 1], 
Ënsym
[16];

312 
di¡út
[
MAXBITS
 + 1], 
di¡sym
[64];

313 
huffmª
 
l™code
 = { 
l™út
, 
l™sym
 };

314 
huffmª
 
Ëncode
 = { 
Ënút
, 
Ënsym
 };

315 
huffmª
 
di¡code
 = { 
di¡út
, 
di¡sym
 };

317 cÚ¡ 
l™Ën
[] = {

326 cÚ¡ 
ËÆ’
[] = { 2, 35, 36, 53, 38, 23 };

328 cÚ¡ 
di¡Ën
[] = { 2, 20, 53, 230, 247, 151, 248 };

329 cÚ¡ 
ba£
[16] = {

332 cÚ¡ 
exŒa
[16] = {

337 ià(
vœgš
)

339 
	`cÚ¡ruù
 (&
l™code
, 
l™Ën
,  (litlen));

340 
	`cÚ¡ruù
 (&
Ëncode
, 
ËÆ’
,  (lenlen));

341 
	`cÚ¡ruù
 (&
di¡code
, 
di¡Ën
,  (distlen));

342 
vœgš
 = 0;

346 
l™
 = 
	`b™s
 (
s
, 8);

347 ià(
l™
 > 1)

349 
diù
 = 
	`b™s
 (
s
, 8);

350 ià(
diù
 < 4 || dict > 6)

356 ià(
	`b™s
 (
s
, 1))

359 
symbŞ
 = 
	`decode
 (
s
, &
Ëncode
);

360 
Ën
 = 
ba£
[
symbŞ
] + 
	`b™s
 (
s
, 
exŒa
[symbol]);

361 ià(
Ën
 == 519)

365 
symbŞ
 = 
Ën
 =ğ2 ? 2 : 
diù
;

366 
di¡
 = 
	`decode
 (
s
, &
di¡code
è<< 
symbŞ
;

367 
di¡
 +ğ
	`b™s
 (
s
, 
symbŞ
);

368 
di¡
++;

369 ià(
s
->
fœ¡
 && 
di¡
 > s->
Ãxt
)

375 
to
 = 
s
->
out
 + s->
Ãxt
;

376 
äom
 = 
to
 - 
di¡
;

377 
cİy
 = 
MAXWIN
;

378 ià(
s
->
Ãxt
 < 
di¡
)

380 
äom
 +ğ
cİy
;

381 
cİy
 = 
di¡
;

383 
cİy
 -ğ
s
->
Ãxt
;

384 ià(
cİy
 > 
Ën
)

385 
cİy
 = 
Ën
;

386 
Ën
 -ğ
cİy
;

387 
s
->
Ãxt
 +ğ
cİy
;

390 *
to
++ = *
äom
++;

392 --
cİy
);

393 ià(
s
->
Ãxt
 =ğ
MAXWIN
)

395 ià(
s
->
	`outfun
 (s->
outhow
, s->
out
, s->
Ãxt
))

397 
s
->
Ãxt
 = 0;

398 
s
->
fœ¡
 = 0;

401 
Ën
 != 0);

406 
symbŞ
 = 
l™
 ? 
	`decode
 (
s
, &
l™code
è: 
	`b™s
 (s, 8);

407 
s
->
out
[s->
Ãxt
++] = 
symbŞ
;

408 ià(
s
->
Ãxt
 =ğ
MAXWIN
)

410 ià(
s
->
	`outfun
 (s->
outhow
, s->
out
, s->
Ãxt
))

412 
s
->
Ãxt
 = 0;

413 
s
->
fœ¡
 = 0;

419 
	}
}

423 
	$bÏ¡
 (
bÏ¡_š
 
šfun
, *
šhow
, 
bÏ¡_out
 
outfun
, *
outhow
)

425 
¡©e
 
s
;

426 
”r
;

429 
s
.
šfun
 = infun;

430 
s
.
šhow
 = inhow;

431 
s
.
Ëá
 = 0;

432 
s
.
b™buf
 = 0;

433 
s
.
b™út
 = 0;

436 
s
.
outfun
 = outfun;

437 
s
.
outhow
 = outhow;

438 
s
.
Ãxt
 = 0;

439 
s
.
fœ¡
 = 1;

442 ià(
	`£tjmp
 (
s
.
’v
) != 0)

443 
”r
 = 2;

445 
”r
 = 
	`decomp
 (&
s
);

448 ià(
”r
 !ğ1 && 
s
.
Ãxt
 && s.
	`outfun
 (s.
outhow
, s.
out
, s.next) &&ƒrr == 0)

449 
”r
 = 1;

450  
”r
;

451 
	}
}

453 #ifdeà
TEST


455 
	~<¡dio.h
>

456 
	~<¡dlib.h
>

458 
	#CHUNK
 16384

	)

460 
loÿl
 

461 
	$šf
 (*
how
, **
buf
)

463 
hŞd
[
CHUNK
];

465 *
buf
 = 
hŞd
;

466  
	`ä—d
 (
hŞd
, 1, 
CHUNK
, (
FILE
 *è
how
);

467 
	}
}

469 
loÿl
 

470 
	$outf
 (*
how
, *
buf
, 
Ën
)

472  
	`fwr™e
 (
buf
, 1, 
Ën
, (
FILE
 *è
how
) !=†en;

473 
	}
}

477 
	$maš
 ()

479 
»t
, 
n
;

482 
»t
 = 
	`bÏ¡
 (
šf
, 
¡dš
, 
outf
, 
¡dout
);

483 ià(
»t
 != 0)

484 
	`årštf
 (
¡d”r
, "bÏ¡ƒ¼Ü: %d\n", 
»t
);

487 
n
 = 0;

488 
	`g‘ch¬
 (è!ğ
EOF
)

489 
n
++;

490 ià(
n
)

491 
	`årštf
 (
¡d”r
, "bÏ¡ w¬nšg: %d unu£d by‹ oàšput\n", 
n
);

494  
»t
;

495 
	}
}

	@contrib/blast/blast.h

38 (*
	tbÏ¡_š
)(*
	thow
, **
	tbuf
);

39 (*
	tbÏ¡_out
)(*
	thow
, *
	tbuf
, 
	tËn
);

45 
	`bÏ¡
(
bÏ¡_š
 
šfun
, *
šhow
, 
bÏ¡_out
 
outfun
, *
outhow
);

	@contrib/infback9/infback9.c

6 
	~"zut.h
"

7 
	~"šfback9.h
"

8 
	~"šá»e9.h
"

9 
	~"šæ©e9.h
"

11 
	#WSIZE
 65536UL

	)

19 
ZEXPORT


20 
	$šæ©eBack9In™_
 (
¡rm
, 
wšdow
, 
v”siÚ
, 
¡»am_size
)

21 
z_¡»am
 
FAR
 *
¡rm
;

22 
FAR
 *
wšdow
;

23 cÚ¡ *
v”siÚ
;

24 
¡»am_size
;

26 
šæ©e_¡©e
 
FAR
 *
¡©e
;

28 ià(
v”siÚ
 =ğ
Z_NULL
 || v”siÚ[0] !ğ
ZLIB_VERSION
[0] ||

29 
¡»am_size
 !ğ(è( (
z_¡»am
)))

30  
Z_VERSION_ERROR
;

31 ià(
¡rm
 =ğ
Z_NULL
 || 
wšdow
 == Z_NULL)

32  
Z_STREAM_ERROR
;

33 
¡rm
->
msg
 = 
Z_NULL
;

34 ià(
¡rm
->
z®loc
 =ğ(
®loc_func
) 0)

36 
¡rm
->
z®loc
 = 
zÿÎoc
;

37 
¡rm
->
İaque
 = (
voidpf
) 0;

39 ià(
¡rm
->
zä“
 =ğ(
ä“_func
) 0)

40 
¡rm
->
zä“
 = 
zcä“
;

41 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
	`ZALLOC
 (
¡rm
, 1,

42  (
šæ©e_¡©e
));

43 ià(
¡©e
 =ğ
Z_NULL
)

44  
Z_MEM_ERROR
;

45 
	`T¿ûv
 ((
¡d”r
, "inflate:‡llocated\n"));

46 
¡rm
->
¡©e
 = (
voidpf
) state;

47 
¡©e
->
wšdow
 = window;

48  
Z_OK
;

49 
	}
}

55 #ifdeà
MAKEFIXED


56 
	~<¡dio.h
>

59 
	$makefixed9
 ()

61 
sym
, 
b™s
, 
low
, 
size
;

62 
code
 *
Ãxt
, *
Ënfix
, *
di¡fix
;

63 
šæ©e_¡©e
 
¡©e
;

64 
code
 
fixed
[544];

67 
sym
 = 0;

68 
sym
 < 144)

69 
¡©e
.
Ëns
[
sym
++] = 8;

70 
sym
 < 256)

71 
¡©e
.
Ëns
[
sym
++] = 9;

72 
sym
 < 280)

73 
¡©e
.
Ëns
[
sym
++] = 7;

74 
sym
 < 288)

75 
¡©e
.
Ëns
[
sym
++] = 8;

76 
Ãxt
 = 
fixed
;

77 
Ënfix
 = 
Ãxt
;

78 
b™s
 = 9;

79 
	`šæ©e_bË9
 (
LENS
, 
¡©e
.
Ëns
, 288, &(
Ãxt
), &(
b™s
), s‹.
wÜk
);

82 
sym
 = 0;

83 
sym
 < 32)

84 
¡©e
.
Ëns
[
sym
++] = 5;

85 
di¡fix
 = 
Ãxt
;

86 
b™s
 = 5;

87 
	`šæ©e_bË9
 (
DISTS
, 
¡©e
.
Ëns
, 32, &(
Ãxt
), &(
b™s
), s‹.
wÜk
);

90 
	`puts
 (" /* inffix9.h --able for decoding deflate64 fixed codes");

91 
	`puts
 (" * Generated‡utomatically by makefixed9().");

92 
	`puts
 (" */");

93 
	`puts
 ("");

94 
	`puts
 (" /* WARNING:his file should *not* be used by‡pplications.");

95 
	`puts
 (" It is…art ofhe implementation ofhis†ibrary‡nd is");

96 
	`puts
 (" subjecto change. Applications should only use zlib.h.");

97 
	`puts
 (" */");

98 
	`puts
 ("");

99 
size
 = 1U << 9;

100 
	`´štf
 (" stiøcÚ¡ codËnfix[%u] = {", 
size
);

101 
low
 = 0;

104 ià((
low
 % 6) == 0)

105 
	`´štf
 ("\n ");

106 
	`´štf
 ("{%u,%u,%d}", 
Ënfix
[
low
].
İ
,†’fix[low].
b™s
,

107 
Ënfix
[
low
].
v®
);

108 ià(++
low
 =ğ
size
)

110 
	`putch¬
 (',');

112 
	`puts
 ("\n };");

113 
size
 = 1U << 5;

114 
	`´štf
 ("\À stiøcÚ¡ coddi¡fix[%u] = {", 
size
);

115 
low
 = 0;

118 ià((
low
 % 5) == 0)

119 
	`´štf
 ("\n ");

120 
	`´štf
 ("{%u,%u,%d}", 
di¡fix
[
low
].
İ
, di¡fix[low].
b™s
,

121 
di¡fix
[
low
].
v®
);

122 ià(++
low
 =ğ
size
)

124 
	`putch¬
 (',');

126 
	`puts
 ("\n };");

127 
	}
}

133 
	#INITBITS
() \

135 
hŞd
 = 0; \

136 
b™s
 = 0; \

137 } 0)

	)

141 
	#PULL
() \

143 ià(
have
 == 0) { \

144 
have
 = 
	`š
(
š_desc
, &
Ãxt
); \

145 ià(
have
 == 0) { \

146 
Ãxt
 = 
Z_NULL
; \

147 
»t
 = 
Z_BUF_ERROR
; \

148 
šf_Ëave
; \

151 } 0)

	)

155 
	#PULLBYTE
() \

157 
	`PULL
(); \

158 
have
--; \

159 
hŞd
 +ğ()(*
Ãxt
++è<< 
b™s
; \

160 
b™s
 += 8; \

161 } 0)

	)

166 
	#NEEDBITS
(
n
) \

168 
b™s
 < ()(
n
)) \

169 
	`PULLBYTE
(); \

170 } 0)

	)

173 
	#BITS
(
n
) \

174 (()
hŞd
 & ((1U << (
n
)è- 1))

	)

177 
	#DROPBITS
(
n
) \

179 
hŞd
 >>ğ(
n
); \

180 
b™s
 -ğ()(
n
); \

181 } 0)

	)

184 
	#BYTEBITS
() \

186 
hŞd
 >>ğ
b™s
 & 7; \

187 
b™s
 -= bits & 7; \

188 } 0)

	)

193 
	#ROOM
() \

195 ià(
Ëá
 == 0) { \

196 
put
 = 
wšdow
; \

197 
Ëá
 = 
WSIZE
; \

198 
w¿p
 = 1; \

199 ià(
	`out
(
out_desc
, 
put
, ()
Ëá
)) { \

200 
»t
 = 
Z_BUF_ERROR
; \

201 
šf_Ëave
; \

204 } 0)

	)

233 
ZEXPORT


234 
	$šæ©eBack9
 (
¡rm
, 
š
, 
š_desc
, 
out
, 
out_desc
)

235 
z_¡»am
 
FAR
 *
¡rm
;

236 
š_func
 
š
;

237 
FAR
 *
š_desc
;

238 
out_func
 
out
;

239 
FAR
 *
out_desc
;

241 
šæ©e_¡©e
 
FAR
 *
¡©e
;

242 
z_cÚ¡
 
FAR
 *
Ãxt
;

243 
FAR
 *
put
;

244 
have
;

245 
Ëá
;

246 
šæ©e_mode
 
mode
;

247 
Ï¡block
;

248 
w¿p
;

249 
FAR
 *
wšdow
;

250 
hŞd
;

251 
b™s
;

252 
exŒa
;

253 
Ëngth
;

254 
off£t
;

255 
cİy
;

256 
FAR
 *
äom
;

257 
code
 cÚ¡ 
FAR
 *
Ëncode
;

258 
code
 cÚ¡ 
FAR
 *
di¡code
;

259 
Ënb™s
;

260 
di¡b™s
;

261 
code
 
h”e
;

262 
code
 
Ï¡
;

263 
Ën
;

264 
»t
;

265 cÚ¡ 
Üd”
[19] =

267 
	~"šffix9.h
"

270 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

271  
Z_STREAM_ERROR
;

272 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

275 
¡rm
->
msg
 = 
Z_NULL
;

276 
mode
 = 
TYPE
;

277 
Ï¡block
 = 0;

278 
w¿p
 = 0;

279 
wšdow
 = 
¡©e
->window;

280 
Ãxt
 = 
¡rm
->
Ãxt_š
;

281 
have
 = 
Ãxt
 !ğ
Z_NULL
 ? 
¡rm
->
ava_š
 : 0;

282 
hŞd
 = 0;

283 
b™s
 = 0;

284 
put
 = 
wšdow
;

285 
Ëá
 = 
WSIZE
;

286 
Ëncode
 = 
Z_NULL
;

287 
di¡code
 = 
Z_NULL
;

291 
mode
)

293 
TYPE
:

295 ià(
Ï¡block
)

297 
	`BYTEBITS
 ();

298 
mode
 = 
DONE
;

301 
	`NEEDBITS
 (3);

302 
Ï¡block
 = 
	`BITS
 (1);

303 
	`DROPBITS
 (1);

304 
	`BITS
 (2))

307 
	`T¿ûv
 ((
¡d”r
, "inflate: stored block%s\n",

308 
Ï¡block
 ? " (last)" : ""));

309 
mode
 = 
STORED
;

312 
Ëncode
 = 
Ënfix
;

313 
Ënb™s
 = 9;

314 
di¡code
 = 
di¡fix
;

315 
di¡b™s
 = 5;

316 
	`T¿ûv
 ((
¡d”r
, "inflate: fixed codes block%s\n",

317 
Ï¡block
 ? " (last)" : ""));

318 
mode
 = 
LEN
;

321 
	`T¿ûv
 ((
¡d”r
, "inflate: dynamic codes block%s\n",

322 
Ï¡block
 ? " (last)" : ""));

323 
mode
 = 
TABLE
;

326 
¡rm
->
msg
 = (*) "invalid blockype";

327 
mode
 = 
BAD
;

329 
	`DROPBITS
 (2);

332 
STORED
:

334 
	`BYTEBITS
 ();

335 
	`NEEDBITS
 (32);

336 ià((
hŞd
 & 0xffff) != ((hold >> 16) ^ 0xffff))

338 
¡rm
->
msg
 = (*) "invalid stored block†engths";

339 
mode
 = 
BAD
;

342 
Ëngth
 = (è
hŞd
 & 0xffff;

343 
	`T¿ûv
 ((
¡d”r
, "šæ©e: stÜed†’gth %lu\n", 
Ëngth
));

344 
	`INITBITS
 ();

347 
Ëngth
 != 0)

349 
cİy
 = 
Ëngth
;

350 
	`PULL
 ();

351 
	`ROOM
 ();

352 ià(
cİy
 > 
have
)

353 
cİy
 = 
have
;

354 ià(
cİy
 > 
Ëá
)

355 
cİy
 = 
Ëá
;

356 
	`zmemıy
 (
put
, 
Ãxt
, 
cİy
);

357 
have
 -ğ
cİy
;

358 
Ãxt
 +ğ
cİy
;

359 
Ëá
 -ğ
cİy
;

360 
put
 +ğ
cİy
;

361 
Ëngth
 -ğ
cİy
;

363 
	`T¿ûv
 ((
¡d”r
, "inflate: storedƒnd\n"));

364 
mode
 = 
TYPE
;

367 
TABLE
:

369 
	`NEEDBITS
 (14);

370 
¡©e
->
Æ’
 = 
	`BITS
 (5) + 257;

371 
	`DROPBITS
 (5);

372 
¡©e
->
ndi¡
 = 
	`BITS
 (5) + 1;

373 
	`DROPBITS
 (5);

374 
¡©e
->
ncode
 = 
	`BITS
 (4) + 4;

375 
	`DROPBITS
 (4);

376 ià(
¡©e
->
Æ’
 > 286)

378 
¡rm
->
msg
 = (*) "too many†ength symbols";

379 
mode
 = 
BAD
;

382 
	`T¿ûv
 ((
¡d”r
, "inflate:able sizes ok\n"));

385 
¡©e
->
have
 = 0;

386 
¡©e
->
have
 < s‹->
ncode
)

388 
	`NEEDBITS
 (3);

389 
¡©e
->
Ëns
[
Üd”
[¡©e->
have
++]] = (è
	`BITS
 (3);

390 
	`DROPBITS
 (3);

392 
¡©e
->
have
 < 19)

393 
¡©e
->
Ëns
[
Üd”
[¡©e->
have
++]] = 0;

394 
¡©e
->
Ãxt
 = s‹->
codes
;

395 
Ëncode
 = (
code
 cÚ¡ 
FAR
 *è(
¡©e
->
Ãxt
);

396 
Ënb™s
 = 7;

397 
»t
 = 
	`šæ©e_bË9
 (
CODES
, 
¡©e
->
Ëns
, 19, &(¡©e->
Ãxt
),

398 &(
Ënb™s
), 
¡©e
->
wÜk
);

399 ià(
»t
)

401 
¡rm
->
msg
 = (*) "invalid code†engths set";

402 
mode
 = 
BAD
;

405 
	`T¿ûv
 ((
¡d”r
, "inflate: code†engths ok\n"));

408 
¡©e
->
have
 = 0;

409 
¡©e
->
have
 < s‹->
Æ’
 + s‹->
ndi¡
)

413 
h”e
 = 
Ëncode
[
	`BITS
 (
Ënb™s
)];

414 ià((è(
h”e
.
b™s
) <= bits)

416 
	`PULLBYTE
 ();

418 ià(
h”e
.
v®
 < 16)

420 
	`NEEDBITS
 (
h”e
.
b™s
);

421 
	`DROPBITS
 (
h”e
.
b™s
);

422 
¡©e
->
Ëns
[¡©e->
have
++] = 
h”e
.
v®
;

426 ià(
h”e
.
v®
 == 16)

428 
	`NEEDBITS
 (
h”e
.
b™s
 + 2);

429 
	`DROPBITS
 (
h”e
.
b™s
);

430 ià(
¡©e
->
have
 == 0)

432 
¡rm
->
msg
 = (*) "invalid bit†ength„epeat";

433 
mode
 = 
BAD
;

436 
Ën
 = (è(
¡©e
->
Ëns
[¡©e->
have
 - 1]);

437 
cİy
 = 3 + 
	`BITS
 (2);

438 
	`DROPBITS
 (2);

440 ià(
h”e
.
v®
 == 17)

442 
	`NEEDBITS
 (
h”e
.
b™s
 + 3);

443 
	`DROPBITS
 (
h”e
.
b™s
);

444 
Ën
 = 0;

445 
cİy
 = 3 + 
	`BITS
 (3);

446 
	`DROPBITS
 (3);

450 
	`NEEDBITS
 (
h”e
.
b™s
 + 7);

451 
	`DROPBITS
 (
h”e
.
b™s
);

452 
Ën
 = 0;

453 
cİy
 = 11 + 
	`BITS
 (7);

454 
	`DROPBITS
 (7);

456 ià(
¡©e
->
have
 + 
cİy
 > s‹->
Æ’
 + s‹->
ndi¡
)

458 
¡rm
->
msg
 = (*) "invalid bit†ength„epeat";

459 
mode
 = 
BAD
;

462 
cİy
--)

463 
¡©e
->
Ëns
[¡©e->
have
++] = (è
Ën
;

468 ià(
mode
 =ğ
BAD
)

472 ià(
¡©e
->
Ëns
[256] == 0)

474 
¡rm
->
msg
 = (*) "invalid code -- missingƒnd-of-block";

475 
mode
 = 
BAD
;

482 
¡©e
->
Ãxt
 = s‹->
codes
;

483 
Ëncode
 = (
code
 cÚ¡ 
FAR
 *è(
¡©e
->
Ãxt
);

484 
Ënb™s
 = 9;

485 
»t
 = 
	`šæ©e_bË9
 (
LENS
, 
¡©e
->
Ëns
, s‹->
Æ’
,

486 &(
¡©e
->
Ãxt
), &(
Ënb™s
), s‹->
wÜk
);

487 ià(
»t
)

489 
¡rm
->
msg
 = (*) "invalid†iteral/lengths set";

490 
mode
 = 
BAD
;

493 
di¡code
 = (
code
 cÚ¡ 
FAR
 *è(
¡©e
->
Ãxt
);

494 
di¡b™s
 = 6;

495 
»t
 = 
	`šæ©e_bË9
 (
DISTS
, 
¡©e
->
Ëns
 + s‹->
Æ’
,

496 
¡©e
->
ndi¡
, &(¡©e->
Ãxt
), &(
di¡b™s
),

497 
¡©e
->
wÜk
);

498 ià(
»t
)

500 
¡rm
->
msg
 = (*) "invalid distances set";

501 
mode
 = 
BAD
;

504 
	`T¿ûv
 ((
¡d”r
, "inflate: codes ok\n"));

505 
mode
 = 
LEN
;

507 
LEN
:

511 
h”e
 = 
Ëncode
[
	`BITS
 (
Ënb™s
)];

512 ià((è(
h”e
.
b™s
) <= bits)

514 
	`PULLBYTE
 ();

516 ià(
h”e
.
İ
 && (here.op & 0xf0) == 0)

518 
Ï¡
 = 
h”e
;

521 
h”e
 = 
Ëncode
[
Ï¡
.
v®
 +

522 (
	`BITS
 (
Ï¡
.
b™s
 +†a¡.
İ
) >>†ast.bits)];

523 ià((è(
Ï¡
.
b™s
 + 
h”e
.bits) <= bits)

525 
	`PULLBYTE
 ();

527 
	`DROPBITS
 (
Ï¡
.
b™s
);

529 
	`DROPBITS
 (
h”e
.
b™s
);

530 
Ëngth
 = (è
h”e
.
v®
;

533 ià(
h”e
.
İ
 == 0)

535 
	`T¿ûvv
 ((
¡d”r
, 
h”e
.
v®
 >= 0x20 && here.val < 0x7f ?

537 "šæ©e:†™”® 0x%02x\n", 
h”e
.
v®
));

538 
	`ROOM
 ();

539 *
put
++ = (è(
Ëngth
);

540 
Ëá
--;

541 
mode
 = 
LEN
;

546 ià(
h”e
.
İ
 & 32)

548 
	`T¿ûvv
 ((
¡d”r
, "inflate:ƒnd of block\n"));

549 
mode
 = 
TYPE
;

554 ià(
h”e
.
İ
 & 64)

556 
¡rm
->
msg
 = (*) "invalid†iteral/length code";

557 
mode
 = 
BAD
;

562 
exŒa
 = (è(
h”e
.
İ
) & 31;

563 ià(
exŒa
 != 0)

565 
	`NEEDBITS
 (
exŒa
);

566 
Ëngth
 +ğ
	`BITS
 (
exŒa
);

567 
	`DROPBITS
 (
exŒa
);

569 
	`T¿ûvv
 ((
¡d”r
, "šæ©e:†’gth %lu\n", 
Ëngth
));

574 
h”e
 = 
di¡code
[
	`BITS
 (
di¡b™s
)];

575 ià((è(
h”e
.
b™s
) <= bits)

577 
	`PULLBYTE
 ();

579 ià((
h”e
.
İ
 & 0xf0) == 0)

581 
Ï¡
 = 
h”e
;

584 
h”e
 = 
di¡code
[
Ï¡
.
v®
 +

585 (
	`BITS
 (
Ï¡
.
b™s
 +†a¡.
İ
) >>†ast.bits)];

586 ià((è(
Ï¡
.
b™s
 + 
h”e
.bits) <= bits)

588 
	`PULLBYTE
 ();

590 
	`DROPBITS
 (
Ï¡
.
b™s
);

592 
	`DROPBITS
 (
h”e
.
b™s
);

593 ià(
h”e
.
İ
 & 64)

595 
¡rm
->
msg
 = (*) "invalid distance code";

596 
mode
 = 
BAD
;

599 
off£t
 = (è
h”e
.
v®
;

602 
exŒa
 = (è(
h”e
.
İ
) & 15;

603 ià(
exŒa
 != 0)

605 
	`NEEDBITS
 (
exŒa
);

606 
off£t
 +ğ
	`BITS
 (
exŒa
);

607 
	`DROPBITS
 (
exŒa
);

609 ià(
off£t
 > 
WSIZE
 - (
w¿p
 ? 0 : 
Ëá
))

611 
¡rm
->
msg
 = (*) "invalid distanceoo far back";

612 
mode
 = 
BAD
;

615 
	`T¿ûvv
 ((
¡d”r
, "šæ©e: di¡ªû %lu\n", 
off£t
));

620 
	`ROOM
 ();

621 
cİy
 = 
WSIZE
 - 
off£t
;

622 ià(
cİy
 < 
Ëá
)

624 
äom
 = 
put
 + 
cİy
;

625 
cİy
 = 
Ëá
 - copy;

629 
äom
 = 
put
 - 
off£t
;

630 
cİy
 = 
Ëá
;

632 ià(
cİy
 > 
Ëngth
)

633 
cİy
 = 
Ëngth
;

634 
Ëngth
 -ğ
cİy
;

635 
Ëá
 -ğ
cİy
;

638 *
put
++ = *
äom
++;

640 --
cİy
);

642 
Ëngth
 != 0);

645 
DONE
:

647 
»t
 = 
Z_STREAM_END
;

648 ià(
Ëá
 < 
WSIZE
)

650 ià(
	`out
 (
out_desc
, 
wšdow
, (è(
WSIZE
 - 
Ëá
)))

651 
»t
 = 
Z_BUF_ERROR
;

653 
šf_Ëave
;

655 
BAD
:

656 
»t
 = 
Z_DATA_ERROR
;

657 
šf_Ëave
;

660 
»t
 = 
Z_STREAM_ERROR
;

661 
šf_Ëave
;

665 
šf_Ëave
:

666 
¡rm
->
Ãxt_š
 = 
Ãxt
;

667 
¡rm
->
ava_š
 = 
have
;

668  
»t
;

669 
	}
}

671 
ZEXPORT


672 
	$šæ©eBack9End
 (
¡rm
)

673 
z_¡»am
 
FAR
 *
¡rm
;

675 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 =ğZ_NULL || sŒm->
zä“
 =ğ(
ä“_func
) 0)

676  
Z_STREAM_ERROR
;

677 
	`ZFREE
 (
¡rm
, sŒm->
¡©e
);

678 
¡rm
->
¡©e
 = 
Z_NULL
;

679 
	`T¿ûv
 ((
¡d”r
, "inflate:ƒnd\n"));

680  
Z_OK
;

681 
	}
}

	@contrib/infback9/infback9.h

19 #ifdeà
__ılu¥lus


23 
ZEXTERN
 
ZEXPORT
 
šæ©eBack9
 
OF
((
z_¡»am
 
FAR
 *
¡rm
,

24 
š_func
 
š
, 
FAR
 *
š_desc
,

25 
out_func
 
out
, 
FAR
 *
out_desc
));

26 
ZEXTERN
 
ZEXPORT
 
šæ©eBack9End
 
OF
((
z_¡»am
 
FAR
 *
¡rm
));

27 
ZEXTERN
 
ZEXPORT
 
šæ©eBack9In™_
 
OF
((
z_¡»am
 
FAR
 *
¡rm
,

28 
FAR
 *
wšdow
,

29 cÚ¡ *
v”siÚ
,

30 
¡»am_size
));

31 
	#šæ©eBack9In™
(
¡rm
, 
wšdow
) \

32 
	`šæ©eBack9In™_
((
¡rm
), (
wšdow
), \

33 
ZLIB_VERSION
, (
z_¡»am
))

	)

35 #ifdeà
__ılu¥lus


	@contrib/infback9/inffix9.h

10 cÚ¡ 
code
 
	gËnfix
[512] = {

99 cÚ¡ 
code
 
	gdi¡fix
[32] = {

	@contrib/infback9/inflate9.h

13 
	mTYPE
,

14 
	mSTORED
,

15 
	mTABLE
,

16 
	mLEN
,

17 
	mDONE
,

18 
	mBAD


19 } 
	tšæ©e_mode
;

35 
	sšæ©e_¡©e
 {

37 
FAR
 *
	mwšdow
;

39 
	mncode
;

40 
	mÆ’
;

41 
	mndi¡
;

42 
	mhave
;

43 
code
 
FAR
 *
	mÃxt
;

44 
	mËns
[320];

45 
	mwÜk
[288];

46 
code
 
	mcodes
[
ENOUGH
];

	@contrib/infback9/inftree9.c

6 
	~"zut.h
"

7 
	~"šá»e9.h
"

9 
	#MAXBITS
 15

	)

11 cÚ¡ 
	gšæ©e9_cİyright
[] =

33 
	$šæ©e_bË9
 (
ty³
, 
Ëns
, 
codes
, 
bË
, 
b™s
, 
wÜk
)

34 
cod‘y³
 
ty³
;

35 
FAR
 *
Ëns
;

36 
codes
;

37 
code
 
FAR
 *FAR * 
bË
;

38 
FAR
 *
b™s
;

39 
FAR
 *
wÜk
;

41 
Ën
;

42 
sym
;

43 
mš
, 
max
;

44 
roÙ
;

45 
cu¼
;

46 
drİ
;

47 
Ëá
;

48 
u£d
;

49 
huff
;

50 
šü
;

51 
fl
;

52 
low
;

53 
mask
;

54 
code
 
this
;

55 
code
 
FAR
 *
Ãxt
;

56 cÚ¡ 
FAR
 *
ba£
;

57 cÚ¡ 
FAR
 *
exŒa
;

58 
’d
;

59 
couÁ
[
MAXBITS
 + 1];

60 
offs
[
MAXBITS
 + 1];

61 cÚ¡ 
lba£
[31] = {

66 cÚ¡ 
Ëxt
[31] = {

71 cÚ¡ 
dba£
[32] = {

76 cÚ¡ 
dext
[32] = {

114 
Ën
 = 0;†’ <ğ
MAXBITS
;†en++)

115 
couÁ
[
Ën
] = 0;

116 
sym
 = 0; sym < 
codes
; sym++)

117 
couÁ
[
Ëns
[
sym
]]++;

120 
roÙ
 = *
b™s
;

121 
max
 = 
MAXBITS
; max >= 1; max--)

122 ià(
couÁ
[
max
] != 0)

124 ià(
roÙ
 > 
max
)

125 
roÙ
 = 
max
;

126 ià(
max
 == 0)

128 
mš
 = 1; mš <ğ
MAXBITS
; min++)

129 ià(
couÁ
[
mš
] != 0)

131 ià(
roÙ
 < 
mš
)

132 
roÙ
 = 
mš
;

135 
Ëá
 = 1;

136 
Ën
 = 1;†’ <ğ
MAXBITS
;†en++)

138 
Ëá
 <<= 1;

139 
Ëá
 -ğ
couÁ
[
Ën
];

140 ià(
Ëá
 < 0)

143 ià(
Ëá
 > 0 && (
ty³
 =ğ
CODES
 || 
max
 != 1))

147 
offs
[1] = 0;

148 
Ën
 = 1;†’ < 
MAXBITS
;†en++)

149 
offs
[
Ën
 + 1] = offs[Ën] + 
couÁ
[len];

152 
sym
 = 0; sym < 
codes
; sym++)

153 ià(
Ëns
[
sym
] != 0)

154 
wÜk
[
offs
[
Ëns
[
sym
]]++] = () sym;

188 
ty³
)

190 
CODES
:

191 
ba£
 = 
exŒa
 = 
wÜk
;

192 
’d
 = 19;

194 
LENS
:

195 
ba£
 = 
lba£
;

196 
ba£
 -= 257;

197 
exŒa
 = 
Ëxt
;

198 
exŒa
 -= 257;

199 
’d
 = 256;

202 
ba£
 = 
dba£
;

203 
exŒa
 = 
dext
;

204 
’d
 = -1;

208 
huff
 = 0;

209 
sym
 = 0;

210 
Ën
 = 
mš
;

211 
Ãxt
 = *
bË
;

212 
cu¼
 = 
roÙ
;

213 
drİ
 = 0;

214 
low
 = () (-1);

215 
u£d
 = 1U << 
roÙ
;

216 
mask
 = 
u£d
 - 1;

219 ià((
ty³
 =ğ
LENS
 && 
u£d
 >ğ
ENOUGH_LENS
) ||

220 (
ty³
 =ğ
DISTS
 && 
u£d
 >ğ
ENOUGH_DISTS
))

227 
this
.
b™s
 = (è(
Ën
 - 
drİ
);

228 ià((è(
wÜk
[
sym
]è< 
’d
)

230 
this
.
İ
 = () 0;

231 
this
.
v®
 = 
wÜk
[
sym
];

233 ià((è(
wÜk
[
sym
]è> 
’d
)

235 
this
.
İ
 = (è(
exŒa
[
wÜk
[
sym
]]);

236 
this
.
v®
 = 
ba£
[
wÜk
[
sym
]];

240 
this
.
İ
 = () (32 + 64);

241 
this
.
v®
 = 0;

245 
šü
 = 1U << (
Ën
 - 
drİ
);

246 
fl
 = 1U << 
cu¼
;

249 
fl
 -ğ
šü
;

250 
Ãxt
[(
huff
 >> 
drİ
è+ 
fl
] = 
this
;

252 
fl
 != 0);

255 
šü
 = 1U << (
Ën
 - 1);

256 
huff
 & 
šü
)

257 
šü
 >>= 1;

258 ià(
šü
 != 0)

260 
huff
 &ğ
šü
 - 1;

261 
huff
 +ğ
šü
;

264 
huff
 = 0;

267 
sym
++;

268 ià(--(
couÁ
[
Ën
]) == 0)

270 ià(
Ën
 =ğ
max
)

272 
Ën
 = 
Ëns
[
wÜk
[
sym
]];

276 ià(
Ën
 > 
roÙ
 && (
huff
 & 
mask
è!ğ
low
)

279 ià(
drİ
 == 0)

280 
drİ
 = 
roÙ
;

283 
Ãxt
 +ğ1U << 
cu¼
;

286 
cu¼
 = 
Ën
 - 
drİ
;

287 
Ëá
 = (è(1 << 
cu¼
);

288 
cu¼
 + 
drİ
 < 
max
)

290 
Ëá
 -ğ
couÁ
[
cu¼
 + 
drİ
];

291 ià(
Ëá
 <= 0)

293 
cu¼
++;

294 
Ëá
 <<= 1;

298 
u£d
 +ğ1U << 
cu¼
;

299 ià((
ty³
 =ğ
LENS
 && 
u£d
 >ğ
ENOUGH_LENS
) ||

300 (
ty³
 =ğ
DISTS
 && 
u£d
 >ğ
ENOUGH_DISTS
))

304 
low
 = 
huff
 & 
mask
;

305 (*
bË
)[
low
].
İ
 = (è
cu¼
;

306 (*
bË
)[
low
].
b™s
 = (è
roÙ
;

307 (*
bË
)[
low
].
v®
 = (è(
Ãxt
 - *table);

318 
this
.
İ
 = () 64;

319 
this
.
b™s
 = (è(
Ën
 - 
drİ
);

320 
this
.
v®
 = () 0;

321 
huff
 != 0)

324 ià(
drİ
 !ğ0 && (
huff
 & 
mask
è!ğ
low
)

326 
drİ
 = 0;

327 
Ën
 = 
roÙ
;

328 
Ãxt
 = *
bË
;

329 
cu¼
 = 
roÙ
;

330 
this
.
b™s
 = (è
Ën
;

334 
Ãxt
[
huff
 >> 
drİ
] = 
this
;

337 
šü
 = 1U << (
Ën
 - 1);

338 
huff
 & 
šü
)

339 
šü
 >>= 1;

340 ià(
šü
 != 0)

342 
huff
 &ğ
šü
 - 1;

343 
huff
 +ğ
šü
;

346 
huff
 = 0;

350 *
bË
 +ğ
u£d
;

351 *
b™s
 = 
roÙ
;

353 
	}
}

	@contrib/infback9/inftree9.h

25 
	mİ
;

26 
	mb™s
;

27 
	mv®
;

28 } 
	tcode
;

48 
	#ENOUGH_LENS
 852

	)

49 
	#ENOUGH_DISTS
 594

	)

50 
	#ENOUGH
 (
ENOUGH_LENS
+
ENOUGH_DISTS
)

	)

54 
	mCODES
,

55 
	mLENS
,

56 
	mDISTS


57 } 
	tcod‘y³
;

59 
šæ©e_bË9
 
OF
((
cod‘y³
 
ty³
, 
FAR
 *
Ëns
,

60 
codes
, 
code
 
FAR
 * FAR *
bË
,

61 
FAR
 *
b™s
, FAR *
wÜk
));

	@contrib/inflate86/inffas86.c

29 
	~"zut.h
"

30 
	~"šá»es.h
"

31 
	~"šæ©e.h
"

32 
	~"šfç¡.h
"

72 
	$šæ©e_ç¡
 (
¡rm
, 
¡¬t
)

73 
z_¡»amp
 
¡rm
;

74 
¡¬t
;

76 
šæ©e_¡©e
 
FAR
 *
¡©e
;

77 
	sšfç¡_¬


81  *
e¥
;

83  *
ebp
;

85  
FAR
 *
š
;

87  
FAR
 *
Ï¡
;

89  
FAR
 *
out
;

91  
FAR
 *
beg
;

93  
FAR
 *
’d
;

95  
FAR
 *
wšdow
;

97  
code
 cÚ¡ 
FAR
 *
lcode
;

99  
code
 cÚ¡ 
FAR
 *
dcode
;

101  
hŞd
;

103  
b™s
;

105  
wsize
;

107  
wr™e
;

109  
lmask
;

111  
dmask
;

113  
Ën
;

115  
di¡
;

117  
¡©us
;

119 } 
¬
;

121 #ià
	`defšed
Ğ
__GNUC__
 ) && defšedĞ
__amd64__
 ) && ! defšedĞ
__i386
 )

122 
	#PAD_AVAIL_IN
 6

	)

123 
	#PAD_AVAIL_OUT
 258

	)

125 
	#PAD_AVAIL_IN
 5

	)

126 
	#PAD_AVAIL_OUT
 257

	)

130 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

131 
¬
.
š
 = 
¡rm
->
Ãxt_š
;

132 
¬
.
Ï¡
 =‡r.
š
 + (
¡rm
->
ava_š
 - 
PAD_AVAIL_IN
);

133 
¬
.
out
 = 
¡rm
->
Ãxt_out
;

134 
¬
.
beg
 =‡r.
out
 - (
¡¬t
 - 
¡rm
->
ava_out
);

135 
¬
.
’d
 =‡r.
out
 + (
¡rm
->
ava_out
 - 
PAD_AVAIL_OUT
);

136 
¬
.
wsize
 = 
¡©e
->wsize;

137 
¬
.
wr™e
 = 
¡©e
->
wÃxt
;

138 
¬
.
wšdow
 = 
¡©e
->window;

139 
¬
.
hŞd
 = 
¡©e
->hold;

140 
¬
.
b™s
 = 
¡©e
->bits;

141 
¬
.
lcode
 = 
¡©e
->
Ëncode
;

142 
¬
.
dcode
 = 
¡©e
->
di¡code
;

143 
¬
.
lmask
 = (1U << 
¡©e
->
Ënb™s
) - 1;

144 
¬
.
dmask
 = (1U << 
¡©e
->
di¡b™s
) - 1;

150 ((è(*è
¬
.
š
 & ( (¬.
hŞd
) / 2 - 1)) != 0)

152 
¬
.
hŞd
 +ğ(è*¬.
š
++ <<‡r.
b™s
;

153 
¬
.
b™s
 += 8;

156 #ià
	`defšed
Ğ
__GNUC__
 ) && defšedĞ
__amd64__
 ) && ! defšedĞ
__i386
 )

157 
__asm__
 
	`__vŞ©e__
 ("†eaq %0, %%rax\n" " movq %%rbp, 8(%%rax)\n"

304 " movq %%¿x, %%r¥\n"::"m" (
¬
):"memory",

308 #–iàĞ
	`defšed
Ğ
__GNUC__
 ) || defšedĞ
__ICC
 ) ) && defšedĞ
__i386
 )

309 
__asm__
 
	`__vŞ©e__
 ("†eal %0, %%eax\n" " movl %%esp, (%%eax)\n"

452 " movÈ (%%e¥), %%e¥\n"::"m" (
¬
):"memory",

454 #–ià
	`defšed
Ğ
_MSC_VER
 ) && ! defšedĞ
_M_AMD64
 )

455 
__asm


457 
Ëa
 
—x
, 
¬
 
mov
[—x], 
e¥


458 
mov
[
—x
 + 4], 
ebp
 mov 
e¥
,ƒax mov 
esi
,[esp + 8]

459 
mov
 
edi
,[
e¥
 + 16]

460 
mov
 
edx
,[
e¥
 + 40]

461 
mov
 
ebx
,[
e¥
 + 44]

462 
mov
 
ebp
,[
e¥
 + 32]

463 
şd
 
jmp
 
L_do_loİ
 
ALIGN
 4 
L_whe_‹¡
:
cmp
[
e¥
 + 24], 
edi
 
jbe
 
L_b»ak_loİ
 cmp[e¥ + 12], 
esi
 jbL_b»ak_loİ L_do_loİ:cm°
bl
, 15 
ja
 
L_g‘_Ëngth_code


464 
xÜ
 
—x
,ƒax 
lodsw


465 
mov
 
ş
, 
bl


466 
add
 
bl
, 16

467 
shl
 
—x
, 
ş
 
Ü
 
edx
,ƒax

468 
L_g‘_Ëngth_code
:
mov
 
—x
,[
e¥
 + 56]

469 
ªd
 
—x
, 
edx


470 
mov
 
—x
,[
ebp
 +ƒax * 4]

471 
L_dŞ’
:
mov
 
ş
, 
ah


472 
sub
 
bl
, 
ah


473 
shr
 
edx
, 
ş


474 
‹¡
 
®
,‡È
jnz
 
L_‹¡_fÜ_Ëngth_ba£


475 
shr
 
—x
, 16

476 
¡osb
 
jmp
 
L_whe_‹¡
 
ALIGN
 4 
L_‹¡_fÜ_Ëngth_ba£
:
mov
 
ecx
, 
—x


477 
shr
 
ecx
, 16

478 
mov
[
e¥
 + 64], 
ecx


479 
mov
 
ş
, 
®
 
‹¡
‡l, 16 
jz
 
L_‹¡_fÜ_£cÚd_Ëv–_Ëngth


480 
ªd
 
ş
, 15

481 
jz
 
L_decode_di¡ªû


482 
cmp
 
bl
, 
ş
 
j«
 
L_add_b™s_to_Ën


483 
mov
 
ch
, 
ş


484 
xÜ
 
—x
,ƒax 
lodsw


485 
mov
 
ş
, 
bl


486 
add
 
bl
, 16

487 
shl
 
—x
, 
ş
 
Ü
 
edx
,ƒax

488 
mov
 
ş
, 
ch


489 
L_add_b™s_to_Ën
:
sub
 
bl
, 
ş
 
xÜ
 
—x
,ƒax 
šc
ƒax 
shl
ƒax, cÈ
dec
ƒax 
ªd
ƒax, 
edx


490 
shr
 
edx
, 
ş
 
add
[
e¥
 + 64], 
—x


491 
L_decode_di¡ªû
:
cmp
 
bl
, 15 
ja
 
L_g‘_di¡ªû_code


492 
xÜ
 
—x
,ƒax 
lodsw


493 
mov
 
ş
, 
bl


494 
add
 
bl
, 16

495 
shl
 
—x
, 
ş
 
Ü
 
edx
,ƒax

496 
L_g‘_di¡ªû_code
:
mov
 
—x
,[
e¥
 + 60]

497 
mov
 
ecx
,[
e¥
 + 36]

498 
ªd
 
—x
, 
edx


499 
mov
 
—x
,[
ecx
 +ƒax * 4]

500 
L_dodi¡
:
mov
 
ebp
, 
—x


501 
shr
 
ebp
, 16

502 
mov
 
ş
, 
ah
 
sub
 
bl
,‡h

503 
shr
 
edx
, 
ş


504 
mov
 
ş
, 
®


505 
‹¡
 
®
, 16

506 
jz
 
L_‹¡_fÜ_£cÚd_Ëv–_di¡
 
ªd
 
ş
, 15

507 
jz
 
L_check_di¡_Úe
 
cmp
 
bl
, 
ş
 
j«
 
L_add_b™s_to_di¡


508 
mov
 
ch
, 
ş


509 
xÜ
 
—x
,ƒax 
lodsw


510 
mov
 
ş
, 
bl


511 
add
 
bl
, 16

512 
shl
 
—x
, 
ş
 
Ü
 
edx
,ƒax

513 
mov
 
ş
, 
ch


514 
L_add_b™s_to_di¡
:
sub
 
bl
, 
ş
 
xÜ
 
—x
,ƒax 
šc
ƒax 
shl
ƒax, cÈ
dec
ƒax

515 
ªd
 
—x
, 
edx


516 
shr
 
edx
, 
ş
 
add
 
ebp
, 
—x


517 
L_check_wšdow
:
mov
[
e¥
 + 8], 
esi


518 
mov
 
—x
, 
edi
 
sub
ƒax,[
e¥
 + 20]

519 
cmp
 
—x
, 
ebp
 
jb
 
L_ş_wšdow


520 
mov
 
ecx
,[
e¥
 + 64]

521 
mov
 
esi
, 
edi
 
sub
ƒsi, 
ebp


522 
§r
 
ecx
, 1 
jnc
 
L_cİy_two
 
»p
 
movsw
 
mov
 
®
,[
esi
] mov[
edi
],‡È
šc
ƒd˜movƒsi,[
e¥
 + 8]

523 
mov
 
ebp
,[
e¥
 + 32]

524 
jmp
 
L_whe_‹¡
 
L_cİy_two
:
»p
 
movsw
 
mov
 
esi
,[
e¥
 + 8]

525 
mov
 
ebp
,[
e¥
 + 32]

526 
jmp
 
L_whe_‹¡
 
ALIGN
 4 
L_check_di¡_Úe
:
cmp
 
ebp
, 1

527 
jÃ
 
L_check_wšdow
 
cmp
[
e¥
 + 20], 
edi
 
je
 L_check_window

528 
mov
 
ecx
,[
e¥
 + 64]

529 
mov
 
®
,[
edi
 - 1] mov 
ah
,‡È
§r
 
ecx
, 1 
jnc
 
L_£t_two
 mov[edi],‡l

530 
šc
 
edi
 
L_£t_two
:
»p
 
¡osw
 
mov
 
ebp
,[
e¥
 + 32]

531 
jmp
 
L_whe_‹¡
 
ALIGN
 4 
L_‹¡_fÜ_£cÚd_Ëv–_Ëngth
:
‹¡
 
®
, 64 
jnz
 
L_‹¡_fÜ_’d_of_block


532 
xÜ
 
—x
,ƒax 
šc
ƒax 
shl
ƒax, 
ş
 
dec
ƒax 
ªd
ƒax, 
edx


533 
add
 
—x
,[
e¥
 + 64]

534 
mov
 
—x
,[
ebp
 +ƒax * 4]

535 
jmp
 
L_dŞ’
 
ALIGN
 4 
L_‹¡_fÜ_£cÚd_Ëv–_di¡
:
‹¡
 
®
, 64 
jnz
 
L_šv®id_di¡ªû_code


536 
xÜ
 
—x
,ƒax 
šc
ƒax 
shl
ƒax, 
ş
 
dec
ƒax 
ªd
ƒax, 
edx


537 
add
 
—x
, 
ebp


538 
mov
 
ecx
,[
e¥
 + 36]

539 
mov
 
—x
,[
ecx
 +ƒax * 4]

540 
jmp
 
L_dodi¡
 
ALIGN
 4 
L_ş_wšdow
:
mov
 
ecx
, 
—x
 movƒax,[
e¥
 + 48]

541 
Ãg
 
ecx


542 
mov
 
esi
,[
e¥
 + 28]

543 
cmp
 
—x
, 
ebp
 
jb
 
L_šv®id_di¡ªû_too_çr


544 
add
 
ecx
, 
ebp


545 
cmp
 
dwÜd
 
±r
[
e¥
 + 52], 0 
jÃ
 
L_w¿p_¬ound_wšdow


546 
sub
 
—x
, 
ecx
 
add
 
esi
,ƒax

547 
mov
 
—x
,[
e¥
 + 64]

548 
cmp
 
—x
, 
ecx
 
jbe
 
L_do_cİy


549 
sub
 
—x
, 
ecx


550 
»p
 
movsb
 
mov
 
esi
, 
edi
 
sub
ƒsi, 
ebp


551 
jmp
 
L_do_cİy
 
ALIGN
 4 
L_w¿p_¬ound_wšdow
:
mov
 
—x
,[
e¥
 + 52]

552 
cmp
 
ecx
, 
—x
 
jbe
 
L_cÚtiguous_š_wšdow


553 
add
 
esi
,[
e¥
 + 48]

554 
add
 
esi
, 
—x


555 
sub
 
esi
, 
ecx


556 
sub
 
ecx
, 
—x


557 
mov
 
—x
,[
e¥
 + 64]

558 
cmp
 
—x
, 
ecx
 
jbe
 
L_do_cİy


559 
sub
 
—x
, 
ecx


560 
»p
 
movsb
 
mov
 
esi
,[
e¥
 + 28]

561 
mov
 
ecx
,[
e¥
 + 52]

562 
cmp
 
—x
, 
ecx
 
jbe
 
L_do_cİy


563 
sub
 
—x
, 
ecx


564 
»p
 
movsb
 
mov
 
esi
, 
edi
 
sub
ƒsi, 
ebp


565 
jmp
 
L_do_cİy
 
ALIGN
 4 
L_cÚtiguous_š_wšdow
:
add
 
esi
, 
—x
 
sub
ƒsi, 
ecx


566 
mov
 
—x
,[
e¥
 + 64]

567 
cmp
 
—x
, 
ecx
 
jbe
 
L_do_cİy


568 
sub
 
—x
, 
ecx


569 
»p
 
movsb
 
mov
 
esi
, 
edi
 
sub
ƒsi, 
ebp


570 
jmp
 
L_do_cİy
 
ALIGN
 4 L_do_cİy:
mov
 
ecx
, 
—x
 
»p
 
movsb
 mov 
esi
,[
e¥
 + 8]

571 
mov
 
ebp
,[
e¥
 + 32]

572 
jmp
 
L_whe_‹¡


573 
L_‹¡_fÜ_’d_of_block
:
‹¡
 
®
, 32

574 
jz
 
L_šv®id_l™”®_Ëngth_code


575 
mov
 
dwÜd
 
±r
[
e¥
 + 72], 1

576 
jmp
 
L_b»ak_loİ_w™h_¡©us


577 
L_šv®id_l™”®_Ëngth_code
:
mov
 
dwÜd
 
±r
[
e¥
 + 72], 2

578 
jmp
 
L_b»ak_loİ_w™h_¡©us


579 
L_šv®id_di¡ªû_code
:
mov
 
dwÜd
 
±r
[
e¥
 + 72], 3

580 
jmp
 
L_b»ak_loİ_w™h_¡©us


581 
L_šv®id_di¡ªû_too_çr
:
mov
 
esi
,[
e¥
 + 4]

582 
mov
 
dwÜd
 
±r
[
e¥
 + 72], 4

583 
jmp
 
L_b»ak_loİ_w™h_¡©us


584 
L_b»ak_loİ
:
mov
 
dwÜd
 
±r
[
e¥
 + 72], 0 
L_b»ak_loİ_w™h_¡©us
:

586 
mov
[
e¥
 + 8], 
esi


587 
mov
[
e¥
 + 16], 
edi


588 
mov
[
e¥
 + 44], 
ebx


589 
mov
[
e¥
 + 40], 
edx


590 
mov
 
ebp
,[
e¥
 + 4]

591 
mov
 
e¥
,[esp]}

596 ià(
¬
.
¡©us
 > 1)

598 ià(
¬
.
¡©us
 == 2)

599 
¡rm
->
msg
 = "invalid†iteral/length code";

600 ià(
¬
.
¡©us
 == 3)

601 
¡rm
->
msg
 = "invalid distance code";

603 
¡rm
->
msg
 = "invalid distanceoo far back";

604 
¡©e
->
mode
 = 
BAD
;

606 ià(
¬
.
¡©us
 == 1)

608 
¡©e
->
mode
 = 
TYPE
;

612 
¬
.
Ën
 =‡r.
b™s
 >> 3;

613 
¬
.
š
 -ğ¬.
Ën
;

614 
¬
.
b™s
 -ğ¬.
Ën
 << 3;

615 
¬
.
hŞd
 &ğ(1U <<‡r.
b™s
) - 1;

618 
¡rm
->
Ãxt_š
 = 
¬
.
š
;

619 
¡rm
->
Ãxt_out
 = 
¬
.
out
;

620 
¡rm
->
ava_š
 = (è(
¬
.
š
 <‡r.
Ï¡
 ?

621 
PAD_AVAIL_IN
 + (
¬
.
Ï¡
 -‡r.
š
) :

622 
PAD_AVAIL_IN
 - (
¬
.
š
 -‡r.
Ï¡
));

623 
¡rm
->
ava_out
 = (è(
¬
.
out
 <‡r.
’d
 ?

624 
PAD_AVAIL_OUT
 + (
¬
.
’d
 -‡r.
out
) :

625 
PAD_AVAIL_OUT
 - (
¬
.
out
 -‡r.
’d
));

626 
¡©e
->
hŞd
 = 
¬
.hold;

627 
¡©e
->
b™s
 = 
¬
.bits;

629 
	}
}

	@contrib/iostream/test.cpp

2 
	~"zf¡»am.h
"

4 
	$maš
() {

8 
gzof¡»am
 
	`os
Ğ1, 
ios
::
out
 );

12 
os
 << "H–lo, Mommy" << 
’dl
;

14 
os
 << 
	`£tcom´essiÚËv–
Ğ
Z_NO_COMPRESSION
 );

15 
os
 << "h–lo, h–lo, hi, ho!" << 
’dl
;

17 
	`£tcom´essiÚËv–
Ğ
os
, 
Z_DEFAULT_COMPRESSION
 )

18 << "I'm com´essšg‡gaš" << 
’dl
;

20 
os
.
	`şo£
();

24 
	}
}

	@contrib/iostream/zfstream.cpp

2 
	~"zf¡»am.h
"

4 
	ggzfebuf
::
	$gzfebuf
() :

5 
	`fe
(
NULL
),

6 
	`mode
(0),

7 
	$own_fe_desütÜ
(0)

8 { 
	}
}

10 
	ggzfebuf
::~
	$gzfebuf
() {

12 
	`sync
();

13 iàĞ
own_fe_desütÜ
 )

14 
	`şo£
();

16 
	}
}

18 
gzfebuf
 *
	ggzfebuf
::
	$İ’
ĞcÚ¡ *
Çme
,

19 
io_mode
 ) {

21 iàĞ
	`is_İ’
() )

22  
NULL
;

24 
ch¬_mode
[10];

25 *
p
 = 
ch¬_mode
;

27 iàĞ
io_mode
 & 
ios
::
š
 ) {

28 
mode
 = 
ios
::
š
;

29 *
p
++ = 'r';

30 } iàĞ
io_mode
 & 
ios
::
­p
 ) {

31 
mode
 = 
ios
::
­p
;

32 *
p
++ = 'a';

34 
mode
 = 
ios
::
out
;

35 *
p
++ = 'w';

38 iàĞ
io_mode
 & 
ios
::
bš¬y
 ) {

39 
mode
 |ğ
ios
::
bš¬y
;

40 *
p
++ = 'b';

44 iàĞ
io_mode
 & (
ios
::
out
|ios::
­p
 )) {

45 *
p
++ = '9';

49 *
p
 = '\0';

51 iàĞ(
fe
 = 
	`gzİ’
(
Çme
, 
ch¬_mode
)è=ğ
NULL
 )

52  
NULL
;

54 
own_fe_desütÜ
 = 1;

56  
this
;

58 
	}
}

60 
gzfebuf
 *
	ggzfebuf
::
	$©ch
Ğ
fe_desütÜ
,

61 
io_mode
 ) {

63 iàĞ
	`is_İ’
() )

64  
NULL
;

66 
ch¬_mode
[10];

67 *
p
 = 
ch¬_mode
;

69 iàĞ
io_mode
 & 
ios
::
š
 ) {

70 
mode
 = 
ios
::
š
;

71 *
p
++ = 'r';

72 } iàĞ
io_mode
 & 
ios
::
­p
 ) {

73 
mode
 = 
ios
::
­p
;

74 *
p
++ = 'a';

76 
mode
 = 
ios
::
out
;

77 *
p
++ = 'w';

80 iàĞ
io_mode
 & 
ios
::
bš¬y
 ) {

81 
mode
 |ğ
ios
::
bš¬y
;

82 *
p
++ = 'b';

86 iàĞ
io_mode
 & (
ios
::
out
|ios::
­p
 )) {

87 *
p
++ = '9';

91 *
p
 = '\0';

93 iàĞ(
fe
 = 
	`gzdİ’
(
fe_desütÜ
, 
ch¬_mode
)è=ğ
NULL
 )

94  
NULL
;

96 
own_fe_desütÜ
 = 0;

98  
this
;

100 
	}
}

102 
gzfebuf
 *
	ggzfebuf
::
	$şo£
() {

104 iàĞ
	`is_İ’
() ) {

106 
	`sync
();

107 
	`gzşo£
Ğ
fe
 );

108 
fe
 = 
NULL
;

112  
this
;

114 
	}
}

116 
	ggzfebuf
::
	$£tcom´essiÚËv–
Ğ
comp_Ëv–
 ) {

118  
	`gz£¬ams
(
fe
, 
comp_Ëv–
, -2);

120 
	}
}

122 
	ggzfebuf
::
	$£tcom´essiÚ¡¿‹gy
Ğ
comp_¡¿‹gy
 ) {

124  
	`gz£¬ams
(
fe
, -2, 
comp_¡¿‹gy
);

126 
	}
}

129 
¡»ampos
 
	ggzfebuf
::
	$£ekoff
Ğ
¡»amoff
 
off
, 
ios
::
£ek_dœ
 
dœ
, 
which
 ) {

131  
	`¡»ampos
(
EOF
);

133 
	}
}

135 
	ggzfebuf
::
	$und”æow
() {

138 iàĞ!
	`is_İ’
(è|| !(
mode
 & 
ios
::
š
) )

139  
EOF
;

142 iàĞ!
	`ba£
() ) {

144 iàĞ(
	`®loÿ‹
()è=ğ
EOF
 )

145  
EOF
;

146 
	`£
(0,0);

150 iàĞ
	`š_ava
() )

151  (è*
	`g±r
();

153 iàĞ
	`out_wa™šg
() ) {

154 iàĞ
	`æushbuf
(è=ğ
EOF
 )

155  
EOF
;

162 
»suÉ
 = 
	`flbuf
();

163 iàĞ
»suÉ
 =ğ
EOF
 ) {

165 
	`£tg
(0,0,0);

166  
EOF
;

169  (è*
	`g±r
();

171 
	}
}

173 
	ggzfebuf
::
	$ov”æow
Ğ
c
 ) {

175 iàĞ!
	`is_İ’
(è|| !(
mode
 & 
ios
::
out
) )

176  
EOF
;

178 iàĞ!
	`ba£
() ) {

179 iàĞ
	`®loÿ‹
(è=ğ
EOF
 )

180  
EOF
;

181 
	`£tg
(0,0,0);

183 ià(
	`š_ava
()) {

184  
EOF
;

186 ià(
	`out_wa™šg
()) {

187 ià(
	`æushbuf
(è=ğ
EOF
)

188  
EOF
;

192 
bl
 = 
	`bËn
();

193 
	`£
Ğ
	`ba£
(), ba£(è+ 
bl
);

195 iàĞ
c
 !ğ
EOF
 ) {

197 *
	`µŒ
(èğ
c
;

198 
	`pbump
(1);

204 
	}
}

206 
	ggzfebuf
::
	$sync
() {

208 iàĞ!
	`is_İ’
() )

209  
EOF
;

211 iàĞ
	`out_wa™šg
() )

212  
	`æushbuf
();

216 
	}
}

218 
	ggzfebuf
::
	$æushbuf
() {

220 
n
;

221 *
q
;

223 
q
 = 
	`pba£
();

224 
n
 = 
	`µŒ
(è- 
q
;

226 iàĞ
	`gzwr™e
Ğ
fe
, 
q
, 
n
) <‚ )

227  
EOF
;

229 
	`£
(0,0);

233 
	}
}

235 
	ggzfebuf
::
	$flbuf
() {

237 
»quœed
;

238 *
p
;

240 
p
 = 
	`ba£
();

242 
»quœed
 = 
	`bËn
();

244 
t
 = 
	`gz»ad
Ğ
fe
, 
p
, 
»quœed
 );

246 iàĞ
t
 <ğ0è 
EOF
;

248 
	`£tg
Ğ
	`ba£
(), ba£(), ba£()+
t
);

250  
t
;

252 
	}
}

254 
	ggzfe¡»am_commÚ
::
	$gzfe¡»am_commÚ
() :

255 
	`ios
Ğ
gzfe¡»am_commÚ
::
	$rdbuf
() )

256 { 
	}
}

258 
gzfe¡»am_commÚ
::~
	$gzfe¡»am_commÚ
()

259 { 
	}
}

261 
gzfe¡»am_commÚ
::
	$©ch
Ğ
fd
, 
io_mode
 ) {

263 iàĞ!
bufãr
.
	`©ch
Ğ
fd
, 
io_mode
) )

264 
	`ş—r
Ğ
ios
::
çb™
 | ios::
badb™
 );

266 
	`ş—r
();

268 
	}
}

270 
	ggzfe¡»am_commÚ
::
	$İ’
ĞcÚ¡ *
Çme
, 
io_mode
 ) {

272 iàĞ!
bufãr
.
	`İ’
Ğ
Çme
, 
io_mode
 ) )

273 
	`ş—r
Ğ
ios
::
çb™
 | ios::
badb™
 );

275 
	`ş—r
();

277 
	}
}

279 
	ggzfe¡»am_commÚ
::
	$şo£
() {

281 iàĞ!
bufãr
.
	`şo£
() )

282 
	`ş—r
Ğ
ios
::
çb™
 | ios::
badb™
 );

284 
	}
}

286 
gzfebuf
 *
	ggzfe¡»am_commÚ
::
	$rdbuf
()

288  &
bufãr
;

289 
	}
}

291 
	ggzif¡»am
::
	$gzif¡»am
() :

292 
	`ios
Ğ
gzfe¡»am_commÚ
::
	$rdbuf
() )

294 
	`ş—r
Ğ
ios
::
badb™
 );

295 
	}
}

297 
	ggzif¡»am
::
	$gzif¡»am
ĞcÚ¡ *
Çme
, 
io_mode
 ) :

298 
	`ios
Ğ
gzfe¡»am_commÚ
::
	$rdbuf
() )

300 
gzfe¡»am_commÚ
::
	`İ’
Ğ
Çme
, 
io_mode
 );

301 
	}
}

303 
	ggzif¡»am
::
	$gzif¡»am
Ğ
fd
, 
io_mode
 ) :

304 
	`ios
Ğ
gzfe¡»am_commÚ
::
	$rdbuf
() )

306 
gzfe¡»am_commÚ
::
	`©ch
Ğ
fd
, 
io_mode
 );

307 
	}
}

309 
	ggzif¡»am
::~
	$gzif¡»am
(è{ 
	}
}

311 
gzof¡»am
::
	$gzof¡»am
() :

312 
	`ios
Ğ
gzfe¡»am_commÚ
::
	$rdbuf
() )

314 
	`ş—r
Ğ
ios
::
badb™
 );

315 
	}
}

317 
	ggzof¡»am
::
	$gzof¡»am
ĞcÚ¡ *
Çme
, 
io_mode
 ) :

318 
	`ios
Ğ
gzfe¡»am_commÚ
::
	$rdbuf
() )

320 
gzfe¡»am_commÚ
::
	`İ’
Ğ
Çme
, 
io_mode
 );

321 
	}
}

323 
	ggzof¡»am
::
	$gzof¡»am
Ğ
fd
, 
io_mode
 ) :

324 
	`ios
Ğ
gzfe¡»am_commÚ
::
	$rdbuf
() )

326 
gzfe¡»am_commÚ
::
	`©ch
Ğ
fd
, 
io_mode
 );

327 
	}
}

329 
	ggzof¡»am
::~
	$gzof¡»am
(è{ 
	}
}

	@contrib/iostream/zfstream.h

2 #iâdeà
zf¡»am_h


3 
	#zf¡»am_h


	)

5 
	~<f¡»am.h
>

6 
	~"zlib.h
"

8 şas 
	cgzfebuf
 : 
public
 
¡»ambuf
 {

10 
public
:

12 
gzfebuf
( );

13 
	mvœtu®
 ~
gzfebuf
();

15 
gzfebuf
 *
İ’
ĞcÚ¡ *
Çme
, 
io_mode
 );

16 
gzfebuf
 *
©ch
Ğ
fe_desütÜ
, 
io_mode
 );

17 
gzfebuf
 *
şo£
();

19 
£tcom´essiÚËv–
Ğ
comp_Ëv–
 );

20 
£tcom´essiÚ¡¿‹gy
Ğ
comp_¡¿‹gy
 );

22 
šlše
 
	$is_İ’
(ècÚ¡ {  (
fe
 !=
NULL
); }

24 
vœtu®
 
¡»ampos
 
	`£ekoff
Ğ
¡»amoff
, 
ios
::
£ek_dœ
, );

26 
vœtu®
 
	`sync
();

28 
´Ùeùed
:

30 
vœtu®
 
	`und”æow
();

31 
vœtu®
 
	`ov”æow
Ğğ
EOF
 );

33 
´iv©e
:

35 
gzFe
 
fe
;

36 
mode
;

37 
own_fe_desütÜ
;

39 
	`æushbuf
();

40 
	`flbuf
();

42 
	}
};

44 şas 
	cgzfe¡»am_commÚ
 : 
vœtu®
 
public
 
ios
 {

46 
ä›nd
 
şass
 
gzif¡»am
;

47 
ä›nd
 
şass
 
	mgzof¡»am
;

48 
ä›nd
 
	mgzof¡»am
 &
£tcom´essiÚËv–
Ğ
gzof¡»am
 &, );

49 
ä›nd
 
	mgzof¡»am
 &
£tcom´essiÚ¡¿‹gy
Ğ
gzof¡»am
 &, );

51 
	mpublic
:

52 
vœtu®
 ~
gzfe¡»am_commÚ
();

54 
©ch
Ğ
fd
, 
io_mode
 );

55 
İ’
ĞcÚ¡ *
Çme
, 
io_mode
 );

56 
şo£
();

58 
	m´Ùeùed
:

59 
gzfe¡»am_commÚ
();

61 
	m´iv©e
:

62 
gzfebuf
 *
rdbuf
();

64 
gzfebuf
 
	mbufãr
;

68 
şass
 
	ggzif¡»am
 : 
public
 
gzfe¡»am_commÚ
,…ubliø
	gi¡»am
 {

70 
	gpublic
:

72 
gzif¡»am
();

73 
gzif¡»am
ĞcÚ¡ *
Çme
, 
io_mode
 = 
ios
::
š
 );

74 
gzif¡»am
Ğ
fd
, 
io_mode
 = 
ios
::
š
 );

76 
	gvœtu®
 ~
gzif¡»am
();

80 
şass
 
	ggzof¡»am
 : 
public
 
gzfe¡»am_commÚ
,…ubliø
	go¡»am
 {

82 
	gpublic
:

84 
gzof¡»am
();

85 
gzof¡»am
ĞcÚ¡ *
Çme
, 
io_mode
 = 
ios
::
out
 );

86 
gzof¡»am
Ğ
fd
, 
io_mode
 = 
ios
::
out
 );

88 
	gvœtu®
 ~
gzof¡»am
();

92 
	g‹m¶©e
<
şass
 
	gT
> cÏs 
	cgzomª
 {

93 
ä›nd
 
	mgzof¡»am
 &
	mİ”©Ü
<<(gzof¡»am &, cÚ¡ 
	mgzomª
<
	mT
> &);

94 
	mpublic
:

95 
gzomª
(
gzof¡»am
 &(*
f
)(gzof¡»am &, 
T
), T 
v
è: 
func
(f), 
	$v®
(
v
) { }

96 
´iv©e
:

97 
gzof¡»am
 &(*
func
)(gzof¡»am &, 
T
);

98 
T
 
v®
;

99 
	}
};

101 
	g‹m¶©e
<
şass
 
	gT
> 
	ggzof¡»am
 &
	gİ”©Ü
<<(gzof¡»am &
	gs
, cÚ¡ 
	ggzomª
<T> &
	gm
)

103  (*
	gm
.
	gfunc
)(
	gs
, m.
	gv®
);

106 
šlše
 
	ggzof¡»am
 &
	$£tcom´essiÚËv–
Ğ
gzof¡»am
 &
s
, 
l
 )

108 (
s
.
	`rdbuf
())->
	`£tcom´essiÚËv–
(
l
);

109  
s
;

110 
	}
}

112 
šlše
 
	ggzof¡»am
 &
	$£tcom´essiÚ¡¿‹gy
Ğ
gzof¡»am
 &
s
, 
l
 )

114 (
s
.
	`rdbuf
())->
	`£tcom´essiÚ¡¿‹gy
(
l
);

115  
s
;

116 
	}
}

118 
šlše
 
	ggzomª
<> 
	$£tcom´essiÚËv–
(
l
)

120  
gzomª
<>(&
£tcom´essiÚËv–
,
l
);

121 
	}
}

123 
šlše
 
	ggzomª
<> 
	$£tcom´essiÚ¡¿‹gy
(
l
)

125  
gzomª
<>(&
£tcom´essiÚ¡¿‹gy
,
l
);

126 
	}
}

	@contrib/iostream2/zstream.h

19 #iâdeà
ZSTREAM__H


20 
	#ZSTREAM__H


	)

27 
	~<¡r¡»am.h
>

28 
	~<¡ršg.h
>

29 
	~<¡dio.h
>

30 
	~"zlib.h
"

32 #ià
defšed
(
_WIN32
)

33 
	~<fú.h
>

34 
	~<io.h
>

35 
	#SET_BINARY_MODE
(
fe
è
	`£tmode
(
	`f’o
(fe), 
O_BINARY
)

	)

37 
	#SET_BINARY_MODE
(
fe
)

	)

40 şas 
	cz¡ršgËn
 {

41 
	mpublic
:

42 
z¡ršgËn
(
şass
 
iz¡»am
&);

43 
z¡ršgËn
(
şass
 
oz¡»am
&, const *);

44 
size_t
 
	$v®ue
(ècÚ¡ {  
v®
.
wÜd
; }

45 
´iv©e
:

46 
	sV®
 { 
by‹
; 
size_t
 
wÜd
; 
	}
} 
	gv®
;

51 şas 
	ciz¡»am


53 
	mpublic
:

54 
	$iz¡»am
(è: 
	$m_å
(0) {}

55 
	$iz¡»am
(
FILE
* 
å
è: 
	$m_å
(0è{ 
	`İ’
(
å
); 
	}
}

56 
	$iz¡»am
(cÚ¡ * 
Çme
è: 
	$m_å
(0è{ 
	`İ’
(
Çme
); 
	}
}

57 ~
	$iz¡»am
(è{ 
	`şo£
(); 
	}
}

65 
	$İ’
(cÚ¡ * 
Çme
) {

66 ià(
m_å
è
	`şo£
();

67 
m_å
 = ::
	`gzİ’
(
Çme
, "rb");

68 
	}
}

70 
	$İ’
(
FILE
* 
å
) {

71 
	`SET_BINARY_MODE
(
å
);

72 ià(
m_å
è
	`şo£
();

73 
m_å
 = ::
	`gzdİ’
(
	`f’o
(
å
), "rb");

74 
	}
}

80 
	$şo£
() {

81 
r
 = ::
	`gzşo£
(
m_å
);

82 
m_å
 = 0;  
r
;

83 
	}
}

87 
	$»ad
(* 
buf
, 
size_t
 
Ën
) {

88  ::
	`gz»ad
(
m_å
, 
buf
, 
Ën
);

89 
	}
}

97 cÚ¡ * 
	$”rÜ
(* 
”ºum
) {

98  ::
	`gz”rÜ
(
m_å
, 
”ºum
);

99 
	}
}

101 
gzFe
 
	$å
(è{  
m_å
; 
	}
}

103 
	g´iv©e
:

104 
gzFe
 
m_å
;

114 
	g‹m¶©e
 <
şass
 
	gT
, cÏs 
	gI‹ms
>

115 
šlše
 
	$»ad
(
iz¡»am
& 
zs
, 
T
* 
x
, 
I‹ms
 
™ems
) {

116  ::
	`gz»ad
(
zs
.
	`å
(), 
x
, 
™ems
*(
T
));

117 
	}
}

122 
	g‹m¶©e
 <
şass
 
	gT
>

123 
šlše
 
	giz¡»am
& 
	gİ”©Ü
>(iz¡»am& 
	gzs
, 
	gT
& 
	gx
) {

124 ::
gz»ad
(
zs
.
å
(), &
x
, (
T
));

125  
	gzs
;

129 
šlše
 
	gz¡ršgËn
::
	$z¡ršgËn
(
iz¡»am
& 
zs
) {

130 
zs
 > 
v®
.
by‹
;

131 ià(
v®
.
by‹
 =ğ255è
zs
 > v®.
wÜd
;

132 
v®
.
wÜd
 = v®.
by‹
;

133 
	}
}

138 
šlše
 
	giz¡»am
& 
	gİ”©Ü
>(iz¡»am& 
	gzs
, * 
	gx
) {

139 
z¡ršgËn
 
Ën
(
zs
);

140 ::
gz»ad
(
zs
.
å
(), 
x
, 
Ën
.
v®ue
());

141 
	gx
[
Ën
.
v®ue
()] = '\0';

142  
	gzs
;

145 
šlše
 * 
	$»ad_¡ršg
(
iz¡»am
& 
zs
) {

146 
z¡ršgËn
 
	`Ën
(
zs
);

147 * 
x
 = 
Ãw
 [
Ën
.
	`v®ue
()+1];

148 ::
	`gz»ad
(
zs
.
	`å
(), 
x
, 
Ën
.
	`v®ue
());

149 
x
[
Ën
.
	`v®ue
()] = '\0';

150  
x
;

151 
	}
}

155 şas 
	coz¡»am


157 
	mpublic
:

158 
	$oz¡»am
(è: 
	`m_å
(0), 
	$m_os
(0) {

160 
	$oz¡»am
(
FILE
* 
å
, 
Ëv–
 = 
Z_DEFAULT_COMPRESSION
)

161 : 
	`m_å
(0), 
	$m_os
(0) {

162 
	`İ’
(
å
, 
Ëv–
);

163 
	}
}

164 
	$oz¡»am
(cÚ¡ * 
Çme
, 
Ëv–
 = 
Z_DEFAULT_COMPRESSION
)

165 : 
	`m_å
(0), 
	$m_os
(0) {

166 
	`İ’
(
Çme
, 
Ëv–
);

167 
	}
}

168 ~
	$oz¡»am
() {

169 
	`şo£
();

170 
	}
}

177 
	$İ’
(cÚ¡ * 
Çme
, 
Ëv–
 = 
Z_DEFAULT_COMPRESSION
) {

178 
mode
[4] = "wb\0";

179 ià(
Ëv–
 !ğ
Z_DEFAULT_COMPRESSION
è
mode
[2] = '0'+level;

180 ià(
m_å
è
	`şo£
();

181 
m_å
 = ::
	`gzİ’
(
Çme
, 
mode
);

182 
	}
}

186 
	$İ’
(
FILE
* 
å
, 
Ëv–
 = 
Z_DEFAULT_COMPRESSION
) {

187 
	`SET_BINARY_MODE
(
å
);

188 
mode
[4] = "wb\0";

189 ià(
Ëv–
 !ğ
Z_DEFAULT_COMPRESSION
è
mode
[2] = '0'+level;

190 ià(
m_å
è
	`şo£
();

191 
m_å
 = ::
	`gzdİ’
(
	`f’o
(
å
), 
mode
);

192 
	}
}

198 
	$şo£
() {

199 ià(
m_os
) {

200 ::
	`gzwr™e
(
m_å
, 
m_os
->
	`¡r
(), m_os->
	`pcouÁ
());

201 
d–‘e
[] 
m_os
->
	`¡r
(); delete m_os; m_os = 0;

203 
r
 = ::
	`gzşo£
(
m_å
); m_fp = 0; „;

204 
	}
}

208 
	$wr™e
(cÚ¡ * 
buf
, 
size_t
 
Ën
) {

209  ::
	`gzwr™e
(
m_å
, (
voidp
è
buf
, 
Ën
);

210 
	}
}

219 
	$æush
(
_æush
) {

220 
	`os_æush
();

221  ::
	`gzæush
(
m_å
, 
_æush
);

222 
	}
}

230 cÚ¡ * 
	$”rÜ
(* 
”ºum
) {

231  ::
	`gz”rÜ
(
m_å
, 
”ºum
);

232 
	}
}

234 
gzFe
 
	$å
(è{  
m_å
; 
	}
}

236 
	go¡»am
& 
	$os
() {

237 ià(
m_os
 =ğ0èm_o ğ
Ãw
 
o¡r¡»am
;

238  *
m_os
;

239 
	}
}

241 
	$os_æush
() {

242 ià(
m_os
 && m_os->
	`pcouÁ
()>0) {

243 
o¡r¡»am
* 
oss
 = 
Ãw
 ostrstream;

244 
oss
->
	`fl
(
m_os
->fill());

245 
oss
->
	`æags
(
m_os
->flags());

246 
oss
->
	`´ecisiÚ
(
m_os
->precision());

247 
oss
->
	`width
(
m_os
->width());

248 ::
	`gzwr™e
(
m_å
, 
m_os
->
	`¡r
(), m_os->
	`pcouÁ
());

249 
d–‘e
[] 
m_os
->
	`¡r
(); d–‘m_os; m_o ğ
oss
;

251 
	}
}

253 
	g´iv©e
:

254 
gzFe
 
m_å
;

255 
o¡r¡»am
* 
	gm_os
;

263 
	g‹m¶©e
 <
şass
 
	gT
, cÏs 
	gI‹ms
>

264 
šlše
 
	$wr™e
(
oz¡»am
& 
zs
, cÚ¡ 
T
* 
x
, 
I‹ms
 
™ems
) {

265  ::
	`gzwr™e
(
zs
.
	`å
(), (
voidp
è
x
, 
™ems
*(
T
));

266 
	}
}

271 
	g‹m¶©e
 <
şass
 
	gT
>

272 
šlše
 
	goz¡»am
& 
	gİ”©Ü
<(oz¡»am& 
	gzs
, cÚ¡ 
	gT
& 
	gx
) {

273 ::
gzwr™e
(
zs
.
å
(), (
voidp
è&
x
, (
T
));

274  
	gzs
;

277 
šlše
 
	gz¡ršgËn
::
	$z¡ršgËn
(
oz¡»am
& 
zs
, cÚ¡ * 
x
) {

278 
v®
.
by‹
 = 255; v®.
wÜd
 = ::
	`¡¾’
(
x
);

279 ià(
v®
.
wÜd
 < 255è
zs
 < (v®.
by‹
 = val.word);

280 
zs
 < 
v®
;

281 
	}
}

286 
šlše
 
	goz¡»am
& 
	gİ”©Ü
<(oz¡»am& 
	gzs
, cÚ¡ * 
	gx
) {

287 
z¡ršgËn
 
Ën
(
zs
, 
x
);

288 ::
gzwr™e
(
zs
.
å
(), (
voidp
è
x
, 
Ën
.
v®ue
());

289  
	gzs
;

292 #ifdeà
_MSC_VER


293 
šlše
 
	goz¡»am
& 
	gİ”©Ü
<(oz¡»am& 
	gzs
, * cÚ¡& 
	gx
) {

294  
	gzs
 < (cÚ¡ *è
	gx
;

301 
	g‹m¶©e
 <
şass
 
	gT
>

302 
šlše
 
	go¡»am
& 
	gİ”©Ü
<<(
	goz¡»am
& 
	gzs
, cÚ¡ 
	gT
& 
	gx
) {

303 
	gzs
.
os_æush
();

304  
	gzs
.
os
(è<< 
	gx
;

	@contrib/iostream2/zstream_test.cpp

1 
	~"z¡»am.h
"

2 
	~<m©h.h
>

3 
	~<¡dlib.h
>

4 
	~<iomª.h
>

6 
	$maš
() {

7 
h
[256] = "Hello";

8 * 
g
 = "Goodbye";

9 
oz¡»am
 
	`out
("temp.gz");

10 
out
 < "Thi wÜk w–l" < 
h
 < 
g
;

11 
out
.
	`şo£
();

13 
iz¡»am
 
	`š
("temp.gz");

14 *
x
 = 
	`»ad_¡ršg
(
š
), *
y
 = 
Ãw
 [256], 
z
[256];

15 
š
 > 
y
 > 
z
;

16 
š
.
	`şo£
();

17 
cout
 << 
x
 << 
’dl
 << 
y
 <<ƒndÈ<< 
z
 <<ƒndl;

19 
out
.
	`İ’
("temp.gz");

20 
out
 << 
	`£tw
(50è<< 
	`£tfl
('#'è<< 
	`£»cisiÚ
(20è<< 
x
 << 
’dl
 << 
y
 <<ƒndÈ<< 
z
 <<ƒndl;

21 
out
 << 
z
 << 
’dl
 << 
y
 <<ƒndÈ<< 
x
 <<ƒndl;

22 
out
 << 1.1234567890123456789 << 
’dl
;

24 
d–‘e
[] 
x
; d–‘e[] 
y
;

25 
	}
}

	@contrib/iostream3/test.cc

8 
	~"zf¡»am.h
"

9 
	~<io¡»am
>

11 
	$maš
() {

13 
gzof¡»am
 
outf
;

14 
gzif¡»am
 
šf
;

15 
buf
[80];

17 
outf
.
	`İ’
("test1.txt.gz");

18 
outf
 << "The quick brown fox sidesteppedhe†azy canine\n"

19 << 1.3 << "\nPÏÀ" << 9 << 
¡d
::
’dl
;

20 
outf
.
	`şo£
();

21 
¡d
::
cout
 << "Wrotehe following messageo 'test1.txt.gz' (check with zcat or zless):\n"

23 << 1.3 << "\nPÏÀ" << 9 << 
¡d
::
’dl
;

25 
¡d
::
cout
 << "\nReading 'test1.txt.gz' (buffered)…roduces:\n";

26 
šf
.
	`İ’
("test1.txt.gz");

27 
šf
.
	`g‘lše
(
buf
,80,'\n')) {

28 
¡d
::
cout
 << 
buf
 << "\t(" << 
šf
.
	`rdbuf
()->
	`š_ava
() << " chars†eft in buffer)\n";

30 
šf
.
	`şo£
();

32 
outf
.
	`rdbuf
()->
	`pub£tbuf
(0,0);

33 
outf
.
	`İ’
("test2.txt.gz");

34 
outf
 << 
	`£tcom´essiÚ
(
Z_NO_COMPRESSION
)

36 << 1.3 << "\nPÏÀ" << 9 << 
¡d
::
’dl
;

37 
outf
.
	`şo£
();

38 
¡d
::
cout
 << "\nWrotehe same messageo 'test2.txt.gz' in uncompressed form";

40 
¡d
::
cout
 << "\nReading 'test2.txt.gz' (unbuffered)…roduces:\n";

41 
šf
.
	`rdbuf
()->
	`pub£tbuf
(0,0);

42 
šf
.
	`İ’
("test2.txt.gz");

43 
šf
.
	`g‘lše
(
buf
,80,'\n')) {

44 
¡d
::
cout
 << 
buf
 << "\t(" << 
šf
.
	`rdbuf
()->
	`š_ava
() << " chars†eft in buffer)\n";

46 
šf
.
	`şo£
();

50 
	}
}

	@contrib/iostream3/zfstream.cc

10 
	~"zf¡»am.h
"

11 
	~<c¡ršg
>

12 
	~<c¡dio
>

15 
	#BIGBUFSIZE
 
BUFSIZ


	)

16 
	#SMALLBUFSIZE
 1

	)

21 
	ggzfebuf
::
	$gzfebuf
()

22 : 
	`fe
(
NULL
), 
	`io_mode
(
¡d
::
ios_ba£
::
	`İ’mode
(0)), 
	`own_fd
(
çl£
),

23 
	`bufãr
(
NULL
), 
	`bufãr_size
(
BIGBUFSIZE
), 
	$own_bufãr
(
Œue
)

26 
this
->
	`di§bË_bufãr
();

27 
	}
}

30 
	ggzfebuf
::~
	$gzfebuf
()

34 
this
->
	`sync
();

35 ià(
own_fd
)

36 
this
->
	`şo£
();

38 
this
->
	`di§bË_bufãr
();

39 
	}
}

43 
	ggzfebuf
::
	$£tcom´essiÚ
(
comp_Ëv–
,

44 
comp_¡¿‹gy
)

46  
	`gz£¬ams
(
fe
, 
comp_Ëv–
, 
comp_¡¿‹gy
);

47 
	}
}

50 
gzfebuf
*

51 
	ggzfebuf
::
	$İ’
(cÚ¡ *
Çme
,

52 
¡d
::
ios_ba£
::
İ’mode
 
mode
)

55 ià(
this
->
	`is_İ’
())

56  
NULL
;

58 ià((
mode
 & 
¡d
::
ios_ba£
::
š
è&& (mod& std::ios_ba£::
out
))

59  
NULL
;

62 
ch¬_mode
[6] = "\0\0\0\0\0";

63 ià(!
this
->
	`İ’_mode
(
mode
, 
ch¬_mode
))

64  
NULL
;

67 ià((
fe
 = 
	`gzİ’
(
Çme
, 
ch¬_mode
)è=ğ
NULL
)

68  
NULL
;

71 
this
->
	`’abË_bufãr
();

72 
io_mode
 = 
mode
;

73 
own_fd
 = 
Œue
;

74  
this
;

75 
	}
}

78 
gzfebuf
*

79 
	ggzfebuf
::
	$©ch
(
fd
,

80 
¡d
::
ios_ba£
::
İ’mode
 
mode
)

83 ià(
this
->
	`is_İ’
())

84  
NULL
;

86 ià((
mode
 & 
¡d
::
ios_ba£
::
š
è&& (mod& std::ios_ba£::
out
))

87  
NULL
;

90 
ch¬_mode
[6] = "\0\0\0\0\0";

91 ià(!
this
->
	`İ’_mode
(
mode
, 
ch¬_mode
))

92  
NULL
;

95 ià((
fe
 = 
	`gzdİ’
(
fd
, 
ch¬_mode
)è=ğ
NULL
)

96  
NULL
;

99 
this
->
	`’abË_bufãr
();

100 
io_mode
 = 
mode
;

101 
own_fd
 = 
çl£
;

102  
this
;

103 
	}
}

106 
gzfebuf
*

107 
	ggzfebuf
::
	$şo£
()

110 ià(!
this
->
	`is_İ’
())

111  
NULL
;

113 
gzfebuf
* 
»tv®
 = 
this
;

115 ià(
this
->
	`sync
() == -1)

116 
»tv®
 = 
NULL
;

117 ià(
	`gzşo£
(
fe
) < 0)

118 
»tv®
 = 
NULL
;

120 
fe
 = 
NULL
;

121 
own_fd
 = 
çl£
;

123 
this
->
	`di§bË_bufãr
();

124  
»tv®
;

125 
	}
}

130 
boŞ


131 
	ggzfebuf
::
	$İ’_mode
(
¡d
::
ios_ba£
::
İ’mode
 
mode
,

132 * 
c_mode
) const

134 
boŞ
 
‹¡b
 = 
mode
 & 
¡d
::
ios_ba£
::
bš¬y
;

135 
boŞ
 
‹¡i
 = 
mode
 & 
¡d
::
ios_ba£
::
š
;

136 
boŞ
 
‹¡o
 = 
mode
 & 
¡d
::
ios_ba£
::
out
;

137 
boŞ
 
‹¡t
 = 
mode
 & 
¡d
::
ios_ba£
::
Œunc
;

138 
boŞ
 
‹¡a
 = 
mode
 & 
¡d
::
ios_ba£
::
­p
;

145 ià(!
‹¡i
 && 
‹¡o
 && !
‹¡t
 && !
‹¡a
)

146 
	`¡rıy
(
c_mode
, "w");

147 ià(!
‹¡i
 && 
‹¡o
 && !
‹¡t
 && 
‹¡a
)

148 
	`¡rıy
(
c_mode
, "a");

149 ià(!
‹¡i
 && 
‹¡o
 && 
‹¡t
 && !
‹¡a
)

150 
	`¡rıy
(
c_mode
, "w");

151 ià(
‹¡i
 && !
‹¡o
 && !
‹¡t
 && !
‹¡a
)

152 
	`¡rıy
(
c_mode
, "r");

160 ià(
	`¡¾’
(
c_mode
) == 0)

161  
çl£
;

162 ià(
‹¡b
)

163 
	`¡rÿt
(
c_mode
, "b");

164  
Œue
;

165 
	}
}

168 
	g¡d
::
¡»amsize


169 
gzfebuf
::
	$showmªyc
()

172 ià(!
this
->
	`is_İ’
(è|| !(
io_mode
 & 
¡d
::
ios_ba£
::
š
))

175 ià(
this
->
	`g±r
(è&& (this->g±r(è<his->
	`eg±r
()))

176  
¡d
::
	`¡»amsize
(
this
->
	`eg±r
(è-his->
	`g±r
());

179 
	}
}

182 
	ggzfebuf
::
št_ty³


183 
gzfebuf
::
	$und”æow
()

188 ià(
this
->
	`g±r
(è&& (this->g±r(è<his->
	`eg±r
()))

189  
Œa™s_ty³
::
	`to_št_ty³
(*(
this
->
	`g±r
()));

192 ià(!
this
->
	`is_İ’
(è|| !(
io_mode
 & 
¡d
::
ios_ba£
::
š
))

193  
Œa™s_ty³
::
	`eof
();

197 
by‹s_»ad
 = 
	`gz»ad
(
fe
, 
bufãr
, 
bufãr_size
);

199 ià(
by‹s_»ad
 <= 0)

202 
this
->
	`£tg
(
bufãr
, buffer, buffer);

203  
Œa™s_ty³
::
	`eof
();

206 
this
->
	`£tg
(
bufãr
, bufãr, bufã¸+ 
by‹s_»ad
);

209  
Œa™s_ty³
::
	`to_št_ty³
(*(
this
->
	`g±r
()));

210 
	}
}

213 
	ggzfebuf
::
št_ty³


214 
gzfebuf
::
	$ov”æow
(
št_ty³
 
c
)

217 ià(
this
->
	`pba£
())

220 ià(
this
->
	`µŒ
(è>his->
	`•±r
(è||his->µŒ(è<his->
	`pba£
())

221  
Œa™s_ty³
::
	`eof
();

223 ià(!
Œa™s_ty³
::
	`eq_št_ty³
(
c
,¿™s_ty³::
	`eof
()))

225 *(
this
->
	`µŒ
()èğ
Œa™s_ty³
::
	`to_ch¬_ty³
(
c
);

226 
this
->
	`pbump
(1);

229 
by‹s_to_wr™e
 = 
this
->
	`µŒ
(è-his->
	`pba£
();

231 ià(
by‹s_to_wr™e
 > 0)

234 ià(!
this
->
	`is_İ’
(è|| !(
io_mode
 & 
¡d
::
ios_ba£
::
out
))

235  
Œa™s_ty³
::
	`eof
();

237 ià(
	`gzwr™e
(
fe
, 
this
->
	`pba£
(), 
by‹s_to_wr™e
) != bytes_to_write)

238  
Œa™s_ty³
::
	`eof
();

240 
this
->
	`pbump
(-
by‹s_to_wr™e
);

244 ià(!
Œa™s_ty³
::
	`eq_št_ty³
(
c
,¿™s_ty³::
	`eof
()))

247 ià(!
this
->
	`is_İ’
(è|| !(
io_mode
 & 
¡d
::
ios_ba£
::
out
))

248  
Œa™s_ty³
::
	`eof
();

250 
ch¬_ty³
 
Ï¡_ch¬
 = 
Œa™s_ty³
::
	`to_ch¬_ty³
(
c
);

252 ià(
	`gzwr™e
(
fe
, &
Ï¡_ch¬
, 1) != 1)

253  
Œa™s_ty³
::
	`eof
();

258 ià(
Œa™s_ty³
::
	`eq_št_ty³
(
c
,¿™s_ty³::
	`eof
()))

259  
Œa™s_ty³
::
	`nÙ_eof
(
c
);

261  
c
;

262 
	}
}

265 
	g¡d
::
¡»ambuf
*

266 
gzfebuf
::
	$£tbuf
(
ch¬_ty³
* 
p
,

267 
¡d
::
¡»amsize
 
n
)

270 ià(
this
->
	`sync
() == -1)

271  
NULL
;

276 ià(!
p
 || !
n
)

279 
this
->
	`di§bË_bufãr
();

280 
bufãr
 = 
NULL
;

281 
bufãr_size
 = 0;

282 
own_bufãr
 = 
Œue
;

283 
this
->
	`’abË_bufãr
();

288 
this
->
	`di§bË_bufãr
();

289 
bufãr
 = 
p
;

290 
bufãr_size
 = 
n
;

291 
own_bufãr
 = 
çl£
;

292 
this
->
	`’abË_bufãr
();

294  
this
;

295 
	}
}

299 
	ggzfebuf
::
	$sync
()

301  
Œa™s_ty³
::
	`eq_št_ty³
(
this
->
	`ov”æow
(),¿™s_ty³::
	`eof
()) ? -1 : 0;

302 
	}
}

308 
	ggzfebuf
::
	$’abË_bufãr
()

311 ià(
own_bufãr
 && !
bufãr
)

314 ià(
bufãr_size
 > 0)

317 
bufãr
 = 
Ãw
 
ch¬_ty³
[
bufãr_size
];

319 
this
->
	`£tg
(
bufãr
, buffer, buffer);

324 
this
->
	`£
(
bufãr
, bufã¸+ 
bufãr_size
 - 1);

329 
bufãr_size
 = 
SMALLBUFSIZE
;

330 
bufãr
 = 
Ãw
 
ch¬_ty³
[
bufãr_size
];

331 
this
->
	`£tg
(
bufãr
, buffer, buffer);

333 
this
->
	`£
(0, 0);

340 
this
->
	`£tg
(
bufãr
, buffer, buffer);

341 
this
->
	`£
(
bufãr
, bufã¸+ 
bufãr_size
 - 1);

343 
	}
}

347 
	ggzfebuf
::
	$di§bË_bufãr
()

350 ià(
own_bufãr
 && 
bufãr
)

353 ià(!
this
->
	`pba£
())

354 
bufãr_size
 = 0;

355 
d–‘e
[] 
bufãr
;

356 
bufãr
 = 
NULL
;

357 
this
->
	`£tg
(0, 0, 0);

358 
this
->
	`£
(0, 0);

363 
this
->
	`£tg
(
bufãr
, buffer, buffer);

364 ià(
bufãr
)

365 
this
->
	`£
(
bufãr
, bufã¸+ 
bufãr_size
 - 1);

367 
this
->
	`£
(0, 0);

369 
	}
}

374 
	ggzif¡»am
::
	$gzif¡»am
()

375 : 
¡d
::
	`i¡»am
(
NULL
), 
	$sb
()

376 { 
this
->
	`š™
(&
sb
); 
	}
}

379 
	ggzif¡»am
::
	$gzif¡»am
(cÚ¡ * 
Çme
,

380 
¡d
::
ios_ba£
::
İ’mode
 
mode
)

381 : 
¡d
::
	`i¡»am
(
NULL
), 
	$sb
()

383 
this
->
	`š™
(&
sb
);

384 
this
->
	`İ’
(
Çme
, 
mode
);

385 
	}
}

388 
	ggzif¡»am
::
	$gzif¡»am
(
fd
,

389 
¡d
::
ios_ba£
::
İ’mode
 
mode
)

390 : 
¡d
::
	`i¡»am
(
NULL
), 
	$sb
()

392 
this
->
	`š™
(&
sb
);

393 
this
->
	`©ch
(
fd
, 
mode
);

394 
	}
}

398 
	ggzif¡»am
::
	$İ’
(cÚ¡ * 
Çme
,

399 
¡d
::
ios_ba£
::
İ’mode
 
mode
)

401 ià(!
sb
.
	`İ’
(
Çme
, 
mode
 | 
¡d
::
ios_ba£
::
š
))

402 
this
->
	`£t¡©e
(
¡d
::
ios_ba£
::
çb™
);

404 
this
->
	`ş—r
();

405 
	}
}

409 
	ggzif¡»am
::
	$©ch
(
fd
,

410 
¡d
::
ios_ba£
::
İ’mode
 
mode
)

412 ià(!
sb
.
	`©ch
(
fd
, 
mode
 | 
¡d
::
ios_ba£
::
š
))

413 
this
->
	`£t¡©e
(
¡d
::
ios_ba£
::
çb™
);

415 
this
->
	`ş—r
();

416 
	}
}

420 
	ggzif¡»am
::
	$şo£
()

422 ià(!
sb
.
	`şo£
())

423 
this
->
	`£t¡©e
(
¡d
::
ios_ba£
::
çb™
);

424 
	}
}

429 
	ggzof¡»am
::
	$gzof¡»am
()

430 : 
¡d
::
	`o¡»am
(
NULL
), 
	$sb
()

431 { 
this
->
	`š™
(&
sb
); 
	}
}

434 
	ggzof¡»am
::
	$gzof¡»am
(cÚ¡ * 
Çme
,

435 
¡d
::
ios_ba£
::
İ’mode
 
mode
)

436 : 
¡d
::
	`o¡»am
(
NULL
), 
	$sb
()

438 
this
->
	`š™
(&
sb
);

439 
this
->
	`İ’
(
Çme
, 
mode
);

440 
	}
}

443 
	ggzof¡»am
::
	$gzof¡»am
(
fd
,

444 
¡d
::
ios_ba£
::
İ’mode
 
mode
)

445 : 
¡d
::
	`o¡»am
(
NULL
), 
	$sb
()

447 
this
->
	`š™
(&
sb
);

448 
this
->
	`©ch
(
fd
, 
mode
);

449 
	}
}

453 
	ggzof¡»am
::
	$İ’
(cÚ¡ * 
Çme
,

454 
¡d
::
ios_ba£
::
İ’mode
 
mode
)

456 ià(!
sb
.
	`İ’
(
Çme
, 
mode
 | 
¡d
::
ios_ba£
::
out
))

457 
this
->
	`£t¡©e
(
¡d
::
ios_ba£
::
çb™
);

459 
this
->
	`ş—r
();

460 
	}
}

464 
	ggzof¡»am
::
	$©ch
(
fd
,

465 
¡d
::
ios_ba£
::
İ’mode
 
mode
)

467 ià(!
sb
.
	`©ch
(
fd
, 
mode
 | 
¡d
::
ios_ba£
::
out
))

468 
this
->
	`£t¡©e
(
¡d
::
ios_ba£
::
çb™
);

470 
this
->
	`ş—r
();

471 
	}
}

475 
	ggzof¡»am
::
	$şo£
()

477 ià(!
sb
.
	`şo£
())

478 
this
->
	`£t¡©e
(
¡d
::
ios_ba£
::
çb™
);

479 
	}
}

	@contrib/iostream3/zfstream.h

10 #iâdeà
ZFSTREAM_H


11 
	#ZFSTREAM_H


	)

13 
	~<i¡»am
>

14 
	~<o¡»am
>

15 
	~"zlib.h
"

27 şas 
	cgzfebuf
 : 
public
 
¡d
::
¡»ambuf


29 
public
:

31 
gzfebuf
();

34 
	mvœtu®


35 ~
gzfebuf
();

49 
£tcom´essiÚ
(
comp_Ëv–
,

50 
comp_¡¿‹gy
 = 
Z_DEFAULT_STRATEGY
);

56 
boŞ


57 
	$is_İ’
(ècÚ¡ {  (
fe
 !ğ
NULL
); }

65 
gzfebuf
*

66 
	`İ’
(cÚ¡ * 
Çme
,

67 
¡d
::
ios_ba£
::
İ’mode
 
mode
);

75 
gzfebuf
*

76 
	`©ch
(
fd
,

77 
¡d
::
ios_ba£
::
İ’mode
 
mode
);

83 
gzfebuf
*

84 
	`şo£
();

86 
´Ùeùed
:

91 
boŞ


92 
	$İ’_mode
(
¡d
::
ios_ba£
::
İ’mode
 
mode
,

93 * 
c_mode
) const;

102 
vœtu®
 
¡d
::
¡»amsize


103 
	`showmªyc
();

112 
vœtu®
 
št_ty³


113 
	`und”æow
();

124 
vœtu®
 
št_ty³


125 
	`ov”æow
(
št_ty³
 
c
 = 
Œa™s_ty³
::
	`eof
());

135 
vœtu®
 
¡d
::
¡»ambuf
*

136 
	`£tbuf
(
ch¬_ty³
* 
p
,

137 
¡d
::
¡»amsize
 
n
);

145 
vœtu®
 

146 
	`sync
();

161 
´iv©e
:

171 
	`’abË_bufãr
();

181 
	`di§bË_bufãr
();

186 
gzFe
 
fe
;

191 
¡d
::
ios_ba£
::
İ’mode
 
io_mode
;

199 
boŞ
 
own_fd
;

207 
ch¬_ty³
* 
bufãr
;

215 
¡d
::
¡»amsize
 
bufãr_size
;

223 
boŞ
 
own_bufãr
;

224 
	}
};

234 şas 
	cgzif¡»am
 : 
public
 
¡d
::
i¡»am


236 
public
:

238 
gzif¡»am
();

245 
ex¶ic™


246 
gzif¡»am
(cÚ¡ * 
Çme
,

247 
¡d
::
ios_ba£
::
İ’mode
 
mode
 = std::ios_ba£::
š
);

254 
ex¶ic™


255 
gzif¡»am
(
fd
,

256 
¡d
::
ios_ba£
::
İ’mode
 
mode
 = std::ios_ba£::
š
);

261 
gzfebuf
*

262 
	$rdbuf
() const

263 {  
cÚ¡_ÿ¡
<
gzfebuf
*>(&
sb
); }

269 
boŞ


270 
	$is_İ’
(è{  
sb
.
	`is_İ’
(); 
	}
}

285 
İ’
(cÚ¡ * 
Çme
,

286 
¡d
::
ios_ba£
::
İ’mode
 
mode
 = std::ios_ba£::
š
);

297 
©ch
(
fd
,

298 
¡d
::
ios_ba£
::
İ’mode
 
mode
 = std::ios_ba£::
š
);

306 
şo£
();

308 
	g´iv©e
:

312 
gzfebuf
 
sb
;

323 şas 
	cgzof¡»am
 : 
public
 
¡d
::
o¡»am


325 
public
:

327 
gzof¡»am
();

334 
ex¶ic™


335 
gzof¡»am
(cÚ¡ * 
Çme
,

336 
¡d
::
ios_ba£
::
İ’mode
 
mode
 = std::ios_ba£::
out
);

343 
ex¶ic™


344 
gzof¡»am
(
fd
,

345 
¡d
::
ios_ba£
::
İ’mode
 
mode
 = std::ios_ba£::
out
);

350 
gzfebuf
*

351 
	$rdbuf
() const

352 {  
cÚ¡_ÿ¡
<
gzfebuf
*>(&
sb
); }

358 
boŞ


359 
	$is_İ’
(è{  
sb
.
	`is_İ’
(); 
	}
}

374 
İ’
(cÚ¡ * 
Çme
,

375 
¡d
::
ios_ba£
::
İ’mode
 
mode
 = std::ios_ba£::
out
);

386 
©ch
(
fd
,

387 
¡d
::
ios_ba£
::
İ’mode
 
mode
 = std::ios_ba£::
out
);

395 
şo£
();

397 
	g´iv©e
:

401 
gzfebuf
 
sb
;

412 
	g‹m¶©e
<
ty³Çme
 
	gT1
,y³Çm
	gT2
>

413 şas 
	cgzomª2


415 
	mpublic
:

417 
‹m¶©e
 <
ty³Çme
 
Ta
,y³Çm
	mTb
>

418 
ä›nd
 
	mgzof¡»am
&

419 
	mİ”©Ü
<<(
	mgzof¡»am
&,

420 cÚ¡ 
	mgzomª2
<
	mTa
,
	mTb
>&);

423 
gzomª2
(
gzof¡»am
& (*
f
)(gzof¡»am&, 
T1
, 
T2
),

424 
T1
 
v1
,

425 
T2
 
v2
);

426 
	m´iv©e
:

428 
gzof¡»am
&

429 (*
func
)(
gzof¡»am
&, 
	mT1
, 
	mT2
);

432 
T1
 
	mv®1
;

433 
T2
 
	mv®2
;

439 
šlše
 
	ggzof¡»am
&

440 
	$£tcom´essiÚ
(
gzof¡»am
 &
gzs
, 
l
, 
s
 = 
Z_DEFAULT_STRATEGY
)

442 (
gzs
.
	`rdbuf
())->
	`£tcom´essiÚ
(
l
, 
s
);

443  
gzs
;

444 
	}
}

447 
	g‹m¶©e
<
ty³Çme
 
	gT1
,y³Çm
	gT2
>

448 
šlše


449 
	ggzomª2
<
	gT1
,
	gT2
>::
gzomª2
(
gzof¡»am
 &(*
f
)(gzof¡»am &, 
T1
, 
T2
),

450 
T1
 
v1
,

451 
T2
 
v2
)

452 : 
func
(
f
), 
v®1
(
v1
), 
	$v®2
(
v2
)

453 { 
	}
}

456 
	g‹m¶©e
<
ty³Çme
 
	gT1
,y³Çm
	gT2
>

457 
šlše
 
	ggzof¡»am
&

458 
	gİ”©Ü
<<(
	ggzof¡»am
& 
	gs
, cÚ¡ 
	ggzomª2
<
	gT1
,
	gT2
>& 
	gm
)

459 {  (*
	gm
.
	gfunc
)(
	gs
, m.
	gv®1
, m.
	gv®2
); }

462 
šlše
 
	ggzomª2
<,>

463 
	$£tcom´essiÚ
(
l
, 
s
 = 
Z_DEFAULT_STRATEGY
)

464 {  
gzomª2
<,>(&
£tcom´essiÚ
, 
l
, 
s
); 
	}
}

	@contrib/masmx64/inffas8664.c

35 
	~<¡dio.h
>

36 
	~"zut.h
"

37 
	~"šá»es.h
"

38 
	~"šæ©e.h
"

39 
	~"šfç¡.h
"

78 
	sšfç¡_¬


83  *
	me¥
;

86  *
	mebp
;

89  
FAR
 *
	mš
;

92  
FAR
 *
	mÏ¡
;

95  
FAR
 *
	mout
;

98  
FAR
 *
	mbeg
;

101  
FAR
 *
	m’d
;

104  
FAR
 *
	mwšdow
;

107  
code
 cÚ¡ 
FAR
 *
	mlcode
;

110  
code
 cÚ¡ 
FAR
 *
	mdcode
;

113  
size_t
 
	mhŞd
;

115  
	mb™s
;

118  
	mwsize
;

121  
	mwr™e
;

124  
	mlmask
;

127  
	mdmask
;

130  
	mËn
;

133  
	mdi¡
;

136  
	m¡©us
;

138 } 
	tty³_¬
;

140 #ifdeà
ASMINF


142 
	$šæ©e_ç¡
 (
¡rm
, 
¡¬t
)

143 
z_¡»amp
 
¡rm
;

144 
¡¬t
;

147 
šæ©e_¡©e
 
FAR
 *
¡©e
;

148 
ty³_¬
 
¬
;

149 
	`šfçs8664âc
 (
šfç¡_¬
 *
·r
);

151 #ià(
	`defšed
Ğ
__GNUC__
 ) && defšedĞ
__amd64__
 ) && ! defšedĞ
__i386
 )è|| (defšed(
_MSC_VER
è&& defšed(
_M_AMD64
))

152 
	#PAD_AVAIL_IN
 6

	)

153 
	#PAD_AVAIL_OUT
 258

	)

155 
	#PAD_AVAIL_IN
 5

	)

156 
	#PAD_AVAIL_OUT
 257

	)

160 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

161 
¬
.
š
 = 
¡rm
->
Ãxt_š
;

162 
¬
.
Ï¡
 =‡r.
š
 + (
¡rm
->
ava_š
 - 
PAD_AVAIL_IN
);

163 
¬
.
out
 = 
¡rm
->
Ãxt_out
;

164 
¬
.
beg
 =‡r.
out
 - (
¡¬t
 - 
¡rm
->
ava_out
);

165 
¬
.
’d
 =‡r.
out
 + (
¡rm
->
ava_out
 - 
PAD_AVAIL_OUT
);

166 
¬
.
wsize
 = 
¡©e
->wsize;

167 
¬
.
wr™e
 = 
¡©e
->
wÃxt
;

168 
¬
.
wšdow
 = 
¡©e
->window;

169 
¬
.
hŞd
 = 
¡©e
->hold;

170 
¬
.
b™s
 = 
¡©e
->bits;

171 
¬
.
lcode
 = 
¡©e
->
Ëncode
;

172 
¬
.
dcode
 = 
¡©e
->
di¡code
;

173 
¬
.
lmask
 = (1U << 
¡©e
->
Ënb™s
) - 1;

174 
¬
.
dmask
 = (1U << 
¡©e
->
di¡b™s
) - 1;

180 ((
size_t
è(*è
¬
.
š
 & ( (¬.
hŞd
) / 2 - 1)) != 0)

182 
¬
.
hŞd
 +ğ(è*¬.
š
++ <<‡r.
b™s
;

183 
¬
.
b™s
 += 8;

184 } 
	`šfçs8664âc
 (&
¬
);

185 ià(
¬
.
¡©us
 > 1)

187 ià(
¬
.
¡©us
 == 2)

188 
¡rm
->
msg
 = "invalid†iteral/length code";

190 ià(
¬
.
¡©us
 == 3)

191 
¡rm
->
msg
 = "invalid distance code";

194 
¡rm
->
msg
 = "invalid distanceoo far back";

195 
¡©e
->
mode
 = 
BAD
;

198 ià(
¬
.
¡©us
 == 1)

200 
¡©e
->
mode
 = 
TYPE
;

204 
¬
.
Ën
 =‡r.
b™s
 >> 3;

205 
¬
.
š
 -ğ¬.
Ën
;

206 
¬
.
b™s
 -ğ¬.
Ën
 << 3;

207 
¬
.
hŞd
 &ğ(1U <<‡r.
b™s
) - 1;

210 
¡rm
->
Ãxt_š
 = 
¬
.
š
;

211 
¡rm
->
Ãxt_out
 = 
¬
.
out
;

212 
¡rm
->
ava_š
 =

213 (è(
¬
.
š
 <

214 
¬
.
Ï¡
 ? 
PAD_AVAIL_IN
 + (¬.Ï¡ -‡r.
š
) : PAD_AVAIL_IN -

215 (
¬
.
š
 -‡r.
Ï¡
));

216 
¡rm
->
ava_out
 =

217 (è(
¬
.
out
 <

218 
¬
.
’d
 ? 
PAD_AVAIL_OUT
 + (¬.’d -‡r.
out
) : PAD_AVAIL_OUT -

219 (
¬
.
out
 -‡r.
’d
));

220 
¡©e
->
hŞd
 = (è
¬
.hold;

221 
¡©e
->
b™s
 = 
¬
.bits;

223 
	}
}

	@contrib/minizip/crypt.h

30 
	#CRC32
(
c
, 
b
è((*(
püc_32_b
+((()(cè^ (b)è& 0xff))è^ ((cè>> 8))

	)

35 
	$deüy±_by‹
(* 
pkeys
, cÚ¡ 
z_üc_t
* 
püc_32_b
)

37 
‹mp
;

41 
‹mp
 = (()(*(
pkeys
+2)) & 0xffff) | 2;

42  ()(((
‹mp
 * (temp ^ 1)) >> 8) & 0xff);

43 
	}
}

48 
	$upd©e_keys
(* 
pkeys
,cÚ¡ 
z_üc_t
* 
püc_32_b
,
c
)

50 (*(
pkeys
+0)èğ
	`CRC32
((*Õkeys+0)), 
c
);

51 (*(
pkeys
+1)) += (*(pkeys+0)) & 0xff;

52 (*(
pkeys
+1)) = (*(pkeys+1)) * 134775813L + 1;

54 
keyshiá
 = ()((*(
pkeys
+1)) >> 24);

55 (*(
pkeys
+2)èğ
	`CRC32
((*Õkeys+2)), 
keyshiá
);

57  
c
;

58 
	}
}

65 
	$š™_keys
(cÚ¡ * 
·sswd
,* 
pkeys
,cÚ¡ 
z_üc_t
* 
püc_32_b
)

67 *(
pkeys
+0) = 305419896L;

68 *(
pkeys
+1) = 591751049L;

69 *(
pkeys
+2) = 878082192L;

70 *
·sswd
 != '\0') {

71 
	`upd©e_keys
(
pkeys
,
püc_32_b
,()*
·sswd
);

72 
·sswd
++;

74 
	}
}

76 
	#zdecode
(
pkeys
,
püc_32_b
,
c
) \

77 (
	`upd©e_keys
(
pkeys
,
püc_32_b
,
c
 ^ğ
	`deüy±_by‹
Õkeys,püc_32_b)))

	)

79 
	#z’code
(
pkeys
,
püc_32_b
,
c
,
t
) \

80 (
t
=
	`deüy±_by‹
(
pkeys
,
püc_32_b
), 
	`upd©e_keys
Õkeys,püc_32_b,
c
),^(c))

	)

82 #ifdeà
INCLUDECRYPTINGCODE_IFCRYPTALLOWED


84 
	#RAND_HEAD_LEN
 12

	)

86 #iâdeà
ZCR_SEED2


87 
	#ZCR_SEED2
 3141592654UL

	)

90 
	$üy±h—d
(cÚ¡ * 
·sswd
,

91 * 
buf
,

92 
bufSize
,

93 * 
pkeys
,

94 cÚ¡ 
z_üc_t
* 
püc_32_b
,

95 
ücFÜCry±šg
)

97 
n
;

98 
t
;

99 
c
;

100 
h—d”
[
RAND_HEAD_LEN
-2];

101 
ÿÎs
 = 0;

103 ià(
bufSize
<
RAND_HEAD_LEN
)

110 ià(++
ÿÎs
 == 1)

112 
	`¤ªd
(()(
	`time
(
NULL
è^ 
ZCR_SEED2
));

114 
	`š™_keys
(
·sswd
, 
pkeys
, 
püc_32_b
);

115 
n
 = 0;‚ < 
RAND_HEAD_LEN
-2;‚++)

117 
c
 = (
	`¿nd
() >> 7) & 0xff;

118 
h—d”
[
n
] = ()
	`z’code
(
pkeys
, 
püc_32_b
, 
c
, 
t
);

121 
	`š™_keys
(
·sswd
, 
pkeys
, 
püc_32_b
);

122 
n
 = 0;‚ < 
RAND_HEAD_LEN
-2;‚++)

124 
buf
[
n
] = ()
	`z’code
(
pkeys
, 
püc_32_b
, 
h—d”
[n], 
t
);

126 
buf
[
n
++] = ()
	`z’code
(
pkeys
, 
püc_32_b
, ()(
ücFÜCry±šg
 >> 16è& 0xff, 
t
);

127 
buf
[
n
++] = ()
	`z’code
(
pkeys
, 
püc_32_b
, ()(
ücFÜCry±šg
 >> 24è& 0xff, 
t
);

128  
n
;

129 
	}
}

	@contrib/minizip/ioapi.c

13 #ià
defšed
(
_WIN32
è&& (!(defšed(
_CRT_SECURE_NO_WARNINGS
)))

14 
	#_CRT_SECURE_NO_WARNINGS


	)

17 #ià
defšed
(
__APPLE__
è|| defšed(
IOAPI_NO_64
)

19 
	#FOPEN_FUNC
(
f’ame
, 
mode
è
	`fİ’
(f’ame, mode)

	)

20 
	#FTELLO_FUNC
(
¡»am
è
	`á–lo
(¡»am)

	)

21 
	#FSEEKO_FUNC
(
¡»am
, 
off£t
, 
Üigš
è
	`f£eko
(¡»am, off£t, origš)

	)

23 
	#FOPEN_FUNC
(
f’ame
, 
mode
è
	`fİ’64
(f’ame, mode)

	)

24 
	#FTELLO_FUNC
(
¡»am
è
	`á–lo64
(¡»am)

	)

25 
	#FSEEKO_FUNC
(
¡»am
, 
off£t
, 
Üigš
è
	`f£eko64
(¡»am, off£t, origš)

	)

29 
	~"ißpi.h
"

31 
voidpf


32 
	$ÿÎ_zİ’64
 (cÚ¡ 
zlib_fefunc64_32_def
 * 
pfefunc
, cÚ¡ *
f’ame
,

33 
mode
)

35 ià(
pfefunc
->
zfe_func64
.
zİ’64_fe
 !ğ
NULL
)

36  (*(
pfefunc
->
zfe_func64
.
zİ’64_fe
)) (pfilefunc->zfile_func64.

37 
İaque
, 
f’ame
, 
mode
);

40  (*(
pfefunc
->
zİ’32_fe
)èÕfefunc->
zfe_func64
.
İaque
,

41 (cÚ¡ *è
f’ame
, 
mode
);

43 
	}
}

46 
	$ÿÎ_z£ek64
 (cÚ¡ 
zlib_fefunc64_32_def
 * 
pfefunc
, 
voidpf
 
fe¡»am
,

47 
ZPOS64_T
 
off£t
, 
Üigš
)

49 ià(
pfefunc
->
zfe_func64
.
z£ek64_fe
 !ğ
NULL
)

50  (*(
pfefunc
->
zfe_func64
.
z£ek64_fe
)) (pfilefunc->zfile_func64.

51 
İaque
, 
fe¡»am
,

52 
off£t
, 
Üigš
);

55 
uLÚg
 
off£tTrunÿ‹d
 = (uLÚgè
off£t
;

56 ià(
off£tTrunÿ‹d
 !ğ
off£t
)

59  (*(
pfefunc
->
z£ek32_fe
)èÕfefunc->
zfe_func64
.
İaque
,

60 
fe¡»am
, 
off£tTrunÿ‹d
,

61 
Üigš
);

63 
	}
}

65 
ZPOS64_T


66 
	$ÿÎ_z‹Î64
 (cÚ¡ 
zlib_fefunc64_32_def
 * 
pfefunc
, 
voidpf
 
fe¡»am
)

68 ià(
pfefunc
->
zfe_func64
.
z£ek64_fe
 !ğ
NULL
)

69  (*(
pfefunc
->
zfe_func64
.
z‹Î64_fe
)) (pfilefunc->zfile_func64.

70 
İaque
, 
fe¡»am
);

73 
uLÚg
 
‹Î_uLÚg
 =

74 (*(
pfefunc
->
z‹Î32_fe
)èÕfefunc->
zfe_func64
.
İaque
,

75 
fe¡»am
);

76 ià((
‹Î_uLÚg
è=ğ
MAXU32
)

77  (
ZPOS64_T
) - 1;

79  
‹Î_uLÚg
;

81 
	}
}

84 
	$fl_zlib_fefunc64_32_def_äom_fefunc32
 (
zlib_fefunc64_32_def
 *

85 
p_fefunc64_32
,

86 cÚ¡ 
zlib_fefunc_def
 *

87 
p_fefunc32
)

89 
p_fefunc64_32
->
zfe_func64
.
zİ’64_fe
 = 
NULL
;

90 
p_fefunc64_32
->
zİ’32_fe
 = 
p_fefunc32
->
zİ’_fe
;

91 
p_fefunc64_32
->
zfe_func64
.
z”rÜ_fe
 = 
p_fefunc32
->zerror_file;

92 
p_fefunc64_32
->
zfe_func64
.
z»ad_fe
 = 
p_fefunc32
->zread_file;

93 
p_fefunc64_32
->
zfe_func64
.
zwr™e_fe
 = 
p_fefunc32
->zwrite_file;

94 
p_fefunc64_32
->
zfe_func64
.
z‹Î64_fe
 = 
NULL
;

95 
p_fefunc64_32
->
zfe_func64
.
z£ek64_fe
 = 
NULL
;

96 
p_fefunc64_32
->
zfe_func64
.
zşo£_fe
 = 
p_fefunc32
->zclose_file;

97 
p_fefunc64_32
->
zfe_func64
.
z”rÜ_fe
 = 
p_fefunc32
->zerror_file;

98 
p_fefunc64_32
->
zfe_func64
.
İaque
 = 
p_fefunc32
->opaque;

99 
p_fefunc64_32
->
z£ek32_fe
 = 
p_fefunc32
->
z£ek_fe
;

100 
p_fefunc64_32
->
z‹Î32_fe
 = 
p_fefunc32
->
z‹Î_fe
;

101 
	}
}

105 
voidpf
 
ZCALLBACK
 
fİ’_fe_func


106 
OF
 ((
voidpf
 
İaque
, cÚ¡ *
f’ame
, 
mode
));

107 
uLÚg
 
ZCALLBACK
 
ä—d_fe_func


108 
OF
 ((
voidpf
 
İaque
, voidpà
¡»am
, *
buf
, 
uLÚg
 
size
));

109 
uLÚg
 
ZCALLBACK
 
fwr™e_fe_func


110 
OF
 ((
voidpf
 
İaque
, voidpà
¡»am
, cÚ¡ *
buf
, 
uLÚg
 
size
));

111 
ZPOS64_T
 
ZCALLBACK
 
á–l64_fe_func


112 
OF
 ((
voidpf
 
İaque
, voidpà
¡»am
));

113 
ZCALLBACK
 
f£ek64_fe_func


114 
OF
 ((
voidpf
 
İaque
, voidpà
¡»am
, 
ZPOS64_T
 
off£t
, 
Üigš
));

115 
ZCALLBACK
 
fşo£_fe_func
 
OF
 ((
voidpf
 
İaque
, voidpà
¡»am
));

116 
ZCALLBACK
 
ã¼Ü_fe_func
 
OF
 ((
voidpf
 
İaque
, voidpà
¡»am
));

118 
voidpf
 
ZCALLBACK


119 
	$fİ’_fe_func
 (
voidpf
 
İaque
, cÚ¡ *
f’ame
, 
mode
)

121 
FILE
 *
fe
 = 
NULL
;

122 cÚ¡ *
mode_fİ’
 = 
NULL
;

123 ià((
mode
 & 
ZLIB_FILEFUNC_MODE_READWRITEFILTER
è=ğ
ZLIB_FILEFUNC_MODE_READ
)

124 
mode_fİ’
 = "rb";

125 ià(
mode
 & 
ZLIB_FILEFUNC_MODE_EXISTING
)

126 
mode_fİ’
 = "r+b";

127 ià(
mode
 & 
ZLIB_FILEFUNC_MODE_CREATE
)

128 
mode_fİ’
 = "wb";

130 ià((
f’ame
 !ğ
NULL
è&& (
mode_fİ’
 != NULL))

131 
fe
 = 
	`fİ’
 (
f’ame
, 
mode_fİ’
);

132  
fe
;

133 
	}
}

135 
voidpf
 
ZCALLBACK


136 
	$fİ’64_fe_func
 (
voidpf
 
İaque
, cÚ¡ *
f’ame
, 
mode
)

138 
FILE
 *
fe
 = 
NULL
;

139 cÚ¡ *
mode_fİ’
 = 
NULL
;

140 ià((
mode
 & 
ZLIB_FILEFUNC_MODE_READWRITEFILTER
è=ğ
ZLIB_FILEFUNC_MODE_READ
)

141 
mode_fİ’
 = "rb";

142 ià(
mode
 & 
ZLIB_FILEFUNC_MODE_EXISTING
)

143 
mode_fİ’
 = "r+b";

144 ià(
mode
 & 
ZLIB_FILEFUNC_MODE_CREATE
)

145 
mode_fİ’
 = "wb";

147 ià((
f’ame
 !ğ
NULL
è&& (
mode_fİ’
 != NULL))

148 
fe
 = 
	`FOPEN_FUNC
 ((cÚ¡ *è
f’ame
, 
mode_fİ’
);

149  
fe
;

150 
	}
}

153 
uLÚg
 
ZCALLBACK


154 
	$ä—d_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
, *
buf
, 
uLÚg
 
size
)

156 
uLÚg
 
»t
;

157 
»t
 = (
uLÚg
è
	`ä—d
 (
buf
, 1, (
size_t
è
size
, (
FILE
 *è
¡»am
);

158  
»t
;

159 
	}
}

161 
uLÚg
 
ZCALLBACK


162 
	$fwr™e_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
, cÚ¡ *
buf
, 
uLÚg
 
size
)

164 
uLÚg
 
»t
;

165 
»t
 = (
uLÚg
è
	`fwr™e
 (
buf
, 1, (
size_t
è
size
, (
FILE
 *è
¡»am
);

166  
»t
;

167 
	}
}

169 
ZCALLBACK


170 
	$á–l_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
)

172 
»t
;

173 
»t
 = 
	`á–l
 ((
FILE
 *è
¡»am
);

174  
»t
;

175 
	}
}

178 
ZPOS64_T
 
ZCALLBACK


179 
	$á–l64_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
)

181 
ZPOS64_T
 
»t
;

182 
»t
 = 
	`FTELLO_FUNC
 ((
FILE
 *è
¡»am
);

183  
»t
;

184 
	}
}

186 
ZCALLBACK


187 
	$f£ek_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
, 
uLÚg
 
off£t
, 
Üigš
)

189 
f£ek_Üigš
 = 0;

190 
»t
;

191 
Üigš
)

193 
ZLIB_FILEFUNC_SEEK_CUR
:

194 
f£ek_Üigš
 = 
SEEK_CUR
;

196 
ZLIB_FILEFUNC_SEEK_END
:

197 
f£ek_Üigš
 = 
SEEK_END
;

199 
ZLIB_FILEFUNC_SEEK_SET
:

200 
f£ek_Üigš
 = 
SEEK_SET
;

205 
»t
 = 0;

206 ià(
	`f£ek
 ((
FILE
 *è
¡»am
, 
off£t
, 
f£ek_Üigš
) != 0)

207 
»t
 = -1;

208  
»t
;

209 
	}
}

211 
ZCALLBACK


212 
	$f£ek64_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
, 
ZPOS64_T
 
off£t
, 
Üigš
)

214 
f£ek_Üigš
 = 0;

215 
»t
;

216 
Üigš
)

218 
ZLIB_FILEFUNC_SEEK_CUR
:

219 
f£ek_Üigš
 = 
SEEK_CUR
;

221 
ZLIB_FILEFUNC_SEEK_END
:

222 
f£ek_Üigš
 = 
SEEK_END
;

224 
ZLIB_FILEFUNC_SEEK_SET
:

225 
f£ek_Üigš
 = 
SEEK_SET
;

230 
»t
 = 0;

232 ià(
	`FSEEKO_FUNC
 ((
FILE
 *è
¡»am
, 
off£t
, 
f£ek_Üigš
) != 0)

233 
»t
 = -1;

235  
»t
;

236 
	}
}

239 
ZCALLBACK


240 
	$fşo£_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
)

242 
»t
;

243 
»t
 = 
	`fşo£
 ((
FILE
 *è
¡»am
);

244  
»t
;

245 
	}
}

247 
ZCALLBACK


248 
	$ã¼Ü_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
)

250 
»t
;

251 
»t
 = 
	`ã¼Ü
 ((
FILE
 *è
¡»am
);

252  
»t
;

253 
	}
}

256 
	$fl_fİ’_fefunc
 (
pzlib_fefunc_def
)

257 
zlib_fefunc_def
 *
pzlib_fefunc_def
;

259 
pzlib_fefunc_def
->
zİ’_fe
 = 
fİ’_fe_func
;

260 
pzlib_fefunc_def
->
z»ad_fe
 = 
ä—d_fe_func
;

261 
pzlib_fefunc_def
->
zwr™e_fe
 = 
fwr™e_fe_func
;

262 
pzlib_fefunc_def
->
z‹Î_fe
 = 
á–l_fe_func
;

263 
pzlib_fefunc_def
->
z£ek_fe
 = 
f£ek_fe_func
;

264 
pzlib_fefunc_def
->
zşo£_fe
 = 
fşo£_fe_func
;

265 
pzlib_fefunc_def
->
z”rÜ_fe
 = 
ã¼Ü_fe_func
;

266 
pzlib_fefunc_def
->
İaque
 = 
NULL
;

267 
	}
}

270 
	$fl_fİ’64_fefunc
 (
zlib_fefunc64_def
 * 
pzlib_fefunc_def
)

272 
pzlib_fefunc_def
->
zİ’64_fe
 = 
fİ’64_fe_func
;

273 
pzlib_fefunc_def
->
z»ad_fe
 = 
ä—d_fe_func
;

274 
pzlib_fefunc_def
->
zwr™e_fe
 = 
fwr™e_fe_func
;

275 
pzlib_fefunc_def
->
z‹Î64_fe
 = 
á–l64_fe_func
;

276 
pzlib_fefunc_def
->
z£ek64_fe
 = 
f£ek64_fe_func
;

277 
pzlib_fefunc_def
->
zşo£_fe
 = 
fşo£_fe_func
;

278 
pzlib_fefunc_def
->
z”rÜ_fe
 = 
ã¼Ü_fe_func
;

279 
pzlib_fefunc_def
->
İaque
 = 
NULL
;

280 
	}
}

	@contrib/minizip/ioapi.h

21 #iâdeà
_ZLIBIOAPI64_H


22 
	#_ZLIBIOAPI64_H


	)

24 #ià(!
defšed
(
_WIN32
)è&& (!defšed(
WIN32
)è&& (!defšed(
__APPLE__
))

29 #iâdeà
__USE_FILE_OFFSET64


30 
	#__USE_FILE_OFFSET64


	)

32 #iâdeà
__USE_LARGEFILE64


33 
	#__USE_LARGEFILE64


	)

35 #iâdeà
_LARGEFILE64_SOURCE


36 
	#_LARGEFILE64_SOURCE


	)

38 #iâdeà
_FILE_OFFSET_BIT


39 
	#_FILE_OFFSET_BIT
 64

	)

44 
	~<¡dio.h
>

45 
	~<¡dlib.h
>

46 
	~"zlib.h
"

48 #ià
defšed
(
USE_FILE32API
)

49 
	#fİ’64
 
fİ’


	)

50 
	#á–lo64
 
á–l


	)

51 
	#f£eko64
 
f£ek


	)

53 #ifdeà
__F»eBSD__


54 
	#fİ’64
 
fİ’


	)

55 
	#á–lo64
 
á–lo


	)

56 
	#f£eko64
 
f£eko


	)

58 #ifdeà
_MSC_VER


59 
	#fİ’64
 
fİ’


	)

60 #ià(
_MSC_VER
 >ğ1400è&& (!(
defšed
(
NO_MSCVER_FILE64_FUNC
)))

61 
	#á–lo64
 
_á–li64


	)

62 
	#f£eko64
 
_f£eki64


	)

64 
	#á–lo64
 
á–l


	)

65 
	#f£eko64
 
f£ek


	)

81 #ifdeà
HAVE_MINIZIP64_CONF_H


82 
	~"mz64cÚf.h
"

86 #ifdeà
HAVE_64BIT_INT_CUSTOM


87 64B
IT_INT_CUSTOM_TYPE
 
	tZPOS64_T
;

89 #ifdeà
HAS_STDINT_H


90 
	~"¡dšt.h
"

91 
ušt64_t
 
	tZPOS64_T
;

95 
	#MAXU32
 0xffffffff

	)

97 #ià
defšed
(
_MSC_VER
è|| defšed(
__BORLANDC__
)

98 
	t__št64
 
	tZPOS64_T
;

100 
	tZPOS64_T
;

107 #ifdeà
__ılu¥lus


112 
	#ZLIB_FILEFUNC_SEEK_CUR
 (1)

	)

113 
	#ZLIB_FILEFUNC_SEEK_END
 (2)

	)

114 
	#ZLIB_FILEFUNC_SEEK_SET
 (0)

	)

116 
	#ZLIB_FILEFUNC_MODE_READ
 (1)

	)

117 
	#ZLIB_FILEFUNC_MODE_WRITE
 (2)

	)

118 
	#ZLIB_FILEFUNC_MODE_READWRITEFILTER
 (3)

	)

120 
	#ZLIB_FILEFUNC_MODE_EXISTING
 (4)

	)

121 
	#ZLIB_FILEFUNC_MODE_CREATE
 (8)

	)

124 #iâdeà
ZCALLBACK


125 #ià(
defšed
(
WIN32
è|| defšed(
_WIN32
è|| defšed (
WINDOWS
è|| defšed (
_WINDOWS
)è&& defšed(
CALLBACK
è&& defšed (
USEWINDOWS_CALLBACK
)

126 
	#ZCALLBACK
 
CALLBACK


	)

128 
	#ZCALLBACK


	)

135 
voidpf
 (
	tZCALLBACK
 *
	tİ’_fe_func
è
	tOF
((
	tvoidpf
 
	tİaque
, cÚ¡ * 
	tf’ame
, 
	tmode
));

136 
uLÚg
 (
	tZCALLBACK
 *
	t»ad_fe_func
è
	tOF
((
	tvoidpf
 
	tİaque
, voidpà
	t¡»am
, * 
	tbuf
, 
	tuLÚg
 
	tsize
));

137 
uLÚg
 (
	tZCALLBACK
 *
	twr™e_fe_func
è
	tOF
((
	tvoidpf
 
	tİaque
, voidpà
	t¡»am
, cÚ¡ * 
	tbuf
, 
	tuLÚg
 
	tsize
));

138 (
ZCALLBACK
 *
	tşo£_fe_func
è
	tOF
((
	tvoidpf
 
	tİaque
, voidpà
	t¡»am
));

139 (
ZCALLBACK
 *
	t‹¡”rÜ_fe_func
è
	tOF
((
	tvoidpf
 
	tİaque
, voidpà
	t¡»am
));

141 (
ZCALLBACK
 *
	t‹Î_fe_func
è
	tOF
((
	tvoidpf
 
	tİaque
, voidpà
	t¡»am
));

142 (
ZCALLBACK
 *
	t£ek_fe_func
è
	tOF
((
	tvoidpf
 
	tİaque
, voidpà
	t¡»am
, 
	tuLÚg
 
	toff£t
, 
	tÜigš
));

146 
	szlib_fefunc_def_s


148 
İ’_fe_func
 
zİ’_fe
;

149 
»ad_fe_func
 
z»ad_fe
;

150 
wr™e_fe_func
 
zwr™e_fe
;

151 
‹Î_fe_func
 
z‹Î_fe
;

152 
£ek_fe_func
 
z£ek_fe
;

153 
şo£_fe_func
 
zşo£_fe
;

154 
‹¡”rÜ_fe_func
 
z”rÜ_fe
;

155 
voidpf
 
İaque
;

156 } 
	tzlib_fefunc_def
;

158 
ZPOS64_T
 (
	tZCALLBACK
 *
	t‹Î64_fe_func
è
	tOF
((
	tvoidpf
 
	tİaque
, voidpà
	t¡»am
));

159 (
ZCALLBACK
 *
	t£ek64_fe_func
è
	tOF
((
	tvoidpf
 
	tİaque
, voidpà
	t¡»am
, 
	tZPOS64_T
 
	toff£t
, 
	tÜigš
));

160 
voidpf
 (
	tZCALLBACK
 *
	tİ’64_fe_func
è
	tOF
((
	tvoidpf
 
	tİaque
, cÚ¡ * 
	tf’ame
, 
	tmode
));

162 
	szlib_fefunc64_def_s


164 
İ’64_fe_func
 
zİ’64_fe
;

165 
»ad_fe_func
 
z»ad_fe
;

166 
wr™e_fe_func
 
zwr™e_fe
;

167 
‹Î64_fe_func
 
z‹Î64_fe
;

168 
£ek64_fe_func
 
z£ek64_fe
;

169 
şo£_fe_func
 
zşo£_fe
;

170 
‹¡”rÜ_fe_func
 
z”rÜ_fe
;

171 
voidpf
 
İaque
;

172 } 
	tzlib_fefunc64_def
;

174 
fl_fİ’64_fefunc
 
OF
((
zlib_fefunc64_def
* 
pzlib_fefunc_def
));

175 
fl_fİ’_fefunc
 
OF
((
zlib_fefunc_def
* 
pzlib_fefunc_def
));

178 
	szlib_fefunc64_32_def_s


180 
zlib_fefunc64_def
 
zfe_func64
;

181 
İ’_fe_func
 
zİ’32_fe
;

182 
‹Î_fe_func
 
z‹Î32_fe
;

183 
£ek_fe_func
 
z£ek32_fe
;

184 } 
	tzlib_fefunc64_32_def
;

187 
	#ZREAD64
(
fefunc
,
fe¡»am
,
buf
,
size
è((*((fefunc).
zfe_func64
.
z»ad_fe
)è((fefunc).zfe_func64.
İaque
,fe¡»am,buf,size))

	)

188 
	#ZWRITE64
(
fefunc
,
fe¡»am
,
buf
,
size
è((*((fefunc).
zfe_func64
.
zwr™e_fe
)è((fefunc).zfe_func64.
İaque
,fe¡»am,buf,size))

	)

191 
	#ZCLOSE64
(
fefunc
,
fe¡»am
è((*((fefunc).
zfe_func64
.
zşo£_fe
)è((fefunc).zfe_func64.
İaque
,fe¡»am))

	)

192 
	#ZERROR64
(
fefunc
,
fe¡»am
è((*((fefunc).
zfe_func64
.
z”rÜ_fe
)è((fefunc).zfe_func64.
İaque
,fe¡»am))

	)

194 
voidpf
 
ÿÎ_zİ’64
 
OF
((cÚ¡ 
zlib_fefunc64_32_def
* 
pfefunc
,cÚ¡ *
f’ame
,
mode
));

195 
ÿÎ_z£ek64
 
OF
((cÚ¡ 
zlib_fefunc64_32_def
* 
pfefunc
,
voidpf
 
fe¡»am
, 
ZPOS64_T
 
off£t
, 
Üigš
));

196 
ZPOS64_T
 
ÿÎ_z‹Î64
 
OF
((cÚ¡ 
zlib_fefunc64_32_def
* 
pfefunc
,
voidpf
 
fe¡»am
));

198 
fl_zlib_fefunc64_32_def_äom_fefunc32
(
zlib_fefunc64_32_def
* 
p_fefunc64_32
,cÚ¡ 
zlib_fefunc_def
* 
p_fefunc32
);

200 
	#ZOPEN64
(
fefunc
,
f’ame
,
mode
è(
	`ÿÎ_zİ’64
((&(fefunc)),(f’ame),(mode)))

	)

201 
	#ZTELL64
(
fefunc
,
fe¡»am
è(
	`ÿÎ_z‹Î64
((&(fefunc)),(fe¡»am)))

	)

202 
	#ZSEEK64
(
fefunc
,
fe¡»am
,
pos
,
mode
è(
	`ÿÎ_z£ek64
((&(fefunc)),(fe¡»am),Õos),(mode)))

	)

204 #ifdeà
__ılu¥lus


	@contrib/minizip/iowin32.c

14 
	~<¡dlib.h
>

16 
	~"zlib.h
"

17 
	~"ißpi.h
"

18 
	~"iowš32.h
"

20 #iâdeà
INVALID_HANDLE_VALUE


21 
	#INVALID_HANDLE_VALUE
 (0xFFFFFFFF)

	)

24 #iâdeà
INVALID_SET_FILE_POINTER


25 
	#INVALID_SET_FILE_POINTER
 ((
DWORD
)-1)

	)

29 #ià
defšed
(
WINAPI_FAMILY_PARTITION
è&& (!(defšed(
IOWIN32_USING_WINRT_API
)))

30 #ià
WINAPI_FAMILY_PARTITION
(
WINAPI_PARTITION_APP
)

31 
	#IOWIN32_USING_WINRT_API
 1

	)

35 
voidpf
 
ZCALLBACK
 
wš32_İ’_fe_func


36 
OF
 ((
voidpf
 
İaque
, cÚ¡ *
f’ame
, 
mode
));

37 
uLÚg
 
ZCALLBACK
 
wš32_»ad_fe_func


38 
OF
 ((
voidpf
 
İaque
, voidpà
¡»am
, *
buf
, 
uLÚg
 
size
));

39 
uLÚg
 
ZCALLBACK
 
wš32_wr™e_fe_func


40 
OF
 ((
voidpf
 
İaque
, voidpà
¡»am
, cÚ¡ *
buf
, 
uLÚg
 
size
));

41 
ZPOS64_T
 
ZCALLBACK
 
wš32_‹Î64_fe_func
 
OF
 ((
voidpf
 
İaque
, voidpà
¡»am
));

42 
ZCALLBACK
 
wš32_£ek64_fe_func


43 
OF
 ((
voidpf
 
İaque
, voidpà
¡»am
, 
ZPOS64_T
 
off£t
, 
Üigš
));

44 
ZCALLBACK
 
wš32_şo£_fe_func
 
OF
 ((
voidpf
 
İaque
, voidpà
¡»am
));

45 
ZCALLBACK
 
wš32_”rÜ_fe_func
 
OF
 ((
voidpf
 
İaque
, voidpà
¡»am
));

49 
HANDLE
 
	mhf
;

50 
	m”rÜ
;

51 } 
	tWIN32FILE_IOWIN
;

55 
	$wš32_Œª¦©e_İ’_mode
 (
mode
,

56 
DWORD
 * 
ÍdwDesœedAcûss
,

57 
DWORD
 * 
ÍdwC»©iÚDi¥os™iÚ
,

58 
DWORD
 * 
ÍdwSh¬eMode
,

59 
DWORD
 * 
ÍdwFÏgsAndA‰ribu‹s
)

61 *
ÍdwDesœedAcûss
 = *
ÍdwSh¬eMode
 = *
ÍdwFÏgsAndA‰ribu‹s
 =

62 *
ÍdwC»©iÚDi¥os™iÚ
 = 0;

64 ià((
mode
 & 
ZLIB_FILEFUNC_MODE_READWRITEFILTER
è=ğ
ZLIB_FILEFUNC_MODE_READ
)

66 *
ÍdwDesœedAcûss
 = 
GENERIC_READ
;

67 *
ÍdwC»©iÚDi¥os™iÚ
 = 
OPEN_EXISTING
;

68 *
ÍdwSh¬eMode
 = 
FILE_SHARE_READ
;

70 ià(
mode
 & 
ZLIB_FILEFUNC_MODE_EXISTING
)

72 *
ÍdwDesœedAcûss
 = 
GENERIC_WRITE
 | 
GENERIC_READ
;

73 *
ÍdwC»©iÚDi¥os™iÚ
 = 
OPEN_EXISTING
;

75 ià(
mode
 & 
ZLIB_FILEFUNC_MODE_CREATE
)

77 *
ÍdwDesœedAcûss
 = 
GENERIC_WRITE
 | 
GENERIC_READ
;

78 *
ÍdwC»©iÚDi¥os™iÚ
 = 
CREATE_ALWAYS
;

80 
	}
}

82 
voidpf


83 
	$wš32_bud_iowš
 (
HANDLE
 
hFe
)

85 
voidpf
 
»t
 = 
NULL
;

87 ià((
hFe
 !ğ
NULL
è&& (hF!ğ
INVALID_HANDLE_VALUE
))

89 
WIN32FILE_IOWIN
 
w32fiow
;

90 
w32fiow
.
hf
 = 
hFe
;

91 
w32fiow
.
”rÜ
 = 0;

92 
»t
 = 
	`m®loc
 ( (
WIN32FILE_IOWIN
));

94 ià(
»t
 =ğ
NULL
)

95 
	`Clo£HªdË
 (
hFe
);

97 *((
WIN32FILE_IOWIN
 *è
»t
èğ
w32fiow
;

99  
»t
;

100 
	}
}

102 
voidpf
 
ZCALLBACK


103 
	$wš32_İ’64_fe_func
 (
voidpf
 
İaque
, cÚ¡ *
f’ame
, 
mode
)

105 cÚ¡ *
mode_fİ’
 = 
NULL
;

106 
DWORD
 
dwDesœedAcûss
, 
dwC»©iÚDi¥os™iÚ
, 
dwSh¬eMode
,

107 
dwFÏgsAndA‰ribu‹s
;

108 
HANDLE
 
hFe
 = 
NULL
;

110 
	`wš32_Œª¦©e_İ’_mode
 (
mode
, &
dwDesœedAcûss
, &
dwC»©iÚDi¥os™iÚ
,

111 &
dwSh¬eMode
, &
dwFÏgsAndA‰ribu‹s
);

113 #ifdeà
IOWIN32_USING_WINRT_API


114 #ifdeà
UNICODE


115 ià((
f’ame
 !ğ
NULL
è&& (
dwDesœedAcûss
 != 0))

116 
hFe
 =

117 
	`C»©eFe2
 ((
LPCTSTR
è
f’ame
, 
dwDesœedAcûss
, 
dwSh¬eMode
,

118 
dwC»©iÚDi¥os™iÚ
, 
NULL
);

120 ià((
f’ame
 !ğ
NULL
è&& (
dwDesœedAcûss
 != 0))

122 
WCHAR
 
f’ameW
[
FILENAME_MAX
 + 0x200 + 1];

123 
	`MuÉiBy‹ToWideCh¬
 (
CP_ACP
, 0, (cÚ¡ *è
f’ame
, -1, 
f’ameW
,

124 
FILENAME_MAX
 + 0x200);

125 
hFe
 =

126 
	`C»©eFe2
 (
f’ameW
, 
dwDesœedAcûss
, 
dwSh¬eMode
,

127 
dwC»©iÚDi¥os™iÚ
, 
NULL
);

131 ià((
f’ame
 !ğ
NULL
è&& (
dwDesœedAcûss
 != 0))

132 
hFe
 =

133 
	`C»©eFe
 ((
LPCTSTR
è
f’ame
, 
dwDesœedAcûss
, 
dwSh¬eMode
, 
NULL
,

134 
dwC»©iÚDi¥os™iÚ
, 
dwFÏgsAndA‰ribu‹s
, 
NULL
);

137  
	`wš32_bud_iowš
 (
hFe
);

138 
	}
}

141 
voidpf
 
ZCALLBACK


142 
	$wš32_İ’64_fe_funcA
 (
voidpf
 
İaque
, cÚ¡ *
f’ame
, 
mode
)

144 cÚ¡ *
mode_fİ’
 = 
NULL
;

145 
DWORD
 
dwDesœedAcûss
, 
dwC»©iÚDi¥os™iÚ
, 
dwSh¬eMode
,

146 
dwFÏgsAndA‰ribu‹s
;

147 
HANDLE
 
hFe
 = 
NULL
;

149 
	`wš32_Œª¦©e_İ’_mode
 (
mode
, &
dwDesœedAcûss
, &
dwC»©iÚDi¥os™iÚ
,

150 &
dwSh¬eMode
, &
dwFÏgsAndA‰ribu‹s
);

152 #ifdeà
IOWIN32_USING_WINRT_API


153 ià((
f’ame
 !ğ
NULL
è&& (
dwDesœedAcûss
 != 0))

155 
WCHAR
 
f’ameW
[
FILENAME_MAX
 + 0x200 + 1];

156 
	`MuÉiBy‹ToWideCh¬
 (
CP_ACP
, 0, (cÚ¡ *è
f’ame
, -1, 
f’ameW
,

157 
FILENAME_MAX
 + 0x200);

158 
hFe
 =

159 
	`C»©eFe2
 (
f’ameW
, 
dwDesœedAcûss
, 
dwSh¬eMode
,

160 
dwC»©iÚDi¥os™iÚ
, 
NULL
);

163 ià((
f’ame
 !ğ
NULL
è&& (
dwDesœedAcûss
 != 0))

164 
hFe
 =

165 
	`C»©eFeA
 ((
LPCSTR
è
f’ame
, 
dwDesœedAcûss
, 
dwSh¬eMode
, 
NULL
,

166 
dwC»©iÚDi¥os™iÚ
, 
dwFÏgsAndA‰ribu‹s
, 
NULL
);

169  
	`wš32_bud_iowš
 (
hFe
);

170 
	}
}

173 
voidpf
 
ZCALLBACK


174 
	$wš32_İ’64_fe_funcW
 (
voidpf
 
İaque
, cÚ¡ *
f’ame
, 
mode
)

176 cÚ¡ *
mode_fİ’
 = 
NULL
;

177 
DWORD
 
dwDesœedAcûss
, 
dwC»©iÚDi¥os™iÚ
, 
dwSh¬eMode
,

178 
dwFÏgsAndA‰ribu‹s
;

179 
HANDLE
 
hFe
 = 
NULL
;

181 
	`wš32_Œª¦©e_İ’_mode
 (
mode
, &
dwDesœedAcûss
, &
dwC»©iÚDi¥os™iÚ
,

182 &
dwSh¬eMode
, &
dwFÏgsAndA‰ribu‹s
);

184 #ifdeà
IOWIN32_USING_WINRT_API


185 ià((
f’ame
 !ğ
NULL
è&& (
dwDesœedAcûss
 != 0))

186 
hFe
 =

187 
	`C»©eFe2
 ((
LPCWSTR
è
f’ame
, 
dwDesœedAcûss
, 
dwSh¬eMode
,

188 
dwC»©iÚDi¥os™iÚ
, 
NULL
);

190 ià((
f’ame
 !ğ
NULL
è&& (
dwDesœedAcûss
 != 0))

191 
hFe
 =

192 
	`C»©eFeW
 ((
LPCWSTR
è
f’ame
, 
dwDesœedAcûss
, 
dwSh¬eMode
, 
NULL
,

193 
dwC»©iÚDi¥os™iÚ
, 
dwFÏgsAndA‰ribu‹s
, 
NULL
);

196  
	`wš32_bud_iowš
 (
hFe
);

197 
	}
}

200 
voidpf
 
ZCALLBACK


201 
	$wš32_İ’_fe_func
 (
voidpf
 
İaque
, cÚ¡ *
f’ame
, 
mode
)

203 cÚ¡ *
mode_fİ’
 = 
NULL
;

204 
DWORD
 
dwDesœedAcûss
, 
dwC»©iÚDi¥os™iÚ
, 
dwSh¬eMode
,

205 
dwFÏgsAndA‰ribu‹s
;

206 
HANDLE
 
hFe
 = 
NULL
;

208 
	`wš32_Œª¦©e_İ’_mode
 (
mode
, &
dwDesœedAcûss
, &
dwC»©iÚDi¥os™iÚ
,

209 &
dwSh¬eMode
, &
dwFÏgsAndA‰ribu‹s
);

211 #ifdeà
IOWIN32_USING_WINRT_API


212 #ifdeà
UNICODE


213 ià((
f’ame
 !ğ
NULL
è&& (
dwDesœedAcûss
 != 0))

214 
hFe
 =

215 
	`C»©eFe2
 ((
LPCTSTR
è
f’ame
, 
dwDesœedAcûss
, 
dwSh¬eMode
,

216 
dwC»©iÚDi¥os™iÚ
, 
NULL
);

218 ià((
f’ame
 !ğ
NULL
è&& (
dwDesœedAcûss
 != 0))

220 
WCHAR
 
f’ameW
[
FILENAME_MAX
 + 0x200 + 1];

221 
	`MuÉiBy‹ToWideCh¬
 (
CP_ACP
, 0, (cÚ¡ *è
f’ame
, -1, 
f’ameW
,

222 
FILENAME_MAX
 + 0x200);

223 
hFe
 =

224 
	`C»©eFe2
 (
f’ameW
, 
dwDesœedAcûss
, 
dwSh¬eMode
,

225 
dwC»©iÚDi¥os™iÚ
, 
NULL
);

229 ià((
f’ame
 !ğ
NULL
è&& (
dwDesœedAcûss
 != 0))

230 
hFe
 =

231 
	`C»©eFe
 ((
LPCTSTR
è
f’ame
, 
dwDesœedAcûss
, 
dwSh¬eMode
, 
NULL
,

232 
dwC»©iÚDi¥os™iÚ
, 
dwFÏgsAndA‰ribu‹s
, 
NULL
);

235  
	`wš32_bud_iowš
 (
hFe
);

236 
	}
}

239 
uLÚg
 
ZCALLBACK


240 
	$wš32_»ad_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
, *
buf
, 
uLÚg
 
size
)

242 
uLÚg
 
»t
 = 0;

243 
HANDLE
 
hFe
 = 
NULL
;

244 ià(
¡»am
 !ğ
NULL
)

245 
hFe
 = ((
WIN32FILE_IOWIN
 *è
¡»am
)->
hf
;

247 ià(
hFe
 !ğ
NULL
)

249 ià(!
	`R—dFe
 (
hFe
, 
buf
, 
size
, &
»t
, 
NULL
))

251 
DWORD
 
dwE¼
 = 
	`G‘La¡E¼Ü
 ();

252 ià(
dwE¼
 =ğ
ERROR_HANDLE_EOF
)

253 
dwE¼
 = 0;

254 ((
WIN32FILE_IOWIN
 *è
¡»am
)->
”rÜ
 = (è
dwE¼
;

258  
»t
;

259 
	}
}

262 
uLÚg
 
ZCALLBACK


263 
	$wš32_wr™e_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
, cÚ¡ *
buf
,

264 
uLÚg
 
size
)

266 
uLÚg
 
»t
 = 0;

267 
HANDLE
 
hFe
 = 
NULL
;

268 ià(
¡»am
 !ğ
NULL
)

269 
hFe
 = ((
WIN32FILE_IOWIN
 *è
¡»am
)->
hf
;

271 ià(
hFe
 !ğ
NULL
)

273 ià(!
	`Wr™eFe
 (
hFe
, 
buf
, 
size
, &
»t
, 
NULL
))

275 
DWORD
 
dwE¼
 = 
	`G‘La¡E¼Ü
 ();

276 ià(
dwE¼
 =ğ
ERROR_HANDLE_EOF
)

277 
dwE¼
 = 0;

278 ((
WIN32FILE_IOWIN
 *è
¡»am
)->
”rÜ
 = (è
dwE¼
;

282  
»t
;

283 
	}
}

285 
BOOL


286 
	$MyS‘FePoš‹rEx
 (
HANDLE
 
hFe
, 
LARGE_INTEGER
 
pos
, LARGE_INTEGER * 
ÃwPos
,

287 
DWORD
 
dwMoveM‘hod
)

289 #ifdeà
IOWIN32_USING_WINRT_API


290  
	`S‘FePoš‹rEx
 (
hFe
, 
pos
, 
ÃwPos
, 
dwMoveM‘hod
);

292 
LONG
 
lHigh
 = 
pos
.
HighP¬t
;

293 
DWORD
 
dwNewPos
 = 
	`S‘FePoš‹r
 (
hFe
, 
pos
.
LowP¬t
, &
lHigh
, 
FILE_CURRENT
);

294 
BOOL
 
fOk
 = 
TRUE
;

295 ià(
dwNewPos
 == 0xFFFFFFFF)

296 ià(
	`G‘La¡E¼Ü
 (è!ğ
NO_ERROR
)

297 
fOk
 = 
FALSE
;

298 ià((
ÃwPos
 !ğ
NULL
è&& (
fOk
))

300 
ÃwPos
->
LowP¬t
 = 
dwNewPos
;

301 
ÃwPos
->
HighP¬t
 = 
lHigh
;

303  
fOk
;

305 
	}
}

307 
ZCALLBACK


308 
	$wš32_‹Î_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
)

310 
»t
 = -1;

311 
HANDLE
 
hFe
 = 
NULL
;

312 ià(
¡»am
 !ğ
NULL
)

313 
hFe
 = ((
WIN32FILE_IOWIN
 *è
¡»am
)->
hf
;

314 ià(
hFe
 !ğ
NULL
)

316 
LARGE_INTEGER
 
pos
;

317 
pos
.
QuadP¬t
 = 0;

319 ià(!
	`MyS‘FePoš‹rEx
 (
hFe
, 
pos
, &pos, 
FILE_CURRENT
))

321 
DWORD
 
dwE¼
 = 
	`G‘La¡E¼Ü
 ();

322 ((
WIN32FILE_IOWIN
 *è
¡»am
)->
”rÜ
 = (è
dwE¼
;

323 
»t
 = -1;

326 
»t
 = (è
pos
.
LowP¬t
;

328  
»t
;

329 
	}
}

331 
ZPOS64_T
 
ZCALLBACK


332 
	$wš32_‹Î64_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
)

334 
ZPOS64_T
 
»t
 = (ZPOS64_T) - 1;

335 
HANDLE
 
hFe
 = 
NULL
;

336 ià(
¡»am
 !ğ
NULL
)

337 
hFe
 = ((
WIN32FILE_IOWIN
 *è
¡»am
)->
hf
;

339 ià(
hFe
)

341 
LARGE_INTEGER
 
pos
;

342 
pos
.
QuadP¬t
 = 0;

344 ià(!
	`MyS‘FePoš‹rEx
 (
hFe
, 
pos
, &pos, 
FILE_CURRENT
))

346 
DWORD
 
dwE¼
 = 
	`G‘La¡E¼Ü
 ();

347 ((
WIN32FILE_IOWIN
 *è
¡»am
)->
”rÜ
 = (è
dwE¼
;

348 
»t
 = (
ZPOS64_T
) - 1;

351 
»t
 = 
pos
.
QuadP¬t
;

353  
»t
;

354 
	}
}

357 
ZCALLBACK


358 
	$wš32_£ek_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
, 
uLÚg
 
off£t
, 
Üigš
)

360 
DWORD
 
dwMoveM‘hod
 = 0xFFFFFFFF;

361 
HANDLE
 
hFe
 = 
NULL
;

363 
»t
 = -1;

364 ià(
¡»am
 !ğ
NULL
)

365 
hFe
 = ((
WIN32FILE_IOWIN
 *è
¡»am
)->
hf
;

366 
Üigš
)

368 
ZLIB_FILEFUNC_SEEK_CUR
:

369 
dwMoveM‘hod
 = 
FILE_CURRENT
;

371 
ZLIB_FILEFUNC_SEEK_END
:

372 
dwMoveM‘hod
 = 
FILE_END
;

374 
ZLIB_FILEFUNC_SEEK_SET
:

375 
dwMoveM‘hod
 = 
FILE_BEGIN
;

381 ià(
hFe
 !ğ
NULL
)

383 
LARGE_INTEGER
 
pos
;

384 
pos
.
QuadP¬t
 = 
off£t
;

385 ià(!
	`MyS‘FePoš‹rEx
 (
hFe
, 
pos
, 
NULL
, 
dwMoveM‘hod
))

387 
DWORD
 
dwE¼
 = 
	`G‘La¡E¼Ü
 ();

388 ((
WIN32FILE_IOWIN
 *è
¡»am
)->
”rÜ
 = (è
dwE¼
;

389 
»t
 = -1;

392 
»t
 = 0;

394  
»t
;

395 
	}
}

397 
ZCALLBACK


398 
	$wš32_£ek64_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
, 
ZPOS64_T
 
off£t
,

399 
Üigš
)

401 
DWORD
 
dwMoveM‘hod
 = 0xFFFFFFFF;

402 
HANDLE
 
hFe
 = 
NULL
;

403 
»t
 = -1;

405 ià(
¡»am
 !ğ
NULL
)

406 
hFe
 = ((
WIN32FILE_IOWIN
 *è
¡»am
)->
hf
;

408 
Üigš
)

410 
ZLIB_FILEFUNC_SEEK_CUR
:

411 
dwMoveM‘hod
 = 
FILE_CURRENT
;

413 
ZLIB_FILEFUNC_SEEK_END
:

414 
dwMoveM‘hod
 = 
FILE_END
;

416 
ZLIB_FILEFUNC_SEEK_SET
:

417 
dwMoveM‘hod
 = 
FILE_BEGIN
;

423 ià(
hFe
)

425 
LARGE_INTEGER
 
pos
;

426 
pos
.
QuadP¬t
 = 
off£t
;

427 ià(!
	`MyS‘FePoš‹rEx
 (
hFe
, 
pos
, 
NULL
, 
FILE_CURRENT
))

429 
DWORD
 
dwE¼
 = 
	`G‘La¡E¼Ü
 ();

430 ((
WIN32FILE_IOWIN
 *è
¡»am
)->
”rÜ
 = (è
dwE¼
;

431 
»t
 = -1;

434 
»t
 = 0;

436  
»t
;

437 
	}
}

439 
ZCALLBACK


440 
	$wš32_şo£_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
)

442 
»t
 = -1;

444 ià(
¡»am
 !ğ
NULL
)

446 
HANDLE
 
hFe
;

447 
hFe
 = ((
WIN32FILE_IOWIN
 *è
¡»am
)->
hf
;

448 ià(
hFe
 !ğ
NULL
)

450 
	`Clo£HªdË
 (
hFe
);

451 
»t
 = 0;

453 
	`ä“
 (
¡»am
);

455  
»t
;

456 
	}
}

458 
ZCALLBACK


459 
	$wš32_”rÜ_fe_func
 (
voidpf
 
İaque
, voidpà
¡»am
)

461 
»t
 = -1;

462 ià(
¡»am
 !ğ
NULL
)

464 
»t
 = ((
WIN32FILE_IOWIN
 *è
¡»am
)->
”rÜ
;

466  
»t
;

467 
	}
}

470 
	$fl_wš32_fefunc
 (
zlib_fefunc_def
 * 
pzlib_fefunc_def
)

472 
pzlib_fefunc_def
->
zİ’_fe
 = 
wš32_İ’_fe_func
;

473 
pzlib_fefunc_def
->
z»ad_fe
 = 
wš32_»ad_fe_func
;

474 
pzlib_fefunc_def
->
zwr™e_fe
 = 
wš32_wr™e_fe_func
;

475 
pzlib_fefunc_def
->
z‹Î_fe
 = 
wš32_‹Î_fe_func
;

476 
pzlib_fefunc_def
->
z£ek_fe
 = 
wš32_£ek_fe_func
;

477 
pzlib_fefunc_def
->
zşo£_fe
 = 
wš32_şo£_fe_func
;

478 
pzlib_fefunc_def
->
z”rÜ_fe
 = 
wš32_”rÜ_fe_func
;

479 
pzlib_fefunc_def
->
İaque
 = 
NULL
;

480 
	}
}

483 
	$fl_wš32_fefunc64
 (
zlib_fefunc64_def
 * 
pzlib_fefunc_def
)

485 
pzlib_fefunc_def
->
zİ’64_fe
 = 
wš32_İ’64_fe_func
;

486 
pzlib_fefunc_def
->
z»ad_fe
 = 
wš32_»ad_fe_func
;

487 
pzlib_fefunc_def
->
zwr™e_fe
 = 
wš32_wr™e_fe_func
;

488 
pzlib_fefunc_def
->
z‹Î64_fe
 = 
wš32_‹Î64_fe_func
;

489 
pzlib_fefunc_def
->
z£ek64_fe
 = 
wš32_£ek64_fe_func
;

490 
pzlib_fefunc_def
->
zşo£_fe
 = 
wš32_şo£_fe_func
;

491 
pzlib_fefunc_def
->
z”rÜ_fe
 = 
wš32_”rÜ_fe_func
;

492 
pzlib_fefunc_def
->
İaque
 = 
NULL
;

493 
	}
}

497 
	$fl_wš32_fefunc64A
 (
zlib_fefunc64_def
 * 
pzlib_fefunc_def
)

499 
pzlib_fefunc_def
->
zİ’64_fe
 = 
wš32_İ’64_fe_funcA
;

500 
pzlib_fefunc_def
->
z»ad_fe
 = 
wš32_»ad_fe_func
;

501 
pzlib_fefunc_def
->
zwr™e_fe
 = 
wš32_wr™e_fe_func
;

502 
pzlib_fefunc_def
->
z‹Î64_fe
 = 
wš32_‹Î64_fe_func
;

503 
pzlib_fefunc_def
->
z£ek64_fe
 = 
wš32_£ek64_fe_func
;

504 
pzlib_fefunc_def
->
zşo£_fe
 = 
wš32_şo£_fe_func
;

505 
pzlib_fefunc_def
->
z”rÜ_fe
 = 
wš32_”rÜ_fe_func
;

506 
pzlib_fefunc_def
->
İaque
 = 
NULL
;

507 
	}
}

511 
	$fl_wš32_fefunc64W
 (
zlib_fefunc64_def
 * 
pzlib_fefunc_def
)

513 
pzlib_fefunc_def
->
zİ’64_fe
 = 
wš32_İ’64_fe_funcW
;

514 
pzlib_fefunc_def
->
z»ad_fe
 = 
wš32_»ad_fe_func
;

515 
pzlib_fefunc_def
->
zwr™e_fe
 = 
wš32_wr™e_fe_func
;

516 
pzlib_fefunc_def
->
z‹Î64_fe
 = 
wš32_‹Î64_fe_func
;

517 
pzlib_fefunc_def
->
z£ek64_fe
 = 
wš32_£ek64_fe_func
;

518 
pzlib_fefunc_def
->
zşo£_fe
 = 
wš32_şo£_fe_func
;

519 
pzlib_fefunc_def
->
z”rÜ_fe
 = 
wš32_”rÜ_fe_func
;

520 
pzlib_fefunc_def
->
İaque
 = 
NULL
;

521 
	}
}

	@contrib/minizip/iowin32.h

14 
	~<wšdows.h
>

17 #ifdeà
__ılu¥lus


21 
fl_wš32_fefunc
 
OF
((
zlib_fefunc_def
* 
pzlib_fefunc_def
));

22 
fl_wš32_fefunc64
 
OF
((
zlib_fefunc64_def
* 
pzlib_fefunc_def
));

23 
fl_wš32_fefunc64A
 
OF
((
zlib_fefunc64_def
* 
pzlib_fefunc_def
));

24 
fl_wš32_fefunc64W
 
OF
((
zlib_fefunc64_def
* 
pzlib_fefunc_def
));

26 #ifdeà
__ılu¥lus


	@contrib/minizip/miniunz.c

15 #ià(!
defšed
(
_WIN32
)è&& (!defšed(
WIN32
)è&& (!defšed(
__APPLE__
))

16 #iâdeà
__USE_FILE_OFFSET64


17 
	#__USE_FILE_OFFSET64


	)

19 #iâdeà
__USE_LARGEFILE64


20 
	#__USE_LARGEFILE64


	)

22 #iâdeà
_LARGEFILE64_SOURCE


23 
	#_LARGEFILE64_SOURCE


	)

25 #iâdeà
_FILE_OFFSET_BIT


26 
	#_FILE_OFFSET_BIT
 64

	)

30 #ifdeà
__APPLE__


32 
	#FOPEN_FUNC
(
f’ame
, 
mode
è
	`fİ’
(f’ame, mode)

	)

33 
	#FTELLO_FUNC
(
¡»am
è
	`á–lo
(¡»am)

	)

34 
	#FSEEKO_FUNC
(
¡»am
, 
off£t
, 
Üigš
è
	`f£eko
(¡»am, off£t, origš)

	)

36 
	#FOPEN_FUNC
(
f’ame
, 
mode
è
	`fİ’64
(f’ame, mode)

	)

37 
	#FTELLO_FUNC
(
¡»am
è
	`á–lo64
(¡»am)

	)

38 
	#FSEEKO_FUNC
(
¡»am
, 
off£t
, 
Üigš
è
	`f£eko64
(¡»am, off£t, origš)

	)

42 
	~<¡dio.h
>

43 
	~<¡dlib.h
>

44 
	~<¡ršg.h
>

45 
	~<time.h
>

46 
	~<”ºo.h
>

47 
	~<fú.h
>

49 #ifdeà
_WIN32


50 
	~<dœeù.h
>

51 
	~<io.h
>

53 
	~<uni¡d.h
>

54 
	~<utime.h
>

58 
	~"unz.h
"

60 
	#CASESENSITIVITY
 (0)

	)

61 
	#WRITEBUFFERSIZE
 (8192)

	)

62 
	#MAXFILENAME
 (256)

	)

64 #ifdeà
_WIN32


65 
	#USEWIN32IOAPI


	)

66 
	~"iowš32.h
"

84 
	$chªge_fe_d©e
 (
f’ame
, 
dosd©e
, 
tmu_d©e
)

85 cÚ¡ *
f’ame
;

86 
uLÚg
 
dosd©e
;

87 
tm_unz
 
tmu_d©e
;

89 #ifdeà
_WIN32


90 
HANDLE
 
hFe
;

91 
FILETIME
 
ám
, 
áLoÿl
, 
áC»©e
, 
áLa¡Acc
, 
áLa¡Wr™e
;

93 
hFe
 = 
	`C»©eFeA
 (
f’ame
, 
GENERIC_READ
 | 
GENERIC_WRITE
,

94 0, 
NULL
, 
OPEN_EXISTING
, 0, NULL);

95 
	`G‘FeTime
 (
hFe
, &
áC»©e
, &
áLa¡Acc
, &
áLa¡Wr™e
);

96 
	`DosD©eTimeToFeTime
 ((
WORD
è(
dosd©e
 >> 16), (WORDèdosd©e, &
áLoÿl
);

97 
	`LoÿlFeTimeToFeTime
 (&
áLoÿl
, &
ám
);

98 
	`S‘FeTime
 (
hFe
, &
ám
, &
áLa¡Acc
, &ftm);

99 
	`Clo£HªdË
 (
hFe
);

101 #ifdeà
unix
 || 
__APPLE__


102 
utimbuf
 
ut
;

103 
tm
 
Ãwd©e
;

104 
Ãwd©e
.
tm_£c
 = 
tmu_d©e
.tm_sec;

105 
Ãwd©e
.
tm_mš
 = 
tmu_d©e
.tm_min;

106 
Ãwd©e
.
tm_hour
 = 
tmu_d©e
.tm_hour;

107 
Ãwd©e
.
tm_mday
 = 
tmu_d©e
.tm_mday;

108 
Ãwd©e
.
tm_mÚ
 = 
tmu_d©e
.tm_mon;

109 ià(
tmu_d©e
.
tm_y—r
 > 1900)

110 
Ãwd©e
.
tm_y—r
 = 
tmu_d©e
.tm_year - 1900;

112 
Ãwd©e
.
tm_y—r
 = 
tmu_d©e
.tm_year;

113 
Ãwd©e
.
tm_isd¡
 = -1;

115 
ut
.
aùime
 = ut.
modtime
 = 
	`mktime
 (&
Ãwd©e
);

116 
	`utime
 (
f’ame
, &
ut
);

119 
	}
}

126 
	$mymkdœ
 (
dœÇme
)

127 cÚ¡ *
dœÇme
;

129 
»t
 = 0;

130 #ifdeà
_WIN32


131 
»t
 = 
	`_mkdœ
 (
dœÇme
);

132 #–ià
unix


133 
»t
 = 
	`mkdœ
 (
dœÇme
, 0775);

134 #–ià
__APPLE__


135 
»t
 = 
	`mkdœ
 (
dœÇme
, 0775);

137  
»t
;

138 
	}
}

141 
	$makedœ
 (
Ãwdœ
)

142 *
Ãwdœ
;

144 *
bufãr
;

145 *
p
;

146 
Ën
 = (è
	`¡¾’
 (
Ãwdœ
);

148 ià(
Ën
 <= 0)

151 
bufãr
 = (*è
	`m®loc
 (
Ën
 + 1);

152 ià(
bufãr
 =ğ
NULL
)

154 
	`´štf
 ("Error‡llocating memory\n");

155  
UNZ_INTERNALERROR
;

157 
	`¡rıy
 (
bufãr
, 
Ãwdœ
);

159 ià(
bufãr
[
Ën
 - 1] == '/')

161 
bufãr
[
Ën
 - 1] = '\0';

163 ià(
	`mymkdœ
 (
bufãr
) == 0)

165 
	`ä“
 (
bufãr
);

169 
p
 = 
bufãr
 + 1;

172 
hŞd
;

174 *
p
 && *p != '\\' && *p != '/')

175 
p
++;

176 
hŞd
 = *
p
;

177 *
p
 = 0;

178 ià((
	`mymkdœ
 (
bufãr
è=ğ-1è&& (
”ºo
 =ğ
ENOENT
))

180 
	`´štf
 ("couldn'ˆü—‹ dœeùÜy %s\n", 
bufãr
);

181 
	`ä“
 (
bufãr
);

184 ià(
hŞd
 == 0)

186 *
p
++ = 
hŞd
;

188 
	`ä“
 (
bufãr
);

190 
	}
}

193 
	$do_bªÃr
 ()

195 
´štf


197 
	`´štf
 ("more info‡t http://www.winimage.com/zLibDll/unzip.html\n\n");

198 
	}
}

201 
	$do_h–p
 ()

203 
´štf


210 
	}
}

213 
	$Di¥Ïy64B™sSize
 (
ZPOS64_T
 
n
, 
size_ch¬
)

216 
numb”
[21];

217 
off£t
 = 19;

218 
pos_¡ršg
 = 19;

219 
numb”
[20] = 0;

222 
numb”
[
off£t
] = (è((
n
 % 10) + '0');

223 ià(
numb”
[
off£t
] != '0')

224 
pos_¡ršg
 = 
off£t
;

225 
n
 /= 10;

226 ià(
off£t
 == 0)

228 
off£t
--;

231 
size_di¥Ïy_¡ršg
 = 19 - 
pos_¡ršg
;

232 
size_ch¬
 > 
size_di¥Ïy_¡ršg
)

234 
size_ch¬
--;

235 
	`´štf
 (" ");

239 
	`´štf
 ("%s", &
numb”
[
pos_¡ršg
]);

240 
	}
}

243 
	$do_li¡
 (
uf
)

244 
unzFe
 
uf
;

246 
uLÚg
 
i
;

247 
unz_glob®_šfo64
 
gi
;

248 
”r
;

250 
”r
 = 
	`unzG‘Glob®Info64
 (
uf
, &
gi
);

251 ià(
”r
 !ğ
UNZ_OK
)

252 
	`´štf
 ("”rÜ %d w™h zfš unzG‘Glob®InfØ\n", 
”r
);

253 
´štf


255 
´štf


257 
i
 = 0; i < 
gi
.
numb”_’Œy
; i++)

259 
f’ame_šz
[256];

260 
unz_fe_šfo64
 
fe_šfo
;

261 
uLÚg
 
¿tio
 = 0;

262 cÚ¡ *
¡ršg_m‘hod
;

263 
ch¬Cry±
 = ' ';

264 
”r
 =

265 
	`unzG‘Cu¼’tFeInfo64
 (
uf
, &
fe_šfo
, 
f’ame_šz
,

266  (
f’ame_šz
), 
NULL
, 0, NULL, 0);

267 ià(
”r
 !ğ
UNZ_OK
)

269 
	`´štf
 ("”rÜ %d w™h zfš unzG‘Cu¼’tFeInfo\n", 
”r
);

272 ià(
fe_šfo
.
uncom´es£d_size
 > 0)

273 
¿tio
 =

274 (
uLÚg
è((
fe_šfo
.
com´es£d_size
 * 100) /

275 
fe_šfo
.
uncom´es£d_size
);

278 ià((
fe_šfo
.
æag
 & 1) != 0)

279 
ch¬Cry±
 = '*';

281 ià(
fe_šfo
.
com´essiÚ_m‘hod
 == 0)

282 
¡ršg_m‘hod
 = "Stored";

283 ià(
fe_šfo
.
com´essiÚ_m‘hod
 =ğ
Z_DEFLATED
)

285 
uIÁ
 
iLev–
 = (uIÁè((
fe_šfo
.
æag
 & 0x6) / 2);

286 ià(
iLev–
 == 0)

287 
¡ršg_m‘hod
 = "Defl:N";

288 ià(
iLev–
 == 1)

289 
¡ršg_m‘hod
 = "Defl:X";

290 ià((
iLev–
 == 2) || (iLevel == 3))

291 
¡ršg_m‘hod
 = "Defl:F";

293 ià(
fe_šfo
.
com´essiÚ_m‘hod
 =ğ
Z_BZIP2ED
)

295 
¡ršg_m‘hod
 = "BZip2 ";

298 
¡ršg_m‘hod
 = "Unkn. ";

300 
	`Di¥Ïy64B™sSize
 (
fe_šfo
.
uncom´es£d_size
, 7);

301 
	`´štf
 (" %6s%c", 
¡ršg_m‘hod
, 
ch¬Cry±
);

302 
	`Di¥Ïy64B™sSize
 (
fe_šfo
.
com´es£d_size
, 7);

303 
	`´štf
 (" %3lu%% %2.2lu-%2.2lu-%2.2lu %2.2lu:%2.2lu %8.8lx %s\n",

304 
¿tio
,

305 (
uLÚg
è
fe_šfo
.
tmu_d©e
.
tm_mÚ
 + 1,

306 (
uLÚg
è
fe_šfo
.
tmu_d©e
.
tm_mday
,

307 (
uLÚg
è
fe_šfo
.
tmu_d©e
.
tm_y—r
 % 100,

308 (
uLÚg
è
fe_šfo
.
tmu_d©e
.
tm_hour
,

309 (
uLÚg
è
fe_šfo
.
tmu_d©e
.
tm_mš
, (uLÚgèfe_šfo.
üc
,

310 
f’ame_šz
);

311 ià((
i
 + 1è< 
gi
.
numb”_’Œy
)

313 
”r
 = 
	`unzGoToNextFe
 (
uf
);

314 ià(
”r
 !ğ
UNZ_OK
)

316 
	`´štf
 ("”rÜ %d w™h zfš unzGoToNextFe\n", 
”r
);

323 
	}
}

327 
	$do_exŒaù_cu¼’tfe
 (
uf
, 
pİt_exŒaù_w™hout_·th
, 
pİt_ov”wr™e
,

328 
·sswÜd
)

329 
unzFe
 
uf
;

330 cÚ¡ *
pİt_exŒaù_w™hout_·th
;

331 *
pİt_ov”wr™e
;

332 cÚ¡ *
·sswÜd
;

334 
f’ame_šz
[256];

335 *
f’ame_w™hou©h
;

336 *
p
;

337 
”r
 = 
UNZ_OK
;

338 
FILE
 *
fout
 = 
NULL
;

339 *
buf
;

340 
uIÁ
 
size_buf
;

342 
unz_fe_šfo64
 
fe_šfo
;

343 
uLÚg
 
¿tio
 = 0;

344 
”r
 =

345 
	`unzG‘Cu¼’tFeInfo64
 (
uf
, &
fe_šfo
, 
f’ame_šz
,

346  (
f’ame_šz
), 
NULL
, 0, NULL, 0);

348 ià(
”r
 !ğ
UNZ_OK
)

350 
	`´štf
 ("”rÜ %d w™h zfš unzG‘Cu¼’tFeInfo\n", 
”r
);

351  
”r
;

354 
size_buf
 = 
WRITEBUFFERSIZE
;

355 
buf
 = (*è
	`m®loc
 (
size_buf
);

356 ià(
buf
 =ğ
NULL
)

358 
	`´štf
 ("Error‡llocating memory\n");

359  
UNZ_INTERNALERROR
;

362 
p
 = 
f’ame_w™hou©h
 = 
f’ame_šz
;

363 (*
p
) != '\0')

365 ià(((*
p
) == '/') || ((*p) == '\\'))

366 
f’ame_w™hou©h
 = 
p
 + 1;

367 
p
++;

370 ià((*
f’ame_w™hou©h
) == '\0')

372 ià((*
pİt_exŒaù_w™hout_·th
) == 0)

374 
	`´štf
 ("ü—tšg dœeùÜy: %s\n", 
f’ame_šz
);

375 
	`mymkdœ
 (
f’ame_šz
);

380 cÚ¡ *
wr™e_f’ame
;

381 
sk
 = 0;

383 ià((*
pİt_exŒaù_w™hout_·th
) == 0)

384 
wr™e_f’ame
 = 
f’ame_šz
;

386 
wr™e_f’ame
 = 
f’ame_w™hou©h
;

388 
”r
 = 
	`unzO³nCu¼’tFePasswÜd
 (
uf
, 
·sswÜd
);

389 ià(
”r
 !ğ
UNZ_OK
)

391 
	`´štf
 ("error %d with zipfile in unzOpenCurrentFilePassword\n",

392 
”r
);

395 ià(((*
pİt_ov”wr™e
è=ğ0è&& (
”r
 =ğ
UNZ_OK
))

397 
»p
 = 0;

398 
FILE
 *
áe¡exi¡
;

399 
áe¡exi¡
 = 
	`FOPEN_FUNC
 (
wr™e_f’ame
, "rb");

400 ià(
áe¡exi¡
 !ğ
NULL
)

402 
	`fşo£
 (
áe¡exi¡
);

405 
ªsw”
[128];

406 
»t
;

408 
´štf


410 
wr™e_f’ame
);

411 
»t
 = 
	`sÿnf
 ("%1s", 
ªsw”
);

412 ià(
»t
 != 1)

414 
	`ex™
 (
EXIT_FAILURE
);

416 
»p
 = 
ªsw”
[0];

417 ià((
»p
 >= 'a') && (rep <= 'z'))

418 
»p
 -= 0x20;

420 (
»p
 != 'Y') && (rep != 'N') && (rep != 'A'));

423 ià(
»p
 == 'N')

424 
sk
 = 1;

426 ià(
»p
 == 'A')

427 *
pİt_ov”wr™e
 = 1;

430 ià((
sk
 =ğ0è&& (
”r
 =ğ
UNZ_OK
))

432 
fout
 = 
	`FOPEN_FUNC
 (
wr™e_f’ame
, "wb");

434 ià((
fout
 =ğ
NULL
è&& ((*
pİt_exŒaù_w™hout_·th
) == 0) &&

435 (
f’ame_w™hou©h
 !ğ(*è
f’ame_šz
))

437 
c
 = *(
f’ame_w™hou©h
 - 1);

438 *(
f’ame_w™hou©h
 - 1) = '\0';

439 
	`makedœ
 (
wr™e_f’ame
);

440 *(
f’ame_w™hou©h
 - 1èğ
c
;

441 
fout
 = 
	`FOPEN_FUNC
 (
wr™e_f’ame
, "wb");

444 ià(
fout
 =ğ
NULL
)

446 
	`´štf
 ("”rÜ o³nšg %s\n", 
wr™e_f’ame
);

450 ià(
fout
 !ğ
NULL
)

452 
	`´štf
 ("ƒxŒaùšg: %s\n", 
wr™e_f’ame
);

456 
”r
 = 
	`unzR—dCu¼’tFe
 (
uf
, 
buf
, 
size_buf
);

457 ià(
”r
 < 0)

459 
	`´štf
 ("error %d with zipfile in unzReadCurrentFile\n",

460 
”r
);

463 ià(
”r
 > 0)

464 ià(
	`fwr™e
 (
buf
, 
”r
, 1, 
fout
) != 1)

466 
	`´štf
 ("error in writingƒxtracted file\n");

467 
”r
 = 
UNZ_ERRNO
;

471 
”r
 > 0);

472 ià(
fout
)

473 
	`fşo£
 (
fout
);

475 ià(
”r
 == 0)

476 
	`chªge_fe_d©e
 (
wr™e_f’ame
, 
fe_šfo
.
dosD©e
,

477 
fe_šfo
.
tmu_d©e
);

480 ià(
”r
 =ğ
UNZ_OK
)

482 
”r
 = 
	`unzClo£Cu¼’tFe
 (
uf
);

483 ià(
”r
 !ğ
UNZ_OK
)

485 
	`´štf
 ("”rÜ %d w™h zfš unzClo£Cu¼’tFe\n", 
”r
);

489 
	`unzClo£Cu¼’tFe
 (
uf
);

492 
	`ä“
 (
buf
);

493  
”r
;

494 
	}
}

498 
	$do_exŒaù
 (
uf
, 
İt_exŒaù_w™hout_·th
, 
İt_ov”wr™e
, 
·sswÜd
)

499 
unzFe
 
uf
;

500 
İt_exŒaù_w™hout_·th
;

501 
İt_ov”wr™e
;

502 cÚ¡ *
·sswÜd
;

504 
uLÚg
 
i
;

505 
unz_glob®_šfo64
 
gi
;

506 
”r
;

507 
FILE
 *
fout
 = 
NULL
;

509 
”r
 = 
	`unzG‘Glob®Info64
 (
uf
, &
gi
);

510 ià(
”r
 !ğ
UNZ_OK
)

511 
	`´štf
 ("”rÜ %d w™h zfš unzG‘Glob®InfØ\n", 
”r
);

513 
i
 = 0; i < 
gi
.
numb”_’Œy
; i++)

515 ià(
	`do_exŒaù_cu¼’tfe
 (
uf
, &
İt_exŒaù_w™hout_·th
,

516 &
İt_ov”wr™e
, 
·sswÜd
è!ğ
UNZ_OK
)

519 ià((
i
 + 1è< 
gi
.
numb”_’Œy
)

521 
”r
 = 
	`unzGoToNextFe
 (
uf
);

522 ià(
”r
 !ğ
UNZ_OK
)

524 
	`´štf
 ("”rÜ %d w™h zfš unzGoToNextFe\n", 
”r
);

531 
	}
}

534 
	$do_exŒaù_Úefe
 (
uf
, 
f’ame
, 
İt_exŒaù_w™hout_·th
, 
İt_ov”wr™e
,

535 
·sswÜd
)

536 
unzFe
 
uf
;

537 cÚ¡ *
f’ame
;

538 
İt_exŒaù_w™hout_·th
;

539 
İt_ov”wr™e
;

540 cÚ¡ *
·sswÜd
;

542 
”r
 = 
UNZ_OK
;

543 ià(
	`unzLoÿ‹Fe
 (
uf
, 
f’ame
, 
CASESENSITIVITY
è!ğ
UNZ_OK
)

545 
	`´štf
 ("f% nÙ found iÀthzfe\n", 
f’ame
);

549 ià(
	`do_exŒaù_cu¼’tfe
 (
uf
, &
İt_exŒaù_w™hout_·th
,

550 &
İt_ov”wr™e
, 
·sswÜd
è=ğ
UNZ_OK
)

554 
	}
}

558 
	$maš
 (
¬gc
, 
¬gv
)

559 
¬gc
;

560 *
¬gv
[];

562 cÚ¡ *
zf’ame
 = 
NULL
;

563 cÚ¡ *
f’ame_to_exŒaù
 = 
NULL
;

564 cÚ¡ *
·sswÜd
 = 
NULL
;

565 
f’ame_Œy
[
MAXFILENAME
 + 16] = "";

566 
i
;

567 
»t_v®ue
 = 0;

568 
İt_do_li¡
 = 0;

569 
İt_do_exŒaù
 = 1;

570 
İt_do_exŒaù_w™hou©h
 = 0;

571 
İt_ov”wr™e
 = 0;

572 
İt_exŒaùdœ
 = 0;

573 cÚ¡ *
dœÇme
 = 
NULL
;

574 
unzFe
 
uf
 = 
NULL
;

576 
	`do_bªÃr
 ();

577 ià(
¬gc
 == 1)

579 
	`do_h–p
 ();

584 
i
 = 1; i < 
¬gc
; i++)

586 ià((*
¬gv
[
i
]) == '-')

588 cÚ¡ *
p
 = 
¬gv
[
i
] + 1;

590 (*
p
) != '\0')

592 
c
 = *(
p
++);;

593 ià((
c
 == 'l') || (c == 'L'))

594 
İt_do_li¡
 = 1;

595 ià((
c
 == 'v') || (c == 'V'))

596 
İt_do_li¡
 = 1;

597 ià((
c
 == 'x') || (c == 'X'))

598 
İt_do_exŒaù
 = 1;

599 ià((
c
 == 'e') || (c == 'E'))

600 
İt_do_exŒaù
 = 
İt_do_exŒaù_w™hou©h
 = 1;

601 ià((
c
 == 'o') || (c == 'O'))

602 
İt_ov”wr™e
 = 1;

603 ià((
c
 == 'd') || (c == 'D'))

605 
İt_exŒaùdœ
 = 1;

606 
dœÇme
 = 
¬gv
[
i
 + 1];

609 ià(((
c
 =ğ'p'è|| (ø=ğ'P')è&& (
i
 + 1 < 
¬gc
))

611 
·sswÜd
 = 
¬gv
[
i
 + 1];

612 
i
++;

618 ià(
zf’ame
 =ğ
NULL
)

619 
zf’ame
 = 
¬gv
[
i
];

620 ià((
f’ame_to_exŒaù
 =ğ
NULL
è&& (!
İt_exŒaùdœ
))

621 
f’ame_to_exŒaù
 = 
¬gv
[
i
];

626 ià(
zf’ame
 !ğ
NULL
)

629 #ifdeà
USEWIN32IOAPI


630 
zlib_fefunc64_def
 
ffunc
;

633 
	`¡ºıy
 (
f’ame_Œy
, 
zf’ame
, 
MAXFILENAME
 - 1);

635 
f’ame_Œy
[
MAXFILENAME
] = '\0';

637 #ifdeà
USEWIN32IOAPI


638 
	`fl_wš32_fefunc64A
 (&
ffunc
);

639 
uf
 = 
	`unzO³n2_64
 (
zf’ame
, &
ffunc
);

641 
uf
 = 
	`unzO³n64
 (
zf’ame
);

643 ià(
uf
 =ğ
NULL
)

645 
	`¡rÿt
 (
f’ame_Œy
, ".zip");

646 #ifdeà
USEWIN32IOAPI


647 
uf
 = 
	`unzO³n2_64
 (
f’ame_Œy
, &
ffunc
);

649 
uf
 = 
	`unzO³n64
 (
f’ame_Œy
);

654 ià(
uf
 =ğ
NULL
)

656 
	`´štf
 ("CªnÙ o³À% Ü %s.z\n", 
zf’ame
, zipfilename);

659 
	`´štf
 ("% İ’ed\n", 
f’ame_Œy
);

661 ià(
İt_do_li¡
 == 1)

662 
»t_v®ue
 = 
	`do_li¡
 (
uf
);

663 ià(
İt_do_exŒaù
 == 1)

665 #ifdeà
_WIN32


666 ià(
İt_exŒaùdœ
 && 
	`_chdœ
 (
dœÇme
))

668 ià(
İt_exŒaùdœ
 && 
	`chdœ
 (
dœÇme
))

671 
	`´štf
 ("E¼Ü chªgšg iÁØ%s,‡bÜtšg\n", 
dœÇme
);

672 
	`ex™
 (-1);

675 ià(
f’ame_to_exŒaù
 =ğ
NULL
)

676 
»t_v®ue
 =

677 
	`do_exŒaù
 (
uf
, 
İt_do_exŒaù_w™hou©h
, 
İt_ov”wr™e
,

678 
·sswÜd
);

680 
»t_v®ue
 =

681 
	`do_exŒaù_Úefe
 (
uf
, 
f’ame_to_exŒaù
,

682 
İt_do_exŒaù_w™hou©h
, 
İt_ov”wr™e
,

683 
·sswÜd
);

686 
	`unzClo£
 (
uf
);

688  
»t_v®ue
;

689 
	}
}

	@contrib/minizip/minizip.c

16 #ià(!
defšed
(
_WIN32
)è&& (!defšed(
WIN32
)è&& (!defšed(
__APPLE__
))

17 #iâdeà
__USE_FILE_OFFSET64


18 
	#__USE_FILE_OFFSET64


	)

20 #iâdeà
__USE_LARGEFILE64


21 
	#__USE_LARGEFILE64


	)

23 #iâdeà
_LARGEFILE64_SOURCE


24 
	#_LARGEFILE64_SOURCE


	)

26 #iâdeà
_FILE_OFFSET_BIT


27 
	#_FILE_OFFSET_BIT
 64

	)

31 #ifdeà
__APPLE__


33 
	#FOPEN_FUNC
(
f’ame
, 
mode
è
	`fİ’
(f’ame, mode)

	)

34 
	#FTELLO_FUNC
(
¡»am
è
	`á–lo
(¡»am)

	)

35 
	#FSEEKO_FUNC
(
¡»am
, 
off£t
, 
Üigš
è
	`f£eko
(¡»am, off£t, origš)

	)

37 
	#FOPEN_FUNC
(
f’ame
, 
mode
è
	`fİ’64
(f’ame, mode)

	)

38 
	#FTELLO_FUNC
(
¡»am
è
	`á–lo64
(¡»am)

	)

39 
	#FSEEKO_FUNC
(
¡»am
, 
off£t
, 
Üigš
è
	`f£eko64
(¡»am, off£t, origš)

	)

44 
	~<¡dio.h
>

45 
	~<¡dlib.h
>

46 
	~<¡ršg.h
>

47 
	~<time.h
>

48 
	~<”ºo.h
>

49 
	~<fú.h
>

51 #ifdeà
_WIN32


52 
	~<dœeù.h
>

53 
	~<io.h
>

55 
	~<uni¡d.h
>

56 
	~<utime.h
>

57 
	~<sys/ty³s.h
>

58 
	~<sys/¡©.h
>

61 
	~"z.h
"

63 #ifdeà
_WIN32


64 
	#USEWIN32IOAPI


	)

65 
	~"iowš32.h
"

70 
	#WRITEBUFFERSIZE
 (16384)

	)

71 
	#MAXFILENAME
 (256)

	)

73 #ifdeà
_WIN32


74 
uLÚg


75 
	$f‘ime
 (
f
, 
tmz
, 
dt
)

76 *
f
;

77 
tm_z
 *
tmz
;

78 
uLÚg
 *
dt
;

80 
»t
 = 0;

82 
FILETIME
 
áLoÿl
;

83 
HANDLE
 
hFšd
;

84 
WIN32_FIND_DATAA
 
ff32
;

86 
hFšd
 = 
	`FšdFœ¡FeA
 (
f
, &
ff32
);

87 ià(
hFšd
 !ğ
INVALID_HANDLE_VALUE
)

89 
	`FeTimeToLoÿlFeTime
 (&(
ff32
.
áLa¡Wr™eTime
), &
áLoÿl
);

90 
	`FeTimeToDosD©eTime
 (&
áLoÿl
, ((
LPWORD
è
dt
) + 1,

91 ((
LPWORD
è
dt
) + 0);

92 
	`FšdClo£
 (
hFšd
);

93 
»t
 = 1;

96  
»t
;

97 
	}
}

99 #ifdeà
unix
 || 
__APPLE__


100 
uLÚg


101 
	$f‘ime
 (
f
, 
tmz
, 
dt
)

102 *
f
;

103 
tm_z
 *
tmz
;

104 
uLÚg
 *
dt
;

106 
»t
 = 0;

107 
¡©
 
s
;

108 
tm
 *
fed©e
;

109 
time_t
 
tm_t
 = 0;

111 ià(
	`¡rcmp
 (
f
, "-") != 0)

113 
Çme
[
MAXFILENAME
 + 1];

114 
Ën
 = 
	`¡¾’
 (
f
);

115 ià(
Ën
 > 
MAXFILENAME
)

116 
Ën
 = 
MAXFILENAME
;

118 
	`¡ºıy
 (
Çme
, 
f
, 
MAXFILENAME
 - 1);

120 
Çme
[
MAXFILENAME
] = '\0';

122 ià(
Çme
[
Ën
 - 1] == '/')

123 
Çme
[
Ën
 - 1] = '\0';

125 ià(
	`¡©
 (
Çme
, &
s
) == 0)

127 
tm_t
 = 
s
.
¡_mtime
;

128 
»t
 = 1;

131 
fed©e
 = 
	`loÿÉime
 (&
tm_t
);

133 
tmz
->
tm_£c
 = 
fed©e
->tm_sec;

134 
tmz
->
tm_mš
 = 
fed©e
->tm_min;

135 
tmz
->
tm_hour
 = 
fed©e
->tm_hour;

136 
tmz
->
tm_mday
 = 
fed©e
->tm_mday;

137 
tmz
->
tm_mÚ
 = 
fed©e
->tm_mon;

138 
tmz
->
tm_y—r
 = 
fed©e
->tm_year;

140  
»t
;

141 
	}
}

143 
uLÚg


144 
	$f‘ime
 (
f
, 
tmz
, 
dt
)

145 *
f
;

146 
tm_z
 *
tmz
;

147 
uLÚg
 *
dt
;

150 
	}
}

158 
	$check_exi¡_fe
 (
f’ame
)

159 cÚ¡ *
f’ame
;

161 
FILE
 *
áe¡exi¡
;

162 
»t
 = 1;

163 
áe¡exi¡
 = 
	`FOPEN_FUNC
 (
f’ame
, "rb");

164 ià(
áe¡exi¡
 =ğ
NULL
)

165 
»t
 = 0;

167 
	`fşo£
 (
áe¡exi¡
);

168  
»t
;

169 
	}
}

172 
	$do_bªÃr
 ()

174 
´štf


176 
´štf


178 
	}
}

181 
	$do_h–p
 ()

183 
´štf


189 
	}
}

194 
	$g‘FeCrc
 (cÚ¡ *
f’amešz
, *
buf
, 
size_buf
,

195 *
»suÉ_üc
)

197 
ÿlcuÏ‹_üc
 = 0;

198 
”r
 = 
ZIP_OK
;

199 
FILE
 *
fš
 = 
	`FOPEN_FUNC
 (
f’amešz
, "rb");

201 
size_»ad
 = 0;

202 
tÙ®_»ad
 = 0;

203 ià(
fš
 =ğ
NULL
)

205 
”r
 = 
ZIP_ERRNO
;

208 ià(
”r
 =ğ
ZIP_OK
)

211 
”r
 = 
ZIP_OK
;

212 
size_»ad
 = (è
	`ä—d
 (
buf
, 1, 
size_buf
, 
fš
);

213 ià(
size_»ad
 < 
size_buf
)

214 ià(
	`ãof
 (
fš
) == 0)

216 
	`´štf
 ("”rÜ iÀ»adšg %s\n", 
f’amešz
);

217 
”r
 = 
ZIP_ERRNO
;

220 ià(
size_»ad
 > 0)

221 
ÿlcuÏ‹_üc
 = 
	`üc32
 (ÿlcuÏ‹_üc, 
buf
, 
size_»ad
);

222 
tÙ®_»ad
 +ğ
size_»ad
;

225 (
”r
 =ğ
ZIP_OK
è&& (
size_»ad
 > 0));

227 ià(
fš
)

228 
	`fşo£
 (
fš
);

230 *
»suÉ_üc
 = 
ÿlcuÏ‹_üc
;

231 
	`´štf
 ("f% üø%lx\n", 
f’amešz
, 
ÿlcuÏ‹_üc
);

232  
”r
;

233 
	}
}

236 
	$isL¬geFe
 (cÚ¡ *
f’ame
)

238 
ÏrgeFe
 = 0;

239 
ZPOS64_T
 
pos
 = 0;

240 
FILE
 *
pFe
 = 
	`FOPEN_FUNC
 (
f’ame
, "rb");

242 ià(
pFe
 !ğ
NULL
)

244 
n
 = 
	`FSEEKO_FUNC
 (
pFe
, 0, 
SEEK_END
);

245 
pos
 = 
	`FTELLO_FUNC
 (
pFe
);

247 
	`´štf
 ("F: % i %Îd by‹s\n", 
f’ame
, 
pos
);

249 ià(
pos
 >= 0xffffffff)

250 
ÏrgeFe
 = 1;

252 
	`fşo£
 (
pFe
);

255  
ÏrgeFe
;

256 
	}
}

259 
	$maš
 (
¬gc
, 
¬gv
)

260 
¬gc
;

261 *
¬gv
[];

263 
i
;

264 
İt_ov”wr™e
 = 0;

265 
İt_com´ess_Ëv–
 = 
Z_DEFAULT_COMPRESSION
;

266 
İt_exşude_·th
 = 0;

267 
zf’am—rg
 = 0;

268 
f’ame_Œy
[
MAXFILENAME
 + 16];

269 
zok
;

270 
”r
 = 0;

271 
size_buf
 = 0;

272 *
buf
 = 
NULL
;

273 cÚ¡ *
·sswÜd
 = 
NULL
;

276 
	`do_bªÃr
 ();

277 ià(
¬gc
 == 1)

279 
	`do_h–p
 ();

284 
i
 = 1; i < 
¬gc
; i++)

286 ià((*
¬gv
[
i
]) == '-')

288 cÚ¡ *
p
 = 
¬gv
[
i
] + 1;

290 (*
p
) != '\0')

292 
c
 = *(
p
++);;

293 ià((
c
 == 'o') || (c == 'O'))

294 
İt_ov”wr™e
 = 1;

295 ià((
c
 == 'a') || (c == 'A'))

296 
İt_ov”wr™e
 = 2;

297 ià((
c
 >= '0') && (c <= '9'))

298 
İt_com´ess_Ëv–
 = 
c
 - '0';

299 ià((
c
 == 'j') || (c == 'J'))

300 
İt_exşude_·th
 = 1;

302 ià(((
c
 =ğ'p'è|| (ø=ğ'P')è&& (
i
 + 1 < 
¬gc
))

304 
·sswÜd
 = 
¬gv
[
i
 + 1];

305 
i
++;

311 ià(
zf’am—rg
 == 0)

313 
zf’am—rg
 = 
i
;

319 
size_buf
 = 
WRITEBUFFERSIZE
;

320 
buf
 = (*è
	`m®loc
 (
size_buf
);

321 ià(
buf
 =ğ
NULL
)

323 
	`´štf
 ("Error‡llocating memory\n");

324  
ZIP_INTERNALERROR
;

327 ià(
zf’am—rg
 == 0)

329 
zok
 = 0;

333 
i
, 
Ën
;

334 
dÙ_found
 = 0;

336 
zok
 = 1;

337 
	`¡ºıy
 (
f’ame_Œy
, 
¬gv
[
zf’am—rg
], 
MAXFILENAME
 - 1);

339 
f’ame_Œy
[
MAXFILENAME
] = '\0';

341 
Ën
 = (è
	`¡¾’
 (
f’ame_Œy
);

342 
i
 = 0; i < 
Ën
; i++)

343 ià(
f’ame_Œy
[
i
] == '.')

344 
dÙ_found
 = 1;

346 ià(
dÙ_found
 == 0)

347 
	`¡rÿt
 (
f’ame_Œy
, ".zip");

349 ià(
İt_ov”wr™e
 == 2)

352 ià(
	`check_exi¡_fe
 (
f’ame_Œy
) == 0)

353 
İt_ov”wr™e
 = 1;

355 ià(
İt_ov”wr™e
 == 0)

356 ià(
	`check_exi¡_fe
 (
f’ame_Œy
) != 0)

358 
»p
 = 0;

361 
ªsw”
[128];

362 
»t
;

363 
´štf


365 
f’ame_Œy
);

366 
»t
 = 
	`sÿnf
 ("%1s", 
ªsw”
);

367 ià(
»t
 != 1)

369 
	`ex™
 (
EXIT_FAILURE
);

371 
»p
 = 
ªsw”
[0];

372 ià((
»p
 >= 'a') && (rep <= 'z'))

373 
»p
 -= 0x20;

375 (
»p
 != 'Y') && (rep != 'N') && (rep != 'A'));

376 ià(
»p
 == 'N')

377 
zok
 = 0;

378 ià(
»p
 == 'A')

379 
İt_ov”wr™e
 = 2;

383 ià(
zok
 == 1)

385 
zFe
 
zf
;

386 
”rşo£
;

387 #ifdeà
USEWIN32IOAPI


388 
zlib_fefunc64_def
 
ffunc
;

389 
	`fl_wš32_fefunc64A
 (&
ffunc
);

390 
zf
 =

391 
	`zO³n2_64
 (
f’ame_Œy
, (
İt_ov”wr™e
 =ğ2è? 2 : 0, 
NULL
,

392 &
ffunc
);

394 
zf
 = 
	`zO³n64
 (
f’ame_Œy
, (
İt_ov”wr™e
 == 2) ? 2 : 0);

397 ià(
zf
 =ğ
NULL
)

399 
	`´štf
 ("”rÜ o³nšg %s\n", 
f’ame_Œy
);

400 
”r
 = 
ZIP_ERRNO
;

403 
	`´štf
 ("ü—tšg %s\n", 
f’ame_Œy
);

405 
i
 = 
zf’am—rg
 + 1; (˜< 
¬gc
è&& (
”r
 =ğ
ZIP_OK
); i++)

407 ià(!((((*(
¬gv
[
i
])) == '-') || ((*(argv[i])) == '/')) &&

408 ((
¬gv
[
i
][1] == 'o') || (argv[i][1] == 'O') ||

409 (
¬gv
[
i
][1] == 'a') || (argv[i][1] == 'A') ||

410 (
¬gv
[
i
][1] == 'p') || (argv[i][1] == 'P') ||

411 ((
¬gv
[
i
][1] >= '0') || (argv[i][1] <= '9'))) &&

412 (
	`¡¾’
 (
¬gv
[
i
]) == 2)))

414 
FILE
 *
fš
;

415 
size_»ad
;

416 cÚ¡ *
f’amešz
 = 
¬gv
[
i
];

417 cÚ¡ *
§vef’amešz
;

418 
z_fešfo
 
zi
;

419 
ücFe
 = 0;

420 
z64
 = 0;

422 
zi
.
tmz_d©e
.
tm_£c
 = zi.tmz_d©e.
tm_mš
 = zi.tmz_d©e.
tm_hour
 =

423 
zi
.
tmz_d©e
.
tm_mday
 = zi.tmz_d©e.
tm_mÚ
 =

424 
zi
.
tmz_d©e
.
tm_y—r
 = 0;

425 
zi
.
dosD©e
 = 0;

426 
zi
.
š‹º®_ç
 = 0;

427 
zi
.
ex‹º®_ç
 = 0;

428 
	`f‘ime
 (
f’amešz
, &
zi
.
tmz_d©e
, &zi.
dosD©e
);

436 ià((
·sswÜd
 !ğ
NULL
è&& (
”r
 =ğ
ZIP_OK
))

437 
”r
 = 
	`g‘FeCrc
 (
f’amešz
, 
buf
, 
size_buf
, &
ücFe
);

439 
z64
 = 
	`isL¬geFe
 (
f’amešz
);

443 
§vef’amešz
 = 
f’amešz
;

444 
§vef’amešz
[0] == '\\'

445 || 
§vef’amešz
[0] == '/')

447 
§vef’amešz
++;

451 ià(
İt_exşude_·th
)

453 cÚ¡ *
tmµŒ
;

454 cÚ¡ *
Ï¡¦ash
 = 0;

455 
tmµŒ
 = 
§vef’amešz
; *tmpptr;mpptr++)

457 ià(*
tmµŒ
 == '\\' || *tmpptr == '/')

459 
Ï¡¦ash
 = 
tmµŒ
;

462 ià(
Ï¡¦ash
 !ğ
NULL
)

464 
§vef’amešz
 = 
Ï¡¦ash
 + 1;

469 
”r
 = 
	`zO³nNewFeInZ3_64
 (
zf
, 
§vef’amešz
, &
zi
,

470 
NULL
, 0, NULL, 0,

471 
NULL
 ,

472 (
İt_com´ess_Ëv–
 !=

473 0è? 
Z_DEFLATED
 : 0,

474 
İt_com´ess_Ëv–
, 0,

476 -
MAX_WBITS
, 
DEF_MEM_LEVEL
,

477 
Z_DEFAULT_STRATEGY
, 
·sswÜd
,

478 
ücFe
, 
z64
);

480 ià(
”r
 !ğ
ZIP_OK
)

481 
	`´štf
 ("”rÜ iÀİ’šg % š zfe\n", 
f’amešz
);

484 
fš
 = 
	`FOPEN_FUNC
 (
f’amešz
, "rb");

485 ià(
fš
 =ğ
NULL
)

487 
”r
 = 
ZIP_ERRNO
;

488 
	`´štf
 ("error in opening %s for„eading\n",

489 
f’amešz
);

493 ià(
”r
 =ğ
ZIP_OK
)

496 
”r
 = 
ZIP_OK
;

497 
size_»ad
 = (è
	`ä—d
 (
buf
, 1, 
size_buf
, 
fš
);

498 ià(
size_»ad
 < 
size_buf
)

499 ià(
	`ãof
 (
fš
) == 0)

501 
	`´štf
 ("”rÜ iÀ»adšg %s\n", 
f’amešz
);

502 
”r
 = 
ZIP_ERRNO
;

505 ià(
size_»ad
 > 0)

507 
”r
 = 
	`zWr™eInFeInZ
 (
zf
, 
buf
, 
size_»ad
);

508 ià(
”r
 < 0)

510 
	`´štf
 ("error in writing %s inhe zipfile\n",

511 
f’amešz
);

516 (
”r
 =ğ
ZIP_OK
è&& (
size_»ad
 > 0));

518 ià(
fš
)

519 
	`fşo£
 (
fš
);

521 ià(
”r
 < 0)

522 
”r
 = 
ZIP_ERRNO
;

525 
”r
 = 
	`zClo£FeInZ
 (
zf
);

526 ià(
”r
 !ğ
ZIP_OK
)

527 
	`´štf
 ("error in closing %s inhe zipfile\n",

528 
f’amešz
);

532 
”rşo£
 = 
	`zClo£
 (
zf
, 
NULL
);

533 ià(
”rşo£
 !ğ
ZIP_OK
)

534 
	`´štf
 ("”rÜ iÀşosšg %s\n", 
f’ame_Œy
);

538 
	`do_h–p
 ();

541 
	`ä“
 (
buf
);

543 
	}
}

	@contrib/minizip/mztools.c

8 
	~<¡dio.h
>

9 
	~<¡dlib.h
>

10 
	~<¡ršg.h
>

11 
	~"zlib.h
"

12 
	~"unz.h
"

14 
	#READ_8
(
adr
è(()*×dr))

	)

15 
	#READ_16
(
adr
èĞ
	`READ_8
×drè| (READ_8×dr+1è<< 8è)

	)

16 
	#READ_32
(
adr
èĞ
	`READ_16
×drè| (READ_16(×dr)+2è<< 16è)

	)

18 
	#WRITE_8
(
buff
, 
n
) do { \

19 *((*)(
buff
)èğ(è((
n
) & 0xff); \

20 } 0)

	)

21 
	#WRITE_16
(
buff
, 
n
) do { \

22 
	`WRITE_8
((*)(
buff
), 
n
); \

23 
	`WRITE_8
(((*)(
buff
)è+ 1, (
n
) >> 8); \

24 } 0)

	)

25 
	#WRITE_32
(
buff
, 
n
) do { \

26 
	`WRITE_16
((*)(
buff
), (
n
) & 0xffff); \

27 
	`WRITE_16
((*)(
buff
è+ 2, (
n
) >> 16); \

28 } 0)

	)

30 
ZEXPORT


31 
	$unzR•aœ
 (
fe
, 
feOut
, 
feOutTmp
, 
nRecov”ed
, 
by‹sRecov”ed
)

32 cÚ¡ *
fe
;

33 cÚ¡ *
feOut
;

34 cÚ¡ *
feOutTmp
;

35 
uLÚg
 *
nRecov”ed
;

36 
uLÚg
 *
by‹sRecov”ed
;

38 
”r
 = 
Z_OK
;

39 
FILE
 *
åZ
 = 
	`fİ’
 (
fe
, "rb");

40 
FILE
 *
åOut
 = 
	`fİ’
 (
feOut
, "wb");

41 
FILE
 *
åOutCD
 = 
	`fİ’
 (
feOutTmp
, "wb");

42 ià(
åZ
 !ğ
NULL
 && 
åOut
 != NULL)

44 
’Œ›s
 = 0;

45 
uLÚg
 
tÙ®By‹s
 = 0;

46 
h—d”
[30];

47 
f’ame
[1024];

48 
exŒa
[1024];

49 
off£t
 = 0;

50 
off£tCD
 = 0;

51 
	`ä—d
 (
h—d”
, 1, 30, 
åZ
) == 30)

53 
cu¼’tOff£t
 = 
off£t
;

56 ià(
	`READ_32
 (
h—d”
) == 0x04034b50)

58 
v”siÚ
 = 
	`READ_16
 (
h—d”
 + 4);

59 
gpæag
 = 
	`READ_16
 (
h—d”
 + 6);

60 
m‘hod
 = 
	`READ_16
 (
h—d”
 + 8);

61 
f‘ime
 = 
	`READ_16
 (
h—d”
 + 10);

62 
fed©e
 = 
	`READ_16
 (
h—d”
 + 12);

63 
üc
 = 
	`READ_32
 (
h—d”
 + 14);

64 
ısize
 = 
	`READ_32
 (
h—d”
 + 18);

65 
unısize
 = 
	`READ_32
 (
h—d”
 + 22);

66 
âsize
 = 
	`READ_16
 (
h—d”
 + 26);

67 
extsize
 = 
	`READ_16
 (
h—d”
 + 28);

68 
f’ame
[0] = 
exŒa
[0] = '\0';

71 ià(
	`fwr™e
 (
h—d”
, 1, 30, 
åOut
) == 30)

73 
off£t
 += 30;

77 
”r
 = 
Z_ERRNO
;

82 ià(
âsize
 > 0)

84 ià(
âsize
 <  (
f’ame
))

86 ià(
	`ä—d
 (
f’ame
, 1, 
âsize
, 
åZ
) == fnsize)

88 ià(
	`fwr™e
 (
f’ame
, 1, 
âsize
, 
åOut
) == fnsize)

90 
off£t
 +ğ
âsize
;

94 
”r
 = 
Z_ERRNO
;

100 
”r
 = 
Z_ERRNO
;

106 
”r
 = 
Z_ERRNO
;

112 
”r
 = 
Z_STREAM_ERROR
;

117 ià(
extsize
 > 0)

119 ià(
extsize
 <  (
exŒa
))

121 ià(
	`ä—d
 (
exŒa
, 1, 
extsize
, 
åZ
) ==ƒxtsize)

123 ià(
	`fwr™e
 (
exŒa
, 1, 
extsize
, 
åOut
) ==ƒxtsize)

125 
off£t
 +ğ
extsize
;

129 
”r
 = 
Z_ERRNO
;

135 
”r
 = 
Z_ERRNO
;

141 
”r
 = 
Z_ERRNO
;

148 
d©aSize
 = 
ısize
;

149 ià(
d©aSize
 == 0)

151 
d©aSize
 = 
unısize
;

153 ià(
d©aSize
 > 0)

155 *
d©a
 = 
	`m®loc
 (
d©aSize
);

156 ià(
d©a
 !ğ
NULL
)

158 ià((è
	`ä—d
 (
d©a
, 1, 
d©aSize
, 
åZ
) ==

159 
d©aSize
)

161 ià((è
	`fwr™e
 (
d©a
, 1, 
d©aSize
, 
åOut
) ==

162 
d©aSize
)

164 
off£t
 +ğ
d©aSize
;

165 
tÙ®By‹s
 +ğ
d©aSize
;

169 
”r
 = 
Z_ERRNO
;

174 
”r
 = 
Z_ERRNO
;

176 
	`ä“
 (
d©a
);

177 ià(
”r
 !ğ
Z_OK
)

184 
”r
 = 
Z_MEM_ERROR
;

192 
h—d”
[46];

193 *
comm’t
 = "";

194 
comsize
 = (è
	`¡¾’
 (
comm’t
);

195 
	`WRITE_32
 (
h—d”
, 0x02014b50);

196 
	`WRITE_16
 (
h—d”
 + 4, 
v”siÚ
);

197 
	`WRITE_16
 (
h—d”
 + 6, 
v”siÚ
);

198 
	`WRITE_16
 (
h—d”
 + 8, 
gpæag
);

199 
	`WRITE_16
 (
h—d”
 + 10, 
m‘hod
);

200 
	`WRITE_16
 (
h—d”
 + 12, 
f‘ime
);

201 
	`WRITE_16
 (
h—d”
 + 14, 
fed©e
);

202 
	`WRITE_32
 (
h—d”
 + 16, 
üc
);

203 
	`WRITE_32
 (
h—d”
 + 20, 
ısize
);

204 
	`WRITE_32
 (
h—d”
 + 24, 
unısize
);

205 
	`WRITE_16
 (
h—d”
 + 28, 
âsize
);

206 
	`WRITE_16
 (
h—d”
 + 30, 
extsize
);

207 
	`WRITE_16
 (
h—d”
 + 32, 
comsize
);

208 
	`WRITE_16
 (
h—d”
 + 34, 0);

209 
	`WRITE_16
 (
h—d”
 + 36, 0);

210 
	`WRITE_32
 (
h—d”
 + 38, 0);

211 
	`WRITE_32
 (
h—d”
 + 42, 
cu¼’tOff£t
);

213 ià(
	`fwr™e
 (
h—d”
, 1, 46, 
åOutCD
) == 46)

215 
off£tCD
 += 46;

218 ià(
âsize
 > 0)

220 ià(
	`fwr™e
 (
f’ame
, 1, 
âsize
, 
åOutCD
) == fnsize)

222 
off£tCD
 +ğ
âsize
;

226 
”r
 = 
Z_ERRNO
;

232 
”r
 = 
Z_STREAM_ERROR
;

237 ià(
extsize
 > 0)

239 ià(
	`fwr™e
 (
exŒa
, 1, 
extsize
, 
åOutCD
) ==ƒxtsize)

241 
off£tCD
 +ğ
extsize
;

245 
”r
 = 
Z_ERRNO
;

251 ià(
comsize
 > 0)

253 ià((è
	`fwr™e
 (
comm’t
, 1, 
comsize
, 
åOutCD
) ==

254 
comsize
)

256 
off£tCD
 +ğ
comsize
;

260 
”r
 = 
Z_ERRNO
;

269 
”r
 = 
Z_ERRNO
;

275 
’Œ›s
++;

286 
’Œ›sZ
 = 
’Œ›s
;

287 
h—d”
[22];

288 *
comm’t
 = "";

289 
comsize
 = (è
	`¡¾’
 (
comm’t
);

290 ià(
’Œ›sZ
 > 0xffff)

292 
’Œ›sZ
 = 0xffff;

294 
	`WRITE_32
 (
h—d”
, 0x06054b50);

295 
	`WRITE_16
 (
h—d”
 + 4, 0);

296 
	`WRITE_16
 (
h—d”
 + 6, 0);

297 
	`WRITE_16
 (
h—d”
 + 8, 
’Œ›sZ
);

298 
	`WRITE_16
 (
h—d”
 + 10, 
’Œ›sZ
);

299 
	`WRITE_32
 (
h—d”
 + 12, 
off£tCD
);

300 
	`WRITE_32
 (
h—d”
 + 16, 
off£t
);

301 
	`WRITE_16
 (
h—d”
 + 20, 
comsize
);

304 ià(
	`fwr™e
 (
h—d”
, 1, 22, 
åOutCD
) == 22)

308 ià(
comsize
 > 0)

310 ià((è
	`fwr™e
 (
comm’t
, 1, 
comsize
, 
åOutCD
) != comsize)

312 
”r
 = 
Z_ERRNO
;

319 
”r
 = 
Z_ERRNO
;

324 
	`fşo£
 (
åOutCD
);

325 ià(
”r
 =ğ
Z_OK
)

327 
åOutCD
 = 
	`fİ’
 (
feOutTmp
, "rb");

328 ià(
åOutCD
 !ğ
NULL
)

330 
nR—d
;

331 
bufãr
[8192];

332 (
nR—d
 =

333 (è
	`ä—d
 (
bufãr
, 1,  (bufãr), 
åOutCD
)) > 0)

335 ià((è
	`fwr™e
 (
bufãr
, 1, 
nR—d
, 
åOut
) !=‚Read)

337 
”r
 = 
Z_ERRNO
;

341 
	`fşo£
 (
åOutCD
);

346 
	`fşo£
 (
åZ
);

347 
	`fşo£
 (
åOut
);

350 (è
	`»move
 (
feOutTmp
);

353 ià(
”r
 =ğ
Z_OK
)

355 ià(
nRecov”ed
 !ğ
NULL
)

357 *
nRecov”ed
 = 
’Œ›s
;

359 ià(
by‹sRecov”ed
 !ğ
NULL
)

361 *
by‹sRecov”ed
 = 
tÙ®By‹s
;

367 
”r
 = 
Z_STREAM_ERROR
;

369  
”r
;

370 
	}
}

	@contrib/minizip/mztools.h

7 #iâdeà
_z_toŞs_H


8 
	#_z_toŞs_H


	)

10 #ifdeà
__ılu¥lus


14 #iâdeà
_ZLIB_H


15 
	~"zlib.h
"

18 
	~"unz.h
"

25 
ZEXPORT
 
unzR•aœ
(cÚ¡ * 
fe
,

26 cÚ¡ * 
feOut
,

27 cÚ¡ * 
feOutTmp
,

28 
uLÚg
* 
nRecov”ed
,

29 
uLÚg
* 
by‹sRecov”ed
);

32 #ifdeà
__ılu¥lus


	@contrib/minizip/unzip.c

67 
	~<¡dio.h
>

68 
	~<¡dlib.h
>

69 
	~<¡ršg.h
>

71 #iâdeà
NOUNCRYPT


72 
	#NOUNCRYPT


	)

75 
	~"zlib.h
"

76 
	~"unz.h
"

78 #ifdeà
STDC


79 
	~<¡ddef.h
>

80 
	~<¡ršg.h
>

81 
	~<¡dlib.h
>

83 #ifdeà
NO_ERRNO_H


84 
”ºo
;

86 
	~<”ºo.h
>

90 #iâdeà
loÿl


91 
	#loÿl
 

	)

96 #iâdeà
CASESENSITIVITYDEFAULT_NO


97 #ià!
defšed
(
unix
è&& !defšed(
CASESENSITIVITYDEFAULT_YES
)

98 
	#CASESENSITIVITYDEFAULT_NO


	)

103 #iâdeà
UNZ_BUFSIZE


104 
	#UNZ_BUFSIZE
 (16384)

	)

107 #iâdeà
UNZ_MAXFILENAMEINZIP


108 
	#UNZ_MAXFILENAMEINZIP
 (256)

	)

111 #iâdeà
ALLOC


112 
	#ALLOC
(
size
è(
	`m®loc
(size))

	)

114 #iâdeà
TRYFREE


115 
	#TRYFREE
(
p
è{iàÕè
	`ä“
Õ);}

	)

118 
	#SIZECENTRALDIRITEM
 (0x2e)

	)

119 
	#SIZEZIPLOCALHEADER
 (0x1e)

	)

122 cÚ¡ 
	gunz_cİyright
[] =

126 
	sunz_fe_šfo64_š‹º®_s


128 
ZPOS64_T
 
	moff£t_curfe
;

129 } 
	tunz_fe_šfo64_š‹º®
;

136 *
	m»ad_bufãr
;

137 
z_¡»am
 
	m¡»am
;

139 #ifdeà
HAVE_BZIP2


140 
bz_¡»am
 
	mb¡»am
;

143 
ZPOS64_T
 
	mpos_š_zfe
;

144 
uLÚg
 
	m¡»am_š™Ÿli£d
;

146 
ZPOS64_T
 
	moff£t_loÿl_exŒaf›ld
;

147 
uIÁ
 
	msize_loÿl_exŒaf›ld
;

148 
ZPOS64_T
 
	mpos_loÿl_exŒaf›ld
;

149 
ZPOS64_T
 
	mtÙ®_out_64
;

151 
uLÚg
 
	müc32
;

152 
uLÚg
 
	müc32_wa™
;

153 
ZPOS64_T
 
	m»¡_»ad_com´es£d
;

154 
ZPOS64_T
 
	m»¡_»ad_uncom´es£d
;

155 
zlib_fefunc64_32_def
 
	mz_fefunc
;

156 
voidpf
 
	mfe¡»am
;

157 
uLÚg
 
	mcom´essiÚ_m‘hod
;

158 
ZPOS64_T
 
	mby‹_befÜe_the_zfe
;

159 
	m¿w
;

160 } 
	tfe_š_z64_»ad_šfo_s
;

167 
zlib_fefunc64_32_def
 
	mz_fefunc
;

168 
	mis64b™O³nFunùiÚ
;

169 
voidpf
 
	mfe¡»am
;

170 
unz_glob®_šfo64
 
	mgi
;

171 
ZPOS64_T
 
	mby‹_befÜe_the_zfe
;

172 
ZPOS64_T
 
	mnum_fe
;

173 
ZPOS64_T
 
	mpos_š_ûÁ¿l_dœ
;

174 
ZPOS64_T
 
	mcu¼’t_fe_ok
;

175 
ZPOS64_T
 
	mûÁ¿l_pos
;

177 
ZPOS64_T
 
	msize_ûÁ¿l_dœ
;

178 
ZPOS64_T
 
	moff£t_ûÁ¿l_dœ
;

181 
unz_fe_šfo64
 
	mcur_fe_šfo
;

182 
unz_fe_šfo64_š‹º®
 
	mcur_fe_šfo_š‹º®
;

183 
fe_š_z64_»ad_šfo_s
 *
	mpfe_š_z_»ad
;

185 
	m’üy±ed
;

187 
	misZ64
;

189 #iâdeà
NOUNCRYPT


190 
	mkeys
[3];

191 cÚ¡ 
z_üc_t
 *
	mpüc_32_b
;

193 } 
	tunz64_s
;

196 #iâdeà
NOUNCRYPT


197 
	~"üy±.h
"

207 
loÿl
 
unz64loÿl_g‘By‹


208 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
,

209 *
pi
));

211 
loÿl
 

212 
	$unz64loÿl_g‘By‹
 (cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
,

213 
voidpf
 
fe¡»am
, *
pi
)

215 
c
;

216 
”r
 = (è
	`ZREAD64
 (*
pzlib_fefunc_def
, 
fe¡»am
, &
c
, 1);

217 ià(
”r
 == 1)

219 *
pi
 = (è
c
;

220  
UNZ_OK
;

224 ià(
	`ZERROR64
 (*
pzlib_fefunc_def
, 
fe¡»am
))

225  
UNZ_ERRNO
;

227  
UNZ_EOF
;

229 
	}
}

235 
loÿl
 
unz64loÿl_g‘ShÜt


236 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
,

237 
uLÚg
 * 
pX
));

239 
loÿl
 

240 
	$unz64loÿl_g‘ShÜt
 (cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
,

241 
voidpf
 
fe¡»am
, 
uLÚg
 * 
pX
)

243 
uLÚg
 
x
;

244 
i
 = 0;

245 
”r
;

247 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

248 
x
 = (
uLÚg
è
i
;

250 ià(
”r
 =ğ
UNZ_OK
)

251 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

252 
x
 |ğ((
uLÚg
è
i
) << 8;

254 ià(
”r
 =ğ
UNZ_OK
)

255 *
pX
 = 
x
;

257 *
pX
 = 0;

258  
”r
;

259 
	}
}

261 
loÿl
 
unz64loÿl_g‘LÚg


262 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
,

263 
uLÚg
 * 
pX
));

265 
loÿl
 

266 
	$unz64loÿl_g‘LÚg
 (cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
,

267 
voidpf
 
fe¡»am
, 
uLÚg
 * 
pX
)

269 
uLÚg
 
x
;

270 
i
 = 0;

271 
”r
;

273 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

274 
x
 = (
uLÚg
è
i
;

276 ià(
”r
 =ğ
UNZ_OK
)

277 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

278 
x
 |ğ((
uLÚg
è
i
) << 8;

280 ià(
”r
 =ğ
UNZ_OK
)

281 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

282 
x
 |ğ((
uLÚg
è
i
) << 16;

284 ià(
”r
 =ğ
UNZ_OK
)

285 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

286 
x
 +ğ((
uLÚg
è
i
) << 24;

288 ià(
”r
 =ğ
UNZ_OK
)

289 *
pX
 = 
x
;

291 *
pX
 = 0;

292  
”r
;

293 
	}
}

295 
loÿl
 
unz64loÿl_g‘LÚg64


296 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
,

297 
ZPOS64_T
 * 
pX
));

300 
loÿl
 

301 
	$unz64loÿl_g‘LÚg64
 (cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
,

302 
voidpf
 
fe¡»am
, 
ZPOS64_T
 * 
pX
)

304 
ZPOS64_T
 
x
;

305 
i
 = 0;

306 
”r
;

308 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

309 
x
 = (
ZPOS64_T
è
i
;

311 ià(
”r
 =ğ
UNZ_OK
)

312 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

313 
x
 |ğ((
ZPOS64_T
è
i
) << 8;

315 ià(
”r
 =ğ
UNZ_OK
)

316 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

317 
x
 |ğ((
ZPOS64_T
è
i
) << 16;

319 ià(
”r
 =ğ
UNZ_OK
)

320 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

321 
x
 |ğ((
ZPOS64_T
è
i
) << 24;

323 ià(
”r
 =ğ
UNZ_OK
)

324 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

325 
x
 |ğ((
ZPOS64_T
è
i
) << 32;

327 ià(
”r
 =ğ
UNZ_OK
)

328 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

329 
x
 |ğ((
ZPOS64_T
è
i
) << 40;

331 ià(
”r
 =ğ
UNZ_OK
)

332 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

333 
x
 |ğ((
ZPOS64_T
è
i
) << 48;

335 ià(
”r
 =ğ
UNZ_OK
)

336 
”r
 = 
	`unz64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

337 
x
 |ğ((
ZPOS64_T
è
i
) << 56;

339 ià(
”r
 =ğ
UNZ_OK
)

340 *
pX
 = 
x
;

342 *
pX
 = 0;

343  
”r
;

344 
	}
}

347 
loÿl
 

348 
	$¡rcmpÿ£no£ns™ive_š‹º®
 (cÚ¡ *
feName1
, cÚ¡ *
feName2
)

352 
c1
 = *(
feName1
++);

353 
c2
 = *(
feName2
++);

354 ià((
c1
 >= 'a') && (c1 <= 'z'))

355 
c1
 -= 0x20;

356 ià((
c2
 >= 'a') && (c2 <= 'z'))

357 
c2
 -= 0x20;

358 ià(
c1
 == '\0')

359  ((
c2
 == '\0') ? 0 : -1);

360 ià(
c2
 == '\0')

362 ià(
c1
 < 
c2
)

364 ià(
c1
 > 
c2
)

367 
	}
}

370 #ifdeà 
CASESENSITIVITYDEFAULT_NO


371 
	#CASESENSITIVITYDEFAULTVALUE
 2

	)

373 
	#CASESENSITIVITYDEFAULTVALUE
 1

	)

376 #iâdeà
STRCMPCASENOSENTIVEFUNCTION


377 
	#STRCMPCASENOSENTIVEFUNCTION
 
¡rcmpÿ£no£ns™ive_š‹º®


	)

389 
ZEXPORT


390 
	$unzSŒšgFeNameCom·»
 (cÚ¡ *
feName1
,

391 cÚ¡ *
feName2
, 
iCa£S’s™iv™y
)

393 ià(
iCa£S’s™iv™y
 == 0)

394 
iCa£S’s™iv™y
 = 
CASESENSITIVITYDEFAULTVALUE
;

396 ià(
iCa£S’s™iv™y
 == 1)

397  
	`¡rcmp
 (
feName1
, 
feName2
);

399  
	`STRCMPCASENOSENTIVEFUNCTION
 (
feName1
, 
feName2
);

400 
	}
}

402 #iâdeà
BUFREADCOMMENT


403 
	#BUFREADCOMMENT
 (0x400)

	)

410 
loÿl
 
ZPOS64_T
 
unz64loÿl_S—rchC’Œ®Dœ


411 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
));

412 
loÿl
 
ZPOS64_T


413 
	$unz64loÿl_S—rchC’Œ®Dœ
 (cÚ¡ 
zlib_fefunc64_32_def
 *

414 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
)

416 *
buf
;

417 
ZPOS64_T
 
uSizeFe
;

418 
ZPOS64_T
 
uBackR—d
;

419 
ZPOS64_T
 
uMaxBack
 = 0xffff;

420 
ZPOS64_T
 
uPosFound
 = 0;

422 ià(
	`ZSEEK64
 (*
pzlib_fefunc_def
, 
fe¡»am
, 0, 
ZLIB_FILEFUNC_SEEK_END
) !=

427 
uSizeFe
 = 
	`ZTELL64
 (*
pzlib_fefunc_def
, 
fe¡»am
);

429 ià(
uMaxBack
 > 
uSizeFe
)

430 
uMaxBack
 = 
uSizeFe
;

432 
buf
 = (*è
	`ALLOC
 (
BUFREADCOMMENT
 + 4);

433 ià(
buf
 =ğ
NULL
)

436 
uBackR—d
 = 4;

437 
uBackR—d
 < 
uMaxBack
)

439 
uLÚg
 
uR—dSize
;

440 
ZPOS64_T
 
uR—dPos
;

441 
i
;

442 ià(
uBackR—d
 + 
BUFREADCOMMENT
 > 
uMaxBack
)

443 
uBackR—d
 = 
uMaxBack
;

445 
uBackR—d
 +ğ
BUFREADCOMMENT
;

446 
uR—dPos
 = 
uSizeFe
 - 
uBackR—d
;

448 
uR—dSize
 = ((
BUFREADCOMMENT
 + 4è< (
uSizeFe
 - 
uR—dPos
)) ?

449 (
BUFREADCOMMENT
 + 4è: (
uLÚg
è(
uSizeFe
 - 
uR—dPos
);

450 ià(
ZSEEK64


451 (*
pzlib_fefunc_def
, 
fe¡»am
, 
uR—dPos
,

452 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

455 ià(
	`ZREAD64
 (*
pzlib_fefunc_def
, 
fe¡»am
, 
buf
, 
uR—dSize
) !=

456 
uR—dSize
)

459 
i
 = (è
uR—dSize
 - 3; (i--) > 0;)

460 ià(((*(
buf
 + 
i
)) == 0x50) && ((*(buf + i + 1)) == 0x4b) &&

461 ((*(
buf
 + 
i
 + 2)) == 0x05) && ((*(buf + i + 3)) == 0x06))

463 
uPosFound
 = 
uR—dPos
 + 
i
;

467 ià(
uPosFound
 != 0)

470 
	`TRYFREE
 (
buf
);

471  
uPosFound
;

472 
	}
}

479 
loÿl
 
ZPOS64_T
 
unz64loÿl_S—rchC’Œ®Dœ64


480 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
));

482 
loÿl
 
ZPOS64_T


483 
	$unz64loÿl_S—rchC’Œ®Dœ64
 (cÚ¡ 
zlib_fefunc64_32_def
 *

484 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
)

486 *
buf
;

487 
ZPOS64_T
 
uSizeFe
;

488 
ZPOS64_T
 
uBackR—d
;

489 
ZPOS64_T
 
uMaxBack
 = 0xffff;

490 
ZPOS64_T
 
uPosFound
 = 0;

491 
uLÚg
 
uL
;

492 
ZPOS64_T
 
»ÏtiveOff£t
;

494 ià(
	`ZSEEK64
 (*
pzlib_fefunc_def
, 
fe¡»am
, 0, 
ZLIB_FILEFUNC_SEEK_END
) !=

499 
uSizeFe
 = 
	`ZTELL64
 (*
pzlib_fefunc_def
, 
fe¡»am
);

501 ià(
uMaxBack
 > 
uSizeFe
)

502 
uMaxBack
 = 
uSizeFe
;

504 
buf
 = (*è
	`ALLOC
 (
BUFREADCOMMENT
 + 4);

505 ià(
buf
 =ğ
NULL
)

508 
uBackR—d
 = 4;

509 
uBackR—d
 < 
uMaxBack
)

511 
uLÚg
 
uR—dSize
;

512 
ZPOS64_T
 
uR—dPos
;

513 
i
;

514 ià(
uBackR—d
 + 
BUFREADCOMMENT
 > 
uMaxBack
)

515 
uBackR—d
 = 
uMaxBack
;

517 
uBackR—d
 +ğ
BUFREADCOMMENT
;

518 
uR—dPos
 = 
uSizeFe
 - 
uBackR—d
;

520 
uR—dSize
 = ((
BUFREADCOMMENT
 + 4è< (
uSizeFe
 - 
uR—dPos
)) ?

521 (
BUFREADCOMMENT
 + 4è: (
uLÚg
è(
uSizeFe
 - 
uR—dPos
);

522 ià(
ZSEEK64


523 (*
pzlib_fefunc_def
, 
fe¡»am
, 
uR—dPos
,

524 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

527 ià(
	`ZREAD64
 (*
pzlib_fefunc_def
, 
fe¡»am
, 
buf
, 
uR—dSize
) !=

528 
uR—dSize
)

531 
i
 = (è
uR—dSize
 - 3; (i--) > 0;)

532 ià(((*(
buf
 + 
i
)) == 0x50) && ((*(buf + i + 1)) == 0x4b) &&

533 ((*(
buf
 + 
i
 + 2)) == 0x06) && ((*(buf + i + 3)) == 0x07))

535 
uPosFound
 = 
uR—dPos
 + 
i
;

539 ià(
uPosFound
 != 0)

542 
	`TRYFREE
 (
buf
);

543 ià(
uPosFound
 == 0)

547 ià(
ZSEEK64


548 (*
pzlib_fefunc_def
, 
fe¡»am
, 
uPosFound
,

549 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

553 ià(
	`unz64loÿl_g‘LÚg
 (
pzlib_fefunc_def
, 
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

557 ià(
	`unz64loÿl_g‘LÚg
 (
pzlib_fefunc_def
, 
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

559 ià(
uL
 != 0)

563 ià(
	`unz64loÿl_g‘LÚg64
 (
pzlib_fefunc_def
, 
fe¡»am
, &
»ÏtiveOff£t
)

564 !ğ
UNZ_OK
)

568 ià(
	`unz64loÿl_g‘LÚg
 (
pzlib_fefunc_def
, 
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

570 ià(
uL
 != 1)

574 ià(
ZSEEK64


575 (*
pzlib_fefunc_def
, 
fe¡»am
, 
»ÏtiveOff£t
,

576 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

580 ià(
	`unz64loÿl_g‘LÚg
 (
pzlib_fefunc_def
, 
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

583 ià(
uL
 != 0x06064b50)

586  
»ÏtiveOff£t
;

587 
	}
}

598 
loÿl
 
unzFe


599 
	$unzO³nIÁ”Çl
 (cÚ¡ *
·th
,

600 
zlib_fefunc64_32_def
 * 
pzlib_fefunc64_32_def
,

601 
is64b™O³nFunùiÚ
)

603 
unz64_s
 
us
;

604 
unz64_s
 *
s
;

605 
ZPOS64_T
 
ûÁ¿l_pos
;

606 
uLÚg
 
uL
;

608 
uLÚg
 
numb”_disk
;

610 
uLÚg
 
numb”_disk_w™h_CD
;

612 
ZPOS64_T
 
numb”_’Œy_CD
;

616 
”r
 = 
UNZ_OK
;

618 ià(
unz_cİyright
[0] != ' ')

619  
NULL
;

621 
us
.
z_fefunc
.
z£ek32_fe
 = 
NULL
;

622 
us
.
z_fefunc
.
z‹Î32_fe
 = 
NULL
;

623 ià(
pzlib_fefunc64_32_def
 =ğ
NULL
)

624 
	`fl_fİ’64_fefunc
 (&
us
.
z_fefunc
.
zfe_func64
);

626 
us
.
z_fefunc
 = *
pzlib_fefunc64_32_def
;

627 
us
.
is64b™O³nFunùiÚ
 = is64bitOpenFunction;

631 
us
.
fe¡»am
 = 
	`ZOPEN64
 (us.
z_fefunc
,

632 
·th
,

633 
ZLIB_FILEFUNC_MODE_READ
 |

634 
ZLIB_FILEFUNC_MODE_EXISTING
);

635 ià(
us
.
fe¡»am
 =ğ
NULL
)

636  
NULL
;

638 
ûÁ¿l_pos
 = 
	`unz64loÿl_S—rchC’Œ®Dœ64
 (&
us
.
z_fefunc
, us.
fe¡»am
);

639 ià(
ûÁ¿l_pos
)

641 
uLÚg
 
uS
;

642 
ZPOS64_T
 
uL64
;

644 
us
.
isZ64
 = 1;

646 ià(
	`ZSEEK64
 (
us
.
z_fefunc
, us.
fe¡»am
,

647 
ûÁ¿l_pos
, 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

648 
”r
 = 
UNZ_ERRNO
;

651 ià(
	`unz64loÿl_g‘LÚg
 (&
us
.
z_fefunc
, us.
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

652 
”r
 = 
UNZ_ERRNO
;

655 ià(
	`unz64loÿl_g‘LÚg64
 (&
us
.
z_fefunc
, us.
fe¡»am
, &
uL64
) !=

656 
UNZ_OK
)

657 
”r
 = 
UNZ_ERRNO
;

660 ià(
	`unz64loÿl_g‘ShÜt
 (&
us
.
z_fefunc
, us.
fe¡»am
, &
uS
è!ğ
UNZ_OK
)

661 
”r
 = 
UNZ_ERRNO
;

664 ià(
	`unz64loÿl_g‘ShÜt
 (&
us
.
z_fefunc
, us.
fe¡»am
, &
uS
è!ğ
UNZ_OK
)

665 
”r
 = 
UNZ_ERRNO
;

668 ià(
	`unz64loÿl_g‘LÚg
 (&
us
.
z_fefunc
, us.
fe¡»am
, &
numb”_disk
) !=

669 
UNZ_OK
)

670 
”r
 = 
UNZ_ERRNO
;

673 ià(
unz64loÿl_g‘LÚg


674 (&
us
.
z_fefunc
, us.
fe¡»am
, &
numb”_disk_w™h_CD
è!ğ
UNZ_OK
)

675 
”r
 = 
UNZ_ERRNO
;

678 ià(
unz64loÿl_g‘LÚg64


679 (&
us
.
z_fefunc
, us.
fe¡»am
, &us.
gi
.
numb”_’Œy
è!ğ
UNZ_OK
)

680 
”r
 = 
UNZ_ERRNO
;

683 ià(
unz64loÿl_g‘LÚg64


684 (&
us
.
z_fefunc
, us.
fe¡»am
, &
numb”_’Œy_CD
è!ğ
UNZ_OK
)

685 
”r
 = 
UNZ_ERRNO
;

687 ià((
numb”_’Œy_CD
 !ğ
us
.
gi
.
numb”_’Œy
) ||

688 (
numb”_disk_w™h_CD
 !ğ0è|| (
numb”_disk
 != 0))

689 
”r
 = 
UNZ_BADZIPFILE
;

692 ià(
unz64loÿl_g‘LÚg64


693 (&
us
.
z_fefunc
, us.
fe¡»am
, &us.
size_ûÁ¿l_dœ
è!ğ
UNZ_OK
)

694 
”r
 = 
UNZ_ERRNO
;

698 ià(
unz64loÿl_g‘LÚg64


699 (&
us
.
z_fefunc
, us.
fe¡»am
, &us.
off£t_ûÁ¿l_dœ
è!ğ
UNZ_OK
)

700 
”r
 = 
UNZ_ERRNO
;

702 
us
.
gi
.
size_comm’t
 = 0;

706 
ûÁ¿l_pos
 =

707 
	`unz64loÿl_S—rchC’Œ®Dœ
 (&
us
.
z_fefunc
, us.
fe¡»am
);

708 ià(
ûÁ¿l_pos
 == 0)

709 
”r
 = 
UNZ_ERRNO
;

711 
us
.
isZ64
 = 0;

713 ià(
	`ZSEEK64
 (
us
.
z_fefunc
, us.
fe¡»am
,

714 
ûÁ¿l_pos
, 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

715 
”r
 = 
UNZ_ERRNO
;

718 ià(
	`unz64loÿl_g‘LÚg
 (&
us
.
z_fefunc
, us.
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

719 
”r
 = 
UNZ_ERRNO
;

722 ià(
	`unz64loÿl_g‘ShÜt
 (&
us
.
z_fefunc
, us.
fe¡»am
, &
numb”_disk
) !=

723 
UNZ_OK
)

724 
”r
 = 
UNZ_ERRNO
;

727 ià(
unz64loÿl_g‘ShÜt


728 (&
us
.
z_fefunc
, us.
fe¡»am
, &
numb”_disk_w™h_CD
è!ğ
UNZ_OK
)

729 
”r
 = 
UNZ_ERRNO
;

732 ià(
	`unz64loÿl_g‘ShÜt
 (&
us
.
z_fefunc
, us.
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

733 
”r
 = 
UNZ_ERRNO
;

734 
us
.
gi
.
numb”_’Œy
 = 
uL
;

737 ià(
	`unz64loÿl_g‘ShÜt
 (&
us
.
z_fefunc
, us.
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

738 
”r
 = 
UNZ_ERRNO
;

739 
numb”_’Œy_CD
 = 
uL
;

741 ià((
numb”_’Œy_CD
 !ğ
us
.
gi
.
numb”_’Œy
) ||

742 (
numb”_disk_w™h_CD
 !ğ0è|| (
numb”_disk
 != 0))

743 
”r
 = 
UNZ_BADZIPFILE
;

746 ià(
	`unz64loÿl_g‘LÚg
 (&
us
.
z_fefunc
, us.
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

747 
”r
 = 
UNZ_ERRNO
;

748 
us
.
size_ûÁ¿l_dœ
 = 
uL
;

752 ià(
	`unz64loÿl_g‘LÚg
 (&
us
.
z_fefunc
, us.
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

753 
”r
 = 
UNZ_ERRNO
;

754 
us
.
off£t_ûÁ¿l_dœ
 = 
uL
;

757 ià(
unz64loÿl_g‘ShÜt


758 (&
us
.
z_fefunc
, us.
fe¡»am
, &us.
gi
.
size_comm’t
è!ğ
UNZ_OK
)

759 
”r
 = 
UNZ_ERRNO
;

762 ià((
ûÁ¿l_pos
 < 
us
.
off£t_ûÁ¿l_dœ
 + us.
size_ûÁ¿l_dœ
) &&

763 (
”r
 =ğ
UNZ_OK
))

764 
”r
 = 
UNZ_BADZIPFILE
;

766 ià(
”r
 !ğ
UNZ_OK
)

768 
	`ZCLOSE64
 (
us
.
z_fefunc
, us.
fe¡»am
);

769  
NULL
;

772 
us
.
by‹_befÜe_the_zfe
 = 
ûÁ¿l_pos
 -

773 (
us
.
off£t_ûÁ¿l_dœ
 + us.
size_ûÁ¿l_dœ
);

774 
us
.
ûÁ¿l_pos
 = central_pos;

775 
us
.
pfe_š_z_»ad
 = 
NULL
;

776 
us
.
’üy±ed
 = 0;

779 
s
 = (
unz64_s
 *è
	`ALLOC
 ( (unz64_s));

780 ià(
s
 !ğ
NULL
)

782 *
s
 = 
us
;

783 
	`unzGoToFœ¡Fe
 ((
unzFe
è
s
);

785  (
unzFe
è
s
;

786 
	}
}

789 
unzFe
 
ZEXPORT


790 
	$unzO³n2
 (cÚ¡ *
·th
, 
zlib_fefunc_def
 * 
pzlib_fefunc32_def
)

792 ià(
pzlib_fefunc32_def
 !ğ
NULL
)

794 
zlib_fefunc64_32_def
 
zlib_fefunc64_32_def_fl
;

795 
fl_zlib_fefunc64_32_def_äom_fefunc32


796 (&
zlib_fefunc64_32_def_fl
, 
pzlib_fefunc32_def
);

797  
	`unzO³nIÁ”Çl
 (
·th
, &
zlib_fefunc64_32_def_fl
, 0);

800  
	`unzO³nIÁ”Çl
 (
·th
, 
NULL
, 0);

801 
	}
}

803 
unzFe
 
ZEXPORT


804 
	$unzO³n2_64
 (cÚ¡ *
·th
, 
zlib_fefunc64_def
 * 
pzlib_fefunc_def
)

806 ià(
pzlib_fefunc_def
 !ğ
NULL
)

808 
zlib_fefunc64_32_def
 
zlib_fefunc64_32_def_fl
;

809 
zlib_fefunc64_32_def_fl
.
zfe_func64
 = *
pzlib_fefunc_def
;

810 
zlib_fefunc64_32_def_fl
.
z‹Î32_fe
 = 
NULL
;

811 
zlib_fefunc64_32_def_fl
.
z£ek32_fe
 = 
NULL
;

812  
	`unzO³nIÁ”Çl
 (
·th
, &
zlib_fefunc64_32_def_fl
, 1);

815  
	`unzO³nIÁ”Çl
 (
·th
, 
NULL
, 1);

816 
	}
}

818 
unzFe
 
ZEXPORT


819 
	$unzO³n
 (cÚ¡ *
·th
)

821  
	`unzO³nIÁ”Çl
 (
·th
, 
NULL
, 0);

822 
	}
}

824 
unzFe
 
ZEXPORT


825 
	$unzO³n64
 (cÚ¡ *
·th
)

827  
	`unzO³nIÁ”Çl
 (
·th
, 
NULL
, 1);

828 
	}
}

835 
ZEXPORT


836 
	$unzClo£
 (
unzFe
 
fe
)

838 
unz64_s
 *
s
;

839 ià(
fe
 =ğ
NULL
)

840  
UNZ_PARAMERROR
;

841 
s
 = (
unz64_s
 *è
fe
;

843 ià(
s
->
pfe_š_z_»ad
 !ğ
NULL
)

844 
	`unzClo£Cu¼’tFe
 (
fe
);

846 
	`ZCLOSE64
 (
s
->
z_fefunc
, s->
fe¡»am
);

847 
	`TRYFREE
 (
s
);

848  
UNZ_OK
;

849 
	}
}

856 
ZEXPORT


857 
	$unzG‘Glob®Info64
 (
unzFe
 
fe
, 
unz_glob®_šfo64
 * 
pglob®_šfo
)

859 
unz64_s
 *
s
;

860 ià(
fe
 =ğ
NULL
)

861  
UNZ_PARAMERROR
;

862 
s
 = (
unz64_s
 *è
fe
;

863 *
pglob®_šfo
 = 
s
->
gi
;

864  
UNZ_OK
;

865 
	}
}

867 
ZEXPORT


868 
	$unzG‘Glob®Info
 (
unzFe
 
fe
, 
unz_glob®_šfo
 * 
pglob®_šfo32
)

870 
unz64_s
 *
s
;

871 ià(
fe
 =ğ
NULL
)

872  
UNZ_PARAMERROR
;

873 
s
 = (
unz64_s
 *è
fe
;

875 
pglob®_šfo32
->
numb”_’Œy
 = (
uLÚg
è
s
->
gi
.number_entry;

876 
pglob®_šfo32
->
size_comm’t
 = 
s
->
gi
.size_comment;

877  
UNZ_OK
;

878 
	}
}

883 
loÿl
 

884 
	$unz64loÿl_DosD©eToTmuD©e
 (
ZPOS64_T
 
ulDosD©e
, 
tm_unz
 * 
±m
)

886 
ZPOS64_T
 
uD©e
;

887 
uD©e
 = (
ZPOS64_T
è(
ulDosD©e
 >> 16);

888 
±m
->
tm_mday
 = (
uIÁ
è(
uD©e
 & 0x1f);

889 
±m
->
tm_mÚ
 = (
uIÁ
è((((
uD©e
) & 0x1E0) / 0x20) - 1);

890 
±m
->
tm_y—r
 = (
uIÁ
è(((
uD©e
 & 0x0FE00) / 0x0200) + 1980);

892 
±m
->
tm_hour
 = (
uIÁ
è((
ulDosD©e
 & 0xF800) / 0x800);

893 
±m
->
tm_mš
 = (
uIÁ
è((
ulDosD©e
 & 0x7E0) / 0x20);

894 
±m
->
tm_£c
 = (
uIÁ
è(2 * (
ulDosD©e
 & 0x1f));

895 
	}
}

900 
loÿl
 
unz64loÿl_G‘Cu¼’tFeInfoIÁ”Çl
 
OF
 ((
unzFe
 
fe
,

901 
unz_fe_šfo64
 *

902 
pfe_šfo
,

903 
unz_fe_šfo64_š‹º®


904 * 
pfe_šfo_š‹º®
,

905 *
szFeName
,

906 
uLÚg
 
feNameBufãrSize
,

907 *
exŒaF›ld
,

908 
uLÚg


909 
exŒaF›ldBufãrSize
,

910 *
szComm’t
,

911 
uLÚg


912 
comm’tBufãrSize
));

914 
loÿl
 

915 
	$unz64loÿl_G‘Cu¼’tFeInfoIÁ”Çl
 (
unzFe
 
fe
,

916 
unz_fe_šfo64
 * 
pfe_šfo
,

917 
unz_fe_šfo64_š‹º®


918 * 
pfe_šfo_š‹º®
,

919 *
szFeName
,

920 
uLÚg
 
feNameBufãrSize
,

921 *
exŒaF›ld
,

922 
uLÚg
 
exŒaF›ldBufãrSize
,

923 *
szComm’t
,

924 
uLÚg
 
comm’tBufãrSize
)

926 
unz64_s
 *
s
;

927 
unz_fe_šfo64
 
fe_šfo
;

928 
unz_fe_šfo64_š‹º®
 
fe_šfo_š‹º®
;

929 
”r
 = 
UNZ_OK
;

930 
uLÚg
 
uMagic
;

931 
lS“k
 = 0;

932 
uLÚg
 
uL
;

934 ià(
fe
 =ğ
NULL
)

935  
UNZ_PARAMERROR
;

936 
s
 = (
unz64_s
 *è
fe
;

937 ià(
	`ZSEEK64
 (
s
->
z_fefunc
, s->
fe¡»am
,

938 
s
->
pos_š_ûÁ¿l_dœ
 + s->
by‹_befÜe_the_zfe
,

939 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

940 
”r
 = 
UNZ_ERRNO
;

944 ià(
”r
 =ğ
UNZ_OK
)

946 ià(
	`unz64loÿl_g‘LÚg
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uMagic
) !=

947 
UNZ_OK
)

948 
”r
 = 
UNZ_ERRNO
;

949 ià(
uMagic
 != 0x02014b50)

950 
”r
 = 
UNZ_BADZIPFILE
;

953 ià(
	`unz64loÿl_g‘ShÜt
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
fe_šfo
.
v”siÚ
)

954 !ğ
UNZ_OK
)

955 
”r
 = 
UNZ_ERRNO
;

957 ià(
unz64loÿl_g‘ShÜt


958 (&
s
->
z_fefunc
, s->
fe¡»am
, &
fe_šfo
.
v”siÚ_Ãeded
è!ğ
UNZ_OK
)

959 
”r
 = 
UNZ_ERRNO
;

961 ià(
	`unz64loÿl_g‘ShÜt
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
fe_šfo
.
æag
) !=

962 
UNZ_OK
)

963 
”r
 = 
UNZ_ERRNO
;

965 ià(
unz64loÿl_g‘ShÜt


966 (&
s
->
z_fefunc
, s->
fe¡»am
,

967 &
fe_šfo
.
com´essiÚ_m‘hod
è!ğ
UNZ_OK
)

968 
”r
 = 
UNZ_ERRNO
;

970 ià(
	`unz64loÿl_g‘LÚg
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
fe_šfo
.
dosD©e
)

971 !ğ
UNZ_OK
)

972 
”r
 = 
UNZ_ERRNO
;

974 
	`unz64loÿl_DosD©eToTmuD©e
 (
fe_šfo
.
dosD©e
, &fe_šfo.
tmu_d©e
);

976 ià(
	`unz64loÿl_g‘LÚg
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
fe_šfo
.
üc
) !=

977 
UNZ_OK
)

978 
”r
 = 
UNZ_ERRNO
;

980 ià(
	`unz64loÿl_g‘LÚg
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

981 
”r
 = 
UNZ_ERRNO
;

982 
fe_šfo
.
com´es£d_size
 = 
uL
;

984 ià(
	`unz64loÿl_g‘LÚg
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

985 
”r
 = 
UNZ_ERRNO
;

986 
fe_šfo
.
uncom´es£d_size
 = 
uL
;

988 ià(
unz64loÿl_g‘ShÜt


989 (&
s
->
z_fefunc
, s->
fe¡»am
, &
fe_šfo
.
size_f’ame
è!ğ
UNZ_OK
)

990 
”r
 = 
UNZ_ERRNO
;

992 ià(
unz64loÿl_g‘ShÜt


993 (&
s
->
z_fefunc
, s->
fe¡»am
, &
fe_šfo
.
size_fe_exŒa
è!ğ
UNZ_OK
)

994 
”r
 = 
UNZ_ERRNO
;

996 ià(
unz64loÿl_g‘ShÜt


997 (&
s
->
z_fefunc
, s->
fe¡»am
, &
fe_šfo
.
size_fe_comm’t
è!ğ
UNZ_OK
)

998 
”r
 = 
UNZ_ERRNO
;

1000 ià(
unz64loÿl_g‘ShÜt


1001 (&
s
->
z_fefunc
, s->
fe¡»am
, &
fe_šfo
.
disk_num_¡¬t
è!ğ
UNZ_OK
)

1002 
”r
 = 
UNZ_ERRNO
;

1004 ià(
unz64loÿl_g‘ShÜt


1005 (&
s
->
z_fefunc
, s->
fe¡»am
, &
fe_šfo
.
š‹º®_ç
è!ğ
UNZ_OK
)

1006 
”r
 = 
UNZ_ERRNO
;

1008 ià(
unz64loÿl_g‘LÚg


1009 (&
s
->
z_fefunc
, s->
fe¡»am
, &
fe_šfo
.
ex‹º®_ç
è!ğ
UNZ_OK
)

1010 
”r
 = 
UNZ_ERRNO
;

1013 ià(
	`unz64loÿl_g‘LÚg
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uL
è!ğ
UNZ_OK
)

1014 
”r
 = 
UNZ_ERRNO
;

1015 
fe_šfo_š‹º®
.
off£t_curfe
 = 
uL
;

1017 
lS“k
 +ğ
fe_šfo
.
size_f’ame
;

1018 ià((
”r
 =ğ
UNZ_OK
è&& (
szFeName
 !ğ
NULL
))

1020 
uLÚg
 
uSizeR—d
;

1021 ià(
fe_šfo
.
size_f’ame
 < 
feNameBufãrSize
)

1023 *(
szFeName
 + 
fe_šfo
.
size_f’ame
) = '\0';

1024 
uSizeR—d
 = 
fe_šfo
.
size_f’ame
;

1027 
uSizeR—d
 = 
feNameBufãrSize
;

1029 ià((
fe_šfo
.
size_f’ame
 > 0è&& (
feNameBufãrSize
 > 0))

1030 ià(
	`ZREAD64
 (
s
->
z_fefunc
, s->
fe¡»am
, 
szFeName
, 
uSizeR—d
) !=

1031 
uSizeR—d
)

1032 
”r
 = 
UNZ_ERRNO
;

1033 
lS“k
 -ğ
uSizeR—d
;

1037 ià((
”r
 =ğ
UNZ_OK
è&& (
exŒaF›ld
 !ğ
NULL
))

1039 
ZPOS64_T
 
uSizeR—d
;

1040 ià(
fe_šfo
.
size_fe_exŒa
 < 
exŒaF›ldBufãrSize
)

1041 
uSizeR—d
 = 
fe_šfo
.
size_fe_exŒa
;

1043 
uSizeR—d
 = 
exŒaF›ldBufãrSize
;

1045 ià(
lS“k
 != 0)

1047 ià(
ZSEEK64


1048 (
s
->
z_fefunc
, s->
fe¡»am
, 
lS“k
,

1049 
ZLIB_FILEFUNC_SEEK_CUR
) == 0)

1050 
lS“k
 = 0;

1052 
”r
 = 
UNZ_ERRNO
;

1055 ià((
fe_šfo
.
size_fe_exŒa
 > 0è&& (
exŒaF›ldBufãrSize
 > 0))

1056 ià(
ZREAD64


1057 (
s
->
z_fefunc
, s->
fe¡»am
, 
exŒaF›ld
,

1058 (
uLÚg
è
uSizeR—d
) != uSizeRead)

1059 
”r
 = 
UNZ_ERRNO
;

1061 
lS“k
 +ğ
fe_šfo
.
size_fe_exŒa
 - (
uLÚg
è
uSizeR—d
;

1064 
lS“k
 +ğ
fe_šfo
.
size_fe_exŒa
;

1067 ià((
”r
 =ğ
UNZ_OK
è&& (
fe_šfo
.
size_fe_exŒa
 != 0))

1069 
uLÚg
 
acc
 = 0;

1072 
lS“k
 -ğ
fe_šfo
.
size_fe_exŒa
;

1074 ià(
lS“k
 != 0)

1076 ià(
ZSEEK64


1077 (
s
->
z_fefunc
, s->
fe¡»am
, 
lS“k
,

1078 
ZLIB_FILEFUNC_SEEK_CUR
) == 0)

1079 
lS“k
 = 0;

1081 
”r
 = 
UNZ_ERRNO
;

1084 
acc
 < 
fe_šfo
.
size_fe_exŒa
)

1086 
uLÚg
 
h—d”Id
;

1087 
uLÚg
 
d©aSize
;

1089 ià(
	`unz64loÿl_g‘ShÜt
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
h—d”Id
)

1090 !ğ
UNZ_OK
)

1091 
”r
 = 
UNZ_ERRNO
;

1093 ià(
	`unz64loÿl_g‘ShÜt
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
d©aSize
)

1094 !ğ
UNZ_OK
)

1095 
”r
 = 
UNZ_ERRNO
;

1098 ià(
h—d”Id
 == 0x0001)

1100 
uLÚg
 
uL
;

1102 ià(
fe_šfo
.
uncom´es£d_size
 =ğ
MAXU32
)

1104 ià(
unz64loÿl_g‘LÚg64


1105 (&
s
->
z_fefunc
, s->
fe¡»am
,

1106 &
fe_šfo
.
uncom´es£d_size
è!ğ
UNZ_OK
)

1107 
”r
 = 
UNZ_ERRNO
;

1110 ià(
fe_šfo
.
com´es£d_size
 =ğ
MAXU32
)

1112 ià(
unz64loÿl_g‘LÚg64


1113 (&
s
->
z_fefunc
, s->
fe¡»am
,

1114 &
fe_šfo
.
com´es£d_size
è!ğ
UNZ_OK
)

1115 
”r
 = 
UNZ_ERRNO
;

1118 ià(
fe_šfo_š‹º®
.
off£t_curfe
 =ğ
MAXU32
)

1121 ià(
unz64loÿl_g‘LÚg64


1122 (&
s
->
z_fefunc
, s->
fe¡»am
,

1123 &
fe_šfo_š‹º®
.
off£t_curfe
è!ğ
UNZ_OK
)

1124 
”r
 = 
UNZ_ERRNO
;

1127 ià(
fe_šfo
.
disk_num_¡¬t
 =ğ
MAXU32
)

1130 ià(
	`unz64loÿl_g‘LÚg
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uL
)

1131 !ğ
UNZ_OK
)

1132 
”r
 = 
UNZ_ERRNO
;

1138 ià(
ZSEEK64


1139 (
s
->
z_fefunc
, s->
fe¡»am
, 
d©aSize
,

1140 
ZLIB_FILEFUNC_SEEK_CUR
) != 0)

1141 
”r
 = 
UNZ_ERRNO
;

1144 
acc
 +ğ2 + 2 + 
d©aSize
;

1148 ià((
”r
 =ğ
UNZ_OK
è&& (
szComm’t
 !ğ
NULL
))

1150 
uLÚg
 
uSizeR—d
;

1151 ià(
fe_šfo
.
size_fe_comm’t
 < 
comm’tBufãrSize
)

1153 *(
szComm’t
 + 
fe_šfo
.
size_fe_comm’t
) = '\0';

1154 
uSizeR—d
 = 
fe_šfo
.
size_fe_comm’t
;

1157 
uSizeR—d
 = 
comm’tBufãrSize
;

1159 ià(
lS“k
 != 0)

1161 ià(
ZSEEK64


1162 (
s
->
z_fefunc
, s->
fe¡»am
, 
lS“k
,

1163 
ZLIB_FILEFUNC_SEEK_CUR
) == 0)

1164 
lS“k
 = 0;

1166 
”r
 = 
UNZ_ERRNO
;

1169 ià((
fe_šfo
.
size_fe_comm’t
 > 0è&& (
comm’tBufãrSize
 > 0))

1170 ià(
	`ZREAD64
 (
s
->
z_fefunc
, s->
fe¡»am
, 
szComm’t
, 
uSizeR—d
) !=

1171 
uSizeR—d
)

1172 
”r
 = 
UNZ_ERRNO
;

1173 
lS“k
 +ğ
fe_šfo
.
size_fe_comm’t
 - 
uSizeR—d
;

1176 
lS“k
 +ğ
fe_šfo
.
size_fe_comm’t
;

1179 ià((
”r
 =ğ
UNZ_OK
è&& (
pfe_šfo
 !ğ
NULL
))

1180 *
pfe_šfo
 = 
fe_šfo
;

1182 ià((
”r
 =ğ
UNZ_OK
è&& (
pfe_šfo_š‹º®
 !ğ
NULL
))

1183 *
pfe_šfo_š‹º®
 = 
fe_šfo_š‹º®
;

1185  
”r
;

1186 
	}
}

1195 
ZEXPORT


1196 
	$unzG‘Cu¼’tFeInfo64
 (
unzFe
 
fe
,

1197 
unz_fe_šfo64
 * 
pfe_šfo
,

1198 *
szFeName
, 
uLÚg
 
feNameBufãrSize
,

1199 *
exŒaF›ld
, 
uLÚg
 
exŒaF›ldBufãrSize
,

1200 *
szComm’t
, 
uLÚg
 
comm’tBufãrSize
)

1202  
	`unz64loÿl_G‘Cu¼’tFeInfoIÁ”Çl
 (
fe
, 
pfe_šfo
, 
NULL
,

1203 
szFeName
,

1204 
feNameBufãrSize
,

1205 
exŒaF›ld
,

1206 
exŒaF›ldBufãrSize
,

1207 
szComm’t
, 
comm’tBufãrSize
);

1208 
	}
}

1210 
ZEXPORT


1211 
	$unzG‘Cu¼’tFeInfo
 (
unzFe
 
fe
,

1212 
unz_fe_šfo
 * 
pfe_šfo
,

1213 *
szFeName
, 
uLÚg
 
feNameBufãrSize
,

1214 *
exŒaF›ld
, 
uLÚg
 
exŒaF›ldBufãrSize
,

1215 *
szComm’t
, 
uLÚg
 
comm’tBufãrSize
)

1217 
”r
;

1218 
unz_fe_šfo64
 
fe_šfo64
;

1219 
”r
 = 
	`unz64loÿl_G‘Cu¼’tFeInfoIÁ”Çl
 (
fe
, &
fe_šfo64
, 
NULL
,

1220 
szFeName
, 
feNameBufãrSize
,

1221 
exŒaF›ld
,

1222 
exŒaF›ldBufãrSize
,

1223 
szComm’t
, 
comm’tBufãrSize
);

1224 ià((
”r
 =ğ
UNZ_OK
è&& (
pfe_šfo
 !ğ
NULL
))

1226 
pfe_šfo
->
v”siÚ
 = 
fe_šfo64
.version;

1227 
pfe_šfo
->
v”siÚ_Ãeded
 = 
fe_šfo64
.version_needed;

1228 
pfe_šfo
->
æag
 = 
fe_šfo64
.flag;

1229 
pfe_šfo
->
com´essiÚ_m‘hod
 = 
fe_šfo64
.compression_method;

1230 
pfe_šfo
->
dosD©e
 = 
fe_šfo64
.dosDate;

1231 
pfe_šfo
->
üc
 = 
fe_šfo64
.crc;

1233 
pfe_šfo
->
size_f’ame
 = 
fe_šfo64
.size_filename;

1234 
pfe_šfo
->
size_fe_exŒa
 = 
fe_šfo64
.size_file_extra;

1235 
pfe_šfo
->
size_fe_comm’t
 = 
fe_šfo64
.size_file_comment;

1237 
pfe_šfo
->
disk_num_¡¬t
 = 
fe_šfo64
.disk_num_start;

1238 
pfe_šfo
->
š‹º®_ç
 = 
fe_šfo64
.internal_fa;

1239 
pfe_šfo
->
ex‹º®_ç
 = 
fe_šfo64
.external_fa;

1241 
pfe_šfo
->
tmu_d©e
 = 
fe_šfo64
.tmu_date,

1242 
pfe_šfo
->
com´es£d_size
 = (
uLÚg
è
fe_šfo64
.compressed_size;

1243 
pfe_šfo
->
uncom´es£d_size
 = (
uLÚg
è
fe_šfo64
.uncompressed_size;

1246  
”r
;

1247 
	}
}

1253 
ZEXPORT


1254 
	$unzGoToFœ¡Fe
 (
unzFe
 
fe
)

1256 
”r
 = 
UNZ_OK
;

1257 
unz64_s
 *
s
;

1258 ià(
fe
 =ğ
NULL
)

1259  
UNZ_PARAMERROR
;

1260 
s
 = (
unz64_s
 *è
fe
;

1261 
s
->
pos_š_ûÁ¿l_dœ
 = s->
off£t_ûÁ¿l_dœ
;

1262 
s
->
num_fe
 = 0;

1263 
”r
 = 
	`unz64loÿl_G‘Cu¼’tFeInfoIÁ”Çl
 (
fe
, &
s
->
cur_fe_šfo
,

1264 &
s
->
cur_fe_šfo_š‹º®
,

1265 
NULL
, 0, NULL, 0, NULL, 0);

1266 
s
->
cu¼’t_fe_ok
 = (
”r
 =ğ
UNZ_OK
);

1267  
”r
;

1268 
	}
}

1275 
ZEXPORT


1276 
	$unzGoToNextFe
 (
unzFe
 
fe
)

1278 
unz64_s
 *
s
;

1279 
”r
;

1281 ià(
fe
 =ğ
NULL
)

1282  
UNZ_PARAMERROR
;

1283 
s
 = (
unz64_s
 *è
fe
;

1284 ià(!
s
->
cu¼’t_fe_ok
)

1285  
UNZ_END_OF_LIST_OF_FILE
;

1286 ià(
s
->
gi
.
numb”_’Œy
 != 0xffff)

1287 ià(
s
->
num_fe
 + 1 =ğs->
gi
.
numb”_’Œy
)

1288  
UNZ_END_OF_LIST_OF_FILE
;

1290 
s
->
pos_š_ûÁ¿l_dœ
 +=

1291 
SIZECENTRALDIRITEM
 + 
s
->
cur_fe_šfo
.
size_f’ame
 +

1292 
s
->
cur_fe_šfo
.
size_fe_exŒa
 + s->cur_fe_šfo.
size_fe_comm’t
;

1293 
s
->
num_fe
++;

1294 
”r
 = 
	`unz64loÿl_G‘Cu¼’tFeInfoIÁ”Çl
 (
fe
, &
s
->
cur_fe_šfo
,

1295 &
s
->
cur_fe_šfo_š‹º®
,

1296 
NULL
, 0, NULL, 0, NULL, 0);

1297 
s
->
cu¼’t_fe_ok
 = (
”r
 =ğ
UNZ_OK
);

1298  
”r
;

1299 
	}
}

1310 
ZEXPORT


1311 
	$unzLoÿ‹Fe
 (
unzFe
 
fe
, cÚ¡ *
szFeName
, 
iCa£S’s™iv™y
)

1313 
unz64_s
 *
s
;

1314 
”r
;

1319 
unz_fe_šfo64
 
cur_fe_šfoSaved
;

1320 
unz_fe_šfo64_š‹º®
 
cur_fe_šfo_š‹º®Saved
;

1321 
ZPOS64_T
 
num_feSaved
;

1322 
ZPOS64_T
 
pos_š_ûÁ¿l_dœSaved
;

1325 ià(
fe
 =ğ
NULL
)

1326  
UNZ_PARAMERROR
;

1328 ià(
	`¡¾’
 (
szFeName
è>ğ
UNZ_MAXFILENAMEINZIP
)

1329  
UNZ_PARAMERROR
;

1331 
s
 = (
unz64_s
 *è
fe
;

1332 ià(!
s
->
cu¼’t_fe_ok
)

1333  
UNZ_END_OF_LIST_OF_FILE
;

1336 
num_feSaved
 = 
s
->
num_fe
;

1337 
pos_š_ûÁ¿l_dœSaved
 = 
s
->
pos_š_ûÁ¿l_dœ
;

1338 
cur_fe_šfoSaved
 = 
s
->
cur_fe_šfo
;

1339 
cur_fe_šfo_š‹º®Saved
 = 
s
->
cur_fe_šfo_š‹º®
;

1341 
”r
 = 
	`unzGoToFœ¡Fe
 (
fe
);

1343 
”r
 =ğ
UNZ_OK
)

1345 
szCu¼’tFeName
[
UNZ_MAXFILENAMEINZIP
 + 1];

1346 
”r
 = 
	`unzG‘Cu¼’tFeInfo64
 (
fe
, 
NULL
,

1347 
szCu¼’tFeName
,

1348  (
szCu¼’tFeName
è- 1, 
NULL
, 0,

1349 
NULL
, 0);

1350 ià(
”r
 =ğ
UNZ_OK
)

1352 ià(
	`unzSŒšgFeNameCom·»
 (
szCu¼’tFeName
,

1353 
szFeName
, 
iCa£S’s™iv™y
) == 0)

1354  
UNZ_OK
;

1355 
”r
 = 
	`unzGoToNextFe
 (
fe
);

1362 
s
->
num_fe
 = 
num_feSaved
;

1363 
s
->
pos_š_ûÁ¿l_dœ
 = 
pos_š_ûÁ¿l_dœSaved
;

1364 
s
->
cur_fe_šfo
 = 
cur_fe_šfoSaved
;

1365 
s
->
cur_fe_šfo_š‹º®
 = 
cur_fe_šfo_š‹º®Saved
;

1366  
”r
;

1367 
	}
}

1388 
ZEXPORT


1389 
	$unzG‘FePos64
 (
unzFe
 
fe
, 
unz64_fe_pos
 * 
fe_pos
)

1391 
unz64_s
 *
s
;

1393 ià(
fe
 =ğ
NULL
 || 
fe_pos
 == NULL)

1394  
UNZ_PARAMERROR
;

1395 
s
 = (
unz64_s
 *è
fe
;

1396 ià(!
s
->
cu¼’t_fe_ok
)

1397  
UNZ_END_OF_LIST_OF_FILE
;

1399 
fe_pos
->
pos_š_z_dœeùÜy
 = 
s
->
pos_š_ûÁ¿l_dœ
;

1400 
fe_pos
->
num_of_fe
 = 
s
->
num_fe
;

1402  
UNZ_OK
;

1403 
	}
}

1405 
ZEXPORT


1406 
	$unzG‘FePos
 (
unzFe
 
fe
, 
unz_fe_pos
 * 
fe_pos
)

1408 
unz64_fe_pos
 
fe_pos64
;

1409 
”r
 = 
	`unzG‘FePos64
 (
fe
, &
fe_pos64
);

1410 ià(
”r
 =ğ
UNZ_OK
)

1412 
fe_pos
->
pos_š_z_dœeùÜy
 =

1413 (
uLÚg
è
fe_pos64
.
pos_š_z_dœeùÜy
;

1414 
fe_pos
->
num_of_fe
 = (
uLÚg
è
fe_pos64
.num_of_file;

1416  
”r
;

1417 
	}
}

1419 
ZEXPORT


1420 
	$unzGoToFePos64
 (
unzFe
 
fe
, cÚ¡ 
unz64_fe_pos
 * 
fe_pos
)

1422 
unz64_s
 *
s
;

1423 
”r
;

1425 ià(
fe
 =ğ
NULL
 || 
fe_pos
 == NULL)

1426  
UNZ_PARAMERROR
;

1427 
s
 = (
unz64_s
 *è
fe
;

1430 
s
->
pos_š_ûÁ¿l_dœ
 = 
fe_pos
->
pos_š_z_dœeùÜy
;

1431 
s
->
num_fe
 = 
fe_pos
->
num_of_fe
;

1434 
”r
 = 
	`unz64loÿl_G‘Cu¼’tFeInfoIÁ”Çl
 (
fe
, &
s
->
cur_fe_šfo
,

1435 &
s
->
cur_fe_šfo_š‹º®
,

1436 
NULL
, 0, NULL, 0, NULL, 0);

1438 
s
->
cu¼’t_fe_ok
 = (
”r
 =ğ
UNZ_OK
);

1439  
”r
;

1440 
	}
}

1442 
ZEXPORT


1443 
	$unzGoToFePos
 (
unzFe
 
fe
, 
unz_fe_pos
 * 
fe_pos
)

1445 
unz64_fe_pos
 
fe_pos64
;

1446 ià(
fe_pos
 =ğ
NULL
)

1447  
UNZ_PARAMERROR
;

1449 
fe_pos64
.
pos_š_z_dœeùÜy
 = 
fe_pos
->pos_in_zip_directory;

1450 
fe_pos64
.
num_of_fe
 = 
fe_pos
->num_of_file;

1451  
	`unzGoToFePos64
 (
fe
, &
fe_pos64
);

1452 
	}
}

1466 
loÿl
 

1467 
	$unz64loÿl_CheckCu¼’tFeCoh”’cyH—d”
 (
unz64_s
 * 
s
, 
uIÁ
 * 
piSizeV¬
,

1468 
ZPOS64_T
 *

1469 
poff£t_loÿl_exŒaf›ld
,

1470 
uIÁ
 * 
psize_loÿl_exŒaf›ld
)

1472 
uLÚg
 
uMagic
, 
uD©a
, 
uFÏgs
;

1473 
uLÚg
 
size_f’ame
;

1474 
uLÚg
 
size_exŒa_f›ld
;

1475 
”r
 = 
UNZ_OK
;

1477 *
piSizeV¬
 = 0;

1478 *
poff£t_loÿl_exŒaf›ld
 = 0;

1479 *
psize_loÿl_exŒaf›ld
 = 0;

1481 ià(
ZSEEK64


1482 (
s
->
z_fefunc
, s->
fe¡»am
,

1483 
s
->
cur_fe_šfo_š‹º®
.
off£t_curfe
 + s->
by‹_befÜe_the_zfe
,

1484 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

1485  
UNZ_ERRNO
;

1488 ià(
”r
 =ğ
UNZ_OK
)

1490 ià(
	`unz64loÿl_g‘LÚg
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uMagic
) !=

1491 
UNZ_OK
)

1492 
”r
 = 
UNZ_ERRNO
;

1493 ià(
uMagic
 != 0x04034b50)

1494 
”r
 = 
UNZ_BADZIPFILE
;

1497 ià(
	`unz64loÿl_g‘ShÜt
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uD©a
è!ğ
UNZ_OK
)

1498 
”r
 = 
UNZ_ERRNO
;

1503 ià(
	`unz64loÿl_g‘ShÜt
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uFÏgs
è!ğ
UNZ_OK
)

1504 
”r
 = 
UNZ_ERRNO
;

1506 ià(
	`unz64loÿl_g‘ShÜt
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uD©a
è!ğ
UNZ_OK
)

1507 
”r
 = 
UNZ_ERRNO
;

1508 ià((
”r
 =ğ
UNZ_OK
è&& (
uD©a
 !ğ
s
->
cur_fe_šfo
.
com´essiÚ_m‘hod
))

1509 
”r
 = 
UNZ_BADZIPFILE
;

1511 ià((
”r
 =ğ
UNZ_OK
è&& (
s
->
cur_fe_šfo
.
com´essiÚ_m‘hod
 != 0) &&

1513 (
s
->
cur_fe_šfo
.
com´essiÚ_m‘hod
 !ğ
Z_BZIP2ED
) &&

1515 (
s
->
cur_fe_šfo
.
com´essiÚ_m‘hod
 !ğ
Z_DEFLATED
))

1516 
”r
 = 
UNZ_BADZIPFILE
;

1518 ià(
	`unz64loÿl_g‘LÚg
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uD©a
è!ğ
UNZ_OK
)

1519 
”r
 = 
UNZ_ERRNO
;

1521 ià(
	`unz64loÿl_g‘LÚg
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uD©a
è!ğ
UNZ_OK
)

1522 
”r
 = 
UNZ_ERRNO
;

1523 ià((
”r
 =ğ
UNZ_OK
è&& (
uD©a
 !ğ
s
->
cur_fe_šfo
.
üc
)

1524 && ((
uFÏgs
 & 8) == 0))

1525 
”r
 = 
UNZ_BADZIPFILE
;

1527 ià(
	`unz64loÿl_g‘LÚg
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uD©a
è!ğ
UNZ_OK
)

1528 
”r
 = 
UNZ_ERRNO
;

1529 ià(
uD©a
 !ğ0xFFFFFFFF && (
”r
 =ğ
UNZ_OK
)

1530 && (
uD©a
 !ğ
s
->
cur_fe_šfo
.
com´es£d_size
)

1531 && ((
uFÏgs
 & 8) == 0))

1532 
”r
 = 
UNZ_BADZIPFILE
;

1534 ià(
	`unz64loÿl_g‘LÚg
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
uD©a
è!ğ
UNZ_OK
)

1535 
”r
 = 
UNZ_ERRNO
;

1536 ià(
uD©a
 !ğ0xFFFFFFFF && (
”r
 =ğ
UNZ_OK
)

1537 && (
uD©a
 !ğ
s
->
cur_fe_šfo
.
uncom´es£d_size
)

1538 && ((
uFÏgs
 & 8) == 0))

1539 
”r
 = 
UNZ_BADZIPFILE
;

1541 ià(
	`unz64loÿl_g‘ShÜt
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
size_f’ame
) !=

1542 
UNZ_OK
)

1543 
”r
 = 
UNZ_ERRNO
;

1544 ià((
”r
 =ğ
UNZ_OK
)

1545 && (
size_f’ame
 !ğ
s
->
cur_fe_šfo
.size_filename))

1546 
”r
 = 
UNZ_BADZIPFILE
;

1548 *
piSizeV¬
 +ğ(
uIÁ
è
size_f’ame
;

1550 ià(
	`unz64loÿl_g‘ShÜt
 (&
s
->
z_fefunc
, s->
fe¡»am
, &
size_exŒa_f›ld
)

1551 !ğ
UNZ_OK
)

1552 
”r
 = 
UNZ_ERRNO
;

1553 *
poff£t_loÿl_exŒaf›ld
 = 
s
->
cur_fe_šfo_š‹º®
.
off£t_curfe
 +

1554 
SIZEZIPLOCALHEADER
 + 
size_f’ame
;

1555 *
psize_loÿl_exŒaf›ld
 = (
uIÁ
è
size_exŒa_f›ld
;

1557 *
piSizeV¬
 +ğ(
uIÁ
è
size_exŒa_f›ld
;

1559  
”r
;

1560 
	}
}

1566 
ZEXPORT


1567 
	$unzO³nCu¼’tFe3
 (
unzFe
 
fe
, *
m‘hod
,

1568 *
Ëv–
, 
¿w
, cÚ¡ *
·sswÜd
)

1570 
”r
 = 
UNZ_OK
;

1571 
uIÁ
 
iSizeV¬
;

1572 
unz64_s
 *
s
;

1573 
fe_š_z64_»ad_šfo_s
 *
pfe_š_z_»ad_šfo
;

1574 
ZPOS64_T
 
off£t_loÿl_exŒaf›ld
;

1575 
uIÁ
 
size_loÿl_exŒaf›ld
;

1576 #iâdeà
NOUNCRYPT


1577 
sourû
[12];

1579 ià(
·sswÜd
 !ğ
NULL
)

1580  
UNZ_PARAMERROR
;

1583 ià(
fe
 =ğ
NULL
)

1584  
UNZ_PARAMERROR
;

1585 
s
 = (
unz64_s
 *è
fe
;

1586 ià(!
s
->
cu¼’t_fe_ok
)

1587  
UNZ_PARAMERROR
;

1589 ià(
s
->
pfe_š_z_»ad
 !ğ
NULL
)

1590 
	`unzClo£Cu¼’tFe
 (
fe
);

1592 ià(
unz64loÿl_CheckCu¼’tFeCoh”’cyH—d”


1593 (
s
, &
iSizeV¬
, &
off£t_loÿl_exŒaf›ld
,

1594 &
size_loÿl_exŒaf›ld
è!ğ
UNZ_OK
)

1595  
UNZ_BADZIPFILE
;

1597 
pfe_š_z_»ad_šfo
 =

1598 (
fe_š_z64_»ad_šfo_s
 *è
	`ALLOC
 ( (file_in_zip64_read_info_s));

1599 ià(
pfe_š_z_»ad_šfo
 =ğ
NULL
)

1600  
UNZ_INTERNALERROR
;

1602 
pfe_š_z_»ad_šfo
->
»ad_bufãr
 = (*è
	`ALLOC
 (
UNZ_BUFSIZE
);

1603 
pfe_š_z_»ad_šfo
->
off£t_loÿl_exŒaf›ld
 = offset_local_extrafield;

1604 
pfe_š_z_»ad_šfo
->
size_loÿl_exŒaf›ld
 = size_local_extrafield;

1605 
pfe_š_z_»ad_šfo
->
pos_loÿl_exŒaf›ld
 = 0;

1606 
pfe_š_z_»ad_šfo
->
¿w
 =„aw;

1608 ià(
pfe_š_z_»ad_šfo
->
»ad_bufãr
 =ğ
NULL
)

1610 
	`TRYFREE
 (
pfe_š_z_»ad_šfo
);

1611  
UNZ_INTERNALERROR
;

1614 
pfe_š_z_»ad_šfo
->
¡»am_š™Ÿli£d
 = 0;

1616 ià(
m‘hod
 !ğ
NULL
)

1617 *
m‘hod
 = (è
s
->
cur_fe_šfo
.
com´essiÚ_m‘hod
;

1619 ià(
Ëv–
 !ğ
NULL
)

1621 *
Ëv–
 = 6;

1622 
s
->
cur_fe_šfo
.
æag
 & 0x06)

1625 *
Ëv–
 = 1;

1628 *
Ëv–
 = 2;

1631 *
Ëv–
 = 9;

1636 ià((
s
->
cur_fe_šfo
.
com´essiÚ_m‘hod
 != 0) &&

1638 (
s
->
cur_fe_šfo
.
com´essiÚ_m‘hod
 !ğ
Z_BZIP2ED
) &&

1640 (
s
->
cur_fe_šfo
.
com´essiÚ_m‘hod
 !ğ
Z_DEFLATED
))

1642 
”r
 = 
UNZ_BADZIPFILE
;

1644 
pfe_š_z_»ad_šfo
->
üc32_wa™
 = 
s
->
cur_fe_šfo
.
üc
;

1645 
pfe_š_z_»ad_šfo
->
üc32
 = 0;

1646 
pfe_š_z_»ad_šfo
->
tÙ®_out_64
 = 0;

1647 
pfe_š_z_»ad_šfo
->
com´essiÚ_m‘hod
 =

1648 
s
->
cur_fe_šfo
.
com´essiÚ_m‘hod
;

1649 
pfe_š_z_»ad_šfo
->
fe¡»am
 = 
s
->filestream;

1650 
pfe_š_z_»ad_šfo
->
z_fefunc
 = 
s
->z_filefunc;

1651 
pfe_š_z_»ad_šfo
->
by‹_befÜe_the_zfe
 =

1652 
s
->
by‹_befÜe_the_zfe
;

1654 
pfe_š_z_»ad_šfo
->
¡»am
.
tÙ®_out
 = 0;

1656 ià((
s
->
cur_fe_šfo
.
com´essiÚ_m‘hod
 =ğ
Z_BZIP2ED
è&& (!
¿w
))

1658 #ifdeà
HAVE_BZIP2


1659 
pfe_š_z_»ad_šfo
->
b¡»am
.
bz®loc
 =

1661 
pfe_š_z_»ad_šfo
->
b¡»am
.
bzä“
 = (
ä“_func
) 0;

1662 
pfe_š_z_»ad_šfo
->
b¡»am
.
İaque
 = (
voidpf
) 0;

1663 
pfe_š_z_»ad_šfo
->
b¡»am
.
¡©e
 = (
voidpf
) 0;

1665 
pfe_š_z_»ad_šfo
->
¡»am
.
z®loc
 = (
®loc_func
) 0;

1666 
pfe_š_z_»ad_šfo
->
¡»am
.
zä“
 = (
ä“_func
) 0;

1667 
pfe_š_z_»ad_šfo
->
¡»am
.
İaque
 = (
voidpf
) 0;

1668 
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_š
 = (
voidpf
) 0;

1669 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
 = 0;

1671 
”r
 = 
	`BZ2_bzDecom´essIn™
 (&
pfe_š_z_»ad_šfo
->
b¡»am
, 0, 0);

1672 ià(
”r
 =ğ
Z_OK
)

1673 
pfe_š_z_»ad_šfo
->
¡»am_š™Ÿli£d
 = 
Z_BZIP2ED
;

1676 
	`TRYFREE
 (
pfe_š_z_»ad_šfo
);

1677  
”r
;

1680 
pfe_š_z_»ad_šfo
->
¿w
 = 1;

1683 ià((
s
->
cur_fe_šfo
.
com´essiÚ_m‘hod
 =ğ
Z_DEFLATED
è&& (!
¿w
))

1685 
pfe_š_z_»ad_šfo
->
¡»am
.
z®loc
 = (
®loc_func
) 0;

1686 
pfe_š_z_»ad_šfo
->
¡»am
.
zä“
 = (
ä“_func
) 0;

1687 
pfe_š_z_»ad_šfo
->
¡»am
.
İaque
 = (
voidpf
) 0;

1688 
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_š
 = 0;

1689 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
 = 0;

1691 
”r
 = 
	`šæ©eIn™2
 (&
pfe_š_z_»ad_šfo
->
¡»am
, -
MAX_WBITS
);

1692 ià(
”r
 =ğ
Z_OK
)

1693 
pfe_š_z_»ad_šfo
->
¡»am_š™Ÿli£d
 = 
Z_DEFLATED
;

1696 
	`TRYFREE
 (
pfe_š_z_»ad_šfo
);

1697  
”r
;

1707 
pfe_š_z_»ad_šfo
->
»¡_»ad_com´es£d
 =

1708 
s
->
cur_fe_šfo
.
com´es£d_size
;

1709 
pfe_š_z_»ad_šfo
->
»¡_»ad_uncom´es£d
 =

1710 
s
->
cur_fe_šfo
.
uncom´es£d_size
;

1713 
pfe_š_z_»ad_šfo
->
pos_š_zfe
 =

1714 
s
->
cur_fe_šfo_š‹º®
.
off£t_curfe
 + 
SIZEZIPLOCALHEADER
 + 
iSizeV¬
;

1716 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
 = (
uIÁ
) 0;

1718 
s
->
pfe_š_z_»ad
 = 
pfe_š_z_»ad_šfo
;

1719 
s
->
’üy±ed
 = 0;

1721 #iâdeà
NOUNCRYPT


1722 ià(
·sswÜd
 !ğ
NULL
)

1724 
i
;

1725 
s
->
püc_32_b
 = 
	`g‘_üc_bË
 ();

1726 
	`š™_keys
 (
·sswÜd
, 
s
->
keys
, s->
püc_32_b
);

1727 ià(
	`ZSEEK64
 (
s
->
z_fefunc
, s->
fe¡»am
,

1728 
s
->
pfe_š_z_»ad
->
pos_š_zfe
 +

1729 
s
->
pfe_š_z_»ad
->
by‹_befÜe_the_zfe
,

1730 
SEEK_SET
) != 0)

1731  
UNZ_INTERNALERROR
;

1732 ià(
	`ZREAD64
 (
s
->
z_fefunc
, s->
fe¡»am
, 
sourû
, 12) < 12)

1733  
UNZ_INTERNALERROR
;

1735 
i
 = 0; i < 12; i++)

1736 
	`zdecode
 (
s
->
keys
, s->
püc_32_b
, 
sourû
[
i
]);

1738 
s
->
pfe_š_z_»ad
->
pos_š_zfe
 += 12;

1739 
s
->
’üy±ed
 = 1;

1744  
UNZ_OK
;

1745 
	}
}

1747 
ZEXPORT


1748 
	$unzO³nCu¼’tFe
 (
unzFe
 
fe
)

1750  
	`unzO³nCu¼’tFe3
 (
fe
, 
NULL
, NULL, 0, NULL);

1751 
	}
}

1753 
ZEXPORT


1754 
	$unzO³nCu¼’tFePasswÜd
 (
unzFe
 
fe
, cÚ¡ *
·sswÜd
)

1756  
	`unzO³nCu¼’tFe3
 (
fe
, 
NULL
, NULL, 0, 
·sswÜd
);

1757 
	}
}

1759 
ZEXPORT


1760 
	$unzO³nCu¼’tFe2
 (
unzFe
 
fe
, *
m‘hod
, *
Ëv–
, 
¿w
)

1762  
	`unzO³nCu¼’tFe3
 (
fe
, 
m‘hod
, 
Ëv–
, 
¿w
, 
NULL
);

1763 
	}
}

1767 
ZPOS64_T
 
ZEXPORT


1768 
	$unzG‘Cu¼’tFeZSŒ—mPos64
 (
unzFe
 
fe
)

1770 
unz64_s
 *
s
;

1771 
fe_š_z64_»ad_šfo_s
 *
pfe_š_z_»ad_šfo
;

1772 
s
 = (
unz64_s
 *è
fe
;

1773 ià(
fe
 =ğ
NULL
)

1775 
pfe_š_z_»ad_šfo
 = 
s
->
pfe_š_z_»ad
;

1776 ià(
pfe_š_z_»ad_šfo
 =ğ
NULL
)

1778  
pfe_š_z_»ad_šfo
->
pos_š_zfe
 +

1779 
pfe_š_z_»ad_šfo
->
by‹_befÜe_the_zfe
;

1780 
	}
}

1794 
ZEXPORT


1795 
	$unzR—dCu¼’tFe
 (
unzFe
 
fe
, 
voidp
 
buf
, 
Ën
)

1797 
”r
 = 
UNZ_OK
;

1798 
uIÁ
 
iR—d
 = 0;

1799 
unz64_s
 *
s
;

1800 
fe_š_z64_»ad_šfo_s
 *
pfe_š_z_»ad_šfo
;

1801 ià(
fe
 =ğ
NULL
)

1802  
UNZ_PARAMERROR
;

1803 
s
 = (
unz64_s
 *è
fe
;

1804 
pfe_š_z_»ad_šfo
 = 
s
->
pfe_š_z_»ad
;

1806 ià(
pfe_š_z_»ad_šfo
 =ğ
NULL
)

1807  
UNZ_PARAMERROR
;

1810 ià(
pfe_š_z_»ad_šfo
->
»ad_bufãr
 =ğ
NULL
)

1811  
UNZ_END_OF_LIST_OF_FILE
;

1812 ià(
Ën
 == 0)

1815 
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_out
 = (
By‹f
 *è
buf
;

1817 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_out
 = (
uIÁ
è
Ën
;

1819 ià((
Ën
 > 
pfe_š_z_»ad_šfo
->
»¡_»ad_uncom´es£d
) &&

1820 (!(
pfe_š_z_»ad_šfo
->
¿w
)))

1821 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_out
 =

1822 (
uIÁ
è
pfe_š_z_»ad_šfo
->
»¡_»ad_uncom´es£d
;

1824 ià((
Ën
 > 
pfe_š_z_»ad_šfo
->
»¡_»ad_com´es£d
 +

1825 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
) &&

1826 (
pfe_š_z_»ad_šfo
->
¿w
))

1827 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_out
 =

1828 (
uIÁ
è
pfe_š_z_»ad_šfo
->
»¡_»ad_com´es£d
 +

1829 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
;

1831 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_out
 > 0)

1833 ià((
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
 == 0) &&

1834 (
pfe_š_z_»ad_šfo
->
»¡_»ad_com´es£d
 > 0))

1836 
uIÁ
 
uR—dThis
 = 
UNZ_BUFSIZE
;

1837 ià(
pfe_š_z_»ad_šfo
->
»¡_»ad_com´es£d
 < 
uR—dThis
)

1838 
uR—dThis
 = (
uIÁ
è
pfe_š_z_»ad_šfo
->
»¡_»ad_com´es£d
;

1839 ià(
uR—dThis
 == 0)

1840  
UNZ_EOF
;

1841 ià(
	`ZSEEK64
 (
pfe_š_z_»ad_šfo
->
z_fefunc
,

1842 
pfe_š_z_»ad_šfo
->
fe¡»am
,

1843 
pfe_š_z_»ad_šfo
->
pos_š_zfe
 +

1844 
pfe_š_z_»ad_šfo
->
by‹_befÜe_the_zfe
,

1845 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

1846  
UNZ_ERRNO
;

1847 ià(
	`ZREAD64
 (
pfe_š_z_»ad_šfo
->
z_fefunc
,

1848 
pfe_š_z_»ad_šfo
->
fe¡»am
,

1849 
pfe_š_z_»ad_šfo
->
»ad_bufãr
,

1850 
uR—dThis
) != uReadThis)

1851  
UNZ_ERRNO
;

1854 #iâdeà
NOUNCRYPT


1855 ià(
s
->
’üy±ed
)

1857 
uIÁ
 
i
;

1858 
i
 = 0; i < 
uR—dThis
; i++)

1859 
pfe_š_z_»ad_šfo
->
»ad_bufãr
[
i
] =

1860 
	`zdecode
 (
s
->
keys
, s->
püc_32_b
,

1861 
pfe_š_z_»ad_šfo
->
»ad_bufãr
[
i
]);

1866 
pfe_š_z_»ad_šfo
->
pos_š_zfe
 +ğ
uR—dThis
;

1868 
pfe_š_z_»ad_šfo
->
»¡_»ad_com´es£d
 -ğ
uR—dThis
;

1870 
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_š
 =

1871 (
By‹f
 *è
pfe_š_z_»ad_šfo
->
»ad_bufãr
;

1872 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
 = (
uIÁ
è
uR—dThis
;

1875 ià((
pfe_š_z_»ad_šfo
->
com´essiÚ_m‘hod
 == 0)

1876 || (
pfe_š_z_»ad_šfo
->
¿w
))

1878 
uIÁ
 
uDoCİy
, 
i
;

1880 ià((
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
 == 0) &&

1881 (
pfe_š_z_»ad_šfo
->
»¡_»ad_com´es£d
 == 0))

1882  (
iR—d
 =ğ0è? 
UNZ_EOF
 : iRead;

1884 ià(
pfe_š_z_»ad_šfo
->
¡»am
.
ava_out
 <

1885 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
)

1886 
uDoCİy
 = 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_out
;

1888 
uDoCİy
 = 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
;

1890 
i
 = 0; i < 
uDoCİy
; i++)

1891 *(
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_out
 + 
i
) =

1892 *(
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_š
 + 
i
);

1894 
pfe_š_z_»ad_šfo
->
tÙ®_out_64
 =

1895 
pfe_š_z_»ad_šfo
->
tÙ®_out_64
 + 
uDoCİy
;

1897 
pfe_š_z_»ad_šfo
->
üc32
 =

1898 
	`üc32
 (
pfe_š_z_»ad_šfo
->
üc32
,

1899 
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_out
, 
uDoCİy
);

1900 
pfe_š_z_»ad_šfo
->
»¡_»ad_uncom´es£d
 -ğ
uDoCİy
;

1901 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
 -ğ
uDoCİy
;

1902 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_out
 -ğ
uDoCİy
;

1903 
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_out
 +ğ
uDoCİy
;

1904 
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_š
 +ğ
uDoCİy
;

1905 
pfe_š_z_»ad_šfo
->
¡»am
.
tÙ®_out
 +ğ
uDoCİy
;

1906 
iR—d
 +ğ
uDoCİy
;

1908 ià(
pfe_š_z_»ad_šfo
->
com´essiÚ_m‘hod
 =ğ
Z_BZIP2ED
)

1910 #ifdeà
HAVE_BZIP2


1911 
uLÚg
 
uTÙ®OutBefÜe
, 
uTÙ®OutAá”
;

1912 cÚ¡ 
By‹f
 *
bufBefÜe
;

1913 
uLÚg
 
uOutThis
;

1915 
pfe_š_z_»ad_šfo
->
b¡»am
.
Ãxt_š
 =

1916 (*è
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_š
;

1917 
pfe_š_z_»ad_šfo
->
b¡»am
.
ava_š
 =

1918 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
;

1919 
pfe_š_z_»ad_šfo
->
b¡»am
.
tÙ®_š_lo32
 =

1920 
pfe_š_z_»ad_šfo
->
¡»am
.
tÙ®_š
;

1921 
pfe_š_z_»ad_šfo
->
b¡»am
.
tÙ®_š_hi32
 = 0;

1922 
pfe_š_z_»ad_šfo
->
b¡»am
.
Ãxt_out
 =

1923 (*è
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_out
;

1924 
pfe_š_z_»ad_šfo
->
b¡»am
.
ava_out
 =

1925 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_out
;

1926 
pfe_š_z_»ad_šfo
->
b¡»am
.
tÙ®_out_lo32
 =

1927 
pfe_š_z_»ad_šfo
->
¡»am
.
tÙ®_out
;

1928 
pfe_š_z_»ad_šfo
->
b¡»am
.
tÙ®_out_hi32
 = 0;

1930 
uTÙ®OutBefÜe
 = 
pfe_š_z_»ad_šfo
->
b¡»am
.
tÙ®_out_lo32
;

1931 
bufBefÜe
 =

1932 (cÚ¡ 
By‹f
 *è
pfe_š_z_»ad_šfo
->
b¡»am
.
Ãxt_out
;

1934 
”r
 = 
	`BZ2_bzDecom´ess
 (&
pfe_š_z_»ad_šfo
->
b¡»am
);

1936 
uTÙ®OutAá”
 = 
pfe_š_z_»ad_šfo
->
b¡»am
.
tÙ®_out_lo32
;

1937 
uOutThis
 = 
uTÙ®OutAá”
 - 
uTÙ®OutBefÜe
;

1939 
pfe_š_z_»ad_šfo
->
tÙ®_out_64
 =

1940 
pfe_š_z_»ad_šfo
->
tÙ®_out_64
 + 
uOutThis
;

1942 
pfe_š_z_»ad_šfo
->
üc32
 =

1943 
	`üc32
 (
pfe_š_z_»ad_šfo
->
üc32
, 
bufBefÜe
,

1944 (
uIÁ
è(
uOutThis
));

1945 
pfe_š_z_»ad_šfo
->
»¡_»ad_uncom´es£d
 -ğ
uOutThis
;

1946 
iR—d
 +ğ(
uIÁ
è(
uTÙ®OutAá”
 - 
uTÙ®OutBefÜe
);

1948 
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_š
 =

1949 (
By‹f
 *è
pfe_š_z_»ad_šfo
->
b¡»am
.
Ãxt_š
;

1950 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_š
 =

1951 
pfe_š_z_»ad_šfo
->
b¡»am
.
ava_š
;

1952 
pfe_š_z_»ad_šfo
->
¡»am
.
tÙ®_š
 =

1953 
pfe_š_z_»ad_šfo
->
b¡»am
.
tÙ®_š_lo32
;

1954 
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_out
 =

1955 (
By‹f
 *è
pfe_š_z_»ad_šfo
->
b¡»am
.
Ãxt_out
;

1956 
pfe_š_z_»ad_šfo
->
¡»am
.
ava_out
 =

1957 
pfe_š_z_»ad_šfo
->
b¡»am
.
ava_out
;

1958 
pfe_š_z_»ad_šfo
->
¡»am
.
tÙ®_out
 =

1959 
pfe_š_z_»ad_šfo
->
b¡»am
.
tÙ®_out_lo32
;

1961 ià(
”r
 =ğ
BZ_STREAM_END
)

1962  (
iR—d
 =ğ0è? 
UNZ_EOF
 : iRead;

1963 ià(
”r
 !ğ
BZ_OK
)

1969 
ZPOS64_T
 
uTÙ®OutBefÜe
, 
uTÙ®OutAá”
;

1970 cÚ¡ 
By‹f
 *
bufBefÜe
;

1971 
ZPOS64_T
 
uOutThis
;

1972 
æush
 = 
Z_SYNC_FLUSH
;

1974 
uTÙ®OutBefÜe
 = 
pfe_š_z_»ad_šfo
->
¡»am
.
tÙ®_out
;

1975 
bufBefÜe
 = 
pfe_š_z_»ad_šfo
->
¡»am
.
Ãxt_out
;

1983 
”r
 = 
	`šæ©e
 (&
pfe_š_z_»ad_šfo
->
¡»am
, 
æush
);

1985 ià((
”r
 >ğ0è&& (
pfe_š_z_»ad_šfo
->
¡»am
.
msg
 !ğ
NULL
))

1986 
”r
 = 
Z_DATA_ERROR
;

1988 
uTÙ®OutAá”
 = 
pfe_š_z_»ad_šfo
->
¡»am
.
tÙ®_out
;

1989 
uOutThis
 = 
uTÙ®OutAá”
 - 
uTÙ®OutBefÜe
;

1991 
pfe_š_z_»ad_šfo
->
tÙ®_out_64
 =

1992 
pfe_š_z_»ad_šfo
->
tÙ®_out_64
 + 
uOutThis
;

1994 
pfe_š_z_»ad_šfo
->
üc32
 =

1995 
	`üc32
 (
pfe_š_z_»ad_šfo
->
üc32
, 
bufBefÜe
,

1996 (
uIÁ
è(
uOutThis
));

1998 
pfe_š_z_»ad_šfo
->
»¡_»ad_uncom´es£d
 -ğ
uOutThis
;

2000 
iR—d
 +ğ(
uIÁ
è(
uTÙ®OutAá”
 - 
uTÙ®OutBefÜe
);

2002 ià(
”r
 =ğ
Z_STREAM_END
)

2003  (
iR—d
 =ğ0è? 
UNZ_EOF
 : iRead;

2004 ià(
”r
 !ğ
Z_OK
)

2009 ià(
”r
 =ğ
Z_OK
)

2010  
iR—d
;

2011  
”r
;

2012 
	}
}

2018 
z_off_t
 
ZEXPORT


2019 
	$unz‹Î
 (
unzFe
 
fe
)

2021 
unz64_s
 *
s
;

2022 
fe_š_z64_»ad_šfo_s
 *
pfe_š_z_»ad_šfo
;

2023 ià(
fe
 =ğ
NULL
)

2024  
UNZ_PARAMERROR
;

2025 
s
 = (
unz64_s
 *è
fe
;

2026 
pfe_š_z_»ad_šfo
 = 
s
->
pfe_š_z_»ad
;

2028 ià(
pfe_š_z_»ad_šfo
 =ğ
NULL
)

2029  
UNZ_PARAMERROR
;

2031  (
z_off_t
è
pfe_š_z_»ad_šfo
->
¡»am
.
tÙ®_out
;

2032 
	}
}

2034 
ZPOS64_T
 
ZEXPORT


2035 
	$unz‹Î64
 (
unzFe
 
fe
)

2038 
unz64_s
 *
s
;

2039 
fe_š_z64_»ad_šfo_s
 *
pfe_š_z_»ad_šfo
;

2040 ià(
fe
 =ğ
NULL
)

2041  (
ZPOS64_T
) - 1;

2042 
s
 = (
unz64_s
 *è
fe
;

2043 
pfe_š_z_»ad_šfo
 = 
s
->
pfe_š_z_»ad
;

2045 ià(
pfe_š_z_»ad_šfo
 =ğ
NULL
)

2046  (
ZPOS64_T
) - 1;

2048  
pfe_š_z_»ad_šfo
->
tÙ®_out_64
;

2049 
	}
}

2055 
ZEXPORT


2056 
	$unzeof
 (
unzFe
 
fe
)

2058 
unz64_s
 *
s
;

2059 
fe_š_z64_»ad_šfo_s
 *
pfe_š_z_»ad_šfo
;

2060 ià(
fe
 =ğ
NULL
)

2061  
UNZ_PARAMERROR
;

2062 
s
 = (
unz64_s
 *è
fe
;

2063 
pfe_š_z_»ad_šfo
 = 
s
->
pfe_š_z_»ad
;

2065 ià(
pfe_š_z_»ad_šfo
 =ğ
NULL
)

2066  
UNZ_PARAMERROR
;

2068 ià(
pfe_š_z_»ad_šfo
->
»¡_»ad_uncom´es£d
 == 0)

2072 
	}
}

2088 
ZEXPORT


2089 
	$unzG‘LoÿlExŒaf›ld
 (
unzFe
 
fe
, 
voidp
 
buf
, 
Ën
)

2091 
unz64_s
 *
s
;

2092 
fe_š_z64_»ad_šfo_s
 *
pfe_š_z_»ad_šfo
;

2093 
uIÁ
 
»ad_now
;

2094 
ZPOS64_T
 
size_to_»ad
;

2096 ià(
fe
 =ğ
NULL
)

2097  
UNZ_PARAMERROR
;

2098 
s
 = (
unz64_s
 *è
fe
;

2099 
pfe_š_z_»ad_šfo
 = 
s
->
pfe_š_z_»ad
;

2101 ià(
pfe_š_z_»ad_šfo
 =ğ
NULL
)

2102  
UNZ_PARAMERROR
;

2104 
size_to_»ad
 = (
pfe_š_z_»ad_šfo
->
size_loÿl_exŒaf›ld
 -

2105 
pfe_š_z_»ad_šfo
->
pos_loÿl_exŒaf›ld
);

2107 ià(
buf
 =ğ
NULL
)

2108  (è
size_to_»ad
;

2110 ià(
Ën
 > 
size_to_»ad
)

2111 
»ad_now
 = (
uIÁ
è
size_to_»ad
;

2113 
»ad_now
 = (
uIÁ
è
Ën
;

2115 ià(
»ad_now
 == 0)

2118 ià(
	`ZSEEK64
 (
pfe_š_z_»ad_šfo
->
z_fefunc
,

2119 
pfe_š_z_»ad_šfo
->
fe¡»am
,

2120 
pfe_š_z_»ad_šfo
->
off£t_loÿl_exŒaf›ld
 +

2121 
pfe_š_z_»ad_šfo
->
pos_loÿl_exŒaf›ld
,

2122 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

2123  
UNZ_ERRNO
;

2125 ià(
	`ZREAD64
 (
pfe_š_z_»ad_šfo
->
z_fefunc
,

2126 
pfe_š_z_»ad_šfo
->
fe¡»am
, 
buf
, 
»ad_now
) !=„ead_now)

2127  
UNZ_ERRNO
;

2129  (è
»ad_now
;

2130 
	}
}

2136 
ZEXPORT


2137 
	$unzClo£Cu¼’tFe
 (
unzFe
 
fe
)

2139 
”r
 = 
UNZ_OK
;

2141 
unz64_s
 *
s
;

2142 
fe_š_z64_»ad_šfo_s
 *
pfe_š_z_»ad_šfo
;

2143 ià(
fe
 =ğ
NULL
)

2144  
UNZ_PARAMERROR
;

2145 
s
 = (
unz64_s
 *è
fe
;

2146 
pfe_š_z_»ad_šfo
 = 
s
->
pfe_š_z_»ad
;

2148 ià(
pfe_š_z_»ad_šfo
 =ğ
NULL
)

2149  
UNZ_PARAMERROR
;

2152 ià((
pfe_š_z_»ad_šfo
->
»¡_»ad_uncom´es£d
 == 0) &&

2153 (!
pfe_š_z_»ad_šfo
->
¿w
))

2155 ià(
pfe_š_z_»ad_šfo
->
üc32
 !ğpfe_š_z_»ad_šfo->
üc32_wa™
)

2156 
”r
 = 
UNZ_CRCERROR
;

2160 
	`TRYFREE
 (
pfe_š_z_»ad_šfo
->
»ad_bufãr
);

2161 
pfe_š_z_»ad_šfo
->
»ad_bufãr
 = 
NULL
;

2162 ià(
pfe_š_z_»ad_šfo
->
¡»am_š™Ÿli£d
 =ğ
Z_DEFLATED
)

2163 
	`šæ©eEnd
 (&
pfe_š_z_»ad_šfo
->
¡»am
);

2164 #ifdeà
HAVE_BZIP2


2165 ià(
pfe_š_z_»ad_šfo
->
¡»am_š™Ÿli£d
 =ğ
Z_BZIP2ED
)

2166 
	`BZ2_bzDecom´essEnd
 (&
pfe_š_z_»ad_šfo
->
b¡»am
);

2170 
pfe_š_z_»ad_šfo
->
¡»am_š™Ÿli£d
 = 0;

2171 
	`TRYFREE
 (
pfe_š_z_»ad_šfo
);

2173 
s
->
pfe_š_z_»ad
 = 
NULL
;

2175  
”r
;

2176 
	}
}

2184 
ZEXPORT


2185 
	$unzG‘Glob®Comm’t
 (
unzFe
 
fe
, *
szComm’t
, 
uLÚg
 
uSizeBuf
)

2187 
unz64_s
 *
s
;

2188 
uLÚg
 
uR—dThis
;

2189 ià(
fe
 =ğ
NULL
)

2190  (è
UNZ_PARAMERROR
;

2191 
s
 = (
unz64_s
 *è
fe
;

2193 
uR—dThis
 = 
uSizeBuf
;

2194 ià(
uR—dThis
 > 
s
->
gi
.
size_comm’t
)

2195 
uR—dThis
 = 
s
->
gi
.
size_comm’t
;

2197 ià(
ZSEEK64


2198 (
s
->
z_fefunc
, s->
fe¡»am
, s->
ûÁ¿l_pos
 + 22,

2199 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

2200  
UNZ_ERRNO
;

2202 ià(
uR—dThis
 > 0)

2204 *
szComm’t
 = '\0';

2205 ià(
	`ZREAD64
 (
s
->
z_fefunc
, s->
fe¡»am
, 
szComm’t
, 
uR—dThis
) !=

2206 
uR—dThis
)

2207  
UNZ_ERRNO
;

2210 ià((
szComm’t
 !ğ
NULL
è&& (
uSizeBuf
 > 
s
->
gi
.
size_comm’t
))

2211 *(
szComm’t
 + 
s
->
gi
.
size_comm’t
) = '\0';

2212  (è
uR—dThis
;

2213 
	}
}

2216 
ZPOS64_T
 
ZEXPORT


2217 
	$unzG‘Off£t64
 (
unzFe
 
fe
)

2219 
unz64_s
 *
s
;

2221 ià(
fe
 =ğ
NULL
)

2223 
s
 = (
unz64_s
 *è
fe
;

2224 ià(!
s
->
cu¼’t_fe_ok
)

2226 ià(
s
->
gi
.
numb”_’Œy
 != 0 && s->gi.number_entry != 0xffff)

2227 ià(
s
->
num_fe
 =ğs->
gi
.
numb”_’Œy
)

2229  
s
->
pos_š_ûÁ¿l_dœ
;

2230 
	}
}

2232 
uLÚg
 
ZEXPORT


2233 
	$unzG‘Off£t
 (
unzFe
 
fe
)

2235 
ZPOS64_T
 
off£t64
;

2237 ià(
fe
 =ğ
NULL
)

2239 
off£t64
 = 
	`unzG‘Off£t64
 (
fe
);

2240  (
uLÚg
è
off£t64
;

2241 
	}
}

2243 
ZEXPORT


2244 
	$unzS‘Off£t64
 (
unzFe
 
fe
, 
ZPOS64_T
 
pos
)

2246 
unz64_s
 *
s
;

2247 
”r
;

2249 ià(
fe
 =ğ
NULL
)

2250  
UNZ_PARAMERROR
;

2251 
s
 = (
unz64_s
 *è
fe
;

2253 
s
->
pos_š_ûÁ¿l_dœ
 = 
pos
;

2254 
s
->
num_fe
 = s->
gi
.
numb”_’Œy
;

2255 
”r
 = 
	`unz64loÿl_G‘Cu¼’tFeInfoIÁ”Çl
 (
fe
, &
s
->
cur_fe_šfo
,

2256 &
s
->
cur_fe_šfo_š‹º®
,

2257 
NULL
, 0, NULL, 0, NULL, 0);

2258 
s
->
cu¼’t_fe_ok
 = (
”r
 =ğ
UNZ_OK
);

2259  
”r
;

2260 
	}
}

2262 
ZEXPORT


2263 
	$unzS‘Off£t
 (
unzFe
 
fe
, 
uLÚg
 
pos
)

2265  
	`unzS‘Off£t64
 (
fe
, 
pos
);

2266 
	}
}

	@contrib/minizip/unzip.h

43 #iâdeà
_unz64_H


44 
	#_unz64_H


	)

46 #ifdeà
__ılu¥lus


50 #iâdeà
_ZLIB_H


51 
	~"zlib.h
"

54 #iâdeà 
_ZLIBIOAPI_H


55 
	~"ißpi.h
"

58 #ifdeà
HAVE_BZIP2


59 
	~"bzlib.h
"

62 
	#Z_BZIP2ED
 12

	)

64 #ià
defšed
(
STRICTUNZIP
è|| defšed(
STRICTZIPUNZIP
)

67 
	sTagunzFe__
 { 
unu£d
; } 
	tunzFe__
;

68 
unzFe__
 *
	tunzFe
;

70 
voidp
 
	tunzFe
;

74 
	#UNZ_OK
 (0)

	)

75 
	#UNZ_END_OF_LIST_OF_FILE
 (-100)

	)

76 
	#UNZ_ERRNO
 (
Z_ERRNO
)

	)

77 
	#UNZ_EOF
 (0)

	)

78 
	#UNZ_PARAMERROR
 (-102)

	)

79 
	#UNZ_BADZIPFILE
 (-103)

	)

80 
	#UNZ_INTERNALERROR
 (-104)

	)

81 
	#UNZ_CRCERROR
 (-105)

	)

84 
	stm_unz_s


86 
uIÁ
 
tm_£c
;

87 
uIÁ
 
tm_mš
;

88 
uIÁ
 
tm_hour
;

89 
uIÁ
 
tm_mday
;

90 
uIÁ
 
tm_mÚ
;

91 
uIÁ
 
tm_y—r
;

92 } 
	ttm_unz
;

96 
	sunz_glob®_šfo64_s


98 
ZPOS64_T
 
numb”_’Œy
;

100 
uLÚg
 
size_comm’t
;

101 } 
	tunz_glob®_šfo64
;

103 
	sunz_glob®_šfo_s


105 
uLÚg
 
numb”_’Œy
;

107 
uLÚg
 
size_comm’t
;

108 } 
	tunz_glob®_šfo
;

111 
	sunz_fe_šfo64_s


113 
uLÚg
 
v”siÚ
;

114 
uLÚg
 
v”siÚ_Ãeded
;

115 
uLÚg
 
æag
;

116 
uLÚg
 
com´essiÚ_m‘hod
;

117 
uLÚg
 
dosD©e
;

118 
uLÚg
 
üc
;

119 
ZPOS64_T
 
com´es£d_size
;

120 
ZPOS64_T
 
uncom´es£d_size
;

121 
uLÚg
 
size_f’ame
;

122 
uLÚg
 
size_fe_exŒa
;

123 
uLÚg
 
size_fe_comm’t
;

125 
uLÚg
 
disk_num_¡¬t
;

126 
uLÚg
 
š‹º®_ç
;

127 
uLÚg
 
ex‹º®_ç
;

129 
tm_unz
 
tmu_d©e
;

130 } 
	tunz_fe_šfo64
;

132 
	sunz_fe_šfo_s


134 
uLÚg
 
v”siÚ
;

135 
uLÚg
 
v”siÚ_Ãeded
;

136 
uLÚg
 
æag
;

137 
uLÚg
 
com´essiÚ_m‘hod
;

138 
uLÚg
 
dosD©e
;

139 
uLÚg
 
üc
;

140 
uLÚg
 
com´es£d_size
;

141 
uLÚg
 
uncom´es£d_size
;

142 
uLÚg
 
size_f’ame
;

143 
uLÚg
 
size_fe_exŒa
;

144 
uLÚg
 
size_fe_comm’t
;

146 
uLÚg
 
disk_num_¡¬t
;

147 
uLÚg
 
š‹º®_ç
;

148 
uLÚg
 
ex‹º®_ç
;

150 
tm_unz
 
tmu_d©e
;

151 } 
	tunz_fe_šfo
;

153 
ZEXPORT
 
unzSŒšgFeNameCom·»
 
OF
 ((cÚ¡ * 
feName1
,

154 cÚ¡ * 
feName2
,

155 
iCa£S’s™iv™y
));

166 
unzFe
 
ZEXPORT
 
unzO³n
 
OF
((cÚ¡ *
·th
));

167 
unzFe
 
ZEXPORT
 
unzO³n64
 
OF
((cÚ¡ *
·th
));

184 
unzFe
 
ZEXPORT
 
unzO³n2
 
OF
((cÚ¡ *
·th
,

185 
zlib_fefunc_def
* 
pzlib_fefunc_def
));

191 
unzFe
 
ZEXPORT
 
unzO³n2_64
 
OF
((cÚ¡ *
·th
,

192 
zlib_fefunc64_def
* 
pzlib_fefunc_def
));

198 
ZEXPORT
 
unzClo£
 
OF
((
unzFe
 
fe
));

205 
ZEXPORT
 
unzG‘Glob®Info
 
OF
((
unzFe
 
fe
,

206 
unz_glob®_šfo
 *
pglob®_šfo
));

208 
ZEXPORT
 
unzG‘Glob®Info64
 
OF
((
unzFe
 
fe
,

209 
unz_glob®_šfo64
 *
pglob®_šfo
));

216 
ZEXPORT
 
unzG‘Glob®Comm’t
 
OF
((
unzFe
 
fe
,

217 *
szComm’t
,

218 
uLÚg
 
uSizeBuf
));

229 
ZEXPORT
 
unzGoToFœ¡Fe
 
OF
((
unzFe
 
fe
));

235 
ZEXPORT
 
unzGoToNextFe
 
OF
((
unzFe
 
fe
));

242 
ZEXPORT
 
unzLoÿ‹Fe
 
OF
((
unzFe
 
fe
,

243 cÚ¡ *
szFeName
,

244 
iCa£S’s™iv™y
));

258 
	sunz_fe_pos_s


260 
uLÚg
 
	gpos_š_z_dœeùÜy
;

261 
uLÚg
 
	gnum_of_fe
;

262 } 
	tunz_fe_pos
;

264 
ZEXPORT
 
unzG‘FePos
(

265 
unzFe
 
fe
,

266 
unz_fe_pos
* 
fe_pos
);

268 
ZEXPORT
 
unzGoToFePos
(

269 
unzFe
 
fe
,

270 
unz_fe_pos
* 
fe_pos
);

272 
	sunz64_fe_pos_s


274 
ZPOS64_T
 
	gpos_š_z_dœeùÜy
;

275 
ZPOS64_T
 
	gnum_of_fe
;

276 } 
	tunz64_fe_pos
;

278 
ZEXPORT
 
unzG‘FePos64
(

279 
unzFe
 
fe
,

280 
unz64_fe_pos
* 
fe_pos
);

282 
ZEXPORT
 
unzGoToFePos64
(

283 
unzFe
 
fe
,

284 cÚ¡ 
unz64_fe_pos
* 
fe_pos
);

288 
ZEXPORT
 
unzG‘Cu¼’tFeInfo64
 
OF
((
unzFe
 
fe
,

289 
unz_fe_šfo64
 *
pfe_šfo
,

290 *
szFeName
,

291 
uLÚg
 
feNameBufãrSize
,

292 *
exŒaF›ld
,

293 
uLÚg
 
exŒaF›ldBufãrSize
,

294 *
szComm’t
,

295 
uLÚg
 
comm’tBufãrSize
));

297 
ZEXPORT
 
unzG‘Cu¼’tFeInfo
 
OF
((
unzFe
 
fe
,

298 
unz_fe_šfo
 *
pfe_šfo
,

299 *
szFeName
,

300 
uLÚg
 
feNameBufãrSize
,

301 *
exŒaF›ld
,

302 
uLÚg
 
exŒaF›ldBufãrSize
,

303 *
szComm’t
,

304 
uLÚg
 
comm’tBufãrSize
));

321 
ZPOS64_T
 
ZEXPORT
 
unzG‘Cu¼’tFeZSŒ—mPos64
 
OF
((
unzFe
 
fe
));

331 
ZEXPORT
 
unzO³nCu¼’tFe
 
OF
((
unzFe
 
fe
));

337 
ZEXPORT
 
unzO³nCu¼’tFePasswÜd
 
OF
((
unzFe
 
fe
,

338 cÚ¡ * 
·sswÜd
));

345 
ZEXPORT
 
unzO³nCu¼’tFe2
 
OF
((
unzFe
 
fe
,

346 * 
m‘hod
,

347 * 
Ëv–
,

348 
¿w
));

358 
ZEXPORT
 
unzO³nCu¼’tFe3
 
OF
((
unzFe
 
fe
,

359 * 
m‘hod
,

360 * 
Ëv–
,

361 
¿w
,

362 cÚ¡ * 
·sswÜd
));

373 
ZEXPORT
 
unzClo£Cu¼’tFe
 
OF
((
unzFe
 
fe
));

379 
ZEXPORT
 
unzR—dCu¼’tFe
 
OF
((
unzFe
 
fe
,

380 
voidp
 
buf
,

381 
Ën
));

393 
z_off_t
 
ZEXPORT
 
unz‹Î
 
OF
((
unzFe
 
fe
));

395 
ZPOS64_T
 
ZEXPORT
 
unz‹Î64
 
OF
((
unzFe
 
fe
));

400 
ZEXPORT
 
unzeof
 
OF
((
unzFe
 
fe
));

405 
ZEXPORT
 
unzG‘LoÿlExŒaf›ld
 
OF
((
unzFe
 
fe
,

406 
voidp
 
buf
,

407 
Ën
));

424 
ZPOS64_T
 
ZEXPORT
 
unzG‘Off£t64
 (
unzFe
 
fe
);

425 
uLÚg
 
ZEXPORT
 
unzG‘Off£t
 (
unzFe
 
fe
);

428 
ZEXPORT
 
unzS‘Off£t64
 (
unzFe
 
fe
, 
ZPOS64_T
 
pos
);

429 
ZEXPORT
 
unzS‘Off£t
 (
unzFe
 
fe
, 
uLÚg
 
pos
);

433 #ifdeà
__ılu¥lus


	@contrib/minizip/zip.c

25 
	~<¡dio.h
>

26 
	~<¡dlib.h
>

27 
	~<¡ršg.h
>

28 
	~<time.h
>

29 
	~"zlib.h
"

30 
	~"z.h
"

32 #ifdeà
STDC


33 
	~<¡ddef.h
>

34 
	~<¡ršg.h
>

35 
	~<¡dlib.h
>

37 #ifdeà
NO_ERRNO_H


38 
”ºo
;

40 
	~<”ºo.h
>

44 #iâdeà
loÿl


45 
	#loÿl
 

	)

49 #iâdeà
VERSIONMADEBY


50 
	#VERSIONMADEBY
 (0x0è

	)

53 #iâdeà
Z_BUFSIZE


54 
	#Z_BUFSIZE
 (64*1024)

56 

	)

57 #iâdeà
Z_MAXFILENAMEINZIP


58 
	#Z_MAXFILENAMEINZIP
 (256)

	)

61 #iâdeà
ALLOC


62 
	#ALLOC
(
size
è(
	`m®loc
(size))

	)

64 #iâdeà
TRYFREE


65 
	#TRYFREE
(
p
è{iàÕè
	`ä“
Õ);}

	)

77 
	#MAKEULONG64
(
a
, 
b
è((
ZPOS64_T
)((()×)è| ((ZPOS64_T)(()(b))è<< 32))

	)

79 #iâdeà
SEEK_CUR


80 
	#SEEK_CUR
 1

	)

83 #iâdeà
SEEK_END


84 
	#SEEK_END
 2

	)

87 #iâdeà
SEEK_SET


88 
	#SEEK_SET
 0

	)

91 #iâdeà
DEF_MEM_LEVEL


92 #ià
MAX_MEM_LEVEL
 >= 8

93 
	#DEF_MEM_LEVEL
 8

	)

95 
	#DEF_MEM_LEVEL
 
MAX_MEM_LEVEL


	)

98 cÚ¡ 
	gz_cİyright
[] =

102 
	#SIZEDATA_INDATABLOCK
 (4096-(4*4))

	)

104 
	#LOCALHEADERMAGIC
 (0x04034b50)

	)

105 
	#CENTRALHEADERMAGIC
 (0x02014b50)

	)

106 
	#ENDHEADERMAGIC
 (0x06054b50)

	)

107 
	#ZIP64ENDHEADERMAGIC
 (0x6064b50)

	)

108 
	#ZIP64ENDLOCHEADERMAGIC
 (0x7064b50)

	)

110 
	#FLAG_LOCALHEADER_OFFSET
 (0x06)

	)

111 
	#CRC_LOCALHEADER_OFFSET
 (0x0e)

	)

113 
	#SIZECENTRALHEADER
 (0x2eè

	)

115 
	slškedli¡_d©ablock_š‹º®_s


117 
lškedli¡_d©ablock_š‹º®_s
 *
	mÃxt_d©ablock
;

118 
uLÚg
 
	mava_š_this_block
;

119 
uLÚg
 
	mfËd_š_this_block
;

120 
uLÚg
 
	munu£d
;

121 
	md©a
[
SIZEDATA_INDATABLOCK
];

122 } 
	tlškedli¡_d©ablock_š‹º®
;

124 
	slškedli¡_d©a_s


126 
lškedli¡_d©ablock_š‹º®
 *
	mfœ¡_block
;

127 
lškedli¡_d©ablock_š‹º®
 *
	mÏ¡_block
;

128 } 
	tlškedli¡_d©a
;

133 
z_¡»am
 
	m¡»am
;

134 #ifdeà
HAVE_BZIP2


135 
bz_¡»am
 
	mb¡»am
;

138 
	m¡»am_š™Ÿli£d
;

139 
uIÁ
 
	mpos_š_bufã»d_d©a
;

141 
ZPOS64_T
 
	mpos_loÿl_h—d”
;

143 *
	mûÁ¿l_h—d”
;

144 
uLÚg
 
	msize_ûÁ¿lExŒa
;

145 
uLÚg
 
	msize_ûÁ¿lh—d”
;

146 
uLÚg
 
	msize_ûÁ¿lExŒaF»e
;

147 
uLÚg
 
	mæag
;

149 
	mm‘hod
;

150 
	m¿w
;

151 
By‹
 
	mbufã»d_d©a
[
Z_BUFSIZE
];

152 
uLÚg
 
	mdosD©e
;

153 
uLÚg
 
	müc32
;

154 
	m’üy±
;

155 
	mz64
;

156 
ZPOS64_T
 
	mpos_z64exŒašfo
;

157 
ZPOS64_T
 
	mtÙ®Com´es£dD©a
;

158 
ZPOS64_T
 
	mtÙ®Uncom´es£dD©a
;

159 #iâdeà
NOCRYPT


160 
	mkeys
[3];

161 cÚ¡ 
z_üc_t
 *
	mpüc_32_b
;

162 
	müy±_h—d”_size
;

164 } 
	tcurfe64_šfo
;

168 
zlib_fefunc64_32_def
 
	mz_fefunc
;

169 
voidpf
 
	mfe¡»am
;

170 
lškedli¡_d©a
 
	mûÁ¿l_dœ
;

171 
	mš_İ’ed_fe_šz
;

172 
curfe64_šfo
 
	mci
;

174 
ZPOS64_T
 
	mbegš_pos
;

175 
ZPOS64_T
 
	madd_pos™iÚ_wh’_wr™tšg_off£t
;

176 
ZPOS64_T
 
	mnumb”_’Œy
;

178 #iâdeà
NO_ADDFILEINEXISTINGZIP


179 *
	mglob®comm’t
;

182 } 
	tz64_š‹º®
;

185 #iâdeà
NOCRYPT


186 
	#INCLUDECRYPTINGCODE_IFCRYPTALLOWED


	)

187 
	~"üy±.h
"

190 
loÿl
 
lškedli¡_d©ablock_š‹º®
 *

191 
	$®loÿ‹_Ãw_d©ablock
 ()

193 
lškedli¡_d©ablock_š‹º®
 *
ldi
;

194 
ldi
 = (
lškedli¡_d©ablock_š‹º®
 *)

195 
	`ALLOC
 ( (
lškedli¡_d©ablock_š‹º®
));

196 ià(
ldi
 !ğ
NULL
)

198 
ldi
->
Ãxt_d©ablock
 = 
NULL
;

199 
ldi
->
fËd_š_this_block
 = 0;

200 
ldi
->
ava_š_this_block
 = 
SIZEDATA_INDATABLOCK
;

202  
ldi
;

203 
	}
}

205 
loÿl
 

206 
	$ä“_d©ablock
 (
lškedli¡_d©ablock_š‹º®
 * 
ldi
)

208 
ldi
 !ğ
NULL
)

210 
lškedli¡_d©ablock_š‹º®
 *
ldšext
 = 
ldi
->
Ãxt_d©ablock
;

211 
	`TRYFREE
 (
ldi
);

212 
ldi
 = 
ldšext
;

214 
	}
}

216 
loÿl
 

217 
	$š™_lškedli¡
 (
lškedli¡_d©a
 * 
Î
)

219 
Î
->
fœ¡_block
 =†l->
Ï¡_block
 = 
NULL
;

220 
	}
}

222 
loÿl
 

223 
	$ä“_lškedli¡
 (
lškedli¡_d©a
 * 
Î
)

225 
	`ä“_d©ablock
 (
Î
->
fœ¡_block
);

226 
Î
->
fœ¡_block
 =†l->
Ï¡_block
 = 
NULL
;

227 
	}
}

230 
loÿl
 

231 
	$add_d©a_š_d©ablock
 (
lškedli¡_d©a
 * 
Î
, cÚ¡ *
buf
, 
uLÚg
 
Ën
)

233 
lškedli¡_d©ablock_š‹º®
 *
ldi
;

234 cÚ¡ *
äom_cİy
;

236 ià(
Î
 =ğ
NULL
)

237  
ZIP_INTERNALERROR
;

239 ià(
Î
->
Ï¡_block
 =ğ
NULL
)

241 
Î
->
fœ¡_block
 =†l->
Ï¡_block
 = 
	`®loÿ‹_Ãw_d©ablock
 ();

242 ià(
Î
->
fœ¡_block
 =ğ
NULL
)

243  
ZIP_INTERNALERROR
;

246 
ldi
 = 
Î
->
Ï¡_block
;

247 
äom_cİy
 = (*è
buf
;

249 
Ën
 > 0)

251 
uIÁ
 
cİy_this
;

252 
uIÁ
 
i
;

253 *
to_cİy
;

255 ià(
ldi
->
ava_š_this_block
 == 0)

257 
ldi
->
Ãxt_d©ablock
 = 
	`®loÿ‹_Ãw_d©ablock
 ();

258 ià(
ldi
->
Ãxt_d©ablock
 =ğ
NULL
)

259  
ZIP_INTERNALERROR
;

260 
ldi
 =†di->
Ãxt_d©ablock
;

261 
Î
->
Ï¡_block
 = 
ldi
;

264 ià(
ldi
->
ava_š_this_block
 < 
Ën
)

265 
cİy_this
 = (
uIÁ
è
ldi
->
ava_š_this_block
;

267 
cİy_this
 = (
uIÁ
è
Ën
;

269 
to_cİy
 = &(
ldi
->
d©a
[ldi->
fËd_š_this_block
]);

271 
i
 = 0; i < 
cİy_this
; i++)

272 *(
to_cİy
 + 
i
èğ*(
äom_cİy
 + i);

274 
ldi
->
fËd_š_this_block
 +ğ
cİy_this
;

275 
ldi
->
ava_š_this_block
 -ğ
cİy_this
;

276 
äom_cİy
 +ğ
cİy_this
;

277 
Ën
 -ğ
cİy_this
;

279  
ZIP_OK
;

280 
	}
}

286 #iâdeà
NO_ADDFILEINEXISTINGZIP


292 
loÿl
 
z64loÿl_putV®ue


293 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
,

294 
ZPOS64_T
 
x
, 
nbBy‹
));

295 
loÿl
 

296 
	$z64loÿl_putV®ue
 (cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
,

297 
voidpf
 
fe¡»am
, 
ZPOS64_T
 
x
, 
nbBy‹
)

299 
buf
[8];

300 
n
;

301 
n
 = 0;‚ < 
nbBy‹
;‚++)

303 
buf
[
n
] = (è(
x
 & 0xff);

304 
x
 >>= 8;

306 ià(
x
 != 0)

308 
n
 = 0;‚ < 
nbBy‹
;‚++)

310 
buf
[
n
] = 0xff;

314 ià(
	`ZWRITE64
 (*
pzlib_fefunc_def
, 
fe¡»am
, 
buf
, 
nbBy‹
) !=

315 (
uLÚg
è
nbBy‹
)

316  
ZIP_ERRNO
;

318  
ZIP_OK
;

319 
	}
}

321 
loÿl
 
z64loÿl_putV®ue_šmemÜy


322 
OF
 ((*
de¡
, 
ZPOS64_T
 
x
, 
nbBy‹
));

323 
loÿl
 

324 
	$z64loÿl_putV®ue_šmemÜy
 (*
de¡
, 
ZPOS64_T
 
x
, 
nbBy‹
)

326 *
buf
 = (*è
de¡
;

327 
n
;

328 
n
 = 0;‚ < 
nbBy‹
;‚++)

330 
buf
[
n
] = (è(
x
 & 0xff);

331 
x
 >>= 8;

334 ià(
x
 != 0)

336 
n
 = 0;‚ < 
nbBy‹
;‚++)

338 
buf
[
n
] = 0xff;

341 
	}
}

346 
loÿl
 
uLÚg


347 
	$z64loÿl_TmzD©eToDosD©e
 (cÚ¡ 
tm_z
 * 
±m
)

349 
uLÚg
 
y—r
 = (uLÚgè
±m
->
tm_y—r
;

350 ià(
y—r
 >= 1980)

351 
y—r
 -= 1980;

352 ià(
y—r
 >= 80)

353 
y—r
 -= 80;

355 (
uLÚg
è(((
±m
->
tm_mday
è+ (32 * (±m->
tm_mÚ
 + 1)) +

356 (512 * 
y—r
)è<< 16è| ((
±m
->
tm_£c
 / 2è+ (32 *…tm->
tm_mš
) +

357 (2048 * (
uLÚg
è
±m
->
tm_hour
));

358 
	}
}

363 
loÿl
 
z64loÿl_g‘By‹


364 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
,

365 *
pi
));

367 
loÿl
 

368 
	$z64loÿl_g‘By‹
 (cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
,

369 
voidpf
 
fe¡»am
, *
pi
)

371 
c
;

372 
”r
 = (è
	`ZREAD64
 (*
pzlib_fefunc_def
, 
fe¡»am
, &
c
, 1);

373 ià(
”r
 == 1)

375 *
pi
 = (è
c
;

376  
ZIP_OK
;

380 ià(
	`ZERROR64
 (*
pzlib_fefunc_def
, 
fe¡»am
))

381  
ZIP_ERRNO
;

383  
ZIP_EOF
;

385 
	}
}

391 
loÿl
 
z64loÿl_g‘ShÜt


392 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
,

393 
uLÚg
 * 
pX
));

395 
loÿl
 

396 
	$z64loÿl_g‘ShÜt
 (cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
,

397 
voidpf
 
fe¡»am
, 
uLÚg
 * 
pX
)

399 
uLÚg
 
x
;

400 
i
 = 0;

401 
”r
;

403 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

404 
x
 = (
uLÚg
è
i
;

406 ià(
”r
 =ğ
ZIP_OK
)

407 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

408 
x
 +ğ((
uLÚg
è
i
) << 8;

410 ià(
”r
 =ğ
ZIP_OK
)

411 *
pX
 = 
x
;

413 *
pX
 = 0;

414  
”r
;

415 
	}
}

417 
loÿl
 
z64loÿl_g‘LÚg


418 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
,

419 
uLÚg
 * 
pX
));

421 
loÿl
 

422 
	$z64loÿl_g‘LÚg
 (cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
,

423 
voidpf
 
fe¡»am
, 
uLÚg
 * 
pX
)

425 
uLÚg
 
x
;

426 
i
 = 0;

427 
”r
;

429 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

430 
x
 = (
uLÚg
è
i
;

432 ià(
”r
 =ğ
ZIP_OK
)

433 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

434 
x
 +ğ((
uLÚg
è
i
) << 8;

436 ià(
”r
 =ğ
ZIP_OK
)

437 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

438 
x
 +ğ((
uLÚg
è
i
) << 16;

440 ià(
”r
 =ğ
ZIP_OK
)

441 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

442 
x
 +ğ((
uLÚg
è
i
) << 24;

444 ià(
”r
 =ğ
ZIP_OK
)

445 *
pX
 = 
x
;

447 *
pX
 = 0;

448  
”r
;

449 
	}
}

451 
loÿl
 
z64loÿl_g‘LÚg64


452 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
,

453 
ZPOS64_T
 * 
pX
));

456 
loÿl
 

457 
	$z64loÿl_g‘LÚg64
 (cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
,

458 
voidpf
 
fe¡»am
, 
ZPOS64_T
 * 
pX
)

460 
ZPOS64_T
 
x
;

461 
i
 = 0;

462 
”r
;

464 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

465 
x
 = (
ZPOS64_T
è
i
;

467 ià(
”r
 =ğ
ZIP_OK
)

468 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

469 
x
 +ğ((
ZPOS64_T
è
i
) << 8;

471 ià(
”r
 =ğ
ZIP_OK
)

472 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

473 
x
 +ğ((
ZPOS64_T
è
i
) << 16;

475 ià(
”r
 =ğ
ZIP_OK
)

476 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

477 
x
 +ğ((
ZPOS64_T
è
i
) << 24;

479 ià(
”r
 =ğ
ZIP_OK
)

480 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

481 
x
 +ğ((
ZPOS64_T
è
i
) << 32;

483 ià(
”r
 =ğ
ZIP_OK
)

484 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

485 
x
 +ğ((
ZPOS64_T
è
i
) << 40;

487 ià(
”r
 =ğ
ZIP_OK
)

488 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

489 
x
 +ğ((
ZPOS64_T
è
i
) << 48;

491 ià(
”r
 =ğ
ZIP_OK
)

492 
”r
 = 
	`z64loÿl_g‘By‹
 (
pzlib_fefunc_def
, 
fe¡»am
, &
i
);

493 
x
 +ğ((
ZPOS64_T
è
i
) << 56;

495 ià(
”r
 =ğ
ZIP_OK
)

496 *
pX
 = 
x
;

498 *
pX
 = 0;

500  
”r
;

501 
	}
}

503 #iâdeà
BUFREADCOMMENT


504 
	#BUFREADCOMMENT
 (0x400)

	)

510 
loÿl
 
ZPOS64_T
 
z64loÿl_S—rchC’Œ®Dœ


511 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
));

513 
loÿl
 
ZPOS64_T


514 
	$z64loÿl_S—rchC’Œ®Dœ
 (cÚ¡ 
zlib_fefunc64_32_def
 *

515 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
)

517 *
buf
;

518 
ZPOS64_T
 
uSizeFe
;

519 
ZPOS64_T
 
uBackR—d
;

520 
ZPOS64_T
 
uMaxBack
 = 0xffff;

521 
ZPOS64_T
 
uPosFound
 = 0;

523 ià(
	`ZSEEK64
 (*
pzlib_fefunc_def
, 
fe¡»am
, 0, 
ZLIB_FILEFUNC_SEEK_END
) !=

528 
uSizeFe
 = 
	`ZTELL64
 (*
pzlib_fefunc_def
, 
fe¡»am
);

530 ià(
uMaxBack
 > 
uSizeFe
)

531 
uMaxBack
 = 
uSizeFe
;

533 
buf
 = (*è
	`ALLOC
 (
BUFREADCOMMENT
 + 4);

534 ià(
buf
 =ğ
NULL
)

537 
uBackR—d
 = 4;

538 
uBackR—d
 < 
uMaxBack
)

540 
uLÚg
 
uR—dSize
;

541 
ZPOS64_T
 
uR—dPos
;

542 
i
;

543 ià(
uBackR—d
 + 
BUFREADCOMMENT
 > 
uMaxBack
)

544 
uBackR—d
 = 
uMaxBack
;

546 
uBackR—d
 +ğ
BUFREADCOMMENT
;

547 
uR—dPos
 = 
uSizeFe
 - 
uBackR—d
;

549 
uR—dSize
 = ((
BUFREADCOMMENT
 + 4è< (
uSizeFe
 - 
uR—dPos
)) ?

550 (
BUFREADCOMMENT
 + 4è: (
uLÚg
è(
uSizeFe
 - 
uR—dPos
);

551 ià(
ZSEEK64


552 (*
pzlib_fefunc_def
, 
fe¡»am
, 
uR—dPos
,

553 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

556 ià(
	`ZREAD64
 (*
pzlib_fefunc_def
, 
fe¡»am
, 
buf
, 
uR—dSize
) !=

557 
uR—dSize
)

560 
i
 = (è
uR—dSize
 - 3; (i--) > 0;)

561 ià(((*(
buf
 + 
i
)) == 0x50) && ((*(buf + i + 1)) == 0x4b) &&

562 ((*(
buf
 + 
i
 + 2)) == 0x05) && ((*(buf + i + 3)) == 0x06))

564 
uPosFound
 = 
uR—dPos
 + 
i
;

568 ià(
uPosFound
 != 0)

571 
	`TRYFREE
 (
buf
);

572  
uPosFound
;

573 
	}
}

579 
loÿl
 
ZPOS64_T
 
z64loÿl_S—rchC’Œ®Dœ64


580 
OF
 ((cÚ¡ 
zlib_fefunc64_32_def
 * 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
));

582 
loÿl
 
ZPOS64_T


583 
	$z64loÿl_S—rchC’Œ®Dœ64
 (cÚ¡ 
zlib_fefunc64_32_def
 *

584 
pzlib_fefunc_def
, 
voidpf
 
fe¡»am
)

586 *
buf
;

587 
ZPOS64_T
 
uSizeFe
;

588 
ZPOS64_T
 
uBackR—d
;

589 
ZPOS64_T
 
uMaxBack
 = 0xffff;

590 
ZPOS64_T
 
uPosFound
 = 0;

591 
uLÚg
 
uL
;

592 
ZPOS64_T
 
»ÏtiveOff£t
;

594 ià(
	`ZSEEK64
 (*
pzlib_fefunc_def
, 
fe¡»am
, 0, 
ZLIB_FILEFUNC_SEEK_END
) !=

598 
uSizeFe
 = 
	`ZTELL64
 (*
pzlib_fefunc_def
, 
fe¡»am
);

600 ià(
uMaxBack
 > 
uSizeFe
)

601 
uMaxBack
 = 
uSizeFe
;

603 
buf
 = (*è
	`ALLOC
 (
BUFREADCOMMENT
 + 4);

604 ià(
buf
 =ğ
NULL
)

607 
uBackR—d
 = 4;

608 
uBackR—d
 < 
uMaxBack
)

610 
uLÚg
 
uR—dSize
;

611 
ZPOS64_T
 
uR—dPos
;

612 
i
;

613 ià(
uBackR—d
 + 
BUFREADCOMMENT
 > 
uMaxBack
)

614 
uBackR—d
 = 
uMaxBack
;

616 
uBackR—d
 +ğ
BUFREADCOMMENT
;

617 
uR—dPos
 = 
uSizeFe
 - 
uBackR—d
;

619 
uR—dSize
 = ((
BUFREADCOMMENT
 + 4è< (
uSizeFe
 - 
uR—dPos
)) ?

620 (
BUFREADCOMMENT
 + 4è: (
uLÚg
è(
uSizeFe
 - 
uR—dPos
);

621 ià(
ZSEEK64


622 (*
pzlib_fefunc_def
, 
fe¡»am
, 
uR—dPos
,

623 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

626 ià(
	`ZREAD64
 (*
pzlib_fefunc_def
, 
fe¡»am
, 
buf
, 
uR—dSize
) !=

627 
uR—dSize
)

630 
i
 = (è
uR—dSize
 - 3; (i--) > 0;)

633 ià(((*(
buf
 + 
i
)) == 0x50) && ((*(buf + i + 1)) == 0x4b)

634 && ((*(
buf
 + 
i
 + 2)) == 0x06) && ((*(buf + i + 3)) == 0x07))

636 
uPosFound
 = 
uR—dPos
 + 
i
;

641 ià(
uPosFound
 != 0)

645 
	`TRYFREE
 (
buf
);

646 ià(
uPosFound
 == 0)

650 ià(
ZSEEK64


651 (*
pzlib_fefunc_def
, 
fe¡»am
, 
uPosFound
,

652 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

656 ià(
	`z64loÿl_g‘LÚg
 (
pzlib_fefunc_def
, 
fe¡»am
, &
uL
è!ğ
ZIP_OK
)

660 ià(
	`z64loÿl_g‘LÚg
 (
pzlib_fefunc_def
, 
fe¡»am
, &
uL
è!ğ
ZIP_OK
)

662 ià(
uL
 != 0)

666 ià(
	`z64loÿl_g‘LÚg64
 (
pzlib_fefunc_def
, 
fe¡»am
, &
»ÏtiveOff£t
)

667 !ğ
ZIP_OK
)

671 ià(
	`z64loÿl_g‘LÚg
 (
pzlib_fefunc_def
, 
fe¡»am
, &
uL
è!ğ
ZIP_OK
)

673 ià(
uL
 != 1)

677 ià(
ZSEEK64


678 (*
pzlib_fefunc_def
, 
fe¡»am
, 
»ÏtiveOff£t
,

679 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

683 ià(
	`z64loÿl_g‘LÚg
 (
pzlib_fefunc_def
, 
fe¡»am
, &
uL
è!ğ
ZIP_OK
)

686 ià(
uL
 != 0x06064b50)

689  
»ÏtiveOff£t
;

690 
	}
}

693 
	$LßdC’Œ®DœeùÜyRecÜd
 (
z64_š‹º®
 * 
pziš™
)

695 
”r
 = 
ZIP_OK
;

696 
ZPOS64_T
 
by‹_befÜe_the_zfe
;

698 
ZPOS64_T
 
size_ûÁ¿l_dœ
;

699 
ZPOS64_T
 
off£t_ûÁ¿l_dœ
;

700 
ZPOS64_T
 
ûÁ¿l_pos
;

701 
uLÚg
 
uL
;

703 
uLÚg
 
numb”_disk
;

705 
uLÚg
 
numb”_disk_w™h_CD
;

707 
ZPOS64_T
 
numb”_’Œy
;

708 
ZPOS64_T
 
numb”_’Œy_CD
;

711 
uLÚg
 
V”siÚMadeBy
;

712 
uLÚg
 
V”siÚN“ded
;

713 
uLÚg
 
size_comm’t
;

715 
hasZIP64RecÜd
 = 0;

718 
ûÁ¿l_pos
 =

719 
	`z64loÿl_S—rchC’Œ®Dœ64
 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
);

720 ià(
ûÁ¿l_pos
 > 0)

722 
hasZIP64RecÜd
 = 1;

724 ià(
ûÁ¿l_pos
 == 0)

726 
ûÁ¿l_pos
 =

727 
	`z64loÿl_S—rchC’Œ®Dœ
 (&
pziš™
->
z_fefunc
,

728 
pziš™
->
fe¡»am
);

736 ià(
hasZIP64RecÜd
)

738 
ZPOS64_T
 
sizeEndOfC’Œ®DœeùÜy
;

739 ià(
ZSEEK64


740 (
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
, 
ûÁ¿l_pos
,

741 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

742 
”r
 = 
ZIP_ERRNO
;

745 ià(
	`z64loÿl_g‘LÚg
 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
, &
uL
)

746 !ğ
ZIP_OK
)

747 
”r
 = 
ZIP_ERRNO
;

750 ià(
z64loÿl_g‘LÚg64


751 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

752 &
sizeEndOfC’Œ®DœeùÜy
è!ğ
ZIP_OK
)

753 
”r
 = 
ZIP_ERRNO
;

756 ià(
z64loÿl_g‘ShÜt


757 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

758 &
V”siÚMadeBy
è!ğ
ZIP_OK
)

759 
”r
 = 
ZIP_ERRNO
;

762 ià(
z64loÿl_g‘ShÜt


763 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

764 &
V”siÚN“ded
è!ğ
ZIP_OK
)

765 
”r
 = 
ZIP_ERRNO
;

768 ià(
z64loÿl_g‘LÚg


769 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
, &
numb”_disk
è!ğ
ZIP_OK
)

770 
”r
 = 
ZIP_ERRNO
;

773 ià(
z64loÿl_g‘LÚg


774 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

775 &
numb”_disk_w™h_CD
è!ğ
ZIP_OK
)

776 
”r
 = 
ZIP_ERRNO
;

779 ià(
z64loÿl_g‘LÚg64


780 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

781 &
numb”_’Œy
è!ğ
ZIP_OK
)

782 
”r
 = 
ZIP_ERRNO
;

785 ià(
z64loÿl_g‘LÚg64


786 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

787 &
numb”_’Œy_CD
è!ğ
ZIP_OK
)

788 
”r
 = 
ZIP_ERRNO
;

790 ià((
numb”_’Œy_CD
 !ğ
numb”_’Œy
è|| (
numb”_disk_w™h_CD
 != 0)

791 || (
numb”_disk
 != 0))

792 
”r
 = 
ZIP_BADZIPFILE
;

795 ià(
z64loÿl_g‘LÚg64


796 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

797 &
size_ûÁ¿l_dœ
è!ğ
ZIP_OK
)

798 
”r
 = 
ZIP_ERRNO
;

802 ià(
z64loÿl_g‘LÚg64


803 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

804 &
off£t_ûÁ¿l_dœ
è!ğ
ZIP_OK
)

805 
”r
 = 
ZIP_ERRNO
;

809 
size_comm’t
 = 0;

814 ià(
ZSEEK64


815 (
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
, 
ûÁ¿l_pos
,

816 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

817 
”r
 = 
ZIP_ERRNO
;

820 ià(
	`z64loÿl_g‘LÚg
 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
, &
uL
)

821 !ğ
ZIP_OK
)

822 
”r
 = 
ZIP_ERRNO
;

825 ià(
z64loÿl_g‘ShÜt


826 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
, &
numb”_disk
è!ğ
ZIP_OK
)

827 
”r
 = 
ZIP_ERRNO
;

830 ià(
z64loÿl_g‘ShÜt


831 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

832 &
numb”_disk_w™h_CD
è!ğ
ZIP_OK
)

833 
”r
 = 
ZIP_ERRNO
;

836 
numb”_’Œy
 = 0;

837 ià(
	`z64loÿl_g‘ShÜt
 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
, &
uL
)

838 !ğ
ZIP_OK
)

839 
”r
 = 
ZIP_ERRNO
;

841 
numb”_’Œy
 = 
uL
;

844 
numb”_’Œy_CD
 = 0;

845 ià(
	`z64loÿl_g‘ShÜt
 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
, &
uL
)

846 !ğ
ZIP_OK
)

847 
”r
 = 
ZIP_ERRNO
;

849 
numb”_’Œy_CD
 = 
uL
;

851 ià((
numb”_’Œy_CD
 !ğ
numb”_’Œy
è|| (
numb”_disk_w™h_CD
 != 0)

852 || (
numb”_disk
 != 0))

853 
”r
 = 
ZIP_BADZIPFILE
;

856 
size_ûÁ¿l_dœ
 = 0;

857 ià(
	`z64loÿl_g‘LÚg
 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
, &
uL
)

858 !ğ
ZIP_OK
)

859 
”r
 = 
ZIP_ERRNO
;

861 
size_ûÁ¿l_dœ
 = 
uL
;

864 
off£t_ûÁ¿l_dœ
 = 0;

865 ià(
	`z64loÿl_g‘LÚg
 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
, &
uL
)

866 !ğ
ZIP_OK
)

867 
”r
 = 
ZIP_ERRNO
;

869 
off£t_ûÁ¿l_dœ
 = 
uL
;

873 ià(
z64loÿl_g‘ShÜt


874 (&
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

875 &
size_comm’t
è!ğ
ZIP_OK
)

876 
”r
 = 
ZIP_ERRNO
;

879 ià((
ûÁ¿l_pos
 < 
off£t_ûÁ¿l_dœ
 + 
size_ûÁ¿l_dœ
) &&

880 (
”r
 =ğ
ZIP_OK
))

881 
”r
 = 
ZIP_BADZIPFILE
;

883 ià(
”r
 !ğ
ZIP_OK
)

885 
	`ZCLOSE64
 (
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
);

886  
ZIP_ERRNO
;

889 ià(
size_comm’t
 > 0)

891 
pziš™
->
glob®comm’t
 = (*è
	`ALLOC
 (
size_comm’t
 + 1);

892 ià(
pziš™
->
glob®comm’t
)

894 
size_comm’t
 =

895 
	`ZREAD64
 (
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

896 
pziš™
->
glob®comm’t
, 
size_comm’t
);

897 
pziš™
->
glob®comm’t
[
size_comm’t
] = 0;

901 
by‹_befÜe_the_zfe
 =

902 
ûÁ¿l_pos
 - (
off£t_ûÁ¿l_dœ
 + 
size_ûÁ¿l_dœ
);

903 
pziš™
->
add_pos™iÚ_wh’_wr™tšg_off£t
 = 
by‹_befÜe_the_zfe
;

906 
ZPOS64_T
 
size_ûÁ¿l_dœ_to_»ad
 = 
size_ûÁ¿l_dœ
;

907 
size_t
 
buf_size
 = 
SIZEDATA_INDATABLOCK
;

908 *
buf_»ad
 = (*è
	`ALLOC
 (
buf_size
);

909 ià(
ZSEEK64


910 (
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

911 
off£t_ûÁ¿l_dœ
 + 
by‹_befÜe_the_zfe
,

912 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

913 
”r
 = 
ZIP_ERRNO
;

915 (
size_ûÁ¿l_dœ_to_»ad
 > 0è&& (
”r
 =ğ
ZIP_OK
))

917 
ZPOS64_T
 
»ad_this
 = 
SIZEDATA_INDATABLOCK
;

918 ià(
»ad_this
 > 
size_ûÁ¿l_dœ_to_»ad
)

919 
»ad_this
 = 
size_ûÁ¿l_dœ_to_»ad
;

921 ià(
ZREAD64


922 (
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
, 
buf_»ad
,

923 (
uLÚg
è
»ad_this
) !=„ead_this)

924 
”r
 = 
ZIP_ERRNO
;

926 ià(
”r
 =ğ
ZIP_OK
)

927 
”r
 =

928 
	`add_d©a_š_d©ablock
 (&
pziš™
->
ûÁ¿l_dœ
, 
buf_»ad
,

929 (
uLÚg
è
»ad_this
);

931 
size_ûÁ¿l_dœ_to_»ad
 -ğ
»ad_this
;

933 
	`TRYFREE
 (
buf_»ad
);

935 
pziš™
->
begš_pos
 = 
by‹_befÜe_the_zfe
;

936 
pziš™
->
numb”_’Œy
 = 
numb”_’Œy_CD
;

938 ià(
ZSEEK64


939 (
pziš™
->
z_fefunc
,…ziš™->
fe¡»am
,

940 
off£t_ûÁ¿l_dœ
 + 
by‹_befÜe_the_zfe
,

941 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

942 
”r
 = 
ZIP_ERRNO
;

944  
”r
;

945 
	}
}

952 
zFe
 
ZEXPORT


953 
	$zO³n3
 (cÚ¡ *
·thÇme
, 
­³nd
, 
zch¬pc
 * 
glob®comm’t
,

954 
zlib_fefunc64_32_def
 * 
pzlib_fefunc64_32_def
)

956 
z64_š‹º®
 
ziš™
;

957 
z64_š‹º®
 *
zi
;

958 
”r
 = 
ZIP_OK
;

960 
ziš™
.
z_fefunc
.
z£ek32_fe
 = 
NULL
;

961 
ziš™
.
z_fefunc
.
z‹Î32_fe
 = 
NULL
;

962 ià(
pzlib_fefunc64_32_def
 =ğ
NULL
)

963 
	`fl_fİ’64_fefunc
 (&
ziš™
.
z_fefunc
.
zfe_func64
);

965 
ziš™
.
z_fefunc
 = *
pzlib_fefunc64_32_def
;

967 
ziš™
.
fe¡»am
 = 
	`ZOPEN64
 (ziš™.
z_fefunc
,

968 
·thÇme
,

969 (
­³nd
 =ğ
APPEND_STATUS_CREATE
) ?

970 (
ZLIB_FILEFUNC_MODE_READ
 |

971 
ZLIB_FILEFUNC_MODE_WRITE
 |

972 
ZLIB_FILEFUNC_MODE_CREATE
)

973 : (
ZLIB_FILEFUNC_MODE_READ
 |

974 
ZLIB_FILEFUNC_MODE_WRITE
 |

975 
ZLIB_FILEFUNC_MODE_EXISTING
));

977 ià(
ziš™
.
fe¡»am
 =ğ
NULL
)

978  
NULL
;

980 ià(
­³nd
 =ğ
APPEND_STATUS_CREATEAFTER
)

981 
	`ZSEEK64
 (
ziš™
.
z_fefunc
, ziš™.
fe¡»am
, 0, 
SEEK_END
);

983 
ziš™
.
begš_pos
 = 
	`ZTELL64
 (ziš™.
z_fefunc
, ziš™.
fe¡»am
);

984 
ziš™
.
š_İ’ed_fe_šz
 = 0;

985 
ziš™
.
ci
.
¡»am_š™Ÿli£d
 = 0;

986 
ziš™
.
numb”_’Œy
 = 0;

987 
ziš™
.
add_pos™iÚ_wh’_wr™tšg_off£t
 = 0;

988 
	`š™_lškedli¡
 (&(
ziš™
.
ûÁ¿l_dœ
));

992 
zi
 = (
z64_š‹º®
 *è
	`ALLOC
 ( (zip64_internal));

993 ià(
zi
 =ğ
NULL
)

995 
	`ZCLOSE64
 (
ziš™
.
z_fefunc
, ziš™.
fe¡»am
);

996  
NULL
;

1000 #iâdeà
NO_ADDFILEINEXISTINGZIP


1001 
ziš™
.
glob®comm’t
 = 
NULL
;

1002 ià(
­³nd
 =ğ
APPEND_STATUS_ADDINZIP
)

1005 
”r
 = 
	`LßdC’Œ®DœeùÜyRecÜd
 (&
ziš™
);

1006 
	}
}

1008 ià(
	gglob®comm’t
)

1010 *
	gglob®comm’t
 = 
ziš™
.
glob®comm’t
;

1014 ià(
	g”r
 !ğ
ZIP_OK
)

1016 #iâdeà
NO_ADDFILEINEXISTINGZIP


1017 
TRYFREE
 (
ziš™
.
glob®comm’t
);

1019 
TRYFREE
 (
zi
);

1020  
	gNULL
;

1024 *
	gzi
 = 
ziš™
;

1025  (
	gzFe
è
	gzi
;

1029 
zFe
 
ZEXPORT


1030 
	$zO³n2
 (cÚ¡ *
·thÇme
, 
­³nd
, 
zch¬pc
 * 
glob®comm’t
,

1031 
zlib_fefunc_def
 * 
pzlib_fefunc32_def
)

1033 ià(
pzlib_fefunc32_def
 !ğ
NULL
)

1035 
zlib_fefunc64_32_def
 
zlib_fefunc64_32_def_fl
;

1036 
fl_zlib_fefunc64_32_def_äom_fefunc32


1037 (&
zlib_fefunc64_32_def_fl
, 
pzlib_fefunc32_def
);

1038  
	`zO³n3
 (
·thÇme
, 
­³nd
, 
glob®comm’t
,

1039 &
zlib_fefunc64_32_def_fl
);

1042  
	`zO³n3
 (
·thÇme
, 
­³nd
, 
glob®comm’t
, 
NULL
);

1043 
	}
}

1045 
zFe
 
ZEXPORT


1046 
	$zO³n2_64
 (cÚ¡ *
·thÇme
, 
­³nd
, 
zch¬pc
 * 
glob®comm’t
,

1047 
zlib_fefunc64_def
 * 
pzlib_fefunc_def
)

1049 ià(
pzlib_fefunc_def
 !ğ
NULL
)

1051 
zlib_fefunc64_32_def
 
zlib_fefunc64_32_def_fl
;

1052 
zlib_fefunc64_32_def_fl
.
zfe_func64
 = *
pzlib_fefunc_def
;

1053 
zlib_fefunc64_32_def_fl
.
z‹Î32_fe
 = 
NULL
;

1054 
zlib_fefunc64_32_def_fl
.
z£ek32_fe
 = 
NULL
;

1055  
	`zO³n3
 (
·thÇme
, 
­³nd
, 
glob®comm’t
,

1056 &
zlib_fefunc64_32_def_fl
);

1059  
	`zO³n3
 (
·thÇme
, 
­³nd
, 
glob®comm’t
, 
NULL
);

1060 
	}
}

1064 
zFe
 
ZEXPORT


1065 
	$zO³n
 (cÚ¡ *
·thÇme
, 
­³nd
)

1067  
	`zO³n3
 ((cÚ¡ *è
·thÇme
, 
­³nd
, 
NULL
, NULL);

1068 
	}
}

1070 
zFe
 
ZEXPORT


1071 
	$zO³n64
 (cÚ¡ *
·thÇme
, 
­³nd
)

1073  
	`zO³n3
 (
·thÇme
, 
­³nd
, 
NULL
, NULL);

1074 
	}
}

1077 
	$Wr™e_LoÿlFeH—d”
 (
z64_š‹º®
 * 
zi
, cÚ¡ *
f’ame
,

1078 
uIÁ
 
size_exŒaf›ld_loÿl
,

1079 cÚ¡ *
exŒaf›ld_loÿl
)

1082 
”r
;

1083 
uIÁ
 
size_f’ame
 = (uIÁè
	`¡¾’
 (
f’ame
);

1084 
uIÁ
 
size_exŒaf›ld
 = 
size_exŒaf›ld_loÿl
;

1086 
”r
 =

1087 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1088 (
uLÚg
è
LOCALHEADERMAGIC
, 4);

1090 ià(
”r
 =ğ
ZIP_OK
)

1092 ià(
zi
->
ci
.
z64
)

1093 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 45, 2);

1095 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 20, 2);

1098 ià(
”r
 =ğ
ZIP_OK
)

1099 
”r
 =

1100 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1101 (
uLÚg
è
zi
->
ci
.
æag
, 2);

1103 ià(
”r
 =ğ
ZIP_OK
)

1104 
”r
 =

1105 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1106 (
uLÚg
è
zi
->
ci
.
m‘hod
, 2);

1108 ià(
”r
 =ğ
ZIP_OK
)

1109 
”r
 =

1110 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1111 (
uLÚg
è
zi
->
ci
.
dosD©e
, 4);

1114 ià(
”r
 =ğ
ZIP_OK
)

1115 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 0, 4);

1116 ià(
”r
 =ğ
ZIP_OK
)

1118 ià(
zi
->
ci
.
z64
)

1119 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 0xFFFFFFFF, 4);

1121 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 0, 4);

1123 ià(
”r
 =ğ
ZIP_OK
)

1125 ià(
zi
->
ci
.
z64
)

1126 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 0xFFFFFFFF, 4);

1128 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 0, 4);

1131 ià(
”r
 =ğ
ZIP_OK
)

1132 
”r
 =

1133 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1134 (
uLÚg
è
size_f’ame
, 2);

1136 ià(
zi
->
ci
.
z64
)

1138 
size_exŒaf›ld
 += 20;

1141 ià(
”r
 =ğ
ZIP_OK
)

1142 
”r
 =

1143 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1144 (
uLÚg
è
size_exŒaf›ld
, 2);

1146 ià((
”r
 =ğ
ZIP_OK
è&& (
size_f’ame
 > 0))

1148 ià(
	`ZWRITE64
 (
zi
->
z_fefunc
, zi->
fe¡»am
, 
f’ame
, 
size_f’ame
)

1149 !ğ
size_f’ame
)

1150 
”r
 = 
ZIP_ERRNO
;

1153 ià((
”r
 =ğ
ZIP_OK
è&& (
size_exŒaf›ld_loÿl
 > 0))

1155 ià(
ZWRITE64


1156 (
zi
->
z_fefunc
, zi->
fe¡»am
, 
exŒaf›ld_loÿl
,

1157 
size_exŒaf›ld_loÿl
) != size_extrafield_local)

1158 
”r
 = 
ZIP_ERRNO
;

1162 ià((
”r
 =ğ
ZIP_OK
è&& (
zi
->
ci
.
z64
))

1165 
H—d”ID
 = 1;

1166 
D©aSize
 = 16;

1167 
ZPOS64_T
 
Com´es£dSize
 = 0;

1168 
ZPOS64_T
 
Uncom´es£dSize
 = 0;

1171 
zi
->
ci
.
pos_z64exŒašfo
 = 
	`ZTELL64
 (zi->
z_fefunc
, zi->
fe¡»am
);

1173 
”r
 =

1174 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1175 (è
H—d”ID
, 2);

1176 
”r
 =

1177 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1178 (è
D©aSize
, 2);

1180 
”r
 =

1181 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1182 (
ZPOS64_T
è
Uncom´es£dSize
, 8);

1183 
”r
 =

1184 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1185 (
ZPOS64_T
è
Com´es£dSize
, 8);

1188  
”r
;

1189 
	}
}

1199 
ZEXPORT


1200 
	$zO³nNewFeInZ4_64
 (
zFe
 
fe
, cÚ¡ *
f’ame
,

1201 cÚ¡ 
z_fešfo
 * 
zfi
,

1202 cÚ¡ *
exŒaf›ld_loÿl
,

1203 
uIÁ
 
size_exŒaf›ld_loÿl
,

1204 cÚ¡ *
exŒaf›ld_glob®
,

1205 
uIÁ
 
size_exŒaf›ld_glob®
, cÚ¡ *
comm’t
,

1206 
m‘hod
, 
Ëv–
, 
¿w
, 
wšdowB™s
,

1207 
memLev–
, 
¡¿‹gy
, cÚ¡ *
·sswÜd
,

1208 
uLÚg
 
ücFÜCry±šg
, uLÚg 
v”siÚMadeBy
,

1209 
uLÚg
 
æagBa£
, 
z64
)

1211 
z64_š‹º®
 *
zi
;

1212 
uIÁ
 
size_f’ame
;

1213 
uIÁ
 
size_comm’t
;

1214 
uIÁ
 
i
;

1215 
”r
 = 
ZIP_OK
;

1217 #ifdeà
NOCRYPT


1218 (
ücFÜCry±šg
);

1219 ià(
·sswÜd
 !ğ
NULL
)

1220  
ZIP_PARAMERROR
;

1223 ià(
fe
 =ğ
NULL
)

1224  
ZIP_PARAMERROR
;

1226 #ifdeà
HAVE_BZIP2


1227 ià((
m‘hod
 !ğ0è&& (m‘hod !ğ
Z_DEFLATED
è&& (m‘hod !ğ
Z_BZIP2ED
))

1228  
ZIP_PARAMERROR
;

1230 ià((
m‘hod
 !ğ0è&& (m‘hod !ğ
Z_DEFLATED
))

1231  
ZIP_PARAMERROR
;

1234 
zi
 = (
z64_š‹º®
 *è
fe
;

1236 ià(
zi
->
š_İ’ed_fe_šz
 == 1)

1238 
”r
 = 
	`zClo£FeInZ
 (
fe
);

1239 ià(
”r
 !ğ
ZIP_OK
)

1240  
”r
;

1243 ià(
f’ame
 =ğ
NULL
)

1244 
f’ame
 = "-";

1246 ià(
comm’t
 =ğ
NULL
)

1247 
size_comm’t
 = 0;

1249 
size_comm’t
 = (
uIÁ
è
	`¡¾’
 (
comm’t
);

1251 
size_f’ame
 = (
uIÁ
è
	`¡¾’
 (
f’ame
);

1253 ià(
zfi
 =ğ
NULL
)

1254 
zi
->
ci
.
dosD©e
 = 0;

1257 ià(
zfi
->
dosD©e
 != 0)

1258 
zi
->
ci
.
dosD©e
 = 
zfi
->dosDate;

1260 
zi
->
ci
.
dosD©e
 = 
	`z64loÿl_TmzD©eToDosD©e
 (&
zfi
->
tmz_d©e
);

1263 
zi
->
ci
.
æag
 = 
æagBa£
;

1264 ià((
Ëv–
 == 8) || (level == 9))

1265 
zi
->
ci
.
æag
 |= 2;

1266 ià(
Ëv–
 == 2)

1267 
zi
->
ci
.
æag
 |= 4;

1268 ià(
Ëv–
 == 1)

1269 
zi
->
ci
.
æag
 |= 6;

1270 ià(
·sswÜd
 !ğ
NULL
)

1271 
zi
->
ci
.
æag
 |= 1;

1273 
zi
->
ci
.
üc32
 = 0;

1274 
zi
->
ci
.
m‘hod
 = method;

1275 
zi
->
ci
.
’üy±
 = 0;

1276 
zi
->
ci
.
¡»am_š™Ÿli£d
 = 0;

1277 
zi
->
ci
.
pos_š_bufã»d_d©a
 = 0;

1278 
zi
->
ci
.
¿w
 =„aw;

1279 
zi
->
ci
.
pos_loÿl_h—d”
 = 
	`ZTELL64
 (zi->
z_fefunc
, zi->
fe¡»am
);

1281 
zi
->
ci
.
size_ûÁ¿lh—d”
 =

1282 
SIZECENTRALHEADER
 + 
size_f’ame
 + 
size_exŒaf›ld_glob®
 + 
size_comm’t
;

1283 
zi
->
ci
.
size_ûÁ¿lExŒaF»e
 = 32;

1285 
zi
->
ci
.
ûÁ¿l_h—d”
 =

1286 (*è
	`ALLOC
 ((
uIÁ
è
zi
->
ci
.
size_ûÁ¿lh—d”
 +

1287 
zi
->
ci
.
size_ûÁ¿lExŒaF»e
);

1289 
zi
->
ci
.
size_ûÁ¿lExŒa
 = 
size_exŒaf›ld_glob®
;

1290 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
,

1291 (
uLÚg
è
CENTRALHEADERMAGIC
, 4);

1293 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 4,

1294 (
uLÚg
è
v”siÚMadeBy
, 2);

1295 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 6, (
uLÚg
) 20, 2);

1296 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 8,

1297 (
uLÚg
è
zi
->
ci
.
æag
, 2);

1298 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 10,

1299 (
uLÚg
è
zi
->
ci
.
m‘hod
, 2);

1300 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 12,

1301 (
uLÚg
è
zi
->
ci
.
dosD©e
, 4);

1302 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 16, (
uLÚg
) 0, 4);

1303 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 20, (
uLÚg
) 0, 4);

1304 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 24, (
uLÚg
) 0, 4);

1305 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 28,

1306 (
uLÚg
è
size_f’ame
, 2);

1307 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 30,

1308 (
uLÚg
è
size_exŒaf›ld_glob®
, 2);

1309 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 32,

1310 (
uLÚg
è
size_comm’t
, 2);

1311 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 34, (
uLÚg
) 0, 2);

1313 ià(
zfi
 =ğ
NULL
)

1314 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 36, (
uLÚg
) 0, 2);

1316 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 36,

1317 (
uLÚg
è
zfi
->
š‹º®_ç
, 2);

1319 ià(
zfi
 =ğ
NULL
)

1320 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 38, (
uLÚg
) 0, 4);

1322 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 38,

1323 (
uLÚg
è
zfi
->
ex‹º®_ç
, 4);

1325 ià(
zi
->
ci
.
pos_loÿl_h—d”
 >= 0xffffffff)

1326 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 42,

1327 (
uLÚg
) 0xffffffff, 4);

1329 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 42,

1330 (
uLÚg
è
zi
->
ci
.
pos_loÿl_h—d”
 -

1331 
zi
->
add_pos™iÚ_wh’_wr™tšg_off£t
, 4);

1333 
i
 = 0; i < 
size_f’ame
; i++)

1334 *(
zi
->
ci
.
ûÁ¿l_h—d”
 + 
SIZECENTRALHEADER
 + 
i
èğ*(
f’ame
 + i);

1336 
i
 = 0; i < 
size_exŒaf›ld_glob®
; i++)

1337 *(
zi
->
ci
.
ûÁ¿l_h—d”
 + 
SIZECENTRALHEADER
 + 
size_f’ame
 + 
i
) =

1338 *(((cÚ¡ *è
exŒaf›ld_glob®
è+ 
i
);

1340 
i
 = 0; i < 
size_comm’t
; i++)

1341 *(
zi
->
ci
.
ûÁ¿l_h—d”
 + 
SIZECENTRALHEADER
 + 
size_f’ame
 +

1342 
size_exŒaf›ld_glob®
 + 
i
èğ*(
comm’t
 + i);

1343 ià(
zi
->
ci
.
ûÁ¿l_h—d”
 =ğ
NULL
)

1344  
ZIP_INTERNALERROR
;

1346 
zi
->
ci
.
z64
 = zip64;

1347 
zi
->
ci
.
tÙ®Com´es£dD©a
 = 0;

1348 
zi
->
ci
.
tÙ®Uncom´es£dD©a
 = 0;

1349 
zi
->
ci
.
pos_z64exŒašfo
 = 0;

1351 
”r
 =

1352 
	`Wr™e_LoÿlFeH—d”
 (
zi
, 
f’ame
, 
size_exŒaf›ld_loÿl
,

1353 
exŒaf›ld_loÿl
);

1355 #ifdeà
HAVE_BZIP2


1356 
zi
->
ci
.
b¡»am
.
ava_š
 = (
uIÁ
) 0;

1357 
zi
->
ci
.
b¡»am
.
ava_out
 = (
uIÁ
è
Z_BUFSIZE
;

1358 
zi
->
ci
.
b¡»am
.
Ãxt_out
 = (*èzi->ci.
bufã»d_d©a
;

1359 
zi
->
ci
.
b¡»am
.
tÙ®_š_hi32
 = 0;

1360 
zi
->
ci
.
b¡»am
.
tÙ®_š_lo32
 = 0;

1361 
zi
->
ci
.
b¡»am
.
tÙ®_out_hi32
 = 0;

1362 
zi
->
ci
.
b¡»am
.
tÙ®_out_lo32
 = 0;

1365 
zi
->
ci
.
¡»am
.
ava_š
 = (
uIÁ
) 0;

1366 
zi
->
ci
.
¡»am
.
ava_out
 = (
uIÁ
è
Z_BUFSIZE
;

1367 
zi
->
ci
.
¡»am
.
Ãxt_out
 = zi->ci.
bufã»d_d©a
;

1368 
zi
->
ci
.
¡»am
.
tÙ®_š
 = 0;

1369 
zi
->
ci
.
¡»am
.
tÙ®_out
 = 0;

1370 
zi
->
ci
.
¡»am
.
d©a_ty³
 = 
Z_BINARY
;

1372 #ifdeà
HAVE_BZIP2


1373 ià((
”r
 =ğ
ZIP_OK
)

1374 && (
zi
->
ci
.
m‘hod
 =ğ
Z_DEFLATED
 || zi->ci.m‘hod =ğ
Z_BZIP2ED
)

1375 && (!
zi
->
ci
.
¿w
))

1377 ià((
”r
 =ğ
ZIP_OK
è&& (
zi
->
ci
.
m‘hod
 =ğ
Z_DEFLATED
è&& (!zi->ci.
¿w
))

1380 ià(
zi
->
ci
.
m‘hod
 =ğ
Z_DEFLATED
)

1382 
zi
->
ci
.
¡»am
.
z®loc
 = (
®loc_func
) 0;

1383 
zi
->
ci
.
¡»am
.
zä“
 = (
ä“_func
) 0;

1384 
zi
->
ci
.
¡»am
.
İaque
 = (
voidpf
) 0;

1386 ià(
wšdowB™s
 > 0)

1387 
wšdowB™s
 = -windowBits;

1389 
”r
 =

1390 
	`deæ©eIn™2
 (&
zi
->
ci
.
¡»am
, 
Ëv–
, 
Z_DEFLATED
, 
wšdowB™s
,

1391 
memLev–
, 
¡¿‹gy
);

1393 ià(
”r
 =ğ
Z_OK
)

1394 
zi
->
ci
.
¡»am_š™Ÿli£d
 = 
Z_DEFLATED
;

1396 ià(
zi
->
ci
.
m‘hod
 =ğ
Z_BZIP2ED
)

1398 #ifdeà
HAVE_BZIP2


1400 
zi
->
ci
.
b¡»am
.
bz®loc
 = 0;

1401 
zi
->
ci
.
b¡»am
.
bzä“
 = 0;

1402 
zi
->
ci
.
b¡»am
.
İaque
 = (
voidpf
) 0;

1404 
”r
 = 
	`BZ2_bzCom´essIn™
 (&
zi
->
ci
.
b¡»am
, 
Ëv–
, 0, 35);

1405 ià(
”r
 =ğ
BZ_OK
)

1406 
zi
->
ci
.
¡»am_š™Ÿli£d
 = 
Z_BZIP2ED
;

1412 #iâdeà
NOCRYPT


1413 
zi
->
ci
.
üy±_h—d”_size
 = 0;

1414 ià((
”r
 =ğ
Z_OK
è&& (
·sswÜd
 !ğ
NULL
))

1416 
bufH—d
[
RAND_HEAD_LEN
];

1417 
sizeH—d
;

1418 
zi
->
ci
.
’üy±
 = 1;

1419 
zi
->
ci
.
püc_32_b
 = 
	`g‘_üc_bË
 ();

1422 
sizeH—d
 =

1423 
	`üy±h—d
 (
·sswÜd
, 
bufH—d
, 
RAND_HEAD_LEN
, 
zi
->
ci
.
keys
,

1424 
zi
->
ci
.
püc_32_b
, 
ücFÜCry±šg
);

1425 
zi
->
ci
.
üy±_h—d”_size
 = 
sizeH—d
;

1427 ià(
	`ZWRITE64
 (
zi
->
z_fefunc
, zi->
fe¡»am
, 
bufH—d
, 
sizeH—d
) !=

1428 
sizeH—d
)

1429 
”r
 = 
ZIP_ERRNO
;

1433 ià(
”r
 =ğ
Z_OK
)

1434 
zi
->
š_İ’ed_fe_šz
 = 1;

1435  
”r
;

1436 
	}
}

1438 
ZEXPORT


1439 
	$zO³nNewFeInZ4
 (
zFe
 
fe
, cÚ¡ *
f’ame
,

1440 cÚ¡ 
z_fešfo
 * 
zfi
,

1441 cÚ¡ *
exŒaf›ld_loÿl
,

1442 
uIÁ
 
size_exŒaf›ld_loÿl
,

1443 cÚ¡ *
exŒaf›ld_glob®
,

1444 
uIÁ
 
size_exŒaf›ld_glob®
, cÚ¡ *
comm’t
,

1445 
m‘hod
, 
Ëv–
, 
¿w
, 
wšdowB™s
,

1446 
memLev–
, 
¡¿‹gy
, cÚ¡ *
·sswÜd
,

1447 
uLÚg
 
ücFÜCry±šg
, uLÚg 
v”siÚMadeBy
,

1448 
uLÚg
 
æagBa£
)

1450  
	`zO³nNewFeInZ4_64
 (
fe
, 
f’ame
, 
zfi
,

1451 
exŒaf›ld_loÿl
, 
size_exŒaf›ld_loÿl
,

1452 
exŒaf›ld_glob®
, 
size_exŒaf›ld_glob®
,

1453 
comm’t
, 
m‘hod
, 
Ëv–
, 
¿w
,

1454 
wšdowB™s
, 
memLev–
, 
¡¿‹gy
,

1455 
·sswÜd
, 
ücFÜCry±šg
, 
v”siÚMadeBy
,

1456 
æagBa£
, 0);

1457 
	}
}

1459 
ZEXPORT


1460 
	$zO³nNewFeInZ3
 (
zFe
 
fe
, cÚ¡ *
f’ame
,

1461 cÚ¡ 
z_fešfo
 * 
zfi
,

1462 cÚ¡ *
exŒaf›ld_loÿl
,

1463 
uIÁ
 
size_exŒaf›ld_loÿl
,

1464 cÚ¡ *
exŒaf›ld_glob®
,

1465 
uIÁ
 
size_exŒaf›ld_glob®
, cÚ¡ *
comm’t
,

1466 
m‘hod
, 
Ëv–
, 
¿w
, 
wšdowB™s
,

1467 
memLev–
, 
¡¿‹gy
, cÚ¡ *
·sswÜd
,

1468 
uLÚg
 
ücFÜCry±šg
)

1470  
	`zO³nNewFeInZ4_64
 (
fe
, 
f’ame
, 
zfi
,

1471 
exŒaf›ld_loÿl
, 
size_exŒaf›ld_loÿl
,

1472 
exŒaf›ld_glob®
, 
size_exŒaf›ld_glob®
,

1473 
comm’t
, 
m‘hod
, 
Ëv–
, 
¿w
,

1474 
wšdowB™s
, 
memLev–
, 
¡¿‹gy
,

1475 
·sswÜd
, 
ücFÜCry±šg
, 
VERSIONMADEBY
, 0,

1477 
	}
}

1479 
ZEXPORT


1480 
	$zO³nNewFeInZ3_64
 (
zFe
 
fe
, cÚ¡ *
f’ame
,

1481 cÚ¡ 
z_fešfo
 * 
zfi
,

1482 cÚ¡ *
exŒaf›ld_loÿl
,

1483 
uIÁ
 
size_exŒaf›ld_loÿl
,

1484 cÚ¡ *
exŒaf›ld_glob®
,

1485 
uIÁ
 
size_exŒaf›ld_glob®
, cÚ¡ *
comm’t
,

1486 
m‘hod
, 
Ëv–
, 
¿w
, 
wšdowB™s
,

1487 
memLev–
, 
¡¿‹gy
, cÚ¡ *
·sswÜd
,

1488 
uLÚg
 
ücFÜCry±šg
, 
z64
)

1490  
	`zO³nNewFeInZ4_64
 (
fe
, 
f’ame
, 
zfi
,

1491 
exŒaf›ld_loÿl
, 
size_exŒaf›ld_loÿl
,

1492 
exŒaf›ld_glob®
, 
size_exŒaf›ld_glob®
,

1493 
comm’t
, 
m‘hod
, 
Ëv–
, 
¿w
,

1494 
wšdowB™s
, 
memLev–
, 
¡¿‹gy
,

1495 
·sswÜd
, 
ücFÜCry±šg
, 
VERSIONMADEBY
, 0,

1496 
z64
);

1497 
	}
}

1499 
ZEXPORT


1500 
	$zO³nNewFeInZ2
 (
zFe
 
fe
, cÚ¡ *
f’ame
,

1501 cÚ¡ 
z_fešfo
 * 
zfi
,

1502 cÚ¡ *
exŒaf›ld_loÿl
,

1503 
uIÁ
 
size_exŒaf›ld_loÿl
,

1504 cÚ¡ *
exŒaf›ld_glob®
,

1505 
uIÁ
 
size_exŒaf›ld_glob®
, cÚ¡ *
comm’t
,

1506 
m‘hod
, 
Ëv–
, 
¿w
)

1508  
	`zO³nNewFeInZ4_64
 (
fe
, 
f’ame
, 
zfi
,

1509 
exŒaf›ld_loÿl
, 
size_exŒaf›ld_loÿl
,

1510 
exŒaf›ld_glob®
, 
size_exŒaf›ld_glob®
,

1511 
comm’t
, 
m‘hod
, 
Ëv–
, 
¿w
,

1512 -
MAX_WBITS
, 
DEF_MEM_LEVEL
,

1513 
Z_DEFAULT_STRATEGY
, 
NULL
, 0, 
VERSIONMADEBY
,

1515 
	}
}

1517 
ZEXPORT


1518 
	$zO³nNewFeInZ2_64
 (
zFe
 
fe
, cÚ¡ *
f’ame
,

1519 cÚ¡ 
z_fešfo
 * 
zfi
,

1520 cÚ¡ *
exŒaf›ld_loÿl
,

1521 
uIÁ
 
size_exŒaf›ld_loÿl
,

1522 cÚ¡ *
exŒaf›ld_glob®
,

1523 
uIÁ
 
size_exŒaf›ld_glob®
, cÚ¡ *
comm’t
,

1524 
m‘hod
, 
Ëv–
, 
¿w
, 
z64
)

1526  
	`zO³nNewFeInZ4_64
 (
fe
, 
f’ame
, 
zfi
,

1527 
exŒaf›ld_loÿl
, 
size_exŒaf›ld_loÿl
,

1528 
exŒaf›ld_glob®
, 
size_exŒaf›ld_glob®
,

1529 
comm’t
, 
m‘hod
, 
Ëv–
, 
¿w
,

1530 -
MAX_WBITS
, 
DEF_MEM_LEVEL
,

1531 
Z_DEFAULT_STRATEGY
, 
NULL
, 0, 
VERSIONMADEBY
,

1532 0, 
z64
);

1533 
	}
}

1535 
ZEXPORT


1536 
	$zO³nNewFeInZ64
 (
zFe
 
fe
, cÚ¡ *
f’ame
,

1537 cÚ¡ 
z_fešfo
 * 
zfi
,

1538 cÚ¡ *
exŒaf›ld_loÿl
,

1539 
uIÁ
 
size_exŒaf›ld_loÿl
,

1540 cÚ¡ *
exŒaf›ld_glob®
,

1541 
uIÁ
 
size_exŒaf›ld_glob®
, cÚ¡ *
comm’t
,

1542 
m‘hod
, 
Ëv–
, 
z64
)

1544  
	`zO³nNewFeInZ4_64
 (
fe
, 
f’ame
, 
zfi
,

1545 
exŒaf›ld_loÿl
, 
size_exŒaf›ld_loÿl
,

1546 
exŒaf›ld_glob®
, 
size_exŒaf›ld_glob®
,

1547 
comm’t
, 
m‘hod
, 
Ëv–
, 0,

1548 -
MAX_WBITS
, 
DEF_MEM_LEVEL
,

1549 
Z_DEFAULT_STRATEGY
, 
NULL
, 0, 
VERSIONMADEBY
,

1550 0, 
z64
);

1551 
	}
}

1553 
ZEXPORT


1554 
	$zO³nNewFeInZ
 (
zFe
 
fe
, cÚ¡ *
f’ame
,

1555 cÚ¡ 
z_fešfo
 * 
zfi
, cÚ¡ *
exŒaf›ld_loÿl
,

1556 
uIÁ
 
size_exŒaf›ld_loÿl
,

1557 cÚ¡ *
exŒaf›ld_glob®
,

1558 
uIÁ
 
size_exŒaf›ld_glob®
, cÚ¡ *
comm’t
,

1559 
m‘hod
, 
Ëv–
)

1561  
	`zO³nNewFeInZ4_64
 (
fe
, 
f’ame
, 
zfi
,

1562 
exŒaf›ld_loÿl
, 
size_exŒaf›ld_loÿl
,

1563 
exŒaf›ld_glob®
, 
size_exŒaf›ld_glob®
,

1564 
comm’t
, 
m‘hod
, 
Ëv–
, 0,

1565 -
MAX_WBITS
, 
DEF_MEM_LEVEL
,

1566 
Z_DEFAULT_STRATEGY
, 
NULL
, 0, 
VERSIONMADEBY
,

1568 
	}
}

1570 
loÿl
 

1571 
	$z64FlushWr™eBufãr
 (
z64_š‹º®
 * 
zi
)

1573 
”r
 = 
ZIP_OK
;

1575 ià(
zi
->
ci
.
’üy±
 != 0)

1577 #iâdeà
NOCRYPT


1578 
uIÁ
 
i
;

1579 
t
;

1580 
i
 = 0; i < 
zi
->
ci
.
pos_š_bufã»d_d©a
; i++)

1581 
zi
->
ci
.
bufã»d_d©a
[
i
] =

1582 
	`z’code
 (
zi
->
ci
.
keys
, zi->ci.
püc_32_b
, zi->ci.
bufã»d_d©a
[
i
],

1583 
t
);

1587 ià(
ZWRITE64


1588 (
zi
->
z_fefunc
, zi->
fe¡»am
, zi->
ci
.
bufã»d_d©a
,

1589 
zi
->
ci
.
pos_š_bufã»d_d©a
) != zi->ci.pos_in_buffered_data)

1590 
”r
 = 
ZIP_ERRNO
;

1592 
zi
->
ci
.
tÙ®Com´es£dD©a
 +ğzi->ci.
pos_š_bufã»d_d©a
;

1594 #ifdeà
HAVE_BZIP2


1595 ià(
zi
->
ci
.
m‘hod
 =ğ
Z_BZIP2ED
)

1597 
zi
->
ci
.
tÙ®Uncom´es£dD©a
 +ğzi->ci.
b¡»am
.
tÙ®_š_lo32
;

1598 
zi
->
ci
.
b¡»am
.
tÙ®_š_lo32
 = 0;

1599 
zi
->
ci
.
b¡»am
.
tÙ®_š_hi32
 = 0;

1604 
zi
->
ci
.
tÙ®Uncom´es£dD©a
 +ğzi->ci.
¡»am
.
tÙ®_š
;

1605 
zi
->
ci
.
¡»am
.
tÙ®_š
 = 0;

1609 
zi
->
ci
.
pos_š_bufã»d_d©a
 = 0;

1611  
”r
;

1612 
	}
}

1614 
ZEXPORT


1615 
	$zWr™eInFeInZ
 (
zFe
 
fe
, cÚ¡ *
buf
, 
Ën
)

1617 
z64_š‹º®
 *
zi
;

1618 
”r
 = 
ZIP_OK
;

1620 ià(
fe
 =ğ
NULL
)

1621  
ZIP_PARAMERROR
;

1622 
zi
 = (
z64_š‹º®
 *è
fe
;

1624 ià(
zi
->
š_İ’ed_fe_šz
 == 0)

1625  
ZIP_PARAMERROR
;

1627 
zi
->
ci
.
üc32
 = 
	`üc32
 (zi->ci.üc32, 
buf
, (
uIÁ
è
Ën
);

1629 #ifdeà
HAVE_BZIP2


1630 ià(
zi
->
ci
.
m‘hod
 =ğ
Z_BZIP2ED
 && (!zi->ci.
¿w
))

1632 
zi
->
ci
.
b¡»am
.
Ãxt_š
 = (*è
buf
;

1633 
zi
->
ci
.
b¡»am
.
ava_š
 = 
Ën
;

1634 
”r
 = 
BZ_RUN_OK
;

1636 (
”r
 =ğ
BZ_RUN_OK
è&& (
zi
->
ci
.
b¡»am
.
ava_š
 > 0))

1638 ià(
zi
->
ci
.
b¡»am
.
ava_out
 == 0)

1640 ià(
	`z64FlushWr™eBufãr
 (
zi
è=ğ
ZIP_ERRNO
)

1641 
”r
 = 
ZIP_ERRNO
;

1642 
zi
->
ci
.
b¡»am
.
ava_out
 = (
uIÁ
è
Z_BUFSIZE
;

1643 
zi
->
ci
.
b¡»am
.
Ãxt_out
 = (*èzi->ci.
bufã»d_d©a
;

1647 ià(
”r
 !ğ
BZ_RUN_OK
)

1650 ià((
zi
->
ci
.
m‘hod
 =ğ
Z_BZIP2ED
è&& (!zi->ci.
¿w
))

1652 
uLÚg
 
uTÙ®OutBefÜe_lo
 = 
zi
->
ci
.
b¡»am
.
tÙ®_out_lo32
;

1654 
”r
 = 
	`BZ2_bzCom´ess
 (&
zi
->
ci
.
b¡»am
, 
BZ_RUN
);

1656 
zi
->
ci
.
pos_š_bufã»d_d©a
 +=

1657 (
uIÁ
è(
zi
->
ci
.
b¡»am
.
tÙ®_out_lo32
 - 
uTÙ®OutBefÜe_lo
);

1661 ià(
”r
 =ğ
BZ_RUN_OK
)

1662 
”r
 = 
ZIP_OK
;

1667 
zi
->
ci
.
¡»am
.
Ãxt_š
 = (
By‹f
 *è
buf
;

1668 
zi
->
ci
.
¡»am
.
ava_š
 = 
Ën
;

1670 (
”r
 =ğ
ZIP_OK
è&& (
zi
->
ci
.
¡»am
.
ava_š
 > 0))

1672 ià(
zi
->
ci
.
¡»am
.
ava_out
 == 0)

1674 ià(
	`z64FlushWr™eBufãr
 (
zi
è=ğ
ZIP_ERRNO
)

1675 
”r
 = 
ZIP_ERRNO
;

1676 
zi
->
ci
.
¡»am
.
ava_out
 = (
uIÁ
è
Z_BUFSIZE
;

1677 
zi
->
ci
.
¡»am
.
Ãxt_out
 = zi->ci.
bufã»d_d©a
;

1681 ià(
”r
 !ğ
ZIP_OK
)

1684 ià((
zi
->
ci
.
m‘hod
 =ğ
Z_DEFLATED
è&& (!zi->ci.
¿w
))

1686 
uLÚg
 
uTÙ®OutBefÜe
 = 
zi
->
ci
.
¡»am
.
tÙ®_out
;

1687 
”r
 = 
	`deæ©e
 (&
zi
->
ci
.
¡»am
, 
Z_NO_FLUSH
);

1688 ià(
uTÙ®OutBefÜe
 > 
zi
->
ci
.
¡»am
.
tÙ®_out
)

1690 
bB»ak
 = 0;

1691 
bB»ak
++;

1694 
zi
->
ci
.
pos_š_bufã»d_d©a
 +=

1695 (
uIÁ
è(
zi
->
ci
.
¡»am
.
tÙ®_out
 - 
uTÙ®OutBefÜe
);

1699 
uIÁ
 
cİy_this
, 
i
;

1700 ià(
zi
->
ci
.
¡»am
.
ava_š
 < zi->ci.¡»am.
ava_out
)

1701 
cİy_this
 = 
zi
->
ci
.
¡»am
.
ava_š
;

1703 
cİy_this
 = 
zi
->
ci
.
¡»am
.
ava_out
;

1705 
i
 = 0; i < 
cİy_this
; i++)

1706 *(((*è
zi
->
ci
.
¡»am
.
Ãxt_out
è+ 
i
) =

1707 *(((cÚ¡ *è
zi
->
ci
.
¡»am
.
Ãxt_š
è+ 
i
);

1709 
zi
->
ci
.
¡»am
.
ava_š
 -ğ
cİy_this
;

1710 
zi
->
ci
.
¡»am
.
ava_out
 -ğ
cİy_this
;

1711 
zi
->
ci
.
¡»am
.
Ãxt_š
 +ğ
cİy_this
;

1712 
zi
->
ci
.
¡»am
.
Ãxt_out
 +ğ
cİy_this
;

1713 
zi
->
ci
.
¡»am
.
tÙ®_š
 +ğ
cİy_this
;

1714 
zi
->
ci
.
¡»am
.
tÙ®_out
 +ğ
cİy_this
;

1715 
zi
->
ci
.
pos_š_bufã»d_d©a
 +ğ
cİy_this
;

1721  
”r
;

1722 
	}
}

1724 
ZEXPORT


1725 
	$zClo£FeInZRaw
 (
zFe
 
fe
, 
uLÚg
 
uncom´es£d_size
, uLÚg 
üc32
)

1727  
	`zClo£FeInZRaw64
 (
fe
, 
uncom´es£d_size
, 
üc32
);

1728 
	}
}

1730 
ZEXPORT


1731 
	$zClo£FeInZRaw64
 (
zFe
 
fe
, 
ZPOS64_T
 
uncom´es£d_size
, 
uLÚg
 
üc32
)

1733 
z64_š‹º®
 *
zi
;

1734 
ZPOS64_T
 
com´es£d_size
;

1735 
uLÚg
 
šv®idV®ue
 = 0xffffffff;

1736 
d©asize
 = 0;

1737 
”r
 = 
ZIP_OK
;

1739 ià(
fe
 =ğ
NULL
)

1740  
ZIP_PARAMERROR
;

1741 
zi
 = (
z64_š‹º®
 *è
fe
;

1743 ià(
zi
->
š_İ’ed_fe_šz
 == 0)

1744  
ZIP_PARAMERROR
;

1745 
zi
->
ci
.
¡»am
.
ava_š
 = 0;

1747 ià((
zi
->
ci
.
m‘hod
 =ğ
Z_DEFLATED
è&& (!zi->ci.
¿w
))

1749 
”r
 =ğ
ZIP_OK
)

1751 
uLÚg
 
uTÙ®OutBefÜe
;

1752 ià(
zi
->
ci
.
¡»am
.
ava_out
 == 0)

1754 ià(
	`z64FlushWr™eBufãr
 (
zi
è=ğ
ZIP_ERRNO
)

1755 
”r
 = 
ZIP_ERRNO
;

1756 
zi
->
ci
.
¡»am
.
ava_out
 = (
uIÁ
è
Z_BUFSIZE
;

1757 
zi
->
ci
.
¡»am
.
Ãxt_out
 = zi->ci.
bufã»d_d©a
;

1759 
uTÙ®OutBefÜe
 = 
zi
->
ci
.
¡»am
.
tÙ®_out
;

1760 
”r
 = 
	`deæ©e
 (&
zi
->
ci
.
¡»am
, 
Z_FINISH
);

1761 
zi
->
ci
.
pos_š_bufã»d_d©a
 +=

1762 (
uIÁ
è(
zi
->
ci
.
¡»am
.
tÙ®_out
 - 
uTÙ®OutBefÜe
);

1765 ià((
zi
->
ci
.
m‘hod
 =ğ
Z_BZIP2ED
è&& (!zi->ci.
¿w
))

1767 #ifdeà
HAVE_BZIP2


1768 
”r
 = 
BZ_FINISH_OK
;

1769 
”r
 =ğ
BZ_FINISH_OK
)

1771 
uLÚg
 
uTÙ®OutBefÜe
;

1772 ià(
zi
->
ci
.
b¡»am
.
ava_out
 == 0)

1774 ià(
	`z64FlushWr™eBufãr
 (
zi
è=ğ
ZIP_ERRNO
)

1775 
”r
 = 
ZIP_ERRNO
;

1776 
zi
->
ci
.
b¡»am
.
ava_out
 = (
uIÁ
è
Z_BUFSIZE
;

1777 
zi
->
ci
.
b¡»am
.
Ãxt_out
 = (*èzi->ci.
bufã»d_d©a
;

1779 
uTÙ®OutBefÜe
 = 
zi
->
ci
.
b¡»am
.
tÙ®_out_lo32
;

1780 
”r
 = 
	`BZ2_bzCom´ess
 (&
zi
->
ci
.
b¡»am
, 
BZ_FINISH
);

1781 ià(
”r
 =ğ
BZ_STREAM_END
)

1782 
”r
 = 
Z_STREAM_END
;

1784 
zi
->
ci
.
pos_š_bufã»d_d©a
 +=

1785 (
uIÁ
è(
zi
->
ci
.
b¡»am
.
tÙ®_out_lo32
 - 
uTÙ®OutBefÜe
);

1788 ià(
”r
 =ğ
BZ_FINISH_OK
)

1789 
”r
 = 
ZIP_OK
;

1793 ià(
”r
 =ğ
Z_STREAM_END
)

1794 
”r
 = 
ZIP_OK
;

1796 ià((
zi
->
ci
.
pos_š_bufã»d_d©a
 > 0è&& (
”r
 =ğ
ZIP_OK
))

1798 ià(
	`z64FlushWr™eBufãr
 (
zi
è=ğ
ZIP_ERRNO
)

1799 
”r
 = 
ZIP_ERRNO
;

1802 ià((
zi
->
ci
.
m‘hod
 =ğ
Z_DEFLATED
è&& (!zi->ci.
¿w
))

1804 
tmp_”r
 = 
	`deæ©eEnd
 (&
zi
->
ci
.
¡»am
);

1805 ià(
”r
 =ğ
ZIP_OK
)

1806 
”r
 = 
tmp_”r
;

1807 
zi
->
ci
.
¡»am_š™Ÿli£d
 = 0;

1809 #ifdeà
HAVE_BZIP2


1810 ià((
zi
->
ci
.
m‘hod
 =ğ
Z_BZIP2ED
è&& (!zi->ci.
¿w
))

1812 
tm³¼
 = 
	`BZ2_bzCom´essEnd
 (&
zi
->
ci
.
b¡»am
);

1813 ià(
”r
 =ğ
ZIP_OK
)

1814 
”r
 = 
tm³¼
;

1815 
zi
->
ci
.
¡»am_š™Ÿli£d
 = 0;

1819 ià(!
zi
->
ci
.
¿w
)

1821 
üc32
 = (
uLÚg
è
zi
->
ci
.crc32;

1822 
uncom´es£d_size
 = 
zi
->
ci
.
tÙ®Uncom´es£dD©a
;

1824 
com´es£d_size
 = 
zi
->
ci
.
tÙ®Com´es£dD©a
;

1826 #iâdeà
NOCRYPT


1827 
com´es£d_size
 +ğ
zi
->
ci
.
üy±_h—d”_size
;

1831 ià(
com´es£d_size
 >ğ0xfffffffà|| 
uncom´es£d_size
 >= 0xffffffff

1832 || 
zi
->
ci
.
pos_loÿl_h—d”
 >= 0xffffffff)

1835 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 4, (
uLÚg
) 45, 2);

1837 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 6, (
uLÚg
) 45, 2);

1841 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 16, 
üc32
, 4);

1844 ià(
com´es£d_size
 >= 0xffffffff)

1845 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 20, 
šv®idV®ue
, 4);

1847 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 20, 
com´es£d_size
, 4);

1850 ià(
zi
->
ci
.
¡»am
.
d©a_ty³
 =ğ
Z_ASCII
)

1851 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 36, (
uLÚg
è
Z_ASCII
,

1854 ià(
uncom´es£d_size
 >= 0xffffffff)

1855 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 24, 
šv®idV®ue
, 4);

1857 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 24, 
uncom´es£d_size
, 4);

1860 ià(
uncom´es£d_size
 >= 0xffffffff)

1861 
d©asize
 += 8;

1864 ià(
com´es£d_size
 >= 0xffffffff)

1865 
d©asize
 += 8;

1868 ià(
zi
->
ci
.
pos_loÿl_h—d”
 >= 0xffffffff)

1869 
d©asize
 += 8;

1871 ià(
d©asize
 > 0)

1873 *
p
 = 
NULL
;

1875 ià((
uLÚg
è(
d©asize
 + 4è> 
zi
->
ci
.
size_ûÁ¿lExŒaF»e
)

1878  
ZIP_BADZIPFILE
;

1881 
p
 = 
zi
->
ci
.
ûÁ¿l_h—d”
 + zi->ci.
size_ûÁ¿lh—d”
;

1884 
	`z64loÿl_putV®ue_šmemÜy
 (
p
, 0x0001, 2);

1885 
p
 += 2;

1886 
	`z64loÿl_putV®ue_šmemÜy
 (
p
, 
d©asize
, 2);

1887 
p
 += 2;

1889 ià(
uncom´es£d_size
 >= 0xffffffff)

1891 
	`z64loÿl_putV®ue_šmemÜy
 (
p
, 
uncom´es£d_size
, 8);

1892 
p
 += 8;

1895 ià(
com´es£d_size
 >= 0xffffffff)

1897 
	`z64loÿl_putV®ue_šmemÜy
 (
p
, 
com´es£d_size
, 8);

1898 
p
 += 8;

1901 ià(
zi
->
ci
.
pos_loÿl_h—d”
 >= 0xffffffff)

1903 
	`z64loÿl_putV®ue_šmemÜy
 (
p
, 
zi
->
ci
.
pos_loÿl_h—d”
, 8);

1904 
p
 += 8;

1910 
zi
->
ci
.
size_ûÁ¿lExŒaF»e
 -ğ
d©asize
 + 4;

1911 
zi
->
ci
.
size_ûÁ¿lh—d”
 +ğ
d©asize
 + 4;

1914 
zi
->
ci
.
size_ûÁ¿lExŒa
 +ğ
d©asize
 + 4;

1915 
	`z64loÿl_putV®ue_šmemÜy
 (
zi
->
ci
.
ûÁ¿l_h—d”
 + 30,

1916 (
uLÚg
è
zi
->
ci
.
size_ûÁ¿lExŒa
, 2);

1919 ià(
”r
 =ğ
ZIP_OK
)

1920 
”r
 =

1921 
	`add_d©a_š_d©ablock
 (&
zi
->
ûÁ¿l_dœ
, zi->
ci
.
ûÁ¿l_h—d”
,

1922 (
uLÚg
è
zi
->
ci
.
size_ûÁ¿lh—d”
);

1924 
	`ä“
 (
zi
->
ci
.
ûÁ¿l_h—d”
);

1926 ià(
”r
 =ğ
ZIP_OK
)

1930 
ZPOS64_T
 
cur_pos_šz
 = 
	`ZTELL64
 (
zi
->
z_fefunc
, zi->
fe¡»am
);

1932 ià(
ZSEEK64


1933 (
zi
->
z_fefunc
, zi->
fe¡»am
, zi->
ci
.
pos_loÿl_h—d”
 + 14,

1934 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

1935 
”r
 = 
ZIP_ERRNO
;

1937 ià(
”r
 =ğ
ZIP_OK
)

1938 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, 
üc32
, 4);

1940 ià(
uncom´es£d_size
 >ğ0xfffffffà|| 
com´es£d_size
 >= 0xffffffff)

1942 ià(
zi
->
ci
.
pos_z64exŒašfo
 > 0)

1945 ià(
ZSEEK64


1946 (
zi
->
z_fefunc
, zi->
fe¡»am
,

1947 
zi
->
ci
.
pos_z64exŒašfo
 + 4,

1948 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

1949 
”r
 = 
ZIP_ERRNO
;

1951 ià(
”r
 =ğ
ZIP_OK
)

1952 
”r
 =

1953 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1954 
uncom´es£d_size
, 8);

1956 ià(
”r
 =ğ
ZIP_OK
)

1957 
”r
 =

1958 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1959 
com´es£d_size
, 8);

1962 
”r
 = 
ZIP_BADZIPFILE
;

1966 ià(
”r
 =ğ
ZIP_OK
)

1967 
”r
 =

1968 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1969 
com´es£d_size
, 4);

1971 ià(
”r
 =ğ
ZIP_OK
)

1972 
”r
 =

1973 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

1974 
uncom´es£d_size
, 4);

1977 ià(
ZSEEK64


1978 (
zi
->
z_fefunc
, zi->
fe¡»am
, 
cur_pos_šz
,

1979 
ZLIB_FILEFUNC_SEEK_SET
) != 0)

1980 
”r
 = 
ZIP_ERRNO
;

1983 
zi
->
numb”_’Œy
++;

1984 
zi
->
š_İ’ed_fe_šz
 = 0;

1986  
”r
;

1987 
	}
}

1989 
ZEXPORT


1990 
	$zClo£FeInZ
 (
zFe
 
fe
)

1992  
	`zClo£FeInZRaw
 (
fe
, 0, 0);

1993 
	}
}

1996 
	$Wr™e_Z64EndOfC’Œ®DœeùÜyLoÿtÜ
 (
z64_š‹º®
 * 
zi
,

1997 
ZPOS64_T
 
z64eocd_pos_šz
)

1999 
”r
 = 
ZIP_OK
;

2000 
ZPOS64_T
 
pos
 = 
z64eocd_pos_šz
 - 
zi
->
add_pos™iÚ_wh’_wr™tšg_off£t
;

2002 
”r
 =

2003 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

2004 (
uLÚg
è
ZIP64ENDLOCHEADERMAGIC
, 4);

2007 ià(
”r
 =ğ
ZIP_OK
)

2008 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 0, 4);

2011 ià(
”r
 =ğ
ZIP_OK
)

2012 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, 
pos
, 8);

2015 ià(
”r
 =ğ
ZIP_OK
)

2016 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 1, 4);

2018  
”r
;

2019 
	}
}

2022 
	$Wr™e_Z64EndOfC’Œ®DœeùÜyRecÜd
 (
z64_š‹º®
 * 
zi
,

2023 
uLÚg
 
size_ûÁ¿ldœ
,

2024 
ZPOS64_T
 
ûÁ¿ldœ_pos_šz
)

2026 
”r
 = 
ZIP_OK
;

2028 
uLÚg
 
Z64D©aSize
 = 44;

2030 
”r
 =

2031 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

2032 (
uLÚg
è
ZIP64ENDHEADERMAGIC
, 4);

2034 ià(
”r
 =ğ
ZIP_OK
)

2035 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
ZPOS64_T
è
Z64D©aSize
, 8);

2037 ià(
”r
 =ğ
ZIP_OK
)

2038 
”r
 =

2039 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 45, 2);

2041 ià(
”r
 =ğ
ZIP_OK
)

2042 
”r
 =

2043 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 45, 2);

2045 ià(
”r
 =ğ
ZIP_OK
)

2046 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 0, 4);

2048 ià(
”r
 =ğ
ZIP_OK
)

2049 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 0, 4);

2051 ià(
”r
 =ğ
ZIP_OK
)

2052 
”r
 =

2053 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, zi->
numb”_’Œy
,

2056 ià(
”r
 =ğ
ZIP_OK
)

2057 
”r
 =

2058 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, zi->
numb”_’Œy
,

2061 ià(
”r
 =ğ
ZIP_OK
)

2062 
”r
 =

2063 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

2064 (
ZPOS64_T
è
size_ûÁ¿ldœ
, 8);

2066 ià(
”r
 =ğ
ZIP_OK
)

2068 
ZPOS64_T
 
pos
 =

2069 
ûÁ¿ldœ_pos_šz
 - 
zi
->
add_pos™iÚ_wh’_wr™tšg_off£t
;

2070 
”r
 =

2071 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
ZPOS64_T
è
pos
,

2074  
”r
;

2075 
	}
}

2078 
	$Wr™e_EndOfC’Œ®DœeùÜyRecÜd
 (
z64_š‹º®
 * 
zi
, 
uLÚg
 
size_ûÁ¿ldœ
,

2079 
ZPOS64_T
 
ûÁ¿ldœ_pos_šz
)

2081 
”r
 = 
ZIP_OK
;

2084 
”r
 =

2085 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

2086 (
uLÚg
è
ENDHEADERMAGIC
, 4);

2088 ià(
”r
 =ğ
ZIP_OK
)

2089 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 0, 2);

2091 ià(
”r
 =ğ
ZIP_OK
)

2092 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 0, 2);

2094 ià(
”r
 =ğ
ZIP_OK
)

2097 ià(
zi
->
numb”_’Œy
 >= 0xFFFF)

2098 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 0xffff, 2);

2100 
”r
 =

2101 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

2102 (
uLÚg
è
zi
->
numb”_’Œy
, 2);

2106 ià(
”r
 =ğ
ZIP_OK
)

2108 ià(
zi
->
numb”_’Œy
 >= 0xFFFF)

2109 
”r
 = 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
, (
uLÚg
) 0xffff, 2);

2111 
”r
 =

2112 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

2113 (
uLÚg
è
zi
->
numb”_’Œy
, 2);

2116 ià(
”r
 =ğ
ZIP_OK
)

2117 
”r
 =

2118 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

2119 (
uLÚg
è
size_ûÁ¿ldœ
, 4);

2121 ià(
”r
 =ğ
ZIP_OK
)

2123 
ZPOS64_T
 
pos
 =

2124 
ûÁ¿ldœ_pos_šz
 - 
zi
->
add_pos™iÚ_wh’_wr™tšg_off£t
;

2125 ià(
pos
 >= 0xffffffff)

2127 
”r
 =

2128 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

2129 (
uLÚg
) 0xffffffff, 4);

2132 
”r
 =

2133 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

2134 (
uLÚg
è(
ûÁ¿ldœ_pos_šz
 -

2135 
zi
->

2136 
add_pos™iÚ_wh’_wr™tšg_off£t
),

2140  
”r
;

2141 
	}
}

2144 
	$Wr™e_Glob®Comm’t
 (
z64_š‹º®
 * 
zi
, cÚ¡ *
glob®_comm’t
)

2146 
”r
 = 
ZIP_OK
;

2147 
uIÁ
 
size_glob®_comm’t
 = 0;

2149 ià(
glob®_comm’t
 !ğ
NULL
)

2150 
size_glob®_comm’t
 = (
uIÁ
è
	`¡¾’
 (
glob®_comm’t
);

2152 
”r
 =

2153 
	`z64loÿl_putV®ue
 (&
zi
->
z_fefunc
, zi->
fe¡»am
,

2154 (
uLÚg
è
size_glob®_comm’t
, 2);

2156 ià(
”r
 =ğ
ZIP_OK
 && 
size_glob®_comm’t
 > 0)

2158 ià(
ZWRITE64


2159 (
zi
->
z_fefunc
, zi->
fe¡»am
, 
glob®_comm’t
,

2160 
size_glob®_comm’t
) != size_global_comment)

2161 
”r
 = 
ZIP_ERRNO
;

2163  
”r
;

2164 
	}
}

2166 
ZEXPORT


2167 
	$zClo£
 (
zFe
 
fe
, cÚ¡ *
glob®_comm’t
)

2169 
z64_š‹º®
 *
zi
;

2170 
”r
 = 0;

2171 
uLÚg
 
size_ûÁ¿ldœ
 = 0;

2172 
ZPOS64_T
 
ûÁ¿ldœ_pos_šz
;

2173 
ZPOS64_T
 
pos
;

2175 ià(
fe
 =ğ
NULL
)

2176  
ZIP_PARAMERROR
;

2178 
zi
 = (
z64_š‹º®
 *è
fe
;

2180 ià(
zi
->
š_İ’ed_fe_šz
 == 1)

2182 
”r
 = 
	`zClo£FeInZ
 (
fe
);

2185 #iâdeà
NO_ADDFILEINEXISTINGZIP


2186 ià(
glob®_comm’t
 =ğ
NULL
)

2187 
glob®_comm’t
 = 
zi
->
glob®comm’t
;

2190 
ûÁ¿ldœ_pos_šz
 = 
	`ZTELL64
 (
zi
->
z_fefunc
, zi->
fe¡»am
);

2192 ià(
”r
 =ğ
ZIP_OK
)

2194 
lškedli¡_d©ablock_š‹º®
 *
ldi
 = 
zi
->
ûÁ¿l_dœ
.
fœ¡_block
;

2195 
ldi
 !ğ
NULL
)

2197 ià((
”r
 =ğ
ZIP_OK
è&& (
ldi
->
fËd_š_this_block
 > 0))

2199 ià(
ZWRITE64


2200 (
zi
->
z_fefunc
, zi->
fe¡»am
, 
ldi
->
d©a
,

2201 
ldi
->
fËd_š_this_block
) !=†di->filled_in_this_block)

2202 
”r
 = 
ZIP_ERRNO
;

2205 
size_ûÁ¿ldœ
 +ğ
ldi
->
fËd_š_this_block
;

2206 
ldi
 =†di->
Ãxt_d©ablock
;

2209 
	`ä“_lškedli¡
 (&(
zi
->
ûÁ¿l_dœ
));

2211 
pos
 = 
ûÁ¿ldœ_pos_šz
 - 
zi
->
add_pos™iÚ_wh’_wr™tšg_off£t
;

2212 ià(
pos
 >ğ0xfffffffà|| 
zi
->
numb”_’Œy
 > 0xFFFF)

2214 
ZPOS64_T
 
Z64EOCDpos
 = 
	`ZTELL64
 (
zi
->
z_fefunc
, zi->
fe¡»am
);

2215 
	`Wr™e_Z64EndOfC’Œ®DœeùÜyRecÜd
 (
zi
, 
size_ûÁ¿ldœ
,

2216 
ûÁ¿ldœ_pos_šz
);

2218 
	`Wr™e_Z64EndOfC’Œ®DœeùÜyLoÿtÜ
 (
zi
, 
Z64EOCDpos
);

2221 ià(
”r
 =ğ
ZIP_OK
)

2222 
”r
 =

2223 
	`Wr™e_EndOfC’Œ®DœeùÜyRecÜd
 (
zi
, 
size_ûÁ¿ldœ
,

2224 
ûÁ¿ldœ_pos_šz
);

2226 ià(
”r
 =ğ
ZIP_OK
)

2227 
”r
 = 
	`Wr™e_Glob®Comm’t
 (
zi
, 
glob®_comm’t
);

2229 ià(
	`ZCLOSE64
 (
zi
->
z_fefunc
, zi->
fe¡»am
) != 0)

2230 ià(
”r
 =ğ
ZIP_OK
)

2231 
”r
 = 
ZIP_ERRNO
;

2233 #iâdeà
NO_ADDFILEINEXISTINGZIP


2234 
	`TRYFREE
 (
zi
->
glob®comm’t
);

2236 
	`TRYFREE
 (
zi
);

2238  
”r
;

2239 
	}
}

2241 
ZEXPORT


2242 
	$zRemoveExŒaInfoBlock
 (*
pD©a
, *
d©aL’
, 
sH—d”
)

2244 *
p
 = 
pD©a
;

2245 
size
 = 0;

2246 *
pNewH—d”
;

2247 *
pTmp
;

2248 
h—d”
;

2249 
d©aSize
;

2251 
»tV®
 = 
ZIP_OK
;

2253 ià(
pD©a
 =ğ
NULL
 || *
d©aL’
 < 4)

2254  
ZIP_PARAMERROR
;

2256 
pNewH—d”
 = (*è
	`ALLOC
 (*
d©aL’
);

2257 
pTmp
 = 
pNewH—d”
;

2259 
p
 < (
pD©a
 + *
d©aL’
))

2261 
h—d”
 = *(*è
p
;

2262 
d©aSize
 = *(((*è
p
) + 1);

2264 ià(
h—d”
 =ğ
sH—d”
)

2266 
p
 +ğ
d©aSize
 + 4;

2271 
	`memıy
 (
pTmp
, 
p
, 
d©aSize
 + 4);

2272 
p
 +ğ
d©aSize
 + 4;

2273 
size
 +ğ
d©aSize
 + 4;

2278 ià(
size
 < *
d©aL’
)

2281 
	`mem£t
 (
pD©a
, 0, *
d©aL’
);

2284 ià(
size
 > 0)

2285 
	`memıy
 (
pD©a
, 
pNewH—d”
, 
size
);

2288 *
d©aL’
 = 
size
;

2290 
»tV®
 = 
ZIP_OK
;

2293 
»tV®
 = 
ZIP_ERRNO
;

2295 
	`TRYFREE
 (
pNewH—d”
);

2297  
»tV®
;

2298 
	}
}

	@contrib/minizip/zip.h

40 #iâdeà
_z12_H


41 
	#_z12_H


	)

43 #ifdeà
__ılu¥lus


49 #iâdeà
_ZLIB_H


50 
	~"zlib.h
"

53 #iâdeà
_ZLIBIOAPI_H


54 
	~"ißpi.h
"

57 #ifdeà
HAVE_BZIP2


58 
	~"bzlib.h
"

61 
	#Z_BZIP2ED
 12

	)

63 #ià
defšed
(
STRICTZIP
è|| defšed(
STRICTZIPUNZIP
)

66 
	sTagzFe__
 { 
unu£d
; } 
	tzFe__
;

67 
zFe__
 *
	tzFe
;

69 
voidp
 
	tzFe
;

72 
	#ZIP_OK
 (0)

	)

73 
	#ZIP_EOF
 (0)

	)

74 
	#ZIP_ERRNO
 (
Z_ERRNO
)

	)

75 
	#ZIP_PARAMERROR
 (-102)

	)

76 
	#ZIP_BADZIPFILE
 (-103)

	)

77 
	#ZIP_INTERNALERROR
 (-104)

	)

79 #iâdeà
DEF_MEM_LEVEL


80 #ià
MAX_MEM_LEVEL
 >= 8

81 
	#DEF_MEM_LEVEL
 8

	)

83 
	#DEF_MEM_LEVEL
 
MAX_MEM_LEVEL


	)

89 
	stm_z_s


91 
uIÁ
 
tm_£c
;

92 
uIÁ
 
tm_mš
;

93 
uIÁ
 
tm_hour
;

94 
uIÁ
 
tm_mday
;

95 
uIÁ
 
tm_mÚ
;

96 
uIÁ
 
tm_y—r
;

97 } 
	ttm_z
;

101 
tm_z
 
tmz_d©e
;

102 
uLÚg
 
dosD©e
;

105 
uLÚg
 
š‹º®_ç
;

106 
uLÚg
 
ex‹º®_ç
;

107 } 
	tz_fešfo
;

109 cÚ¡ * 
	tzch¬pc
;

112 
	#APPEND_STATUS_CREATE
 (0)

	)

113 
	#APPEND_STATUS_CREATEAFTER
 (1)

	)

114 
	#APPEND_STATUS_ADDINZIP
 (2)

	)

116 
zFe
 
ZEXPORT
 
zO³n
 
OF
((cÚ¡ *
·thÇme
, 
­³nd
));

117 
zFe
 
ZEXPORT
 
zO³n64
 
OF
((cÚ¡ *
·thÇme
, 
­³nd
));

137 
zFe
 
ZEXPORT
 
zO³n2
 
OF
((cÚ¡ *
·thÇme
,

138 
­³nd
,

139 
zch¬pc
* 
glob®comm’t
,

140 
zlib_fefunc_def
* 
pzlib_fefunc_def
));

142 
zFe
 
ZEXPORT
 
zO³n2_64
 
OF
((cÚ¡ *
·thÇme
,

143 
­³nd
,

144 
zch¬pc
* 
glob®comm’t
,

145 
zlib_fefunc64_def
* 
pzlib_fefunc_def
));

147 
ZEXPORT
 
zO³nNewFeInZ
 
OF
((
zFe
 
fe
,

148 cÚ¡ * 
f’ame
,

149 cÚ¡ 
z_fešfo
* 
zfi
,

150 cÚ¡ * 
exŒaf›ld_loÿl
,

151 
uIÁ
 
size_exŒaf›ld_loÿl
,

152 cÚ¡ * 
exŒaf›ld_glob®
,

153 
uIÁ
 
size_exŒaf›ld_glob®
,

154 cÚ¡ * 
comm’t
,

155 
m‘hod
,

156 
Ëv–
));

158 
ZEXPORT
 
zO³nNewFeInZ64
 
OF
((
zFe
 
fe
,

159 cÚ¡ * 
f’ame
,

160 cÚ¡ 
z_fešfo
* 
zfi
,

161 cÚ¡ * 
exŒaf›ld_loÿl
,

162 
uIÁ
 
size_exŒaf›ld_loÿl
,

163 cÚ¡ * 
exŒaf›ld_glob®
,

164 
uIÁ
 
size_exŒaf›ld_glob®
,

165 cÚ¡ * 
comm’t
,

166 
m‘hod
,

167 
Ëv–
,

168 
z64
));

187 
ZEXPORT
 
zO³nNewFeInZ2
 
OF
((
zFe
 
fe
,

188 cÚ¡ * 
f’ame
,

189 cÚ¡ 
z_fešfo
* 
zfi
,

190 cÚ¡ * 
exŒaf›ld_loÿl
,

191 
uIÁ
 
size_exŒaf›ld_loÿl
,

192 cÚ¡ * 
exŒaf›ld_glob®
,

193 
uIÁ
 
size_exŒaf›ld_glob®
,

194 cÚ¡ * 
comm’t
,

195 
m‘hod
,

196 
Ëv–
,

197 
¿w
));

200 
ZEXPORT
 
zO³nNewFeInZ2_64
 
OF
((
zFe
 
fe
,

201 cÚ¡ * 
f’ame
,

202 cÚ¡ 
z_fešfo
* 
zfi
,

203 cÚ¡ * 
exŒaf›ld_loÿl
,

204 
uIÁ
 
size_exŒaf›ld_loÿl
,

205 cÚ¡ * 
exŒaf›ld_glob®
,

206 
uIÁ
 
size_exŒaf›ld_glob®
,

207 cÚ¡ * 
comm’t
,

208 
m‘hod
,

209 
Ëv–
,

210 
¿w
,

211 
z64
));

216 
ZEXPORT
 
zO³nNewFeInZ3
 
OF
((
zFe
 
fe
,

217 cÚ¡ * 
f’ame
,

218 cÚ¡ 
z_fešfo
* 
zfi
,

219 cÚ¡ * 
exŒaf›ld_loÿl
,

220 
uIÁ
 
size_exŒaf›ld_loÿl
,

221 cÚ¡ * 
exŒaf›ld_glob®
,

222 
uIÁ
 
size_exŒaf›ld_glob®
,

223 cÚ¡ * 
comm’t
,

224 
m‘hod
,

225 
Ëv–
,

226 
¿w
,

227 
wšdowB™s
,

228 
memLev–
,

229 
¡¿‹gy
,

230 cÚ¡ * 
·sswÜd
,

231 
uLÚg
 
ücFÜCry±šg
));

233 
ZEXPORT
 
zO³nNewFeInZ3_64
 
OF
((
zFe
 
fe
,

234 cÚ¡ * 
f’ame
,

235 cÚ¡ 
z_fešfo
* 
zfi
,

236 cÚ¡ * 
exŒaf›ld_loÿl
,

237 
uIÁ
 
size_exŒaf›ld_loÿl
,

238 cÚ¡ * 
exŒaf›ld_glob®
,

239 
uIÁ
 
size_exŒaf›ld_glob®
,

240 cÚ¡ * 
comm’t
,

241 
m‘hod
,

242 
Ëv–
,

243 
¿w
,

244 
wšdowB™s
,

245 
memLev–
,

246 
¡¿‹gy
,

247 cÚ¡ * 
·sswÜd
,

248 
uLÚg
 
ücFÜCry±šg
,

249 
z64


259 
ZEXPORT
 
zO³nNewFeInZ4
 
OF
((
zFe
 
fe
,

260 cÚ¡ * 
f’ame
,

261 cÚ¡ 
z_fešfo
* 
zfi
,

262 cÚ¡ * 
exŒaf›ld_loÿl
,

263 
uIÁ
 
size_exŒaf›ld_loÿl
,

264 cÚ¡ * 
exŒaf›ld_glob®
,

265 
uIÁ
 
size_exŒaf›ld_glob®
,

266 cÚ¡ * 
comm’t
,

267 
m‘hod
,

268 
Ëv–
,

269 
¿w
,

270 
wšdowB™s
,

271 
memLev–
,

272 
¡¿‹gy
,

273 cÚ¡ * 
·sswÜd
,

274 
uLÚg
 
ücFÜCry±šg
,

275 
uLÚg
 
v”siÚMadeBy
,

276 
uLÚg
 
æagBa£


280 
ZEXPORT
 
zO³nNewFeInZ4_64
 
OF
((
zFe
 
fe
,

281 cÚ¡ * 
f’ame
,

282 cÚ¡ 
z_fešfo
* 
zfi
,

283 cÚ¡ * 
exŒaf›ld_loÿl
,

284 
uIÁ
 
size_exŒaf›ld_loÿl
,

285 cÚ¡ * 
exŒaf›ld_glob®
,

286 
uIÁ
 
size_exŒaf›ld_glob®
,

287 cÚ¡ * 
comm’t
,

288 
m‘hod
,

289 
Ëv–
,

290 
¿w
,

291 
wšdowB™s
,

292 
memLev–
,

293 
¡¿‹gy
,

294 cÚ¡ * 
·sswÜd
,

295 
uLÚg
 
ücFÜCry±šg
,

296 
uLÚg
 
v”siÚMadeBy
,

297 
uLÚg
 
æagBa£
,

298 
z64


307 
ZEXPORT
 
zWr™eInFeInZ
 
OF
((
zFe
 
fe
,

308 cÚ¡ * 
buf
,

309 
Ën
));

314 
ZEXPORT
 
zClo£FeInZ
 
OF
((
zFe
 
fe
));

319 
ZEXPORT
 
zClo£FeInZRaw
 
OF
((
zFe
 
fe
,

320 
uLÚg
 
uncom´es£d_size
,

321 
uLÚg
 
üc32
));

323 
ZEXPORT
 
zClo£FeInZRaw64
 
OF
((
zFe
 
fe
,

324 
ZPOS64_T
 
uncom´es£d_size
,

325 
uLÚg
 
üc32
));

333 
ZEXPORT
 
zClo£
 
OF
((
zFe
 
fe
,

334 cÚ¡ * 
glob®_comm’t
));

340 
ZEXPORT
 
zRemoveExŒaInfoBlock
 
OF
((* 
pD©a
, * 
d©aL’
, 
sH—d”
));

358 #ifdeà
__ılu¥lus


	@contrib/puff/puff.c

82 
	~<£tjmp.h
>

83 
	~"puff.h
"

85 
	#loÿl
 

	)

91 
	#MAXBITS
 15

	)

92 
	#MAXLCODES
 286

	)

93 
	#MAXDCODES
 30

	)

94 
	#MAXCODES
 (
MAXLCODES
+
MAXDCODES
è

	)

95 
	#FIXLCODES
 288

	)

98 
	s¡©e


101 *
	mout
;

102 
	mou’
;

103 
	moutút
;

106 cÚ¡ *
	mš
;

107 
	mšËn
;

108 
	mšút
;

109 
	mb™buf
;

110 
	mb™út
;

113 
jmp_buf
 
	m’v
;

127 
loÿl
 

128 
	$b™s
 (
¡©e
 *
s
, 
Ãed
)

130 
v®
;

133 
v®
 = 
s
->
b™buf
;

134 
s
->
b™út
 < 
Ãed
)

136 ià(
s
->
šút
 =ğs->
šËn
)

137 
	`lÚgjmp
 (
s
->
’v
, 1);

138 
v®
 |ğ(è(
s
->
š
[s->
šút
++]è<< s->
b™út
;

139 
s
->
b™út
 += 8;

143 
s
->
b™buf
 = (è(
v®
 >> 
Ãed
);

144 
s
->
b™út
 -ğ
Ãed
;

147  (è(
v®
 & ((1L << 
Ãed
) - 1));

148 
	}
}

167 
loÿl
 

168 
	$¡Üed
 (
¡©e
 *
s
)

170 
Ën
;

173 
s
->
b™buf
 = 0;

174 
s
->
b™út
 = 0;

177 ià(
s
->
šút
 + 4 > s->
šËn
)

179 
Ën
 = 
s
->
š
[s->
šút
++];

180 
Ën
 |ğ
s
->
š
[s->
šút
++] << 8;

181 ià(
s
->
š
[s->
šút
++] !ğ(~
Ën
 & 0xff) ||

182 
s
->
š
[s->
šút
++] !ğ((~
Ën
 >> 8) & 0xff))

186 ià(
s
->
šút
 + 
Ën
 > s->
šËn
)

188 ià(
s
->
out
 !ğ
NIL
)

190 ià(
s
->
outút
 + 
Ën
 > s->
ou’
)

192 
Ën
--)

193 
s
->
out
[s->
outút
++] = s->
š
[s->
šút
++];

197 
s
->
outút
 +ğ
Ën
;

198 
s
->
šút
 +ğ
Ën
;

203 
	}
}

212 
	shuffmª


214 *
	mcouÁ
;

215 *
	msymbŞ
;

241 #ifdeà
SLOW


242 
loÿl
 

243 
	$decode
 (
¡©e
 *
s
, cÚ¡ 
huffmª
 *
h
)

245 
Ën
;

246 
code
;

247 
fœ¡
;

248 
couÁ
;

249 
šdex
;

251 
code
 = 
fœ¡
 = 
šdex
 = 0;

252 
Ën
 = 1;†’ <ğ
MAXBITS
;†en++)

254 
code
 |ğ
	`b™s
 (
s
, 1);

255 
couÁ
 = 
h
->couÁ[
Ën
];

256 ià(
code
 - 
couÁ
 < 
fœ¡
)

257  
h
->
symbŞ
[
šdex
 + (
code
 - 
fœ¡
)];

258 
šdex
 +ğ
couÁ
;

259 
fœ¡
 +ğ
couÁ
;

260 
fœ¡
 <<= 1;

261 
code
 <<= 1;

264 
	}
}

272 
loÿl
 

273 
	$decode
 (
¡©e
 *
s
, cÚ¡ 
huffmª
 *
h
)

275 
Ën
;

276 
code
;

277 
fœ¡
;

278 
couÁ
;

279 
šdex
;

280 
b™buf
;

281 
Ëá
;

282 *
Ãxt
;

284 
b™buf
 = 
s
->bitbuf;

285 
Ëá
 = 
s
->
b™út
;

286 
code
 = 
fœ¡
 = 
šdex
 = 0;

287 
Ën
 = 1;

288 
Ãxt
 = 
h
->
couÁ
 + 1;

291 
Ëá
--)

293 
code
 |ğ
b™buf
 & 1;

294 
b™buf
 >>= 1;

295 
couÁ
 = *
Ãxt
++;

296 ià(
code
 - 
couÁ
 < 
fœ¡
)

298 
s
->
b™buf
 = bitbuf;

299 
s
->
b™út
 = (s->b™úˆ- 
Ën
) & 7;

300  
h
->
symbŞ
[
šdex
 + (
code
 - 
fœ¡
)];

302 
šdex
 +ğ
couÁ
;

303 
fœ¡
 +ğ
couÁ
;

304 
fœ¡
 <<= 1;

305 
code
 <<= 1;

306 
Ën
++;

308 
Ëá
 = (
MAXBITS
 + 1è- 
Ën
;

309 ià(
Ëá
 == 0)

311 ià(
s
->
šút
 =ğs->
šËn
)

312 
	`lÚgjmp
 (
s
->
’v
, 1);

313 
b™buf
 = 
s
->
š
[s->
šút
++];

314 ià(
Ëá
 > 8)

315 
Ëá
 = 8;

318 
	}
}

353 
loÿl
 

354 
	$cÚ¡ruù
 (
huffmª
 *
h
, cÚ¡ *
Ëngth
, 
n
)

356 
symbŞ
;

357 
Ën
;

358 
Ëá
;

359 
offs
[
MAXBITS
 + 1];

362 
Ën
 = 0;†’ <ğ
MAXBITS
;†en++)

363 
h
->
couÁ
[
Ën
] = 0;

364 
symbŞ
 = 0; symbŞ < 
n
; symbol++)

365 (
h
->
couÁ
[
Ëngth
[
symbŞ
]])++;

366 ià(
h
->
couÁ
[0] =ğ
n
)

370 
Ëá
 = 1;

371 
Ën
 = 1;†’ <ğ
MAXBITS
;†en++)

373 
Ëá
 <<= 1;

374 
Ëá
 -ğ
h
->
couÁ
[
Ën
];

375 ià(
Ëá
 < 0)

376  
Ëá
;

380 
offs
[1] = 0;

381 
Ën
 = 1;†’ < 
MAXBITS
;†en++)

382 
offs
[
Ën
 + 1] = offs[Ën] + 
h
->
couÁ
[len];

388 
symbŞ
 = 0; symbŞ < 
n
; symbol++)

389 ià(
Ëngth
[
symbŞ
] != 0)

390 
h
->
symbŞ
[
offs
[
Ëngth
[symbol]]++] = symbol;

393  
Ëá
;

394 
	}
}

451 
loÿl
 

452 
	$codes
 (
¡©e
 *
s
,

453 cÚ¡ 
huffmª
 *
Ëncode
, cÚ¡ huffmª *
di¡code
)

455 
symbŞ
;

456 
Ën
;

457 
di¡
;

458 cÚ¡ 
Ëns
[29] = {

462 cÚ¡ 
Ëxt
[29] = {

466 cÚ¡ 
di¡s
[30] = {

471 cÚ¡ 
dext
[30] = {

480 
symbŞ
 = 
	`decode
 (
s
, 
Ëncode
);

481 ià(
symbŞ
 < 0)

482  
symbŞ
;

483 ià(
symbŞ
 < 256)

486 ià(
s
->
out
 !ğ
NIL
)

488 ià(
s
->
outút
 =ğs->
ou’
)

490 
s
->
out
[s->
outút
] = 
symbŞ
;

492 
s
->
outút
++;

494 ià(
symbŞ
 > 256)

497 
symbŞ
 -= 257;

498 ià(
symbŞ
 >= 29)

500 
Ën
 = 
Ëns
[
symbŞ
] + 
	`b™s
 (
s
, 
Ëxt
[symbol]);

503 
symbŞ
 = 
	`decode
 (
s
, 
di¡code
);

504 ià(
symbŞ
 < 0)

505  
symbŞ
;

506 
di¡
 = 
di¡s
[
symbŞ
] + 
	`b™s
 (
s
, 
dext
[symbol]);

507 #iâdeà
INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR


508 ià(
di¡
 > 
s
->
outút
)

513 ià(
s
->
out
 !ğ
NIL
)

515 ià(
s
->
outút
 + 
Ën
 > s->
ou’
)

517 
Ën
--)

519 
s
->
out
[s->
outút
] =

520 #ifdeà
INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR


521 
di¡
 > 
s
->
outút
 ? 0 :

523 
s
->
out
[s->
outút
 - 
di¡
];

524 
s
->
outút
++;

528 
s
->
outút
 +ğ
Ën
;

531 
symbŞ
 != 256);

535 
	}
}

561 
loÿl
 

562 
	$fixed
 (
¡©e
 *
s
)

564 
vœgš
 = 1;

565 
Ënút
[
MAXBITS
 + 1], 
Ënsym
[
FIXLCODES
];

566 
di¡út
[
MAXBITS
 + 1], 
di¡sym
[
MAXDCODES
];

567 
huffmª
 
Ëncode
, 
di¡code
;

570 ià(
vœgš
)

572 
symbŞ
;

573 
Ëngths
[
FIXLCODES
];

576 
Ëncode
.
couÁ
 = 
Ënút
;

577 
Ëncode
.
symbŞ
 = 
Ënsym
;

578 
di¡code
.
couÁ
 = 
di¡út
;

579 
di¡code
.
symbŞ
 = 
di¡sym
;

582 
symbŞ
 = 0; symbol < 144; symbol++)

583 
Ëngths
[
symbŞ
] = 8;

584 ; 
symbŞ
 < 256; symbol++)

585 
Ëngths
[
symbŞ
] = 9;

586 ; 
symbŞ
 < 280; symbol++)

587 
Ëngths
[
symbŞ
] = 7;

588 ; 
symbŞ
 < 
FIXLCODES
; symbol++)

589 
Ëngths
[
symbŞ
] = 8;

590 
	`cÚ¡ruù
 (&
Ëncode
, 
Ëngths
, 
FIXLCODES
);

593 
symbŞ
 = 0; symbŞ < 
MAXDCODES
; symbol++)

594 
Ëngths
[
symbŞ
] = 5;

595 
	`cÚ¡ruù
 (&
di¡code
, 
Ëngths
, 
MAXDCODES
);

598 
vœgš
 = 0;

602  
	`codes
 (
s
, &
Ëncode
, &
di¡code
);

603 
	}
}

692 
loÿl
 

693 
	$dyÇmic
 (
¡©e
 *
s
)

695 
Æ’
, 
ndi¡
, 
ncode
;

696 
šdex
;

697 
”r
;

698 
Ëngths
[
MAXCODES
];

699 
Ënút
[
MAXBITS
 + 1], 
Ënsym
[
MAXLCODES
];

700 
di¡út
[
MAXBITS
 + 1], 
di¡sym
[
MAXDCODES
];

701 
huffmª
 
Ëncode
, 
di¡code
;

702 cÚ¡ 
Üd”
[19] =

706 
Ëncode
.
couÁ
 = 
Ënút
;

707 
Ëncode
.
symbŞ
 = 
Ënsym
;

708 
di¡code
.
couÁ
 = 
di¡út
;

709 
di¡code
.
symbŞ
 = 
di¡sym
;

712 
Æ’
 = 
	`b™s
 (
s
, 5) + 257;

713 
ndi¡
 = 
	`b™s
 (
s
, 5) + 1;

714 
ncode
 = 
	`b™s
 (
s
, 4) + 4;

715 ià(
Æ’
 > 
MAXLCODES
 || 
ndi¡
 > 
MAXDCODES
)

719 
šdex
 = 0; index < 
ncode
; index++)

720 
Ëngths
[
Üd”
[
šdex
]] = 
	`b™s
 (
s
, 3);

721 ; 
šdex
 < 19; index++)

722 
Ëngths
[
Üd”
[
šdex
]] = 0;

725 
”r
 = 
	`cÚ¡ruù
 (&
Ëncode
, 
Ëngths
, 19);

726 ià(
”r
 != 0)

730 
šdex
 = 0;

731 
šdex
 < 
Æ’
 + 
ndi¡
)

733 
symbŞ
;

734 
Ën
;

736 
symbŞ
 = 
	`decode
 (
s
, &
Ëncode
);

737 ià(
symbŞ
 < 0)

738  
symbŞ
;

739 ià(
symbŞ
 < 16)

740 
Ëngths
[
šdex
++] = 
symbŞ
;

743 
Ën
 = 0;

744 ià(
symbŞ
 == 16)

746 ià(
šdex
 == 0)

748 
Ën
 = 
Ëngths
[
šdex
 - 1];

749 
symbŞ
 = 3 + 
	`b™s
 (
s
, 2);

751 ià(
symbŞ
 == 17)

752 
symbŞ
 = 3 + 
	`b™s
 (
s
, 3);

754 
symbŞ
 = 11 + 
	`b™s
 (
s
, 7);

755 ià(
šdex
 + 
symbŞ
 > 
Æ’
 + 
ndi¡
)

757 
symbŞ
--)

758 
Ëngths
[
šdex
++] = 
Ën
;

763 ià(
Ëngths
[256] == 0)

767 
”r
 = 
	`cÚ¡ruù
 (&
Ëncode
, 
Ëngths
, 
Æ’
);

768 ià(
”r
 && (”¸< 0 || 
Æ’
 !ğ
Ëncode
.
couÁ
[0] +†encode.count[1]))

772 
”r
 = 
	`cÚ¡ruù
 (&
di¡code
, 
Ëngths
 + 
Æ’
, 
ndi¡
);

773 ià(
”r
 && (”¸< 0 || 
ndi¡
 !ğ
di¡code
.
couÁ
[0] + distcode.count[1]))

777  
	`codes
 (
s
, &
Ëncode
, &
di¡code
);

778 
	}
}

825 
	$puff
 (*
de¡
,

826 *
de¡Ën
,

827 cÚ¡ *
sourû
,

828 *
sourûËn
)

830 
¡©e
 
s
;

831 
Ï¡
, 
ty³
;

832 
”r
;

835 
s
.
out
 = 
de¡
;

836 
s
.
ou’
 = *
de¡Ën
;

837 
s
.
outút
 = 0;

840 
s
.
š
 = 
sourû
;

841 
s
.
šËn
 = *
sourûËn
;

842 
s
.
šút
 = 0;

843 
s
.
b™buf
 = 0;

844 
s
.
b™út
 = 0;

847 ià(
	`£tjmp
 (
s
.
’v
) != 0)

848 
”r
 = 2;

854 
Ï¡
 = 
	`b™s
 (&
s
, 1);

855 
ty³
 = 
	`b™s
 (&
s
, 2);

856 
”r
 = 
ty³
 =ğ0 ? 
	`¡Üed
 (&
s
è: (ty³ =ğ1 ? 
	`fixed
 (&sè: (ty³ =ğ2 ? 
	`dyÇmic
 (&s) : -1));

857 ià(
”r
 != 0)

860 !
Ï¡
);

864 ià(
”r
 <= 0)

866 *
de¡Ën
 = 
s
.
outút
;

867 *
sourûËn
 = 
s
.
šút
;

869  
”r
;

870 
	}
}

	@contrib/puff/puff.h

28 #iâdeà
NIL


29 
	#NIL
 ((*)0è

	)

32 
puff
(*
de¡
,

33 *
de¡Ën
,

34 cÚ¡ *
sourû
,

35 *
sourûËn
);

	@contrib/puff/pufftest.c

19 
	~<¡dio.h
>

20 
	~<¡dlib.h
>

21 
	~"puff.h
"

23 #ià
defšed
(
MSDOS
è|| defšed(
OS2
è|| defšed(
WIN32
è|| defšed(
__CYGWIN__
)

24 
	~<fú.h
>

25 
	~<io.h
>

26 
	#SET_BINARY_MODE
(
fe
è
	`£tmode
(
	`f’o
(fe), 
O_BINARY
)

	)

28 
	#SET_BINARY_MODE
(
fe
)

	)

31 
	#loÿl
 

	)

37 
loÿl
 
size_t


38 
	$bythœds
 (
size_t
 
size
)

40 
n
;

41 
size_t
 
m
;

43 
m
 = 
size
;

44 
n
 = 0; 
m
;‚++)

45 
m
 >>= 1;

46 ià(
n
 < 3)

47  
size
 + 1;

48 
n
 -= 3;

49 
m
 = 
size
 >> 
n
;

50 
m
 += m == 6 ? 2 : 1;

51 
m
 <<ğ
n
;

52  
m
 > 
size
 ? m : (
size_t
) (-1);

53 
	}
}

61 
loÿl
 *

62 
	$lßd
 (cÚ¡ *
Çme
, 
size_t
 * 
Ën
)

64 
size_t
 
size
;

65 *
buf
, *
sw­
;

66 
FILE
 *
š
;

68 *
Ën
 = 0;

69 
buf
 = 
	`m®loc
 (
size
 = 4096);

70 ià(
buf
 =ğ
NULL
)

71  
NULL
;

72 
š
 = 
Çme
 =ğ
NULL
 ? 
¡dš
 : 
	`fİ’
 (name, "rb");

73 ià(
š
 !ğ
NULL
)

77 *
Ën
 +ğ
	`ä—d
 ((*è
buf
 + *Ën, 1, 
size
 - *Ën, 
š
);

78 ià(*
Ën
 < 
size
)

80 
size
 = 
	`bythœds
 (size);

81 ià(
size
 =ğ*
Ën
 || (
sw­
 = 
	`»®loc
 (
buf
, size)è=ğ
NULL
)

83 
	`ä“
 (
buf
);

84 
buf
 = 
NULL
;

87 
buf
 = 
sw­
;

89 
	`fşo£
 (
š
);

91  
buf
;

92 
	}
}

95 
	$maš
 (
¬gc
, **
¬gv
)

97 
»t
, 
put
 = 0, 
ç
 = 0;

98 
sk
 = 0;

99 *
¬g
, *
Çme
 = 
NULL
;

100 *
sourû
 = 
NULL
, *
de¡
;

101 
size_t
 
Ën
 = 0;

102 
sourûËn
, 
de¡Ën
;

105 
¬g
 = *++
¬gv
, --
¬gc
)

106 ià(
¬g
[0] == '-')

108 ià(
¬g
[1] == 'w' &&‡rg[2] == 0)

109 
put
 = 1;

110 ià(
¬g
[1] == 'f' &&‡rg[2] == 0)

111 
ç
 = 1, 
put
 = 1;

112 ià(
¬g
[1] >= '0' &&‡rg[1] <= '9')

113 
sk
 = (è
	`©oi
 (
¬g
 + 1);

116 
	`årštf
 (
¡d”r
, "šv®id o±iÚ %s\n", 
¬g
);

120 ià(
Çme
 !ğ
NULL
)

122 
	`årštf
 (
¡d”r
, "only one file‚ame‡llowed\n");

126 
Çme
 = 
¬g
;

127 
sourû
 = 
	`lßd
 (
Çme
, &
Ën
);

128 ià(
sourû
 =ğ
NULL
)

130 
	`årštf
 (
¡d”r
, "memory‡llocation failure\n");

133 ià(
Ën
 == 0)

135 
	`årštf
 (
¡d”r
, "could‚ot„ead %s, or it wasƒmpty\n",

136 
Çme
 =ğ
NULL
 ? "<stdin>" :‚ame);

137 
	`ä“
 (
sourû
);

140 ià(
sk
 >ğ
Ën
)

142 
	`årštf
 (
¡d”r
, "sk„eque¡ oà%d†—ve nØšput\n", 
sk
);

143 
	`ä“
 (
sourû
);

148 
Ën
 -ğ
sk
;

149 
sourûËn
 = (è
Ën
;

150 
»t
 = 
	`puff
 (
NIL
, &
de¡Ën
, 
sourû
 + 
sk
, &
sourûËn
);

151 ià(
»t
)

152 
	`årštf
 (
¡d”r
, "puff(èçed w™h„‘uº cod%d\n", 
»t
);

155 
	`årštf
 (
¡d”r
, "puff(èsucûeded uncom´essšg %lu by‹s\n", 
de¡Ën
);

156 ià(
sourûËn
 < 
Ën
)

157 
	`årštf
 (
¡d”r
, "%lu com´es£d by‹ unu£d\n", 
Ën
 - 
sourûËn
);

161 ià(
put
 && 
»t
 == 0)

163 ià(
ç
)

164 
de¡Ën
 >>= 1;

165 
de¡
 = 
	`m®loc
 (
de¡Ën
);

166 ià(
de¡
 =ğ
NULL
)

168 
	`årštf
 (
¡d”r
, "memory‡llocation failure\n");

169 
	`ä“
 (
sourû
);

172 
	`puff
 (
de¡
, &
de¡Ën
, 
sourû
 + 
sk
, &
sourûËn
);

173 
	`SET_BINARY_MODE
 (
¡dout
);

174 
	`fwr™e
 (
de¡
, 1, 
de¡Ën
, 
¡dout
);

175 
	`ä“
 (
de¡
);

179 
	`ä“
 (
sourû
);

180  
»t
;

181 
	}
}

	@contrib/testzlib/testzlib.c

1 
	~<¡dio.h
>

2 
	~<¡dlib.h
>

3 
	~<wšdows.h
>

5 
	~"zlib.h
"

7 
	$MyDoMšus64
 (
LARGE_INTEGER
 * 
R
, LARGE_INTEGER 
A
, LARGE_INTEGER 
B
)

9 
R
->
HighP¬t
 = 
A
.HighP¬ˆ- 
B
.HighPart;

10 ià(
A
.
LowP¬t
 >ğ
B
.LowPart)

11 
R
->
LowP¬t
 = 
A
.LowP¬ˆ- 
B
.LowPart;

16 
R
->
LowP¬t
 = 
A
.LowP¬ˆ- 
B
.LowPart;

17 
R
->
HighP¬t
--;

19 
	}
}

22 #ifdeà
_M_X64


24 
__št64
 
__rdtsc
 ();

26 
	$BegšCouÁRdtsc
 (
LARGE_INTEGER
 * 
pbegšTime64
)

30 
pbegšTime64
->
QuadP¬t
 = 
	`__rdtsc
 ();

31 
	}
} 
LARGE_INTEGER
 
	$G‘ResRdtsc
 (
LARGE_INTEGER
 
begšTime64
,

32 
BOOL
 
fCompu‹TimeQu”yP”f
)

34 
LARGE_INTEGER
 
LI»s
;

35 
_št64
 
»s
 =

36 
	`__rdtsc
 (è- ((
_št64
è(
begšTime64
.
QuadP¬t
));

37 
LI»s
.
QuadP¬t
 = 
»s
;

40  
LI»s
;

41 
	}
}

45 #ifdeà
_M_IX86


47 
	$myG‘RDTSC32
 (
LARGE_INTEGER
 * 
pbegšTime64
)

49 
DWORD
 
dwEdx
, 
dwEax
;

50 
_asm


52 
rdtsc
 
mov
 
dwEax
, 
—x
 mov 
dwEdx
, 
edx
 } 
pbegšTime64
->
LowP¬t
 = dwEax;

53 
pbegšTime64
->
HighP¬t
 = 
dwEdx
;

54 
	}
} 

56 
	$BegšCouÁRdtsc
 (
LARGE_INTEGER
 * 
pbegšTime64
)

58 
	`myG‘RDTSC32
 (
pbegšTime64
);

59 
	}
} 
LARGE_INTEGER
 
	$G‘ResRdtsc
 (
LARGE_INTEGER
 
begšTime64
,

60 
BOOL
 
fCompu‹TimeQu”yP”f
)

62 
LARGE_INTEGER
 
LI»s
, 
’dTime64
;

63 
	`myG‘RDTSC32
 (&
’dTime64
);

64 
LI»s
.
LowP¬t
 = LI»s.
HighP¬t
 = 0;

65 
	`MyDoMšus64
 (&
LI»s
, 
’dTime64
, 
begšTime64
);

66  
LI»s
;

67 
	}
}

72 
	$myG‘RDTSC32
 (
LARGE_INTEGER
 * 
pbegšTime64
)

74 
	}
} 

76 
	$BegšCouÁRdtsc
 (
LARGE_INTEGER
 * 
pbegšTime64
)

78 
	}
} 
LARGE_INTEGER
 
	$G‘ResRdtsc
 (
LARGE_INTEGER
 
begšTime64
,

79 
BOOL
 
fCompu‹TimeQu”yP”f
)

81 
LARGE_INTEGER
 
Ì
;

82 
Ì
.
QuadP¬t
 = 0;

83  
Ì
;

84 
	}
}

90 
	$BegšCouÁP”fCouÁ”
 (
LARGE_INTEGER
 * 
pbegšTime64
,

91 
BOOL
 
fCompu‹TimeQu”yP”f
)

93 ià((!
fCompu‹TimeQu”yP”f
è|| (!
	`Qu”yP”fÜmªûCouÁ”
 (
pbegšTime64
)))

96 
pbegšTime64
->
LowP¬t
 = 
	`G‘TickCouÁ
 ();

97 
pbegšTime64
->
HighP¬t
 = 0;

99 
	}
}

101 
DWORD
 
	$G‘M£cSšûP”fCouÁ”
 (
LARGE_INTEGER
 
begšTime64
,

102 
BOOL
 
fCompu‹TimeQu”yP”f
)

104 
LARGE_INTEGER
 
’dTime64
, 
ticksP”SecÚd
, 
ticks
;

105 
DWORDLONG
 
ticksShiáed
, 
tickSecShiáed
;

106 
DWORD
 
dwLog
 = 16 + 0;

107 
DWORD
 
dwR‘
;

108 ià((!
fCompu‹TimeQu”yP”f
è|| (!
	`Qu”yP”fÜmªûCouÁ”
 (&
’dTime64
)))

109 
dwR‘
 = (
	`G‘TickCouÁ
 (è- 
begšTime64
.
LowP¬t
) * 1;

114 
	`MyDoMšus64
 (&
ticks
, 
’dTime64
, 
begšTime64
);

115 
	`Qu”yP”fÜmªûF»qu’cy
 (&
ticksP”SecÚd
);

118 
ticksShiáed
 = 
	`IÁ64Sh¾Mod32
 (*(
DWORDLONG
 *è& 
ticks
, 
dwLog
);

119 
tickSecShiáed
 =

120 
	`IÁ64Sh¾Mod32
 (*(
DWORDLONG
 *è& 
ticksP”SecÚd
, 
dwLog
);

122 
dwR‘
 =

123 (
DWORD
è((((DWORDè
ticksShiáed
è* 1000è/ (DWORDè(
tickSecShiáed
));

124 
dwR‘
 *= 1;

126  
dwR‘
;

127 
	}
}

130 
	$R—dFeMemÜy
 (cÚ¡ *
f’ame
, *
¶FeSize
,

131 **
pFePŒ
)

133 
FILE
 * 
¡»am
;

134 *
±r
;

135 
»tV®
 = 1;

136 
¡»am
 = 
	`fİ’
 (
f’ame
, "rb");

137 ià(
¡»am
 =ğ
NULL
)

139 
	`f£ek
 (
¡»am
, 0, 
SEEK_END
);

140 *
¶FeSize
 = 
	`á–l
 (
¡»am
);

141 
	`f£ek
 (
¡»am
, 0, 
SEEK_SET
);

142 
±r
 = 
	`m®loc
 ((*
¶FeSize
) + 1);

143 ià(
±r
 =ğ
NULL
)

144 
»tV®
 = 0;

149 ià(
	`ä—d
 (
±r
, 1, *
¶FeSize
, 
¡»am
) != (*plFileSize))

150 
»tV®
 = 0;

152 
	`fşo£
 (
¡»am
);

153 *
pFePŒ
 = 
±r
;

154  
»tV®
;

155 
	}
}

158 
	$maš
 (
¬gc
, *
¬gv
[])

160 
BlockSizeCom´ess
 = 0x8000;

161 
BlockSizeUncom´ess
 = 0x8000;

162 
ırLev–
 = 
Z_DEFAULT_COMPRESSION
;

163 
lFeSize
;

164 *
FePŒ
;

165 
lBufãrSizeC´
;

166 
lBufãrSizeUnır
;

167 
lCom´es£dSize
 = 0;

168 *
C´PŒ
;

169 *
UnırPŒ
;

170 
lSizeC´
, 
lSizeUnır
;

171 
DWORD
 
dwG‘Tick
, 
dwM£cQP
;

172 
LARGE_INTEGER
 
li_qp
, 
li_rdtsc
, 
dwResRdtsc
;

173 ià(
¬gc
 <= 1)

176 
´štf


180 ià(
	`R—dFeMemÜy
 (
¬gv
[1], &
lFeSize
, &
FePŒ
) == 0)

183 
	`´štf
 ("”rÜ„—dšg %s\n", 
¬gv
[1]);

188 
	`´štf
 ("f% »ad, %u by‹s\n", 
¬gv
[1], 
lFeSize
);

189 ià(
¬gc
 >= 3)

190 
BlockSizeCom´ess
 = 
	`©Ş
 (
¬gv
[2]);

191 ià(
¬gc
 >= 4)

192 
BlockSizeUncom´ess
 = 
	`©Ş
 (
¬gv
[3]);

193 ià(
¬gc
 >= 5)

194 
ırLev–
 = (è
	`©Ş
 (
¬gv
[4]);

195 
lBufãrSizeC´
 = 
lFeSize
 + (lFileSize / 0x10) + 0x200;

196 
lBufãrSizeUnır
 = 
lBufãrSizeC´
;

197 
C´PŒ
 = (*è
	`m®loc
 (
lBufãrSizeC´
 + 
BlockSizeCom´ess
);

198 
	`BegšCouÁP”fCouÁ”
 (&
li_qp
, 
TRUE
);

199 
dwG‘Tick
 = 
	`G‘TickCouÁ
 ();

200 
	`BegšCouÁRdtsc
 (&
li_rdtsc
);

203 
z_¡»am
 
zır
;

204 
»t
 = 
Z_OK
;

205 
lOrigToDo
 = 
lFeSize
;

206 
lOrigDÚe
 = 0;

207 
¡•
 = 0;

208 
	`mem£t
 (&
zır
, 0,  (
z_¡»am
));

209 
	`deæ©eIn™
 (&
zır
, 
ırLev–
);

210 
zır
.
Ãxt_š
 = 
FePŒ
;

211 
zır
.
Ãxt_out
 = 
C´PŒ
;

216 
®l_»ad_befÜe
 = 
zır
.
tÙ®_š
;

217 
zır
.
ava_š
 = 
	`mš
 (
lOrigToDo
, 
BlockSizeCom´ess
);

218 
zır
.
ava_out
 = 
BlockSizeCom´ess
;

219 
»t
 =

220 
	`deæ©e
 (&
zır
,

221 (
zır
.
ava_š
 =ğ
lOrigToDo
è? 
Z_FINISH
 : 
Z_SYNC_FLUSH
);

222 
lOrigDÚe
 +ğ(
zır
.
tÙ®_š
 - 
®l_»ad_befÜe
);

223 
lOrigToDo
 -ğ(
zır
.
tÙ®_š
 - 
®l_»ad_befÜe
);

224 
¡•
++;

226 
»t
 =ğ
Z_OK
);

227 
lSizeC´
 = 
zır
.
tÙ®_out
;

228 
	`deæ©eEnd
 (&
zır
);

229 
dwG‘Tick
 = 
	`G‘TickCouÁ
 () - dwGetTick;

230 
dwM£cQP
 = 
	`G‘M£cSšûP”fCouÁ”
 (
li_qp
, 
TRUE
);

231 
dwResRdtsc
 = 
	`G‘ResRdtsc
 (
li_rdtsc
, 
TRUE
);

232 
	`´štf
 ("tÙ® com´es sizğ%u, iÀ%u s‹p\n", 
lSizeC´
, 
¡•
);

233 
	`´štf
 ("timğ%u m£øğ%à£c\n", 
dwG‘Tick
,

234 
dwG‘Tick
 / () 1000.);

235 
	`´štf
 ("defı¸timQP = %u m£øğ%à£c\n", 
dwM£cQP
,

236 
dwM£cQP
 / () 1000.);

237 
	`´štf
 ("defı¸»suÉ„dtsøğ%I64x\n\n", 
dwResRdtsc
.
QuadP¬t
);

238 } 
C´PŒ
 = (*è
	`»®loc
 (C´PŒ, 
lSizeC´
);

239 
UnırPŒ
 =

240 (*è
	`m®loc
 (
lBufãrSizeUnır
 + 
BlockSizeUncom´ess
);

241 
	`BegšCouÁP”fCouÁ”
 (&
li_qp
, 
TRUE
);

242 
dwG‘Tick
 = 
	`G‘TickCouÁ
 ();

243 
	`BegšCouÁRdtsc
 (&
li_rdtsc
);

246 
z_¡»am
 
zır
;

247 
»t
 = 
Z_OK
;

248 
lOrigToDo
 = 
lSizeC´
;

249 
lOrigDÚe
 = 0;

250 
¡•
 = 0;

251 
	`mem£t
 (&
zır
, 0,  (
z_¡»am
));

252 
	`šæ©eIn™
 (&
zır
);

253 
zır
.
Ãxt_š
 = 
C´PŒ
;

254 
zır
.
Ãxt_out
 = 
UnırPŒ
;

259 
®l_»ad_befÜe
 = 
zır
.
tÙ®_š
;

260 
zır
.
ava_š
 = 
	`mš
 (
lOrigToDo
, 
BlockSizeUncom´ess
);

261 
zır
.
ava_out
 = 
BlockSizeUncom´ess
;

262 
»t
 = 
	`šæ©e
 (&
zır
, 
Z_SYNC_FLUSH
);

263 
lOrigDÚe
 +ğ(
zır
.
tÙ®_š
 - 
®l_»ad_befÜe
);

264 
lOrigToDo
 -ğ(
zır
.
tÙ®_š
 - 
®l_»ad_befÜe
);

265 
¡•
++;

267 
»t
 =ğ
Z_OK
);

268 
lSizeUnır
 = 
zır
.
tÙ®_out
;

269 
	`šæ©eEnd
 (&
zır
);

270 
dwG‘Tick
 = 
	`G‘TickCouÁ
 () - dwGetTick;

271 
dwM£cQP
 = 
	`G‘M£cSšûP”fCouÁ”
 (
li_qp
, 
TRUE
);

272 
dwResRdtsc
 = 
	`G‘ResRdtsc
 (
li_rdtsc
, 
TRUE
);

273 
	`´štf
 ("tÙ® uncom´es sizğ%u, iÀ%u s‹p\n", 
lSizeUnır
, 
¡•
);

274 
	`´štf
 ("timğ%u m£øğ%à£c\n", 
dwG‘Tick
,

275 
dwG‘Tick
 / () 1000.);

276 
	`´štf
 ("unı¸imQP = %u m£øğ%à£c\n", 
dwM£cQP
,

277 
dwM£cQP
 / () 1000.);

278 
	`´štf
 ("unı¸„esuÉ„dtsøğ%I64x\n\n", 
dwResRdtsc
.
QuadP¬t
);

279 } ià(
lSizeUnır
 =ğ
lFeSize
)

282 ià(
	`memcmp
 (
FePŒ
, 
UnırPŒ
, 
lFeSize
) == 0)

283 
	`´štf
 ("compare ok\n");

286 
	}
}

	@contrib/untgz/untgz.c

9 
	~<¡dio.h
>

10 
	~<¡dlib.h
>

11 
	~<¡ršg.h
>

12 
	~<time.h
>

13 
	~<”ºo.h
>

15 
	~"zlib.h
"

17 #ifdeà
unix


18 
	~<uni¡d.h
>

20 
	~<dœeù.h
>

21 
	~<io.h
>

24 #ifdeà
WIN32


25 
	~<wšdows.h
>

26 #iâdeà
F_OK


27 
	#F_OK
 0

	)

29 
	#mkdœ
(
dœÇme
,
mode
è
	`_mkdœ
(dœÇme)

	)

30 #ifdeà
_MSC_VER


31 
	#acûss
(
·th
,
mode
è
	`_acûss
Õ©h,mode)

	)

32 
	#chmod
(
·th
,
mode
è
	`_chmod
Õ©h,mode)

	)

33 
	#¡rdup
(
¡r
è
	`_¡rdup
(¡r)

	)

36 
	~<utime.h
>

42 
	#REGTYPE
 '0'

	)

43 
	#AREGTYPE
 '\0'

	)

44 
	#LNKTYPE
 '1'

	)

45 
	#SYMTYPE
 '2'

	)

46 
	#CHRTYPE
 '3'

	)

47 
	#BLKTYPE
 '4'

	)

48 
	#DIRTYPE
 '5'

	)

49 
	#FIFOTYPE
 '6'

	)

50 
	#CONTTYPE
 '7'

	)

54 
	#GNUTYPE_DUMPDIR
 'D'

	)

55 
	#GNUTYPE_LONGLINK
 'K'

	)

56 
	#GNUTYPE_LONGNAME
 'L'

	)

57 
	#GNUTYPE_MULTIVOL
 'M'

	)

58 
	#GNUTYPE_NAMES
 'N'

	)

59 
	#GNUTYPE_SPARSE
 'S'

	)

60 
	#GNUTYPE_VOLHDR
 'V'

	)

65 
	#BLOCKSIZE
 512

	)

66 
	#SHORTNAMESIZE
 100

	)

68 
	sr_h—d”


70 
	mÇme
[100];

71 
	mmode
[8];

72 
	muid
[8];

73 
	mgid
[8];

74 
	msize
[12];

75 
	mmtime
[12];

76 
	mchksum
[8];

77 
	mty³æag
;

78 
	mlškÇme
[100];

79 
	mmagic
[6];

80 
	mv”siÚ
[2];

81 
	muÇme
[32];

82 
	mgÇme
[32];

83 
	mdevmajÜ
[8];

84 
	mdevmšÜ
[8];

85 
	m´efix
[155];

89 
	ur_bufãr


91 
	mbufãr
[
BLOCKSIZE
];

92 
r_h—d”
 
	mh—d”
;

95 
	s©Œ_™em


97 
©Œ_™em
 *
	mÃxt
;

98 *
	mâame
;

99 
	mmode
;

100 
time_t
 
	mtime
;

104 { 
	mTGZ_EXTRACT
, 
	mTGZ_LIST
, 
	mTGZ_INVALID
 };

106 *
TGZâame
 
OF
 ((const *));

107 
TGZnÙfound
 
OF
 ((const *));

109 
g‘où
 
OF
 ((*, ));

110 *
¡¹ime
 
OF
 ((
time_t
 *));

111 
£tf‘ime
 
OF
 ((*, 
time_t
));

112 
push_©Œ
 
OF
 ((
©Œ_™em
 **, *, , 
time_t
));

113 
»¡Üe_©Œ
 
OF
 ((
©Œ_™em
 **));

115 
Ex´M©ch
 
OF
 ((*, *));

117 
makedœ
 
OF
 ((*));

118 
m©chÇme
 
OF
 ((, , **, *));

120 
”rÜ
 
OF
 ((const *));

121 
r
 
OF
 ((
gzFe
, , , , **));

123 
h–p
 
OF
 (());

124 
maš
 
OF
 ((, **));

126 *
	g´og
;

128 cÚ¡ *
	gTGZsuffix
[] = { "\0", ".r", ".r.gz", ".z", ".tgz", 
NULL
 };

134 
	$TGZâame
 (cÚ¡ *
¬úame
)

136 
bufãr
[1024];

137 
ÜigËn
, 
i
;

139 
	`¡rıy
 (
bufãr
, 
¬úame
);

140 
ÜigËn
 = 
	`¡¾’
 (
bufãr
);

142 
i
 = 0; 
TGZsuffix
[i]; i++)

144 
	`¡rıy
 (
bufãr
 + 
ÜigËn
, 
TGZsuffix
[
i
]);

145 ià(
	`acûss
 (
bufãr
, 
F_OK
) == 0)

146  
bufãr
;

148  
NULL
;

149 
	}
}

155 
	$TGZnÙfound
 (cÚ¡ *
¬úame
)

157 
i
;

159 
	`årštf
 (
¡d”r
, "%s: Couldn'ˆfšd ", 
´og
);

160 
i
 = 0; 
TGZsuffix
[i]; i++)

161 
	`årštf
 (
¡d”r
, (
TGZsuffix
[
i
 + 1]) ? "%s%s, " : "or %s%s\n",

162 
¬úame
, 
TGZsuffix
[
i
]);

163 
	`ex™
 (1);

164 
	}
}

171 
	$g‘où
 (*
p
, 
width
)

173 
»suÉ
 = 0;

174 
c
;

176 
width
--)

178 
c
 = *
p
++;

179 ià(
c
 == 0)

181 ià(
c
 == ' ')

183 ià(
c
 < '0' || c > '7')

185 
»suÉ
 =„esuÉ * 8 + (
c
 - '0');

187  
»suÉ
;

188 
	}
}

195 
	$¡¹ime
 (
time_t
 * 
t
)

197 
tm
 *
loÿl
;

198 
»suÉ
[32];

200 
loÿl
 = 
	`loÿÉime
 (
t
);

201 
	`¥rštf
 (
»suÉ
, "%4d/%02d/%02d %02d:%02d:%02d",

202 
loÿl
->
tm_y—r
 + 1900,†oÿl->
tm_mÚ
 + 1,†oÿl->
tm_mday
,

203 
loÿl
->
tm_hour
,†oÿl->
tm_mš
,†oÿl->
tm_£c
);

204  
»suÉ
;

205 
	}
}

211 
	$£tf‘ime
 (*
âame
, 
time_t
 
áime
)

213 #ifdeà
WIN32


214 
isWšNT
 = -1;

215 
SYSTEMTIME
 
¡
;

216 
FILETIME
 
locá
, 
modá
;

217 
tm
 *
loùm
;

218 
HANDLE
 
hFe
;

219 
»suÉ
;

221 
loùm
 = 
	`loÿÉime
 (&
áime
);

222 ià(
loùm
 =ğ
NULL
)

225 
¡
.
wY—r
 = (
WORD
è
loùm
->
tm_y—r
 + 1900;

226 
¡
.
wMÚth
 = (
WORD
è
loùm
->
tm_mÚ
 + 1;

227 
¡
.
wDayOfW“k
 = (
WORD
è
loùm
->
tm_wday
;

228 
¡
.
wDay
 = (
WORD
è
loùm
->
tm_mday
;

229 
¡
.
wHour
 = (
WORD
è
loùm
->
tm_hour
;

230 
¡
.
wMšu‹
 = (
WORD
è
loùm
->
tm_mš
;

231 
¡
.
wSecÚd
 = (
WORD
è
loùm
->
tm_£c
;

232 
¡
.
wMli£cÚds
 = 0;

233 ià(!
	`Sy¡emTimeToFeTime
 (&
¡
, &
locá
) ||

234 !
	`LoÿlFeTimeToFeTime
 (&
locá
, &
modá
))

237 ià(
isWšNT
 < 0)

238 
isWšNT
 = (
	`G‘V”siÚ
 () < 0x80000000) ? 1 : 0;

239 
hFe
 = 
	`C»©eFe
 (
âame
, 
GENERIC_WRITE
, 0, 
NULL
, 
OPEN_EXISTING
,

240 (
isWšNT
 ? 
FILE_FLAG_BACKUP_SEMANTICS
 : 0), 
NULL
);

241 ià(
hFe
 =ğ
INVALID_HANDLE_VALUE
)

243 
»suÉ
 = 
	`S‘FeTime
 (
hFe
, 
NULL
, NULL, &
modá
) ? 0 : -1;

244 
	`Clo£HªdË
 (
hFe
);

245  
»suÉ
;

247 
utimbuf
 
£‰ime
;

249 
£‰ime
.
aùime
 = s‘time.
modtime
 = 
áime
;

250  
	`utime
 (
âame
, &
£‰ime
);

252 
	}
}

258 
	$push_©Œ
 (
©Œ_™em
 **
li¡
, *
âame
, 
mode
, 
time_t
 
time
)

260 
©Œ_™em
 *
™em
;

262 
™em
 = (
©Œ_™em
 *è
	`m®loc
 ( (attr_item));

263 ià(
™em
 =ğ
NULL
)

264 
	`”rÜ
 ("Out of memory");

265 
™em
->
âame
 = 
	`¡rdup
 (fname);

266 
™em
->
mode
 = mode;

267 
™em
->
time
 =ime;

268 
™em
->
Ãxt
 = *
li¡
;

269 *
li¡
 = 
™em
;

270 
	}
}

276 
	$»¡Üe_©Œ
 (
©Œ_™em
 **
li¡
)

278 
©Œ_™em
 *
™em
, *
´ev
;

280 
™em
 = *
li¡
; i‹m !ğ
NULL
;)

282 
	`£tf‘ime
 (
™em
->
âame
, i‹m->
time
);

283 
	`chmod
 (
™em
->
âame
, i‹m->
mode
);

284 
´ev
 = 
™em
;

285 
™em
 = i‹m->
Ãxt
;

286 
	`ä“
 (
´ev
);

288 *
li¡
 = 
NULL
;

289 
	}
}

294 
	#ISSPECIAL
(
c
è(((cè=ğ'*'è|| ((cè=ğ'/'))

	)

297 
	$Ex´M©ch
 (*
¡ršg
, *
ex´
)

301 ià(
	`ISSPECIAL
 (*
ex´
))

303 ià(*
ex´
 == '/')

305 ià(*
¡ršg
 != '\\' && *string != '/')

307 
¡ršg
++;

308 
ex´
++;

310 ià(*
ex´
 == '*')

312 ià(*
ex´
++ == 0)

314 *++
¡ršg
 !ğ*
ex´
)

315 ià(*
¡ršg
 == 0)

321 ià(*
¡ršg
 !ğ*
ex´
)

323 ià(*
ex´
++ == 0)

325 
¡ršg
++;

328 
	}
}

337 
	$makedœ
 (*
Ãwdœ
)

339 *
bufãr
 = 
	`¡rdup
 (
Ãwdœ
);

340 *
p
;

341 
Ën
 = 
	`¡¾’
 (
bufãr
);

343 ià(
Ën
 <= 0)

345 
	`ä“
 (
bufãr
);

348 ià(
bufãr
[
Ën
 - 1] == '/')

350 
bufãr
[
Ën
 - 1] = '\0';

352 ià(
	`mkdœ
 (
bufãr
, 0755) == 0)

354 
	`ä“
 (
bufãr
);

358 
p
 = 
bufãr
 + 1;

361 
hŞd
;

363 *
p
 && *p != '\\' && *p != '/')

364 
p
++;

365 
hŞd
 = *
p
;

366 *
p
 = 0;

367 ià((
	`mkdœ
 (
bufãr
, 0755è=ğ-1è&& (
”ºo
 =ğ
ENOENT
))

369 
	`årštf
 (
¡d”r
, "%s: Couldn'ˆü—‹ dœeùÜy %s\n", 
´og
,

370 
bufãr
);

371 
	`ä“
 (
bufãr
);

374 ià(
hŞd
 == 0)

376 *
p
++ = 
hŞd
;

378 
	`ä“
 (
bufãr
);

380 
	}
}

384 
	$m©chÇme
 (
¬g
, 
¬gc
, **
¬gv
, *
âame
)

386 ià(
¬g
 =ğ
¬gc
)

389 
¬g
 < 
¬gc
)

390 ià(
	`Ex´M©ch
 (
âame
, 
¬gv
[
¬g
++]))

394 
	}
}

400 
	$r
 (
gzFe
 
š
, 
aùiÚ
, 
¬g
, 
¬gc
, **
¬gv
)

402 
r_bufãr
 
bufãr
;

403 
Ën
;

404 
”r
;

405 
g‘h—d”
 = 1;

406 
»maššg
 = 0;

407 
FILE
 *
outfe
 = 
NULL
;

408 
âame
[
BLOCKSIZE
];

409 
rmode
;

410 
time_t
 
¹ime
;

411 
©Œ_™em
 *
©Œibu‹s
 = 
NULL
;

413 ià(
aùiÚ
 =ğ
TGZ_LIST
)

414 
	`´štf
 (" dateime size file\n"

418 
Ën
 = 
	`gz»ad
 (
š
, &
bufãr
, 
BLOCKSIZE
);

419 ià(
Ën
 < 0)

420 
	`”rÜ
 (
	`gz”rÜ
 (
š
, &
”r
));

425 ià(
Ën
 !ğ
BLOCKSIZE
)

427 
aùiÚ
 = 
TGZ_INVALID
;

428 
»maššg
 = 0;

434 ià(
g‘h—d”
 >= 1)

441 ià(
Ën
 =ğ0 || 
bufãr
.
h—d”
.
Çme
[0] == 0)

444 
rmode
 = 
	`g‘où
 (
bufãr
.
h—d”
.
mode
, 8);

445 
¹ime
 = (
time_t
è
	`g‘où
 (
bufãr
.
h—d”
.
mtime
, 12);

446 ià(
rmode
 =ğ-1 || 
¹ime
 =ğ(
time_t
) - 1)

448 
bufãr
.
h—d”
.
Çme
[0] = 0;

449 
aùiÚ
 = 
TGZ_INVALID
;

452 ià(
g‘h—d”
 == 1)

454 
	`¡ºıy
 (
âame
, 
bufãr
.
h—d”
.
Çme
, 
SHORTNAMESIZE
);

455 ià(
âame
[
SHORTNAMESIZE
 - 1] != 0)

456 
âame
[
SHORTNAMESIZE
] = 0;

463 ià(
	`¡ºcmp
 (
âame
, 
bufãr
.
h—d”
.
Çme
, 
SHORTNAMESIZE
 - 1) != 0)

464 
	`”rÜ
 ("bad†ong‚ame");

465 
g‘h—d”
 = 1;

471 
bufãr
.
h—d”
.
ty³æag
)

473 
DIRTYPE
:

474 ià(
aùiÚ
 =ğ
TGZ_LIST
)

475 
	`´štf
 (" %  <dœ> %s\n", 
	`¡¹ime
 (&
¹ime
), 
âame
);

476 ià(
aùiÚ
 =ğ
TGZ_EXTRACT
)

478 
	`makedœ
 (
âame
);

479 
	`push_©Œ
 (&
©Œibu‹s
, 
âame
, 
rmode
, 
¹ime
);

482 
REGTYPE
:

483 
AREGTYPE
:

484 
»maššg
 = 
	`g‘où
 (
bufãr
.
h—d”
.
size
, 12);

485 ià(
»maššg
 == -1)

487 
aùiÚ
 = 
TGZ_INVALID
;

490 ià(
aùiÚ
 =ğ
TGZ_LIST
)

491 
	`´štf
 (" % %9d %s\n", 
	`¡¹ime
 (&
¹ime
), 
»maššg
, 
âame
);

492 ià(
aùiÚ
 =ğ
TGZ_EXTRACT
)

494 ià(
	`m©chÇme
 (
¬g
, 
¬gc
, 
¬gv
, 
âame
))

496 
outfe
 = 
	`fİ’
 (
âame
, "wb");

497 ià(
outfe
 =ğ
NULL
)

500 *
p
 = 
	`¡¼chr
 (
âame
, '/');

501 ià(
p
 !ğ
NULL
)

503 *
p
 = '\0';

504 
	`makedœ
 (
âame
);

505 *
p
 = '/';

506 
outfe
 = 
	`fİ’
 (
âame
, "wb");

509 ià(
outfe
 !ğ
NULL
)

510 
	`´štf
 ("ExŒaùšg %s\n", 
âame
);

512 
	`årštf
 (
¡d”r
, "%s: Couldn'ˆü—‹ %s", 
´og
,

513 
âame
);

516 
outfe
 = 
NULL
;

518 
g‘h—d”
 = 0;

520 
GNUTYPE_LONGLINK
:

521 
GNUTYPE_LONGNAME
:

522 
»maššg
 = 
	`g‘où
 (
bufãr
.
h—d”
.
size
, 12);

523 ià(
»maššg
 < 0 ||„emaššg >ğ
BLOCKSIZE
)

525 
aùiÚ
 = 
TGZ_INVALID
;

528 
Ën
 = 
	`gz»ad
 (
š
, 
âame
, 
BLOCKSIZE
);

529 ià(
Ën
 < 0)

530 
	`”rÜ
 (
	`gz”rÜ
 (
š
, &
”r
));

531 ià(
âame
[
BLOCKSIZE
 - 1] != 0

532 || (è
	`¡¾’
 (
âame
è> 
»maššg
)

534 
aùiÚ
 = 
TGZ_INVALID
;

537 
g‘h—d”
 = 2;

540 ià(
aùiÚ
 =ğ
TGZ_LIST
)

541 
	`´štf
 (" %  <---> %s\n", 
	`¡¹ime
 (&
¹ime
), 
âame
);

547 
by‹s
 =

548 (
»maššg
 > 
BLOCKSIZE
) ? BLOCKSIZE :„emaining;

550 ià(
outfe
 !ğ
NULL
)

552 ià(
	`fwr™e
 (&
bufãr
,  (), 
by‹s
, 
outfe
) != bytes)

554 
	`årštf
 (
¡d”r
,

555 "%s: E¼Ü wr™šg % -- skpšg\n", 
´og
, 
âame
);

556 
	`fşo£
 (
outfe
);

557 
outfe
 = 
NULL
;

558 
	`»move
 (
âame
);

561 
»maššg
 -ğ
by‹s
;

564 ià(
»maššg
 == 0)

566 
g‘h—d”
 = 1;

567 ià(
outfe
 !ğ
NULL
)

569 
	`fşo£
 (
outfe
);

570 
outfe
 = 
NULL
;

571 ià(
aùiÚ
 !ğ
TGZ_INVALID
)

572 
	`push_©Œ
 (&
©Œibu‹s
, 
âame
, 
rmode
, 
¹ime
);

579 ià(
aùiÚ
 =ğ
TGZ_INVALID
)

581 
	`”rÜ
 ("broken‡rchive");

589 
	`»¡Üe_©Œ
 (&
©Œibu‹s
);

591 ià(
	`gzşo£
 (
š
è!ğ
Z_OK
)

592 
	`”rÜ
 ("failed gzclose");

595 
	}
}

601 
	$h–p
 (
ex™v®
)

603 
	`´štf
 ("untgz version 0.2.1\n"

604 " usšg zlib v”siÚ %s\n\n", 
	`zlibV”siÚ
 ());

605 
	`´štf
 ("Usage: untgz file.tgzƒxtract‡ll files\n"

609 
	`ex™
 (
ex™v®
);

610 
	}
}

613 
	$”rÜ
 (cÚ¡ *
msg
)

615 
	`årštf
 (
¡d”r
, "%s: %s\n", 
´og
, 
msg
);

616 
	`ex™
 (1);

617 
	}
}

622 #ià
defšed
(
WIN32
è&& defšed(
__GNUC__
)

623 
	g_CRT_glob
 = 0;

627 
	$maš
 (
¬gc
, **
¬gv
)

629 
aùiÚ
 = 
TGZ_EXTRACT
;

630 
¬g
 = 1;

631 *
TGZfe
;

632 
gzFe
 *
f
;

634 
´og
 = 
	`¡¼chr
 (
¬gv
[0], '\\');

635 ià(
´og
 =ğ
NULL
)

637 
´og
 = 
	`¡¼chr
 (
¬gv
[0], '/');

638 ià(
´og
 =ğ
NULL
)

640 
´og
 = 
	`¡¼chr
 (
¬gv
[0], ':');

641 ià(
´og
 =ğ
NULL
)

642 
´og
 = 
¬gv
[0];

644 
´og
++;

647 
´og
++;

650 
´og
++;

652 ià(
¬gc
 == 1)

653 
	`h–p
 (0);

655 ià(
	`¡rcmp
 (
¬gv
[
¬g
], "-l") == 0)

657 
aùiÚ
 = 
TGZ_LIST
;

658 ià(
¬gc
 =ğ++
¬g
)

659 
	`h–p
 (0);

661 ià(
	`¡rcmp
 (
¬gv
[
¬g
], "-h") == 0)

663 
	`h–p
 (0);

666 ià((
TGZfe
 = 
	`TGZâame
 (
¬gv
[
¬g
])è=ğ
NULL
)

667 
	`TGZnÙfound
 (
¬gv
[
¬g
]);

669 ++
¬g
;

670 ià((
aùiÚ
 =ğ
TGZ_LIST
è&& (
¬g
 !ğ
¬gc
))

671 
	`h–p
 (1);

676 
aùiÚ
)

678 
TGZ_LIST
:

679 
TGZ_EXTRACT
:

680 
f
 = 
	`gzİ’
 (
TGZfe
, "rb");

681 ià(
f
 =ğ
NULL
)

683 
	`årštf
 (
¡d”r
, "%s: Couldn'ˆgzİ’ %s\n", 
´og
, 
TGZfe
);

686 
	`ex™
 (
	`r
 (
f
, 
aùiÚ
, 
¬g
, 
¬gc
, 
¬gv
));

690 
	`”rÜ
 ("Unknown option");

691 
	`ex™
 (1);

695 
	}
}

	@crc32.c

24 #ifdeà
MAKECRCH


25 
	~<¡dio.h
>

26 #iâdeà
DYNAMIC_CRC_TABLE


27 
	#DYNAMIC_CRC_TABLE


	)

31 
	~"zut.h
"

33 
	#loÿl
 

	)

36 #ià!
defšed
(
NOBYFOUR
è&& defšed(
Z_U4
)

37 
	#BYFOUR


	)

39 #ifdeà
BYFOUR


40 
loÿl
 
üc32_l™e
 
OF
 ((,

41 cÚ¡ 
FAR
 *, ));

42 
loÿl
 
üc32_big
 
OF
 ((,

43 cÚ¡ 
FAR
 *, ));

44 
	#TBLS
 8

	)

46 
	#TBLS
 1

	)

50 
loÿl
 
gf2_m©rix_times
 
OF
 ((*
m©
,

51 
vec
));

52 
loÿl
 
gf2_m©rix_squ¬e
 
OF
 ((*
squ¬e
, *
m©
));

53 
loÿl
 
uLÚg
 
üc32_combše_
 
OF
 ((uLÚg 
üc1
, uLÚg 
üc2
, 
z_off64_t
 
Ën2
));

56 #ifdeà
DYNAMIC_CRC_TABLE


58 
loÿl
 vŞ©
	güc_bË_em±y
 = 1;

59 
loÿl
 
z_üc_t
 
FAR
 
	güc_bË
[
TBLS
][256];

60 
loÿl
 
make_üc_bË
 
OF
 (());

61 #ifdeà
MAKECRCH


62 
loÿl
 
wr™e_bË
 
OF
 ((
FILE
 *, cÚ¡ 
z_üc_t
 
FAR
 *));

90 
loÿl
 

91 
	$make_üc_bË
 ()

93 
z_üc_t
 
c
;

94 
n
, 
k
;

95 
z_üc_t
 
pŞy
;

97 vŞ©
fœ¡
 = 1;

98 cÚ¡ 
p
[] =

104 ià(
fœ¡
)

106 
fœ¡
 = 0;

109 
pŞy
 = 0;

110 
n
 = 0;‚ < (è( (
p
) /  ());‚++)

111 
pŞy
 |ğ(
z_üc_t
è1 << (31 - 
p
[
n
]);

114 
n
 = 0;‚ < 256;‚++)

116 
c
 = (
z_üc_t
è
n
;

117 
k
 = 0; k < 8; k++)

118 
c
 = c & 1 ? 
pŞy
 ^ (c >> 1) : c >> 1;

119 
üc_bË
[0][
n
] = 
c
;

122 #ifdeà
BYFOUR


125 
n
 = 0;‚ < 256;‚++)

127 
c
 = 
üc_bË
[0][
n
];

128 
üc_bË
[4][
n
] = 
	`ZSWAP32
 (
c
);

129 
k
 = 1; k < 4; k++)

131 
c
 = 
üc_bË
[0][c & 0xff] ^ (c >> 8);

132 
üc_bË
[
k
][
n
] = 
c
;

133 
üc_bË
[
k
 + 4][
n
] = 
	`ZSWAP32
 (
c
);

138 
üc_bË_em±y
 = 0;

143 
üc_bË_em±y
)

147 #ifdeà
MAKECRCH


150 
FILE
 *
out
;

152 
out
 = 
	`fİ’
 ("crc32.h", "w");

153 ià(
out
 =ğ
NULL
)

155 
	`årštf
 (
out
, "/* crc32.h --ables for„apid CRC calculation\n");

156 
	`årštf
 (
out
, " * Generated‡utomatically by crc32.c\n */\n\n");

157 
	`årštf
 (
out
, "local const z_crc_t FAR ");

158 
	`årštf
 (
out
, "crc_table[TBLS][256] =\n{\n {\n");

159 
	`wr™e_bË
 (
out
, 
üc_bË
[0]);

160 #ifdeà
BYFOUR


161 
	`årštf
 (
out
, "#ifdef BYFOUR\n");

162 
k
 = 1; k < 8; k++)

164 
	`årštf
 (
out
, " },\n {\n");

165 
	`wr™e_bË
 (
out
, 
üc_bË
[
k
]);

167 
	`årštf
 (
out
, "#endif\n");

169 
	`årštf
 (
out
, " }\n};\n");

170 
	`fşo£
 (
out
);

173 
	}
}

175 #ifdeà
MAKECRCH


176 
loÿl
 

177 
	$wr™e_bË
 (
FILE
 * 
out
, cÚ¡ 
z_üc_t
 
FAR
 * 
bË
)

179 
n
;

181 
n
 = 0;‚ < 256;‚++)

182 
	`årštf
 (
out
, "%s0x%08lxUL%s", 
n
 % 5 ? "" : " ",

183 (è(
bË
[
n
]),

184 
n
 == 255 ? "\n" : (n % 5 == 4 ? ",\n" : ", "));

185 
	}
}

192 
	~"üc32.h
"

198 cÚ¡ 
z_üc_t
 
FAR
 *
ZEXPORT


199 
	$g‘_üc_bË
 ()

201 #ifdeà
DYNAMIC_CRC_TABLE


202 ià(
üc_bË_em±y
)

203 
	`make_üc_bË
 ();

205  (cÚ¡ 
z_üc_t
 
FAR
 *è
üc_bË
;

206 
	}
}

209 
	#DO1
 
üc
 = 
üc_bË
[0][(()üø^ (*
buf
++)è& 0xff] ^ (üø>> 8)

	)

210 
	#DO8
 
DO1
; DO1; DO1; DO1; DO1; DO1; DO1; 
	)
DO1

213 
ZEXPORT


214 
	$üc32
 (
üc
, cÚ¡ 
FAR
 * 
buf
, 
uIÁ
 
Ën
)

216 ià(
buf
 =ğ
Z_NULL
)

219 #ifdeà
DYNAMIC_CRC_TABLE


220 ià(
üc_bË_em±y
)

221 
	`make_üc_bË
 ();

224 #ifdeà
BYFOUR


225 ià( (*è=ğ (
±rdiff_t
))

227 
z_üc_t
 
’dŸn
;

229 
’dŸn
 = 1;

230 ià(*((*è(&
’dŸn
)))

231  
	`üc32_l™e
 (
üc
, 
buf
, 
Ën
);

233  
	`üc32_big
 (
üc
, 
buf
, 
Ën
);

236 
üc
 = crc ^ 0xffffffffUL;

237 
Ën
 >= 8)

239 
DO8
;

240 
Ën
 -= 8;

242 ià(
Ën
)

245 
DO1
;

247 --
Ën
);

248  
üc
 ^ 0xffffffffUL;

249 
	}
}

251 #ifdeà
BYFOUR


254 
	#DOLIT4
 
c
 ^ğ*
buf4
++; \

255 
c
 = 
üc_bË
[3][c & 0xff] ^ crc_table[2][(c >> 8) & 0xff] ^ \

256 
üc_bË
[1][(
c
 >> 16è& 0xff] ^ crc_bË[0][ø>> 24]

	)

257 
	#DOLIT32
 
DOLIT4
; DOLIT4; DOLIT4; DOLIT4; DOLIT4; DOLIT4; DOLIT4; 
	)
DOLIT4

260 
loÿl
 

261 
	$üc32_l™e
 (
üc
, cÚ¡ 
FAR
 * 
buf
, 
Ën
)

263 
z_üc_t
 
c
;

264 cÚ¡ 
z_üc_t
 
FAR
 *
buf4
;

266 
c
 = (
z_üc_t
è
üc
;

267 
c
 = ~c;

268 
Ën
 && ((
±rdiff_t
è
buf
 & 3))

270 
c
 = 
üc_bË
[0][(ø^ *
buf
++) & 0xff] ^ (c >> 8);

271 
Ën
--;

274 
buf4
 = (cÚ¡ 
z_üc_t
 
FAR
 *è(cÚ¡ FAR *è
buf
;

275 
Ën
 >= 32)

277 
DOLIT32
;

278 
Ën
 -= 32;

280 
Ën
 >= 4)

282 
DOLIT4
;

283 
Ën
 -= 4;

285 
buf
 = (cÚ¡ 
FAR
 *è
buf4
;

287 ià(
Ën
)

290 
c
 = 
üc_bË
[0][(ø^ *
buf
++) & 0xff] ^ (c >> 8);

292 --
Ën
);

293 
c
 = ~c;

294  (è
c
;

295 
	}
}

298 
	#DOBIG4
 
c
 ^ğ*++
buf4
; \

299 
c
 = 
üc_bË
[4][c & 0xff] ^ crc_table[5][(c >> 8) & 0xff] ^ \

300 
üc_bË
[6][(
c
 >> 16è& 0xff] ^ crc_bË[7][ø>> 24]

	)

301 
	#DOBIG32
 
DOBIG4
; DOBIG4; DOBIG4; DOBIG4; DOBIG4; DOBIG4; DOBIG4; 
	)
DOBIG4

304 
loÿl
 

305 
	$üc32_big
 (
üc
, cÚ¡ 
FAR
 * 
buf
, 
Ën
)

307 
z_üc_t
 
c
;

308 cÚ¡ 
z_üc_t
 
FAR
 *
buf4
;

310 
c
 = 
	`ZSWAP32
 ((
z_üc_t
è
üc
);

311 
c
 = ~c;

312 
Ën
 && ((
±rdiff_t
è
buf
 & 3))

314 
c
 = 
üc_bË
[4][(ø>> 24è^ *
buf
++] ^ (c << 8);

315 
Ën
--;

318 
buf4
 = (cÚ¡ 
z_üc_t
 
FAR
 *è(cÚ¡ FAR *è
buf
;

319 
buf4
--;

320 
Ën
 >= 32)

322 
DOBIG32
;

323 
Ën
 -= 32;

325 
Ën
 >= 4)

327 
DOBIG4
;

328 
Ën
 -= 4;

330 
buf4
++;

331 
buf
 = (cÚ¡ 
FAR
 *è
buf4
;

333 ià(
Ën
)

336 
c
 = 
üc_bË
[4][(ø>> 24è^ *
buf
++] ^ (c << 8);

338 --
Ën
);

339 
c
 = ~c;

340  (è(
	`ZSWAP32
 (
c
));

341 
	}
}

345 
	#GF2_DIM
 32

	)

348 
loÿl
 

349 
	$gf2_m©rix_times
 (*
m©
, 
vec
)

351 
sum
;

353 
sum
 = 0;

354 
vec
)

356 ià(
vec
 & 1)

357 
sum
 ^ğ*
m©
;

358 
vec
 >>= 1;

359 
m©
++;

361  
sum
;

362 
	}
}

365 
loÿl
 

366 
	$gf2_m©rix_squ¬e
 (*
squ¬e
, *
m©
)

368 
n
;

370 
n
 = 0;‚ < 
GF2_DIM
;‚++)

371 
squ¬e
[
n
] = 
	`gf2_m©rix_times
 (
m©
, mat[n]);

372 
	}
}

375 
loÿl
 
uLÚg


376 
	$üc32_combše_
 (
uLÚg
 
üc1
, uLÚg 
üc2
, 
z_off64_t
 
Ën2
)

378 
n
;

379 
row
;

380 
ev’
[
GF2_DIM
];

381 
odd
[
GF2_DIM
];

384 ià(
Ën2
 <= 0)

385  
üc1
;

388 
odd
[0] = 0xedb88320UL;

389 
row
 = 1;

390 
n
 = 1;‚ < 
GF2_DIM
;‚++)

392 
odd
[
n
] = 
row
;

393 
row
 <<= 1;

397 
	`gf2_m©rix_squ¬e
 (
ev’
, 
odd
);

400 
	`gf2_m©rix_squ¬e
 (
odd
, 
ev’
);

407 
	`gf2_m©rix_squ¬e
 (
ev’
, 
odd
);

408 ià(
Ën2
 & 1)

409 
üc1
 = 
	`gf2_m©rix_times
 (
ev’
, crc1);

410 
Ën2
 >>= 1;

413 ià(
Ën2
 == 0)

417 
	`gf2_m©rix_squ¬e
 (
odd
, 
ev’
);

418 ià(
Ën2
 & 1)

419 
üc1
 = 
	`gf2_m©rix_times
 (
odd
, crc1);

420 
Ën2
 >>= 1;

424 
Ën2
 != 0);

427 
üc1
 ^ğ
üc2
;

428  
üc1
;

429 
	}
}

432 
uLÚg
 
ZEXPORT


433 
	$üc32_combše
 (
uLÚg
 
üc1
, uLÚg 
üc2
, 
z_off_t
 
Ën2
)

435  
	`üc32_combše_
 (
üc1
, 
üc2
, 
Ën2
);

436 
	}
}

438 
uLÚg
 
ZEXPORT


439 
	$üc32_combše64
 (
uLÚg
 
üc1
, uLÚg 
üc2
, 
z_off64_t
 
Ën2
)

441  
	`üc32_combše_
 (
üc1
, 
üc2
, 
Ën2
);

442 
	}
}

	@crc32.h

5 
loÿl
 cÚ¡ 
z_üc_t
 
FAR
 
	güc_bË
[
TBLS
][256] =

60 #ifdeà
BYFOUR


	@cuda_hello_world.h

1 
cuda_h–lo_wÜld
();

	@deflate.c

52 
	~"deæ©e.h
"

53 
	~"culzss.h
"

55 cÚ¡ 
	gdeæ©e_cİyright
[] =

70 
fl_wšdow
 
OF
 ((
deæ©e_¡©e
 * 
s
));

71 
loÿl
 
block_¡©e
 
deæ©e_¡Üed
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
æush
));

72 
loÿl
 
block_¡©e
 
deæ©e_ç¡
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
æush
));

73 #iâdeà
FASTEST


74 
loÿl
 
block_¡©e
 
deæ©e_¦ow
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
æush
));

76 
loÿl
 
block_¡©e
 
deæ©e_¾e
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
æush
));

77 
loÿl
 
block_¡©e
 
deæ©e_huff
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
æush
));

78 
loÿl
 
lm_š™
 
OF
 ((
deæ©e_¡©e
 * 
s
));

79 
loÿl
 
putShÜtMSB
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
uIÁ
 
b
));

80 
æush_³ndšg
 
OF
 ((
z_¡»amp
 
¡rm
));

81 
loÿl
 
»ad_buf
 
OF
 ((
z_¡»amp
 
¡rm
, 
By‹f
 * 
buf
, 
size
));

82 #ifdeà
ASMV


83 
m©ch_š™
 
OF
 (());

84 
uIÁ
 
lÚge¡_m©ch
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
IPos
 
cur_m©ch
));

86 
loÿl
 
uIÁ
 
lÚge¡_m©ch
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
IPos
 
cur_m©ch
));

89 #ifdeà
DEBUG


90 
loÿl
 
check_m©ch
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
IPos
 
¡¬t
, IPo 
m©ch
,

91 
Ëngth
));

98 
	#NIL
 0

	)

101 #iâdeà
TOO_FAR


102 
	#TOO_FAR
 4096

	)

111 
	scÚfig_s


113 
ush
 
	mgood_Ëngth
;

114 
ush
 
	mmax_Ïzy
;

115 
ush
 
	mniû_Ëngth
;

116 
ush
 
	mmax_chaš
;

117 
com´ess_func
 
	mfunc
;

118 } 
	tcÚfig
;

120 #ifdeà
FASTEST


121 
loÿl
 cÚ¡ 
cÚfig
 
	gcÚfigu¿tiÚ_bË
[2] = {

123  {0, 0, 0, 0, 
deæ©e_¡Üed
},

125  {4, 4, 8, 4, 
deæ©e_ç¡
}

128 
loÿl
 cÚ¡ 
cÚfig
 
	gcÚfigu¿tiÚ_bË
[10] = {

130  {0, 0, 0, 0, 
deæ©e_¡Üed
},

132  {4, 4, 8, 4, 
deæ©e_ç¡
},

134  {4, 5, 16, 8, 
deæ©e_ç¡
},

135  {4, 6, 32, 32, 
deæ©e_ç¡
},

137  {4, 4, 16, 16, 
deæ©e_¦ow
},

139  {8, 16, 32, 32, 
deæ©e_¦ow
},

140  {8, 16, 128, 128, 
deæ©e_¦ow
},

141  {8, 32, 128, 256, 
deæ©e_¦ow
},

142  {32, 128, 258, 1024, 
deæ©e_¦ow
},

143  {32, 258, 258, 4096, 
deæ©e_¦ow
}

152 
	#EQUAL
 0

	)

155 #iâdeà
NO_DUMMY_DECL


156 
	s¡©ic_Œ“_desc_s


158 
	mdummy
;

163 
	#RANK
(
f
è(((fè<< 1è- ((fè> 4 ? 9 : 0))

	)

171 
	#UPDATE_HASH
(
s
,
h
,
c
è(h = (((h)<<s->
hash_shiá
è^ (c)è& s->
hash_mask
)

	)

184 #ifdeà
FASTEST


185 
	#INSERT_STRING
(
s
, 
¡r
, 
m©ch_h—d
) \

186 (
	`UPDATE_HASH
(
s
, s->
šs_h
, s->
wšdow
[(
¡r
è+ (
MIN_MATCH
-1)]), \

187 
m©ch_h—d
 = 
s
->
h—d
[s->
šs_h
], \

188 
s
->
h—d
[s->
šs_h
] = (
Pos
)(
¡r
))

	)

190 
	#INSERT_STRING
(
s
, 
¡r
, 
m©ch_h—d
) \

191 (
	`UPDATE_HASH
(
s
, s->
šs_h
, s->
wšdow
[(
¡r
è+ (
MIN_MATCH
-1)]), \

192 
m©ch_h—d
 = 
s
->
´ev
[(
¡r
è& s->
w_mask
] = s->
h—d
[s->
šs_h
], \

193 
s
->
h—d
[s->
šs_h
] = (
Pos
)(
¡r
))

	)

200 
	#CLEAR_HASH
(
s
) \

201 
s
->
h—d
[s->
hash_size
-1] = 
NIL
; \

202 
	`zmemz”o
((
By‹f
 *)
s
->
h—d
, ()(s->
hash_size
-1)*(*s->h—d));

	)

205 
ZEXPORT


206 
	$deæ©eIn™_
 (
z_¡»amp
 
¡rm
, 
Ëv–
, cÚ¡ *
v”siÚ
, 
¡»am_size
)

208  
	`deæ©eIn™2_
 (
¡rm
, 
Ëv–
, 
Z_DEFLATED
, 
MAX_WBITS
, 
DEF_MEM_LEVEL
,

209 
Z_DEFAULT_STRATEGY
, 
v”siÚ
, 
¡»am_size
);

211 
	}
}

214 
ZEXPORT


215 
	$deæ©eIn™2_
 (
z_¡»amp
 
¡rm
, 
Ëv–
, 
m‘hod
, 
wšdowB™s
,

216 
memLev–
, 
¡¿‹gy
, cÚ¡ *
v”siÚ
,

217 
¡»am_size
)

219 
deæ©e_¡©e
 *
s
;

220 
w¿p
 = 1;

221 cÚ¡ 
my_v”siÚ
[] = 
ZLIB_VERSION
;

223 
ushf
 *
ov”Ïy
;

228 ià(
v”siÚ
 =ğ
Z_NULL
 || v”siÚ[0] !ğ
my_v”siÚ
[0] ||

229 
¡»am_size
 !ğ (
z_¡»am
))

231  
Z_VERSION_ERROR
;

233 ià(
¡rm
 =ğ
Z_NULL
)

234  
Z_STREAM_ERROR
;

236 
¡rm
->
msg
 = 
Z_NULL
;

237 ià(
¡rm
->
z®loc
 =ğ(
®loc_func
) 0)

239 #ifdeà
Z_SOLO


240  
Z_STREAM_ERROR
;

242 
¡rm
->
z®loc
 = 
zÿÎoc
;

243 
¡rm
->
İaque
 = (
voidpf
) 0;

246 ià(
¡rm
->
zä“
 =ğ(
ä“_func
) 0)

247 #ifdeà
Z_SOLO


248  
Z_STREAM_ERROR
;

250 
¡rm
->
zä“
 = 
zcä“
;

253 #ifdeà
FASTEST


254 ià(
Ëv–
 != 0)

255 
Ëv–
 = 1;

257 ià(
Ëv–
 =ğ
Z_DEFAULT_COMPRESSION
)

258 
Ëv–
 = 6;

261 ià(
wšdowB™s
 < 0)

263 
w¿p
 = 0;

264 
wšdowB™s
 = -windowBits;

266 #ifdeà
GZIP


267 ià(
wšdowB™s
 > 15)

269 
w¿p
 = 2;

270 
wšdowB™s
 -= 16;

273 ià(
memLev–
 < 1 || memLev– > 
MAX_MEM_LEVEL
 || 
m‘hod
 !ğ
Z_DEFLATED
 ||

274 
wšdowB™s
 < 8 || wšdowB™ > 15 || 
Ëv–
 < 0 ||†evel > 9 ||

275 
¡¿‹gy
 < 0 || sŒ©egy > 
Z_FIXED
)

277  
Z_STREAM_ERROR
;

279 ià(
wšdowB™s
 == 8)

280 
wšdowB™s
 = 9;

281 
s
 = (
deæ©e_¡©e
 *è
	`ZALLOC
 (
¡rm
, 1,  (deflate_state));

282 ià(
s
 =ğ
Z_NULL
)

283  
Z_MEM_ERROR
;

284 
¡rm
->
¡©e
 = (
š‹º®_¡©e
 
FAR
 *è
s
;

285 
s
->
¡rm
 = strm;

287 
	`culzss_š™
 (
s
);

289 
s
->
w¿p
 = wrap;

290 
s
->
gzh—d
 = 
Z_NULL
;

291 
s
->
w_b™s
 = 
wšdowB™s
;

292 
s
->
w_size
 = 1 << s->
w_b™s
;

293 
s
->
w_mask
 = s->
w_size
 - 1;

295 
s
->
hash_b™s
 = 
memLev–
 + 7;

296 
s
->
hash_size
 = 1 << s->
hash_b™s
;

297 
s
->
hash_mask
 = s->
hash_size
 - 1;

298 
s
->
hash_shiá
 = ((s->
hash_b™s
 + 
MIN_MATCH
 - 1) / MIN_MATCH);

300 
s
->
wšdow
 = (
By‹f
 *è
	`ZALLOC
 (
¡rm
, s->
w_size
, 2 *  (
By‹
));

301 
s
->
´ev
 = (
Posf
 *è
	`ZALLOC
 (
¡rm
, s->
w_size
,  (
Pos
));

302 
s
->
h—d
 = (
Posf
 *è
	`ZALLOC
 (
¡rm
, s->
hash_size
,  (
Pos
));

304 
s
->
high_w©”
 = 0;

306 
s
->
l™_bufsize
 = 1 << (
memLev–
 + 6);

308 
ov”Ïy
 = (
ushf
 *è
	`ZALLOC
 (
¡rm
, 
s
->
l™_bufsize
,  (
ush
) + 2);

309 
s
->
³ndšg_buf
 = (
uchf
 *è
ov”Ïy
;

310 
s
->
³ndšg_buf_size
 = (
ulg
ès->
l™_bufsize
 * ( (
ush
) + 2L);

312 ià(
s
->
wšdow
 =ğ
Z_NULL
 || s->
´ev
 =ğZ_NULL || s->
h—d
 == Z_NULL ||

313 
s
->
³ndšg_buf
 =ğ
Z_NULL
)

315 
s
->
¡©us
 = 
FINISH_STATE
;

316 
¡rm
->
msg
 = 
	`ERR_MSG
 (
Z_MEM_ERROR
);

317 
	`deæ©eEnd
 (
¡rm
);

318  
Z_MEM_ERROR
;

320 
s
->
d_buf
 = 
ov”Ïy
 + s->
l™_bufsize
 /  (
ush
);

321 
s
->
l_buf
 = s->
³ndšg_buf
 + (1 +  (
ush
)è* s->
l™_bufsize
;

323 
s
->
Ëv–
 =†evel;

324 
s
->
¡¿‹gy
 = strategy;

325 
s
->
m‘hod
 = (
By‹
) method;

327  
	`deæ©eRe£t
 (
¡rm
);

328 
	}
}

331 
ZEXPORT


332 
	$deæ©eS‘DiùiÚ¬y
 (
z_¡»amp
 
¡rm
, cÚ¡ 
By‹f
 * 
diùiÚ¬y
,

333 
uIÁ
 
diùL’gth
)

335 
deæ©e_¡©e
 *
s
;

336 
uIÁ
 
¡r
, 
n
;

337 
w¿p
;

338 
ava
;

339 
z_cÚ¡
 *
Ãxt
;

341 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 =ğZ_NULL || 
diùiÚ¬y
 == Z_NULL)

342  
Z_STREAM_ERROR
;

343 
s
 = 
¡rm
->
¡©e
;

344 
w¿p
 = 
s
->wrap;

345 ià(
w¿p
 =ğ2 || (w¿°=ğ1 && 
s
->
¡©us
 !ğ
INIT_STATE
è|| s->
lookah—d
)

346  
Z_STREAM_ERROR
;

349 ià(
w¿p
 == 1)

350 
¡rm
->
adËr
 = 
	`adËr32
 (¡rm->adËr, 
diùiÚ¬y
, 
diùL’gth
);

351 
s
->
w¿p
 = 0;

354 ià(
diùL’gth
 >ğ
s
->
w_size
)

356 ià(
w¿p
 == 0)

358 
	`CLEAR_HASH
 (
s
);

359 
s
->
¡r¡¬t
 = 0;

360 
s
->
block_¡¬t
 = 0L;

361 
s
->
š£¹
 = 0;

363 
diùiÚ¬y
 +ğ
diùL’gth
 - 
s
->
w_size
;

364 
diùL’gth
 = 
s
->
w_size
;

368 
ava
 = 
¡rm
->
ava_š
;

369 
Ãxt
 = 
¡rm
->
Ãxt_š
;

370 
¡rm
->
ava_š
 = 
diùL’gth
;

371 
¡rm
->
Ãxt_š
 = (
z_cÚ¡
 
By‹f
 *è
diùiÚ¬y
;

372 
	`fl_wšdow
 (
s
);

373 
s
->
lookah—d
 >ğ
MIN_MATCH
)

375 
¡r
 = 
s
->
¡r¡¬t
;

376 
n
 = 
s
->
lookah—d
 - (
MIN_MATCH
 - 1);

379 
	`UPDATE_HASH
 (
s
, s->
šs_h
, s->
wšdow
[
¡r
 + 
MIN_MATCH
 - 1]);

380 #iâdeà
FASTEST


381 
s
->
´ev
[
¡r
 & s->
w_mask
] = s->
h—d
[s->
šs_h
];

383 
s
->
h—d
[s->
šs_h
] = (
Pos
è
¡r
;

384 
¡r
++;

386 --
n
);

387 
s
->
¡r¡¬t
 = 
¡r
;

388 
s
->
lookah—d
 = 
MIN_MATCH
 - 1;

389 
	`fl_wšdow
 (
s
);

391 
s
->
¡r¡¬t
 +ğs->
lookah—d
;

392 
s
->
block_¡¬t
 = (ès->
¡r¡¬t
;

393 
s
->
š£¹
 = s->
lookah—d
;

394 
s
->
lookah—d
 = 0;

395 
s
->
m©ch_Ëngth
 = s->
´ev_Ëngth
 = 
MIN_MATCH
 - 1;

396 
s
->
m©ch_avaabË
 = 0;

397 
¡rm
->
Ãxt_š
 = 
Ãxt
;

398 
¡rm
->
ava_š
 = 
ava
;

399 
s
->
w¿p
 = wrap;

400  
Z_OK
;

401 
	}
}

404 
ZEXPORT


405 
	$deæ©eRe£tK“p
 (
z_¡»amp
 
¡rm
)

407 
deæ©e_¡©e
 *
s
;

409 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL ||

410 
¡rm
->
z®loc
 =ğ(
®loc_func
è0 || sŒm->
zä“
 =ğ(
ä“_func
) 0)

412  
Z_STREAM_ERROR
;

415 
¡rm
->
tÙ®_š
 = sŒm->
tÙ®_out
 = 0;

416 
¡rm
->
msg
 = 
Z_NULL
;

417 
¡rm
->
d©a_ty³
 = 
Z_UNKNOWN
;

419 
s
 = (
deæ©e_¡©e
 *è
¡rm
->
¡©e
;

420 
s
->
³ndšg
 = 0;

421 
s
->
³ndšg_out
 = s->
³ndšg_buf
;

423 ià(
s
->
w¿p
 < 0)

425 
s
->
w¿p
 = -s->wrap;

427 
s
->
¡©us
 = s->
w¿p
 ? 
INIT_STATE
 : 
BUSY_STATE
;

428 
¡rm
->
adËr
 =

429 #ifdeà
GZIP


430 
s
->
w¿p
 =ğ2 ? 
	`üc32
 (0L, 
Z_NULL
, 0) :

432 
	`adËr32
 (0L, 
Z_NULL
, 0);

433 
s
->
Ï¡_æush
 = 
Z_NO_FLUSH
;

435 
	`_Œ_š™
 (
s
);

437  
Z_OK
;

438 
	}
}

441 
ZEXPORT


442 
	$deæ©eRe£t
 (
z_¡»amp
 
¡rm
)

444 
»t
;

446 
»t
 = 
	`deæ©eRe£tK“p
 (
¡rm
);

447 ià(
»t
 =ğ
Z_OK
)

448 
	`lm_š™
 (
¡rm
->
¡©e
);

449  
»t
;

450 
	}
}

453 
ZEXPORT


454 
	$deæ©eS‘H—d”
 (
z_¡»amp
 
¡rm
, 
gz_h—d”p
 
h—d
)

456 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

457  
Z_STREAM_ERROR
;

458 ià(
¡rm
->
¡©e
->
w¿p
 != 2)

459  
Z_STREAM_ERROR
;

460 
¡rm
->
¡©e
->
gzh—d
 = 
h—d
;

461  
Z_OK
;

462 
	}
}

465 
ZEXPORT


466 
	$deæ©eP’dšg
 (
z_¡»amp
 
¡rm
, *
³ndšg
, *
b™s
)

468 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

469  
Z_STREAM_ERROR
;

470 ià(
³ndšg
 !ğ
Z_NULL
)

471 *
³ndšg
 = 
¡rm
->
¡©e
->pending;

472 ià(
b™s
 !ğ
Z_NULL
)

473 *
b™s
 = 
¡rm
->
¡©e
->
bi_v®id
;

474  
Z_OK
;

475 
	}
}

478 
ZEXPORT


479 
	$deæ©ePrime
 (
z_¡»amp
 
¡rm
, 
b™s
, 
v®ue
)

481 
deæ©e_¡©e
 *
s
;

482 
put
;

484 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

485  
Z_STREAM_ERROR
;

486 
s
 = 
¡rm
->
¡©e
;

487 ià((
By‹f
 *è(
s
->
d_buf
è< s->
³ndšg_out
 + ((
Buf_size
 + 7) >> 3))

488  
Z_BUF_ERROR
;

491 
put
 = 
Buf_size
 - 
s
->
bi_v®id
;

492 ià(
put
 > 
b™s
)

493 
put
 = 
b™s
;

494 
s
->
bi_buf
 |ğ(
ush
è((
v®ue
 & ((1 << 
put
è- 1)è<< s->
bi_v®id
);

495 
s
->
bi_v®id
 +ğ
put
;

496 
	`_Œ_æush_b™s
 (
s
);

497 
v®ue
 >>ğ
put
;

498 
b™s
 -ğ
put
;

500 
b™s
);

501  
Z_OK
;

502 
	}
}

505 
ZEXPORT


506 
	$deæ©eP¬ams
 (
z_¡»amp
 
¡rm
, 
Ëv–
, 
¡¿‹gy
)

508 
deæ©e_¡©e
 *
s
;

509 
com´ess_func
 
func
;

510 
”r
 = 
Z_OK
;

512 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

513  
Z_STREAM_ERROR
;

514 
s
 = 
¡rm
->
¡©e
;

516 #ifdeà
FASTEST


517 ià(
Ëv–
 != 0)

518 
Ëv–
 = 1;

520 ià(
Ëv–
 =ğ
Z_DEFAULT_COMPRESSION
)

521 
Ëv–
 = 6;

523 ià(
Ëv–
 < 0 ||†ev– > 9 || 
¡¿‹gy
 < 0 || sŒ©egy > 
Z_FIXED
)

525  
Z_STREAM_ERROR
;

527 
func
 = 
cÚfigu¿tiÚ_bË
[
s
->
Ëv–
].func;

529 ià((
¡¿‹gy
 !ğ
s
->¡¿‹gy || 
func
 !ğ
cÚfigu¿tiÚ_bË
[
Ëv–
].func) &&

530 
¡rm
->
tÙ®_š
 != 0)

533 
”r
 = 
	`deæ©e
 (
¡rm
, 
Z_BLOCK
);

534 ià(
”r
 =ğ
Z_BUF_ERROR
 && 
s
->
³ndšg
 == 0)

535 
”r
 = 
Z_OK
;

537 ià(
s
->
Ëv–
 !=†evel)

539 
s
->
Ëv–
 =†evel;

540 
s
->
max_Ïzy_m©ch
 = 
cÚfigu¿tiÚ_bË
[
Ëv–
].
max_Ïzy
;

541 
s
->
good_m©ch
 = 
cÚfigu¿tiÚ_bË
[
Ëv–
].
good_Ëngth
;

542 
s
->
niû_m©ch
 = 
cÚfigu¿tiÚ_bË
[
Ëv–
].
niû_Ëngth
;

543 
s
->
max_chaš_Ëngth
 = 
cÚfigu¿tiÚ_bË
[
Ëv–
].
max_chaš
;

545 
s
->
¡¿‹gy
 = strategy;

546  
”r
;

547 
	}
}

550 
ZEXPORT


551 
	$deæ©eTuÃ
 (
z_¡»amp
 
¡rm
, 
good_Ëngth
, 
max_Ïzy
, 
niû_Ëngth
,

552 
max_chaš
)

554 
deæ©e_¡©e
 *
s
;

556 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

557  
Z_STREAM_ERROR
;

558 
s
 = 
¡rm
->
¡©e
;

559 
s
->
good_m©ch
 = 
good_Ëngth
;

560 
s
->
max_Ïzy_m©ch
 = 
max_Ïzy
;

561 
s
->
niû_m©ch
 = 
niû_Ëngth
;

562 
s
->
max_chaš_Ëngth
 = 
max_chaš
;

563  
Z_OK
;

564 
	}
}

583 
uLÚg
 
ZEXPORT


584 
	$deæ©eBound
 (
z_¡»amp
 
¡rm
, 
uLÚg
 
sourûL’
)

586 
deæ©e_¡©e
 *
s
;

587 
uLÚg
 
com¶’
, 
w¿¶’
;

588 
By‹f
 *
¡r
;

591 
com¶’
 = 
sourûL’
 + ((sourceLen + 7) >> 3) + ((sourceLen + 63) >> 6) + 5;

594 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

595  
com¶’
 + 6;

598 
s
 = 
¡rm
->
¡©e
;

599 
s
->
w¿p
)

602 
w¿¶’
 = 0;

605 
w¿¶’
 = 6 + (
s
->
¡r¡¬t
 ? 4 : 0);

608 
w¿¶’
 = 18;

609 ià(
s
->
gzh—d
 !ğ
Z_NULL
)

611 ià(
s
->
gzh—d
->
exŒa
 !ğ
Z_NULL
)

612 
w¿¶’
 +ğ2 + 
s
->
gzh—d
->
exŒa_Ën
;

613 
¡r
 = 
s
->
gzh—d
->
Çme
;

614 ià(
¡r
 !ğ
Z_NULL
)

617 
w¿¶’
++;

619 *
¡r
++);

620 
¡r
 = 
s
->
gzh—d
->
comm’t
;

621 ià(
¡r
 !ğ
Z_NULL
)

624 
w¿¶’
++;

626 *
¡r
++);

627 ià(
s
->
gzh—d
->
hüc
)

628 
w¿¶’
 += 2;

632 
w¿¶’
 = 6;

636 ià(
s
->
w_b™s
 !ğ15 || s->
hash_b™s
 != 8 + 7)

637  
com¶’
 + 
w¿¶’
;

640  
sourûL’
 + (sourceLen >> 12) + (sourceLen >> 14) +

641 (
sourûL’
 >> 25è+ 13 - 6 + 
w¿¶’
;

642 
	}
}

649 
loÿl
 

650 
	$putShÜtMSB
 (
deæ©e_¡©e
 * 
s
, 
uIÁ
 
b
)

652 
	`put_by‹
 (
s
, (
By‹
è(
b
 >> 8));

653 
	`put_by‹
 (
s
, (
By‹
è(
b
 & 0xff));

654 
	}
}

663 
	$æush_³ndšg
 (
z_¡»amp
 
¡rm
)

665 
Ën
;

666 
deæ©e_¡©e
 *
s
 = 
¡rm
->
¡©e
;

668 
	`_Œ_æush_b™s
 (
s
);

669 
Ën
 = 
s
->
³ndšg
;

670 ià(
Ën
 > 
¡rm
->
ava_out
)

671 
Ën
 = 
¡rm
->
ava_out
;

672 ià(
Ën
 == 0)

675 
	`zmemıy
 (
¡rm
->
Ãxt_out
, 
s
->
³ndšg_out
, 
Ën
);

676 
¡rm
->
Ãxt_out
 +ğ
Ën
;

677 
s
->
³ndšg_out
 +ğ
Ën
;

678 
¡rm
->
tÙ®_out
 +ğ
Ën
;

679 
¡rm
->
ava_out
 -ğ
Ën
;

680 
s
->
³ndšg
 -ğ
Ën
;

681 ià(
s
->
³ndšg
 == 0)

683 
s
->
³ndšg_out
 = s->
³ndšg_buf
;

685 
	}
}

688 
ZEXPORT


689 
	$deæ©e
 (
z_¡»amp
 
¡rm
, 
æush
)

691 
Şd_æush
;

692 
deæ©e_¡©e
 *
s
;

694 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 =ğZ_NULL || 
æush
 > 
Z_BLOCK
 || flush < 0)

696  
Z_STREAM_ERROR
;

698 
s
 = 
¡rm
->
¡©e
;

700 ià(
¡rm
->
Ãxt_out
 =ğ
Z_NULL
 ||

701 (
¡rm
->
Ãxt_š
 =ğ
Z_NULL
 && sŒm->
ava_š
 != 0) ||

702 (
s
->
¡©us
 =ğ
FINISH_STATE
 && 
æush
 !ğ
Z_FINISH
))

704 
	`ERR_RETURN
 (
¡rm
, 
Z_STREAM_ERROR
);

706 ià(
¡rm
->
ava_out
 == 0)

707 
	`ERR_RETURN
 (
¡rm
, 
Z_BUF_ERROR
);

709 
s
->
¡rm
 = strm;

710 
Şd_æush
 = 
s
->
Ï¡_æush
;

711 
s
->
Ï¡_æush
 = 
æush
;

714 ià(
s
->
¡©us
 =ğ
INIT_STATE
)

716 #ifdeà
GZIP


717 ià(
s
->
w¿p
 == 2)

719 
¡rm
->
adËr
 = 
	`üc32
 (0L, 
Z_NULL
, 0);

720 
	`put_by‹
 (
s
, 31);

721 
	`put_by‹
 (
s
, 139);

722 
	`put_by‹
 (
s
, 8);

723 ià(
s
->
gzh—d
 =ğ
Z_NULL
)

725 
	`put_by‹
 (
s
, 0);

726 
	`put_by‹
 (
s
, 0);

727 
	`put_by‹
 (
s
, 0);

728 
	`put_by‹
 (
s
, 0);

729 
	`put_by‹
 (
s
, 0);

730 
	`put_by‹
 (
s
, s->
Ëv–
 == 9 ? 2 :

731 (
s
->
¡¿‹gy
 >ğ
Z_HUFFMAN_ONLY
 || s->
Ëv–
 < 2 ?

733 
	`put_by‹
 (
s
, 
OS_CODE
);

734 
s
->
¡©us
 = 
BUSY_STATE
;

738 
	`put_by‹
 (
s
, (s->
gzh—d
->
‹xt
 ? 1 : 0) +

739 (
s
->
gzh—d
->
hüc
 ? 2 : 0) +

740 (
s
->
gzh—d
->
exŒa
 =ğ
Z_NULL
 ? 0 : 4) +

741 (
s
->
gzh—d
->
Çme
 =ğ
Z_NULL
 ? 0 : 8) +

742 (
s
->
gzh—d
->
comm’t
 =ğ
Z_NULL
 ? 0 : 16));

743 
	`put_by‹
 (
s
, (
By‹
è(s->
gzh—d
->
time
 & 0xff));

744 
	`put_by‹
 (
s
, (
By‹
è((s->
gzh—d
->
time
 >> 8) & 0xff));

745 
	`put_by‹
 (
s
, (
By‹
è((s->
gzh—d
->
time
 >> 16) & 0xff));

746 
	`put_by‹
 (
s
, (
By‹
è((s->
gzh—d
->
time
 >> 24) & 0xff));

747 
	`put_by‹
 (
s
, s->
Ëv–
 == 9 ? 2 :

748 (
s
->
¡¿‹gy
 >ğ
Z_HUFFMAN_ONLY
 || s->
Ëv–
 < 2 ?

750 
	`put_by‹
 (
s
, s->
gzh—d
->
os
 & 0xff);

751 ià(
s
->
gzh—d
->
exŒa
 !ğ
Z_NULL
)

753 
	`put_by‹
 (
s
, s->
gzh—d
->
exŒa_Ën
 & 0xff);

754 
	`put_by‹
 (
s
, (s->
gzh—d
->
exŒa_Ën
 >> 8) & 0xff);

756 ià(
s
->
gzh—d
->
hüc
)

757 
¡rm
->
adËr
 = 
	`üc32
 (¡rm->adËr, 
s
->
³ndšg_buf
, s->
³ndšg
);

758 
s
->
gzšdex
 = 0;

759 
s
->
¡©us
 = 
EXTRA_STATE
;

765 
uIÁ
 
h—d”
 = (
Z_DEFLATED
 + ((
s
->
w_b™s
 - 8) << 4)) << 8;

766 
uIÁ
 
Ëv–_æags
;

768 ià(
s
->
¡¿‹gy
 >ğ
Z_HUFFMAN_ONLY
 || s->
Ëv–
 < 2)

769 
Ëv–_æags
 = 0;

770 ià(
s
->
Ëv–
 < 6)

771 
Ëv–_æags
 = 1;

772 ià(
s
->
Ëv–
 == 6)

773 
Ëv–_æags
 = 2;

775 
Ëv–_æags
 = 3;

776 
h—d”
 |ğ(
Ëv–_æags
 << 6);

777 ià(
s
->
¡r¡¬t
 != 0)

778 
h—d”
 |ğ
PRESET_DICT
;

779 
h—d”
 += 31 - (header % 31);

781 
s
->
¡©us
 = 
BUSY_STATE
;

782 
	`putShÜtMSB
 (
s
, 
h—d”
);

785 ià(
s
->
¡r¡¬t
 != 0)

787 
	`putShÜtMSB
 (
s
, (
uIÁ
è(
¡rm
->
adËr
 >> 16));

788 
	`putShÜtMSB
 (
s
, (
uIÁ
è(
¡rm
->
adËr
 & 0xffff));

790 
¡rm
->
adËr
 = 
	`adËr32
 (0L, 
Z_NULL
, 0);

793 #ifdeà
GZIP


794 ià(
s
->
¡©us
 =ğ
EXTRA_STATE
)

796 ià(
s
->
gzh—d
->
exŒa
 !ğ
Z_NULL
)

798 
uIÁ
 
beg
 = 
s
->
³ndšg
;

800 
s
->
gzšdex
 < (s->
gzh—d
->
exŒa_Ën
 & 0xffff))

802 ià(
s
->
³ndšg
 =ğs->
³ndšg_buf_size
)

804 ià(
s
->
gzh—d
->
hüc
 && s->
³ndšg
 > 
beg
)

805 
¡rm
->
adËr
 = 
	`üc32
 (¡rm->adËr, 
s
->
³ndšg_buf
 + 
beg
,

806 
s
->
³ndšg
 - 
beg
);

807 
	`æush_³ndšg
 (
¡rm
);

808 
beg
 = 
s
->
³ndšg
;

809 ià(
s
->
³ndšg
 =ğs->
³ndšg_buf_size
)

812 
	`put_by‹
 (
s
, s->
gzh—d
->
exŒa
[s->
gzšdex
]);

813 
s
->
gzšdex
++;

815 ià(
s
->
gzh—d
->
hüc
 && s->
³ndšg
 > 
beg
)

816 
¡rm
->
adËr
 = 
	`üc32
 (¡rm->adËr, 
s
->
³ndšg_buf
 + 
beg
,

817 
s
->
³ndšg
 - 
beg
);

818 ià(
s
->
gzšdex
 =ğs->
gzh—d
->
exŒa_Ën
)

820 
s
->
gzšdex
 = 0;

821 
s
->
¡©us
 = 
NAME_STATE
;

825 
s
->
¡©us
 = 
NAME_STATE
;

827 ià(
s
->
¡©us
 =ğ
NAME_STATE
)

829 ià(
s
->
gzh—d
->
Çme
 !ğ
Z_NULL
)

831 
uIÁ
 
beg
 = 
s
->
³ndšg
;

832 
v®
;

836 ià(
s
->
³ndšg
 =ğs->
³ndšg_buf_size
)

838 ià(
s
->
gzh—d
->
hüc
 && s->
³ndšg
 > 
beg
)

839 
¡rm
->
adËr
 = 
	`üc32
 (¡rm->adËr, 
s
->
³ndšg_buf
 + 
beg
,

840 
s
->
³ndšg
 - 
beg
);

841 
	`æush_³ndšg
 (
¡rm
);

842 
beg
 = 
s
->
³ndšg
;

843 ià(
s
->
³ndšg
 =ğs->
³ndšg_buf_size
)

845 
v®
 = 1;

849 
v®
 = 
s
->
gzh—d
->
Çme
[s->
gzšdex
++];

850 
	`put_by‹
 (
s
, 
v®
);

852 
v®
 != 0);

853 ià(
s
->
gzh—d
->
hüc
 && s->
³ndšg
 > 
beg
)

854 
¡rm
->
adËr
 = 
	`üc32
 (¡rm->adËr, 
s
->
³ndšg_buf
 + 
beg
,

855 
s
->
³ndšg
 - 
beg
);

856 ià(
v®
 == 0)

858 
s
->
gzšdex
 = 0;

859 
s
->
¡©us
 = 
COMMENT_STATE
;

863 
s
->
¡©us
 = 
COMMENT_STATE
;

865 ià(
s
->
¡©us
 =ğ
COMMENT_STATE
)

867 ià(
s
->
gzh—d
->
comm’t
 !ğ
Z_NULL
)

869 
uIÁ
 
beg
 = 
s
->
³ndšg
;

870 
v®
;

874 ià(
s
->
³ndšg
 =ğs->
³ndšg_buf_size
)

876 ià(
s
->
gzh—d
->
hüc
 && s->
³ndšg
 > 
beg
)

877 
¡rm
->
adËr
 = 
	`üc32
 (¡rm->adËr, 
s
->
³ndšg_buf
 + 
beg
,

878 
s
->
³ndšg
 - 
beg
);

879 
	`æush_³ndšg
 (
¡rm
);

880 
beg
 = 
s
->
³ndšg
;

881 ià(
s
->
³ndšg
 =ğs->
³ndšg_buf_size
)

883 
v®
 = 1;

887 
v®
 = 
s
->
gzh—d
->
comm’t
[s->
gzšdex
++];

888 
	`put_by‹
 (
s
, 
v®
);

890 
v®
 != 0);

891 ià(
s
->
gzh—d
->
hüc
 && s->
³ndšg
 > 
beg
)

892 
¡rm
->
adËr
 = 
	`üc32
 (¡rm->adËr, 
s
->
³ndšg_buf
 + 
beg
,

893 
s
->
³ndšg
 - 
beg
);

894 ià(
v®
 == 0)

895 
s
->
¡©us
 = 
HCRC_STATE
;

898 
s
->
¡©us
 = 
HCRC_STATE
;

900 ià(
s
->
¡©us
 =ğ
HCRC_STATE
)

902 ià(
s
->
gzh—d
->
hüc
)

904 ià(
s
->
³ndšg
 + 2 > s->
³ndšg_buf_size
)

905 
	`æush_³ndšg
 (
¡rm
);

906 ià(
s
->
³ndšg
 + 2 <ğs->
³ndšg_buf_size
)

908 
	`put_by‹
 (
s
, (
By‹
è(
¡rm
->
adËr
 & 0xff));

909 
	`put_by‹
 (
s
, (
By‹
è((
¡rm
->
adËr
 >> 8) & 0xff));

910 
¡rm
->
adËr
 = 
	`üc32
 (0L, 
Z_NULL
, 0);

911 
s
->
¡©us
 = 
BUSY_STATE
;

915 
s
->
¡©us
 = 
BUSY_STATE
;

920 ià(
s
->
³ndšg
 != 0)

922 
	`æush_³ndšg
 (
¡rm
);

923 ià(
¡rm
->
ava_out
 == 0)

931 
s
->
Ï¡_æush
 = -1;

932  
Z_OK
;

940 ià(
¡rm
->
ava_š
 =ğ0 && 
	`RANK
 (
æush
è<ğRANK (
Şd_æush
) &&

941 
æush
 !ğ
Z_FINISH
)

943 
	`ERR_RETURN
 (
¡rm
, 
Z_BUF_ERROR
);

947 ià(
s
->
¡©us
 =ğ
FINISH_STATE
 && 
¡rm
->
ava_š
 != 0)

949 
	`ERR_RETURN
 (
¡rm
, 
Z_BUF_ERROR
);

954 ià(
¡rm
->
ava_š
 !ğ0 || 
s
->
lookah—d
 != 0 ||

955 (
æush
 !ğ
Z_NO_FLUSH
 && 
s
->
¡©us
 !ğ
FINISH_STATE
))

957 
block_¡©e
 
b¡©e
;

959 
b¡©e
 = 
s
->
¡¿‹gy
 =ğ
Z_HUFFMAN_ONLY
 ? 
	`deæ©e_huff
 (s, 
æush
) :

960 (
s
->
¡¿‹gy
 =ğ
Z_RLE
 ? 
	`deæ©e_¾e
 (s, 
æush
) :

961 (*(
cÚfigu¿tiÚ_bË
[
s
->
Ëv–
].
func
)è(s, 
æush
));

963 ià(
b¡©e
 =ğ
fšish_¡¬‹d
 || b¡©=ğ
fšish_dÚe
)

965 
s
->
¡©us
 = 
FINISH_STATE
;

967 ià(
b¡©e
 =ğ
Ãed_mÜe
 || b¡©=ğ
fšish_¡¬‹d
)

969 ià(
¡rm
->
ava_out
 == 0)

971 
s
->
Ï¡_æush
 = -1;

973  
Z_OK
;

982 ià(
b¡©e
 =ğ
block_dÚe
)

984 ià(
æush
 =ğ
Z_PARTIAL_FLUSH
)

986 
	`_Œ_®ign
 (
s
);

988 ià(
æush
 !ğ
Z_BLOCK
)

990 
	`_Œ_¡Üed_block
 (
s
, (*) 0, 0L, 0);

994 ià(
æush
 =ğ
Z_FULL_FLUSH
)

996 
	`CLEAR_HASH
 (
s
);

997 ià(
s
->
lookah—d
 == 0)

999 
s
->
¡r¡¬t
 = 0;

1000 
s
->
block_¡¬t
 = 0L;

1001 
s
->
š£¹
 = 0;

1005 
	`æush_³ndšg
 (
¡rm
);

1006 ià(
¡rm
->
ava_out
 == 0)

1008 
s
->
Ï¡_æush
 = -1;

1009  
Z_OK
;

1013 
	`As£¹
 (
¡rm
->
ava_out
 > 0, "bug2");

1015 ià(
æush
 !ğ
Z_FINISH
)

1016  
Z_OK
;

1017 ià(
s
->
w¿p
 <= 0)

1018  
Z_STREAM_END
;

1021 #ifdeà
GZIP


1022 ià(
s
->
w¿p
 == 2)

1024 
	`put_by‹
 (
s
, (
By‹
è(
¡rm
->
adËr
 & 0xff));

1025 
	`put_by‹
 (
s
, (
By‹
è((
¡rm
->
adËr
 >> 8) & 0xff));

1026 
	`put_by‹
 (
s
, (
By‹
è((
¡rm
->
adËr
 >> 16) & 0xff));

1027 
	`put_by‹
 (
s
, (
By‹
è((
¡rm
->
adËr
 >> 24) & 0xff));

1028 
	`put_by‹
 (
s
, (
By‹
è(
¡rm
->
tÙ®_š
 & 0xff));

1029 
	`put_by‹
 (
s
, (
By‹
è((
¡rm
->
tÙ®_š
 >> 8) & 0xff));

1030 
	`put_by‹
 (
s
, (
By‹
è((
¡rm
->
tÙ®_š
 >> 16) & 0xff));

1031 
	`put_by‹
 (
s
, (
By‹
è((
¡rm
->
tÙ®_š
 >> 24) & 0xff));

1036 
	`putShÜtMSB
 (
s
, (
uIÁ
è(
¡rm
->
adËr
 >> 16));

1037 
	`putShÜtMSB
 (
s
, (
uIÁ
è(
¡rm
->
adËr
 & 0xffff));

1039 
	`æush_³ndšg
 (
¡rm
);

1043 ià(
s
->
w¿p
 > 0)

1044 
s
->
w¿p
 = -s->wrap;

1045  
s
->
³ndšg
 !ğ0 ? 
Z_OK
 : 
Z_STREAM_END
;

1046 
	}
}

1049 
ZEXPORT


1050 
	$deæ©eEnd
 (
z_¡»amp
 
¡rm
)

1052 
¡©us
;

1054 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

1055  
Z_STREAM_ERROR
;

1057 
¡©us
 = 
¡rm
->
¡©e
->status;

1058 ià(
¡©us
 !ğ
INIT_STATE
 &&

1059 
¡©us
 !ğ
EXTRA_STATE
 &&

1060 
¡©us
 !ğ
NAME_STATE
 &&

1061 
¡©us
 !ğ
COMMENT_STATE
 &&

1062 
¡©us
 !ğ
HCRC_STATE
 && stu !ğ
BUSY_STATE
 && stu !ğ
FINISH_STATE
)

1064  
Z_STREAM_ERROR
;

1068 
	`TRY_FREE
 (
¡rm
, sŒm->
¡©e
->
³ndšg_buf
);

1069 
	`TRY_FREE
 (
¡rm
, sŒm->
¡©e
->
h—d
);

1070 
	`TRY_FREE
 (
¡rm
, sŒm->
¡©e
->
´ev
);

1071 
	`TRY_FREE
 (
¡rm
, sŒm->
¡©e
->
wšdow
);

1072 #ifdeà
CS194CULZSS


1073 
	`culzss_de¡roy
 (
¡rm
->
¡©e
);

1075 
	`ZFREE
 (
¡rm
, sŒm->
¡©e
);

1076 
¡rm
->
¡©e
 = 
Z_NULL
;

1078  
¡©us
 =ğ
BUSY_STATE
 ? 
Z_DATA_ERROR
 : 
Z_OK
;

1079 
	}
}

1086 
ZEXPORT


1087 
	$deæ©eCİy
 (
z_¡»amp
 
de¡
, z_¡»am°
sourû
)

1089 #ifdeà
MAXSEG_64K


1090  
Z_STREAM_ERROR
;

1092 
deæ©e_¡©e
 *
ds
;

1093 
deæ©e_¡©e
 *
ss
;

1094 
ushf
 *
ov”Ïy
;

1097 ià(
sourû
 =ğ
Z_NULL
 || 
de¡
 =ğZ_NULL || sourû->
¡©e
 == Z_NULL)

1099  
Z_STREAM_ERROR
;

1102 
ss
 = 
sourû
->
¡©e
;

1104 
	`zmemıy
 ((
voidpf
è
de¡
, (voidpfè
sourû
,  (
z_¡»am
));

1106 
ds
 = (
deæ©e_¡©e
 *è
	`ZALLOC
 (
de¡
, 1,  (deflate_state));

1107 ià(
ds
 =ğ
Z_NULL
)

1108  
Z_MEM_ERROR
;

1109 
de¡
->
¡©e
 = (
š‹º®_¡©e
 
FAR
 *è
ds
;

1110 
	`zmemıy
 ((
voidpf
è
ds
, (voidpfè
ss
,  (
deæ©e_¡©e
));

1111 
ds
->
¡rm
 = 
de¡
;

1113 
ds
->
wšdow
 = (
By‹f
 *è
	`ZALLOC
 (
de¡
, ds->
w_size
, 2 *  (
By‹
));

1114 
ds
->
´ev
 = (
Posf
 *è
	`ZALLOC
 (
de¡
, ds->
w_size
,  (
Pos
));

1115 
ds
->
h—d
 = (
Posf
 *è
	`ZALLOC
 (
de¡
, ds->
hash_size
,  (
Pos
));

1116 
ov”Ïy
 = (
ushf
 *è
	`ZALLOC
 (
de¡
, 
ds
->
l™_bufsize
,  (
ush
) + 2);

1117 
ds
->
³ndšg_buf
 = (
uchf
 *è
ov”Ïy
;

1119 ià(
ds
->
wšdow
 =ğ
Z_NULL
 || ds->
´ev
 =ğZ_NULL || ds->
h—d
 == Z_NULL ||

1120 
ds
->
³ndšg_buf
 =ğ
Z_NULL
)

1122 
	`deæ©eEnd
 (
de¡
);

1123  
Z_MEM_ERROR
;

1126 
	`zmemıy
 (
ds
->
wšdow
, 
ss
->wšdow, ds->
w_size
 * 2 *  (
By‹
));

1127 
	`zmemıy
 ((
voidpf
è
ds
->
´ev
, (voidpfè
ss
->´ev, ds->
w_size
 *  (
Pos
));

1128 
	`zmemıy
 ((
voidpf
è
ds
->
h—d
, (voidpfè
ss
->head,

1129 
ds
->
hash_size
 *  (
Pos
));

1130 
	`zmemıy
 (
ds
->
³ndšg_buf
, 
ss
->³ndšg_buf, (
uIÁ
èds->
³ndšg_buf_size
);

1132 
ds
->
³ndšg_out
 = ds->
³ndšg_buf
 + (
ss
->pending_out - ss->pending_buf);

1133 
ds
->
d_buf
 = 
ov”Ïy
 + ds->
l™_bufsize
 /  (
ush
);

1134 
ds
->
l_buf
 = ds->
³ndšg_buf
 + (1 +  (
ush
)è* ds->
l™_bufsize
;

1136 
ds
->
l_desc
.
dyn_Œ“
 = ds->
dyn_É»e
;

1137 
ds
->
d_desc
.
dyn_Œ“
 = ds->
dyn_dŒ“
;

1138 
ds
->
bl_desc
.
dyn_Œ“
 = ds->
bl_Œ“
;

1140  
Z_OK
;

1142 
	}
}

1151 
loÿl
 

1152 
	$»ad_buf
 (
z_¡»amp
 
¡rm
, 
By‹f
 * 
buf
, 
size
)

1154 
Ën
 = 
¡rm
->
ava_š
;

1156 ià(
Ën
 > 
size
)

1157 
Ën
 = 
size
;

1158 ià(
Ën
 == 0)

1161 
¡rm
->
ava_š
 -ğ
Ën
;

1163 
	`zmemıy
 (
buf
, 
¡rm
->
Ãxt_š
, 
Ën
);

1164 ià(
¡rm
->
¡©e
->
w¿p
 == 1)

1166 
¡rm
->
adËr
 = 
	`adËr32
 (¡rm->adËr, 
buf
, 
Ën
);

1168 #ifdeà
GZIP


1169 ià(
¡rm
->
¡©e
->
w¿p
 == 2)

1171 
¡rm
->
adËr
 = 
	`üc32
 (¡rm->adËr, 
buf
, 
Ën
);

1174 
¡rm
->
Ãxt_š
 +ğ
Ën
;

1175 
¡rm
->
tÙ®_š
 +ğ
Ën
;

1177  (è
Ën
;

1178 
	}
}

1183 
loÿl
 

1184 
	$lm_š™
 (
deæ©e_¡©e
 * 
s
)

1186 
s
->
wšdow_size
 = (
ulg
è2L *s->
w_size
;

1188 
	`CLEAR_HASH
 (
s
);

1192 
s
->
max_Ïzy_m©ch
 = 
cÚfigu¿tiÚ_bË
[s->
Ëv–
].
max_Ïzy
;

1193 
s
->
good_m©ch
 = 
cÚfigu¿tiÚ_bË
[s->
Ëv–
].
good_Ëngth
;

1194 
s
->
niû_m©ch
 = 
cÚfigu¿tiÚ_bË
[s->
Ëv–
].
niû_Ëngth
;

1195 
s
->
max_chaš_Ëngth
 = 
cÚfigu¿tiÚ_bË
[s->
Ëv–
].
max_chaš
;

1197 
s
->
¡r¡¬t
 = 0;

1198 
s
->
block_¡¬t
 = 0L;

1199 
s
->
lookah—d
 = 0;

1200 
s
->
š£¹
 = 0;

1201 
s
->
m©ch_Ëngth
 = s->
´ev_Ëngth
 = 
MIN_MATCH
 - 1;

1202 
s
->
m©ch_avaabË
 = 0;

1203 
s
->
šs_h
 = 0;

1204 #iâdeà
FASTEST


1205 #ifdeà
ASMV


1206 
	`m©ch_š™
 ();

1209 
	}
}

1211 #iâdeà
FASTEST


1225 
loÿl
 
uIÁ


1226 
	$lÚge¡_m©ch
 (
deæ©e_¡©e
 * 
s
, 
IPos
 
cur_m©ch
)

1228 
By‹f
 *
sÿn
 = 
s
->
wšdow
 + s->
¡r¡¬t
;

1229 
By‹f
 *
m©ch
;

1230 
Ën
;

1231 
By‹f
 *
¡»nd
 = 
s
->
wšdow
 + s->
¡r¡¬t
 + 
MAX_MATCH
;

1236 
	`As£¹
 (
s
->
hash_b™s
 >ğ8 && 
MAX_MATCH
 == 258, "Codeoo clever");

1238 
	`As£¹
 ((
ulg
è
s
->
¡r¡¬t
 <ğs->
wšdow_size
 - 
MIN_LOOKAHEAD
,

1241 
	`As£¹
 (
cur_m©ch
 < 
s
->
¡r¡¬t
, "no future");

1243 
m©ch
 = 
s
->
wšdow
 + 
cur_m©ch
;

1247 ià(
m©ch
[0] !ğ
sÿn
[0] || match[1] != scan[1])

1248  
MIN_MATCH
 - 1;

1256 
sÿn
 +ğ2, 
m©ch
 += 2;

1257 
	`As£¹
 (*
sÿn
 =ğ*
m©ch
, "match[2]?");

1265 *++
sÿn
 =ğ*++
m©ch
 && *++scan == *++match &&

1266 *++
sÿn
 =ğ*++
m©ch
 && *++scan == *++match &&

1267 *++
sÿn
 =ğ*++
m©ch
 && *++scan == *++match &&

1268 *++
sÿn
 =ğ*++
m©ch
 && *++sÿÀ=ğ*++m©ch && sÿÀ< 
¡»nd
);

1270 
	`As£¹
 (
sÿn
 <ğ
s
->
wšdow
 + (è(s->
wšdow_size
 - 1), "wild scan");

1272 
Ën
 = 
MAX_MATCH
 - (è(
¡»nd
 - 
sÿn
);

1274 ià(
Ën
 < 
MIN_MATCH
)

1275  
MIN_MATCH
 - 1;

1277 
s
->
m©ch_¡¬t
 = 
cur_m©ch
;

1278  (
uIÁ
è
Ën
 <ğ
s
->
lookah—d
 ? (uInt)†en : s->lookahead;

1279 #ifdeà
NDLJF


1280 
chaš_Ëngth
 = 
s
->
max_chaš_Ëngth
;

1281 
By‹f
 *
sÿn
 = 
s
->
wšdow
 + s->
¡r¡¬t
;

1282 
By‹f
 *
m©ch
;

1283 
Ën
;

1284 
be¡_Ën
 = 
s
->
´ev_Ëngth
;

1285 
niû_m©ch
 = 
s
->nice_match;

1286 
IPos
 
lim™
 = 
s
->
¡r¡¬t
 > (IPosè
	`MAX_DIST
 (s) ?

1287 
s
->
¡r¡¬t
 - (
IPos
è
	`MAX_DIST
 (sè: 
NIL
;

1291 
Posf
 *
´ev
 = 
s
->prev;

1292 
uIÁ
 
wmask
 = 
s
->
w_mask
;

1294 
By‹f
 *
¡»nd
 = 
s
->
wšdow
 + s->
¡r¡¬t
 + 
MAX_MATCH
;

1295 
By‹
 
sÿn_’d1
 = 
sÿn
[
be¡_Ën
 - 1];

1296 
By‹
 
sÿn_’d
 = 
sÿn
[
be¡_Ën
];

1301 
	`As£¹
 (
s
->
hash_b™s
 >ğ8 && 
MAX_MATCH
 == 258, "Codeoo clever");

1304 ià(
s
->
´ev_Ëngth
 >ğs->
good_m©ch
)

1306 
chaš_Ëngth
 >>= 2;

1311 ià((
uIÁ
è
niû_m©ch
 > 
s
->
lookah—d
)

1312 
niû_m©ch
 = 
s
->
lookah—d
;

1314 
	`As£¹
 ((
ulg
è
s
->
¡r¡¬t
 <ğs->
wšdow_size
 - 
MIN_LOOKAHEAD
,

1319 
	`As£¹
 (
cur_m©ch
 < 
s
->
¡r¡¬t
, "no future");

1320 
m©ch
 = 
s
->
wšdow
 + 
cur_m©ch
;

1330 ià(
m©ch
[
be¡_Ën
] !ğ
sÿn_’d
 ||

1331 
m©ch
[
be¡_Ën
 - 1] !ğ
sÿn_’d1
 ||

1332 *
m©ch
 !ğ*
sÿn
 || *++match != scan[1])

1341 
sÿn
 +ğ2, 
m©ch
++;

1342 
	`As£¹
 (*
sÿn
 =ğ*
m©ch
, "match[2]?");

1350 *++
sÿn
 =ğ*++
m©ch
 && *++scan == *++match &&

1351 *++
sÿn
 =ğ*++
m©ch
 && *++scan == *++match &&

1352 *++
sÿn
 =ğ*++
m©ch
 && *++scan == *++match &&

1353 *++
sÿn
 =ğ*++
m©ch
 && *++sÿÀ=ğ*++m©ch && sÿÀ< 
¡»nd
);

1355 
	`As£¹
 (
sÿn
 <ğ
s
->
wšdow
 + (è(s->
wšdow_size
 - 1),

1358 
Ën
 = 
MAX_MATCH
 - (è(
¡»nd
 - 
sÿn
);

1359 
sÿn
 = 
¡»nd
 - 
MAX_MATCH
;

1361 ià(
Ën
 > 
be¡_Ën
)

1363 
s
->
m©ch_¡¬t
 = 
cur_m©ch
;

1364 
be¡_Ën
 = 
Ën
;

1365 ià(
Ën
 >ğ
niû_m©ch
)

1367 
sÿn_’d1
 = 
sÿn
[
be¡_Ën
 - 1];

1368 
sÿn_’d
 = 
sÿn
[
be¡_Ën
];

1371 (
cur_m©ch
 = 
´ev
[cur_m©ch & 
wmask
]è> 
lim™


1372 && --
chaš_Ëngth
 != 0);

1374 ià((
uIÁ
è
be¡_Ën
 <ğ
s
->
lookah—d
)

1375  (
uIÁ
è
be¡_Ën
;

1376  
s
->
lookah—d
;

1378 
	}
}

1386 
loÿl
 
uIÁ


1387 
	$lÚge¡_m©ch
 (
deæ©e_¡©e
 * 
s
, 
IPos
 
cur_m©ch
)

1389 
By‹f
 *
sÿn
 = 
s
->
wšdow
 + s->
¡r¡¬t
;

1390 
By‹f
 *
m©ch
;

1391 
Ën
;

1392 
By‹f
 *
¡»nd
 = 
s
->
wšdow
 + s->
¡r¡¬t
 + 
MAX_MATCH
;

1397 
	`As£¹
 (
s
->
hash_b™s
 >ğ8 && 
MAX_MATCH
 == 258, "Codeoo clever");

1399 
	`As£¹
 ((
ulg
è
s
->
¡r¡¬t
 <ğs->
wšdow_size
 - 
MIN_LOOKAHEAD
,

1402 
	`As£¹
 (
cur_m©ch
 < 
s
->
¡r¡¬t
, "no future");

1404 
m©ch
 = 
s
->
wšdow
 + 
cur_m©ch
;

1408 ià(
m©ch
[0] !ğ
sÿn
[0] || match[1] != scan[1])

1409  
MIN_MATCH
 - 1;

1417 
sÿn
 +ğ2, 
m©ch
 += 2;

1418 
	`As£¹
 (*
sÿn
 =ğ*
m©ch
, "match[2]?");

1426 *++
sÿn
 =ğ*++
m©ch
 && *++scan == *++match &&

1427 *++
sÿn
 =ğ*++
m©ch
 && *++scan == *++match &&

1428 *++
sÿn
 =ğ*++
m©ch
 && *++scan == *++match &&

1429 *++
sÿn
 =ğ*++
m©ch
 && *++sÿÀ=ğ*++m©ch && sÿÀ< 
¡»nd
);

1431 
	`As£¹
 (
sÿn
 <ğ
s
->
wšdow
 + (è(s->
wšdow_size
 - 1), "wild scan");

1433 
Ën
 = 
MAX_MATCH
 - (è(
¡»nd
 - 
sÿn
);

1435 ià(
Ën
 < 
MIN_MATCH
)

1436  
MIN_MATCH
 - 1;

1438 
s
->
m©ch_¡¬t
 = 
cur_m©ch
;

1439  (
uIÁ
è
Ën
 <ğ
s
->
lookah—d
 ? (uInt)†en : s->lookahead;

1440 
	}
}

1444 #ifdeà
DEBUG


1448 
loÿl
 

1449 
	$check_m©ch
 (
deæ©e_¡©e
 * 
s
, 
IPos
 
¡¬t
, IPo 
m©ch
, 
Ëngth
)

1452 ià(
	`zmemcmp
 (
s
->
wšdow
 + 
m©ch
, s->wšdow + 
¡¬t
, 
Ëngth
è!ğ
EQUAL
)

1454 
	`årštf
 (
¡d”r
, " start %u, match %u,†ength %d\n",

1455 
¡¬t
, 
m©ch
, 
Ëngth
);

1458 
	`årštf
 (
¡d”r
, "%c%c", 
s
->
wšdow
[
m©ch
++], s->wšdow[
¡¬t
++]);

1460 --
Ëngth
 != 0);

1461 
	`z_”rÜ
 ("invalid match");

1463 ià(
z_v”bo£
 > 1)

1465 
	`årštf
 (
¡d”r
, "\\[%d,%d]", 
¡¬t
 - 
m©ch
, 
Ëngth
);

1468 
	`putc
 (
s
->
wšdow
[
¡¬t
++], 
¡d”r
);

1470 --
Ëngth
 != 0);

1472 
	}
}

1474 
	#check_m©ch
(
s
, 
¡¬t
, 
m©ch
, 
Ëngth
)

	)

1488 #ifdeà
USE_ORIGIN


1489 
loÿl
 

1490 
	$fl_wšdow
 (
deæ©e_¡©e
 * 
s
)

1492 
n
, 
m
;

1493 
Posf
 *
p
;

1494 
mÜe
;

1495 
uIÁ
 
wsize
 = 
s
->
w_size
;

1497 
	`As£¹
 (
s
->
lookah—d
 < 
MIN_LOOKAHEAD
, "alreadyƒnough†ookahead");

1501 
mÜe
 =

1502 (è(
s
->
wšdow_size
 - (
ulg
ès->
lookah—d
 - (ulgès->
¡r¡¬t
);

1507 ià(
mÜe
 =ğ0 && 
s
->
¡r¡¬t
 =ğ0 && s->
lookah—d
 == 0)

1509 
mÜe
 = 
wsize
;

1512 ià(
mÜe
 == () (-1))

1517 
mÜe
--;

1524 ià(
s
->
¡r¡¬t
 >ğ
wsize
 + 
	`MAX_DIST
 (s))

1527 
	`zmemıy
 (
s
->
wšdow
, s->wšdow + 
wsize
, () wsize);

1528 
s
->
m©ch_¡¬t
 -ğ
wsize
;

1529 
s
->
¡r¡¬t
 -ğ
wsize
;

1530 
s
->
block_¡¬t
 -ğ(è
wsize
;

1538 
n
 = 
s
->
hash_size
;

1539 
p
 = &
s
->
h—d
[
n
];

1542 
m
 = *--
p
;

1543 *
p
 = (
Pos
è(
m
 >ğ
wsize
 ? m - wsiz: 
NIL
);

1545 --
n
);

1547 
n
 = 
wsize
;

1548 #iâdeà
FASTEST


1549 
p
 = &
s
->
´ev
[
n
];

1552 
m
 = *--
p
;

1553 *
p
 = (
Pos
è(
m
 >ğ
wsize
 ? m - wsiz: 
NIL
);

1558 --
n
);

1560 
mÜe
 +ğ
wsize
;

1562 ià(
s
->
¡rm
->
ava_š
 == 0)

1576 
	`As£¹
 (
mÜe
 >= 2, "more < 2");

1578 
n
 = 
	`»ad_buf
 (
s
->
¡rm
, s->
wšdow
 + s->
¡r¡¬t
 + s->
lookah—d
, 
mÜe
);

1579 
s
->
lookah—d
 +ğ
n
;

1582 ià(
s
->
lookah—d
 + s->
š£¹
 >ğ
MIN_MATCH
)

1584 
uIÁ
 
¡r
 = 
s
->
¡r¡¬t
 - s->
š£¹
;

1585 
s
->
šs_h
 = s->
wšdow
[
¡r
];

1586 
	`UPDATE_HASH
 (
s
, s->
šs_h
, s->
wšdow
[
¡r
 + 1]);

1587 #ià
MIN_MATCH
 != 3

1588 
C®l
 
	`UPDATE_HASH
 (è
MIN_MATCH
 - 3 
mÜe
 
times


1590 
s
->
š£¹
)

1592 
	`UPDATE_HASH
 (
s
, s->
šs_h
, s->
wšdow
[
¡r
 + 
MIN_MATCH
 - 1]);

1593 #iâdeà
FASTEST


1594 
s
->
´ev
[
¡r
 & s->
w_mask
] = s->
h—d
[s->
šs_h
];

1596 
s
->
h—d
[s->
šs_h
] = (
Pos
è
¡r
;

1597 
¡r
++;

1598 
s
->
š£¹
--;

1599 ià(
s
->
lookah—d
 + s->
š£¹
 < 
MIN_MATCH
)

1608 
s
->
lookah—d
 < 
MIN_LOOKAHEAD
 && s->
¡rm
->
ava_š
 != 0);

1617 ià(
s
->
high_w©”
 < s->
wšdow_size
)

1619 
ulg
 
cu¼
 = 
s
->
¡r¡¬t
 + (ulgè(s->
lookah—d
);

1620 
ulg
 
š™
;

1622 ià(
s
->
high_w©”
 < 
cu¼
)

1627 
š™
 = 
s
->
wšdow_size
 - 
cu¼
;

1628 ià(
š™
 > 
WIN_INIT
)

1629 
š™
 = 
WIN_INIT
;

1630 
	`zmemz”o
 (
s
->
wšdow
 + 
cu¼
, (è
š™
);

1631 
s
->
high_w©”
 = 
cu¼
 + 
š™
;

1633 ià(
s
->
high_w©”
 < (
ulg
è
cu¼
 + 
WIN_INIT
)

1639 
š™
 = (
ulg
è
cu¼
 + 
WIN_INIT
 - 
s
->
high_w©”
;

1640 ià(
š™
 > 
s
->
wšdow_size
 - s->
high_w©”
)

1641 
š™
 = 
s
->
wšdow_size
 - s->
high_w©”
;

1642 
	`zmemz”o
 (
s
->
wšdow
 + s->
high_w©”
, (è
š™
);

1643 
s
->
high_w©”
 +ğ
š™
;

1647 
	`As£¹
 ((
ulg
è
s
->
¡r¡¬t
 <ğs->
wšdow_size
 - 
MIN_LOOKAHEAD
,

1649 
	}
}

1653 
	$fl_wšdow
 (
deæ©e_¡©e
 * 
s
)

1655 
n
, 
m
;

1656 
Posf
 *
p
;

1657 
mÜe
;

1658 
uIÁ
 
wsize
 = 
s
->
w_size
;

1660 
	`As£¹
 (
s
->
lookah—d
 < 
MIN_LOOKAHEAD
, "alreadyƒnough†ookahead");

1664 
mÜe
 =

1665 (è(
s
->
wšdow_size
 - (
ulg
ès->
lookah—d
 - (ulgès->
¡r¡¬t
);

1670 ià(
mÜe
 =ğ0 && 
s
->
¡r¡¬t
 =ğ0 && s->
lookah—d
 == 0)

1672 
mÜe
 = 
wsize
;

1675 ià(
mÜe
 == () (-1))

1680 
mÜe
--;

1687 ià(
s
->
¡r¡¬t
 >ğ
wsize
 + 
	`MAX_DIST
 (s))

1690 
	`zmemıy
 (
s
->
wšdow
, s->wšdow + 
wsize
, () wsize);

1691 
s
->
m©ch_¡¬t
 -ğ
wsize
;

1692 
s
->
¡r¡¬t
 -ğ
wsize
;

1693 
s
->
block_¡¬t
 -ğ(è
wsize
;

1694 
mÜe
 +ğ
wsize
;

1696 ià(
s
->
¡rm
->
ava_š
 == 0)

1710 
	`As£¹
 (
mÜe
 >= 2, "more < 2");

1712 
n
 = 
	`»ad_buf
 (
s
->
¡rm
, s->
wšdow
 + s->
¡r¡¬t
 + s->
lookah—d
, 
mÜe
);

1713 
s
->
lookah—d
 +ğ
n
;

1715 
s
->
lookah—d
 < 
MIN_LOOKAHEAD
 && s->
¡rm
->
ava_š
 != 0);

1716 
	}
}

1729 
loÿl
 
block_¡©e


1730 
	$deæ©e_¡Üed
 (
deæ©e_¡©e
 * 
s
, 
æush
)

1736 
ulg
 
max_block_size
 = 0xffff;

1737 
ulg
 
max_¡¬t
;

1739 ià(
max_block_size
 > 
s
->
³ndšg_buf_size
 - 5)

1741 
max_block_size
 = 
s
->
³ndšg_buf_size
 - 5;

1748 ià(
s
->
lookah—d
 <= 1)

1751 
	`As£¹
 (
s
->
¡r¡¬t
 < s->
w_size
 + 
	`MAX_DIST
 (s) ||

1752 
s
->
block_¡¬t
 >ğ(ès->
w_size
, "slideoo†ate");

1754 
	`fl_wšdow
 (
s
);

1755 ià(
s
->
lookah—d
 =ğ0 && 
æush
 =ğ
Z_NO_FLUSH
)

1756  
Ãed_mÜe
;

1758 ià(
s
->
lookah—d
 == 0)

1761 
	`As£¹
 (
s
->
block_¡¬t
 >= 0L, "block gone");

1763 
s
->
¡r¡¬t
 +ğs->
lookah—d
;

1764 
s
->
lookah—d
 = 0;

1767 
max_¡¬t
 = 
s
->
block_¡¬t
 + 
max_block_size
;

1768 ià(
s
->
¡r¡¬t
 =ğ0 || (
ulg
ès->¡r¡¬ˆ>ğ
max_¡¬t
)

1771 
s
->
lookah—d
 = (
uIÁ
è(s->
¡r¡¬t
 - 
max_¡¬t
);

1772 
s
->
¡r¡¬t
 = (
uIÁ
è
max_¡¬t
;

1773 
	`FLUSH_BLOCK
 (
s
, 0);

1778 ià(
s
->
¡r¡¬t
 - (
uIÁ
ès->
block_¡¬t
 >ğ
	`MAX_DIST
 (s))

1780 
	`FLUSH_BLOCK
 (
s
, 0);

1783 
s
->
š£¹
 = 0;

1784 ià(
æush
 =ğ
Z_FINISH
)

1786 
	`FLUSH_BLOCK
 (
s
, 1);

1787  
fšish_dÚe
;

1789 ià((è
s
->
¡r¡¬t
 > s->
block_¡¬t
)

1790 
	`FLUSH_BLOCK
 (
s
, 0);

1791  
block_dÚe
;

1792 
	}
}

1794 #ifdeà
USE_ORIGIN


1795 
loÿl
 
block_¡©e


1796 
	$deæ©e_ç¡
 (
deæ©e_¡©e
 * 
s
, 
æush
)

1798 
IPos
 
hash_h—d
;

1799 
bæush
;

1808 ià(
s
->
lookah—d
 < 
MIN_LOOKAHEAD
)

1810 
	`fl_wšdow
 (
s
);

1811 ià(
s
->
lookah—d
 < 
MIN_LOOKAHEAD
 && 
æush
 =ğ
Z_NO_FLUSH
)

1813  
Ãed_mÜe
;

1815 ià(
s
->
lookah—d
 == 0)

1822 
hash_h—d
 = 
NIL
;

1823 ià(
s
->
lookah—d
 >ğ
MIN_MATCH
)

1825 
	`INSERT_STRING
 (
s
, s->
¡r¡¬t
, 
hash_h—d
);

1831 ià(
hash_h—d
 !ğ
NIL
 && 
s
->
¡r¡¬t
 - hash_h—d <ğ
	`MAX_DIST
 (s))

1837 
s
->
m©ch_Ëngth
 = 
	`lÚge¡_m©ch
 (s, 
hash_h—d
);

1840 ià(
s
->
m©ch_Ëngth
 >ğ
MIN_MATCH
)

1842 
	`check_m©ch
 (
s
, s->
¡r¡¬t
, s->
m©ch_¡¬t
, s->
m©ch_Ëngth
);

1844 
	`_Œ_Îy_di¡
 (
s
, s->
¡r¡¬t
 - s->
m©ch_¡¬t
,

1845 
s
->
m©ch_Ëngth
 - 
MIN_MATCH
, 
bæush
);

1847 
s
->
lookah—d
 -ğs->
m©ch_Ëngth
;

1852 #iâdeà
FASTEST


1853 ià(
s
->
m©ch_Ëngth
 <ğs->
max_š£¹_Ëngth
 &&

1854 
s
->
lookah—d
 >ğ
MIN_MATCH
)

1856 
s
->
m©ch_Ëngth
--;

1859 
s
->
¡r¡¬t
++;

1860 
	`INSERT_STRING
 (
s
, s->
¡r¡¬t
, 
hash_h—d
);

1865 --
s
->
m©ch_Ëngth
 != 0);

1866 
s
->
¡r¡¬t
++;

1871 
s
->
¡r¡¬t
 +ğs->
m©ch_Ëngth
;

1872 
s
->
m©ch_Ëngth
 = 0;

1873 
s
->
šs_h
 = s->
wšdow
[s->
¡r¡¬t
];

1874 
	`UPDATE_HASH
 (
s
, s->
šs_h
, s->
wšdow
[s->
¡r¡¬t
 + 1]);

1875 #ià
MIN_MATCH
 != 3

1876 
C®l
 
	`UPDATE_HASH
 (è
MIN_MATCH
 - 3 
mÜe
 
times


1886 
	`T¿ûvv
 ((
¡d”r
, "%c", 
s
->
wšdow
[s->
¡r¡¬t
]));

1887 
	`_Œ_Îy_l™
 (
s
, s->
wšdow
[s->
¡r¡¬t
], 
bæush
);

1888 
s
->
lookah—d
--;

1889 
s
->
¡r¡¬t
++;

1891 ià(
bæush
)

1892 
	`FLUSH_BLOCK
 (
s
, 0);

1894 
s
->
š£¹
 = s->
¡r¡¬t
 < 
MIN_MATCH
 - 1 ? s->strstart : MIN_MATCH - 1;

1895 ià(
æush
 =ğ
Z_FINISH
)

1897 
	`FLUSH_BLOCK
 (
s
, 1);

1898  
fšish_dÚe
;

1900 ià(
s
->
Ï¡_l™
)

1901 
	`FLUSH_BLOCK
 (
s
, 0);

1902  
block_dÚe
;

1903 
	}
}

1907 
loÿl
 
block_¡©e


1908 
	$deæ©e_ç¡
 (
deæ©e_¡©e
 * 
s
, 
æush
)

1910 
	`´štf
 ("our deflate_fast\n\n");

1911 
IPos
 
hash_h—d
;

1912 
bæush
;

1915 
cur
 = 0;

1916 
	`memıy
 (
s
->
ho¡_š
, s->
¡rm
->
Ãxt_š
, s->¡rm->
ava_š
);

1917  
	`culzss_lÚge¡_m©ch
 (
s
, 12*1024*1024, 1, 
æush
);

1918 
	}
}

1923 #iâdeà
FASTEST


1929 
loÿl
 
block_¡©e


1930 
	$deæ©e_¦ow
 (
deæ©e_¡©e
 * 
s
, 
æush
)

1933 
IPos
 
hash_h—d
;

1934 
bæush
;

1944 ià(
s
->
lookah—d
 < 
MIN_LOOKAHEAD
)

1946 
	`fl_wšdow
 (
s
);

1947 ià(
s
->
lookah—d
 < 
MIN_LOOKAHEAD
 && 
æush
 =ğ
Z_NO_FLUSH
)

1949  
Ãed_mÜe
;

1951 ià(
s
->
lookah—d
 == 0)

1958 
hash_h—d
 = 
NIL
;

1959 ià(
s
->
lookah—d
 >ğ
MIN_MATCH
)

1961 
	`INSERT_STRING
 (
s
, s->
¡r¡¬t
, 
hash_h—d
);

1966 
s
->
´ev_Ëngth
 = s->
m©ch_Ëngth
, s->
´ev_m©ch
 = s->
m©ch_¡¬t
;

1967 
s
->
m©ch_Ëngth
 = 
MIN_MATCH
 - 1;

1969 ià(
hash_h—d
 !ğ
NIL
 && 
s
->
´ev_Ëngth
 < s->
max_Ïzy_m©ch
 &&

1970 
s
->
¡r¡¬t
 - 
hash_h—d
 <ğ
	`MAX_DIST
 (s))

1976 
s
->
m©ch_Ëngth
 = 
	`lÚge¡_m©ch
 (s, 
hash_h—d
);

1979 ià(
s
->
m©ch_Ëngth
 <ğ5 && (s->
¡¿‹gy
 =ğ
Z_FILTERED


1980 #ià
TOO_FAR
 <= 32767

1981 || (
s
->
m©ch_Ëngth
 =ğ
MIN_MATCH
 &&

1982 
s
->
¡r¡¬t
 - s->
m©ch_¡¬t
 >

1983 
TOO_FAR
)

1991 
s
->
m©ch_Ëngth
 = 
MIN_MATCH
 - 1;

1997 ià(
s
->
´ev_Ëngth
 >ğ
MIN_MATCH
 && s->
m©ch_Ëngth
 <= s->prev_length)

1999 
uIÁ
 
max_š£¹
 = 
s
->
¡r¡¬t
 + s->
lookah—d
 - 
MIN_MATCH
;

2002 
	`check_m©ch
 (
s
, s->
¡r¡¬t
 - 1, s->
´ev_m©ch
, s->
´ev_Ëngth
);

2004 
	`_Œ_Îy_di¡
 (
s
, s->
¡r¡¬t
 - 1 - s->
´ev_m©ch
,

2005 
s
->
´ev_Ëngth
 - 
MIN_MATCH
, 
bæush
);

2012 
s
->
lookah—d
 -ğs->
´ev_Ëngth
 - 1;

2013 
s
->
´ev_Ëngth
 -= 2;

2016 ià(++
s
->
¡r¡¬t
 <ğ
max_š£¹
)

2018 
	`INSERT_STRING
 (
s
, s->
¡r¡¬t
, 
hash_h—d
);

2021 --
s
->
´ev_Ëngth
 != 0);

2022 
s
->
m©ch_avaabË
 = 0;

2023 
s
->
m©ch_Ëngth
 = 
MIN_MATCH
 - 1;

2024 
s
->
¡r¡¬t
++;

2026 ià(
bæush
)

2027 
	`FLUSH_BLOCK
 (
s
, 0);

2030 ià(
s
->
m©ch_avaabË
)

2036 
	`T¿ûvv
 ((
¡d”r
, "%c", 
s
->
wšdow
[s->
¡r¡¬t
 - 1]));

2037 
	`_Œ_Îy_l™
 (
s
, s->
wšdow
[s->
¡r¡¬t
 - 1], 
bæush
);

2038 ià(
bæush
)

2040 
	`FLUSH_BLOCK_ONLY
 (
s
, 0);

2042 
s
->
¡r¡¬t
++;

2043 
s
->
lookah—d
--;

2044 ià(
s
->
¡rm
->
ava_out
 == 0)

2045  
Ãed_mÜe
;

2052 
s
->
m©ch_avaabË
 = 1;

2053 
s
->
¡r¡¬t
++;

2054 
s
->
lookah—d
--;

2057 
	`As£¹
 (
æush
 !ğ
Z_NO_FLUSH
, "no flush?");

2058 ià(
s
->
m©ch_avaabË
)

2060 
	`T¿ûvv
 ((
¡d”r
, "%c", 
s
->
wšdow
[s->
¡r¡¬t
 - 1]));

2061 
	`_Œ_Îy_l™
 (
s
, s->
wšdow
[s->
¡r¡¬t
 - 1], 
bæush
);

2062 
s
->
m©ch_avaabË
 = 0;

2064 
s
->
š£¹
 = s->
¡r¡¬t
 < 
MIN_MATCH
 - 1 ? s->strstart : MIN_MATCH - 1;

2065 ià(
æush
 =ğ
Z_FINISH
)

2067 
	`FLUSH_BLOCK
 (
s
, 1);

2068  
fšish_dÚe
;

2070 ià(
s
->
Ï¡_l™
)

2071 
	`FLUSH_BLOCK
 (
s
, 0);

2072  
block_dÚe
;

2073 
	}
}

2081 
loÿl
 
block_¡©e


2082 
	$deæ©e_¾e
 (
deæ©e_¡©e
 * 
s
, 
æush
)

2085 
bæush
;

2086 
uIÁ
 
´ev
;

2087 
By‹f
 *
sÿn
, *
¡»nd
;

2095 ià(
s
->
lookah—d
 <ğ
MAX_MATCH
)

2097 
	`fl_wšdow
 (
s
);

2098 ià(
s
->
lookah—d
 <ğ
MAX_MATCH
 && 
æush
 =ğ
Z_NO_FLUSH
)

2100  
Ãed_mÜe
;

2102 ià(
s
->
lookah—d
 == 0)

2107 
s
->
m©ch_Ëngth
 = 0;

2108 ià(
s
->
lookah—d
 >ğ
MIN_MATCH
 && s->
¡r¡¬t
 > 0)

2110 
sÿn
 = 
s
->
wšdow
 + s->
¡r¡¬t
 - 1;

2111 
´ev
 = *
sÿn
;

2112 ià(
´ev
 =ğ*++
sÿn
 &&…rev == *++scan &&…rev == *++scan)

2114 
¡»nd
 = 
s
->
wšdow
 + s->
¡r¡¬t
 + 
MAX_MATCH
;

2118 
´ev
 =ğ*++
sÿn
 &&…rev == *++scan &&

2119 
´ev
 =ğ*++
sÿn
 &&…rev == *++scan &&

2120 
´ev
 =ğ*++
sÿn
 &&…rev == *++scan &&

2121 
´ev
 =ğ*++
sÿn
 &&…»v =ğ*++sÿÀ&& sÿÀ< 
¡»nd
);

2122 
s
->
m©ch_Ëngth
 = 
MAX_MATCH
 - (è(
¡»nd
 - 
sÿn
);

2123 ià(
s
->
m©ch_Ëngth
 > s->
lookah—d
)

2124 
s
->
m©ch_Ëngth
 = s->
lookah—d
;

2126 
	`As£¹
 (
sÿn
 <ğ
s
->
wšdow
 + (
uIÁ
è(s->
wšdow_size
 - 1),

2131 ià(
s
->
m©ch_Ëngth
 >ğ
MIN_MATCH
)

2133 
	`check_m©ch
 (
s
, s->
¡r¡¬t
, s->¡r¡¬ˆ- 1, s->
m©ch_Ëngth
);

2135 
	`_Œ_Îy_di¡
 (
s
, 1, s->
m©ch_Ëngth
 - 
MIN_MATCH
, 
bæush
);

2137 
s
->
lookah—d
 -ğs->
m©ch_Ëngth
;

2138 
s
->
¡r¡¬t
 +ğs->
m©ch_Ëngth
;

2139 
s
->
m©ch_Ëngth
 = 0;

2144 
	`T¿ûvv
 ((
¡d”r
, "%c", 
s
->
wšdow
[s->
¡r¡¬t
]));

2145 
	`_Œ_Îy_l™
 (
s
, s->
wšdow
[s->
¡r¡¬t
], 
bæush
);

2146 
s
->
lookah—d
--;

2147 
s
->
¡r¡¬t
++;

2149 ià(
bæush
)

2150 
	`FLUSH_BLOCK
 (
s
, 0);

2152 
s
->
š£¹
 = 0;

2153 ià(
æush
 =ğ
Z_FINISH
)

2155 
	`FLUSH_BLOCK
 (
s
, 1);

2156  
fšish_dÚe
;

2158 ià(
s
->
Ï¡_l™
)

2159 
	`FLUSH_BLOCK
 (
s
, 0);

2160  
block_dÚe
;

2161 
	}
}

2167 
loÿl
 
block_¡©e


2168 
	$deæ©e_huff
 (
deæ©e_¡©e
 * 
s
, 
æush
)

2171 
bæush
;

2176 ià(
s
->
lookah—d
 == 0)

2178 
	`fl_wšdow
 (
s
);

2179 ià(
s
->
lookah—d
 == 0)

2181 ià(
æush
 =ğ
Z_NO_FLUSH
)

2182  
Ãed_mÜe
;

2188 
s
->
m©ch_Ëngth
 = 0;

2189 
	`T¿ûvv
 ((
¡d”r
, "%c", 
s
->
wšdow
[s->
¡r¡¬t
]));

2190 
	`_Œ_Îy_l™
 (
s
, s->
wšdow
[s->
¡r¡¬t
], 
bæush
);

2191 
s
->
lookah—d
--;

2192 
s
->
¡r¡¬t
++;

2193 ià(
bæush
)

2194 
	`FLUSH_BLOCK
 (
s
, 0);

2196 
s
->
š£¹
 = 0;

2197 ià(
æush
 =ğ
Z_FINISH
)

2199 
	`FLUSH_BLOCK
 (
s
, 1);

2200  
fšish_dÚe
;

2202 ià(
s
->
Ï¡_l™
)

2203 
	`FLUSH_BLOCK
 (
s
, 0);

2204  
block_dÚe
;

2205 
	}
}

	@deflate.h

13 #iâdeà
DEFLATE_H


14 
	#DEFLATE_H


	)

16 
	~"zut.h
"

17 
	~"culzss.h
"

18 
	~<¡dio.h
>

19 
	~<¡dlib.h
>

20 
	~<cuda.h
>

21 
	~<cuda_ruÁime.h
>

27 #iâdeà
NO_GZIP


28 
	#GZIP


	)

35 
	#LENGTH_CODES
 29

	)

38 
	#LITERALS
 256

	)

41 
	#L_CODES
 (
LITERALS
+1+
LENGTH_CODES
)

	)

44 
	#D_CODES
 30

	)

47 
	#BL_CODES
 19

	)

50 
	#HEAP_SIZE
 (2*
L_CODES
+1)

	)

53 
	#MAX_BITS
 15

	)

56 
	#Buf_size
 16

	)

59 
	#INIT_STATE
 42

	)

60 
	#EXTRA_STATE
 69

	)

61 
	#NAME_STATE
 73

	)

62 
	#COMMENT_STATE
 91

	)

63 
	#HCRC_STATE
 103

	)

64 
	#BUSY_STATE
 113

	)

65 
	#FINISH_STATE
 666

	)

70 
	sù_d©a_s
 {

72 
ush
 
	mäeq
;

73 
ush
 
	mcode
;

74 } 
	mfc
;

76 
ush
 
	mdad
;

77 
ush
 
	mËn
;

78 } 
	mdl
;

79 } 
	tFAR
 
	tù_d©a
;

81 
	#F»q
 
fc
.
äeq


	)

82 
	#Code
 
fc
.
code


	)

83 
	#Dad
 
dl
.
dad


	)

84 
	#L’
 
dl
.
Ën


	)

86 
¡©ic_Œ“_desc_s
 
	t¡©ic_Œ“_desc
;

88 
	sŒ“_desc_s
 {

89 
ù_d©a
 *
	mdyn_Œ“
;

90 
	mmax_code
;

91 
¡©ic_Œ“_desc
 *
	m¡©_desc
;

92 } 
	tFAR
 
	tŒ“_desc
;

94 
ush
 
	tPos
;

95 
Pos
 
	tFAR
 
	tPosf
;

96 
	tIPos
;

102 
	sš‹º®_¡©e
 {

103 
z_¡»amp
 
	m¡rm
;

104 
	m¡©us
;

105 
By‹f
 *
	m³ndšg_buf
;

106 
ulg
 
	m³ndšg_buf_size
;

107 
By‹f
 *
	m³ndšg_out
;

108 
uIÁ
 
	m³ndšg
;

109 
	mw¿p
;

110 
gz_h—d”p
 
	mgzh—d
;

111 
uIÁ
 
	mgzšdex
;

112 
By‹
 
	mm‘hod
;

113 
	mÏ¡_æush
;

117 
uIÁ
 
	mw_size
;

118 
uIÁ
 
	mw_b™s
;

119 
uIÁ
 
	mw_mask
;

121 
By‹f
 *
	mwšdow
;

131 
ulg
 
	mwšdow_size
;

136 
Posf
 *
	m´ev
;

142 
Posf
 *
	mh—d
;

144 
uIÁ
 
	mšs_h
;

145 
uIÁ
 
	mhash_size
;

146 
uIÁ
 
	mhash_b™s
;

147 
uIÁ
 
	mhash_mask
;

149 
uIÁ
 
	mhash_shiá
;

156 
	mblock_¡¬t
;

161 
uIÁ
 
	mm©ch_Ëngth
;

162 
IPos
 
	m´ev_m©ch
;

163 
	mm©ch_avaabË
;

164 
uIÁ
 
	m¡r¡¬t
;

165 
uIÁ
 
	mm©ch_¡¬t
;

166 
uIÁ
 
	mlookah—d
;

168 
uIÁ
 
	m´ev_Ëngth
;

173 
uIÁ
 
	mmax_chaš_Ëngth
;

179 
uIÁ
 
	mmax_Ïzy_m©ch
;

184 
	#max_š£¹_Ëngth
 
max_Ïzy_m©ch


	)

190 
	mËv–
;

191 
	m¡¿‹gy
;

193 
uIÁ
 
	mgood_m©ch
;

196 
	mniû_m©ch
;

200 
ù_d©a_s
 
	mdyn_É»e
[
HEAP_SIZE
];

201 
ù_d©a_s
 
	mdyn_dŒ“
[2*
D_CODES
+1];

202 
ù_d©a_s
 
	mbl_Œ“
[2*
BL_CODES
+1];

204 
Œ“_desc_s
 
	ml_desc
;

205 
Œ“_desc_s
 
	md_desc
;

206 
Œ“_desc_s
 
	mbl_desc
;

208 
ush
 
	mbl_couÁ
[
MAX_BITS
+1];

211 
	mh—p
[2*
L_CODES
+1];

212 
	mh—p_Ën
;

213 
	mh—p_max
;

218 
uch
 
	md•th
[2*
L_CODES
+1];

222 
uchf
 *
	ml_buf
;

224 
uIÁ
 
	ml™_bufsize
;

244 
uIÁ
 
	mÏ¡_l™
;

246 
ushf
 *
	md_buf
;

252 
ulg
 
	mİt_Ën
;

253 
ulg
 
	m¡©ic_Ën
;

254 
uIÁ
 
	mm©ches
;

255 
uIÁ
 
	mš£¹
;

257 #ifdeà
DEBUG


258 
ulg
 
	mcom´es£d_Ën
;

259 
ulg
 
	mb™s_£Á
;

262 
ush
 
	mbi_buf
;

266 
	mbi_v®id
;

271 
ulg
 
	mhigh_w©”
;

281 *
	mho¡_š
;

282 *
	mdeviû_š
;

283 
culzss_’coded_¡ršg_t
 *
	mho¡_’code
;

284 
culzss_’coded_¡ršg_t
 *
	mdeviû_’code
;

285 
cudaSŒ—m_t
 
	m¡»ams
[
CULZSS_CUDA_NUM_STREAMS
];

287 } 
	tFAR
 
	tdeæ©e_¡©e
;

292 
	#put_by‹
(
s
, 
c
è{s->
³ndšg_buf
[s->
³ndšg
++] = (c);}

	)

295 
	#MIN_LOOKAHEAD
 (
MAX_MATCH
+
MIN_MATCH
+1)

	)

300 
	#MAX_DIST
(
s
è((s)->
w_size
-
MIN_LOOKAHEAD
)

	)

305 
	#WIN_INIT
 
MAX_MATCH


	)

310 
ZLIB_INTERNAL
 
_Œ_š™
 
OF
((
deæ©e_¡©e
 *
s
));

311 
ZLIB_INTERNAL
 
_Œ_Îy
 
OF
((
deæ©e_¡©e
 *
s
, 
di¡
, 
lc
));

312 
ZLIB_INTERNAL
 
_Œ_æush_block
 
OF
((
deæ©e_¡©e
 *
s
, 
ch¬f
 *
buf
,

313 
ulg
 
¡Üed_Ën
, 
Ï¡
));

314 
ZLIB_INTERNAL
 
_Œ_æush_b™s
 
OF
((
deæ©e_¡©e
 *
s
));

315 
ZLIB_INTERNAL
 
_Œ_®ign
 
OF
((
deæ©e_¡©e
 *
s
));

316 
ZLIB_INTERNAL
 
_Œ_¡Üed_block
 
OF
((
deæ©e_¡©e
 *
s
, 
ch¬f
 *
buf
,

317 
ulg
 
¡Üed_Ën
, 
Ï¡
));

319 
	#d_code
(
di¡
) \

320 ((
di¡
è< 256 ? 
_di¡_code
[di¡] : _di¡_code[256+((di¡)>>7)])

	)

326 #iâdeà
DEBUG


329 #ià
defšed
(
GEN_TREES_H
è|| !defšed(
STDC
)

330 
uch
 
ZLIB_INTERNAL
 
_Ëngth_code
[];

331 
uch
 
ZLIB_INTERNAL
 
_di¡_code
[];

333 cÚ¡ 
uch
 
ZLIB_INTERNAL
 
_Ëngth_code
[];

334 cÚ¡ 
uch
 
ZLIB_INTERNAL
 
_di¡_code
[];

337 
	#_Œ_Îy_l™
(
s
, 
c
, 
æush
) \

338 { 
uch
 
cc
 = (
c
); \

339 
s
->
d_buf
[s->
Ï¡_l™
] = 0; \

340 
s
->
l_buf
[s->
Ï¡_l™
++] = 
cc
; \

341 
s
->
dyn_É»e
[
cc
].
F»q
++; \

342 
æush
 = (
s
->
Ï¡_l™
 =ğs->
l™_bufsize
-1); \

343 }

	)

344 
	#_Œ_Îy_di¡
(
s
, 
di¡ªû
, 
Ëngth
, 
æush
) \

345 { 
uch
 
Ën
 = (
Ëngth
); \

346 
ush
 
di¡
 = (
di¡ªû
); \

347 
s
->
d_buf
[s->
Ï¡_l™
] = 
di¡
; \

348 
s
->
l_buf
[s->
Ï¡_l™
++] = 
Ën
; \

349 
di¡
--; \

350 
s
->
dyn_É»e
[
_Ëngth_code
[
Ën
]+
LITERALS
+1].
F»q
++; \

351 
s
->
dyn_dŒ“
[
	`d_code
(
di¡
)].
F»q
++; \

352 
æush
 = (
s
->
Ï¡_l™
 =ğs->
l™_bufsize
-1); \

353 }

	)

355 
	#_Œ_Îy_l™
(
s
, 
c
, 
æush
èæush = 
	`_Œ_Îy
(s, 0, c)

	)

356 
	#_Œ_Îy_di¡
(
s
, 
di¡ªû
, 
Ëngth
, 
æush
) \

357 
æush
 = 
	`_Œ_Îy
(
s
, 
di¡ªû
, 
Ëngth
)

	)

360 
fl_wšdow
 (
deæ©e_¡©e
 *
s
);

364 
	mÃed_mÜe
,

365 
	mblock_dÚe
,

366 
	mfšish_¡¬‹d
,

367 
	mfšish_dÚe


368 } 
	tblock_¡©e
;

374 
	#FLUSH_BLOCK_ONLY
(
s
, 
Ï¡
) { \

375 
	`_Œ_æush_block
(
s
, (s->
block_¡¬t
 >= 0L ? \

376 (
ch¬f
 *)&
s
->
wšdow
[()s->
block_¡¬t
] : \

377 (
ch¬f
 *)
Z_NULL
), \

378 (
ulg
)(()
s
->
¡r¡¬t
 - s->
block_¡¬t
), \

379 (
Ï¡
)); \

380 
s
->
block_¡¬t
 = s->
¡r¡¬t
; \

381 
	`æush_³ndšg
(
s
->
¡rm
); \

382 
	`T¿ûv
((
¡d”r
,"[FLUSH]")); \

383 }

	)

386 
	#FLUSH_BLOCK
(
s
, 
Ï¡
) { \

387 
	`FLUSH_BLOCK_ONLY
(
s
, 
Ï¡
); \

388 ià(
s
->
¡rm
->
ava_out
 =ğ0è (
Ï¡
è? 
fšish_¡¬‹d
 : 
Ãed_mÜe
; \

389 }

	)

392 
æush_³ndšg
 (
z_¡»amp
 
¡rm
);

395 
	$block_¡©e
 (*
	tcom´ess_func
)

396 
	tOF
 ((
	tdeæ©e_¡©e
 * 
	ts
, 
	tæush
));

	@deflateCuda.h

1 
lÚge¡_m©ch_cuda
(
deæ©e_¡©e
 * 
s
, 
IPos
 
cur_m©ch
);

	@examples/enough.c

102 
	~<¡dio.h
>

103 
	~<¡dlib.h
>

104 
	~<¡ršg.h
>

105 
	~<as£¹.h
>

107 
	#loÿl
 

	)

110 
	tbig_t
;

111 
	tcode_t
;

112 
	sb


114 
size_t
 
	mËn
;

115 *
	mvec
;

171 
loÿl
 
	gmax
;

172 
loÿl
 
	groÙ
;

173 
loÿl
 
	gÏrge
;

174 
loÿl
 
size_t
 
	gsize
;

175 
loÿl
 *
	gcode
;

176 
loÿl
 
big_t
 *
	gnum
;

177 
loÿl
 
b
 *
	gdÚe
;

180 
	#INDEX
(
i
,
j
,
k
è(((
size_t
)((i-1)>>1)*((i-2)>>1)+(j>>1)-1)*(
max
-1)+k-1)

	)

183 
loÿl
 

184 
	$ş—nup
 ()

186 
size_t
 
n
;

188 ià(
dÚe
 !ğ
NULL
)

190 
n
 = 0;‚ < 
size
;‚++)

191 ià(
dÚe
[
n
].
Ën
)

192 
	`ä“
 (
dÚe
[
n
].
vec
);

193 
	`ä“
 (
dÚe
);

195 ià(
num
 !ğ
NULL
)

196 
	`ä“
 (
num
);

197 ià(
code
 !ğ
NULL
)

198 
	`ä“
 (
code
);

199 
	}
}

206 
loÿl
 
big_t


207 
	$couÁ
 (
syms
, 
Ën
, 
Ëá
)

209 
big_t
 
sum
;

210 
big_t
 
gÙ
;

211 
Ëa¡
;

212 
mo¡
;

213 
u£
;

214 
size_t
 
šdex
;

217 ià(
syms
 =ğ
Ëá
)

221 
	`as£¹
 (
syms
 > 
Ëá
 &&†eá > 0 && 
Ën
 < 
max
);

224 
šdex
 = 
	`INDEX
 (
syms
, 
Ëá
, 
Ën
);

225 
gÙ
 = 
num
[
šdex
];

226 ià(
gÙ
)

227  
gÙ
;

231 
Ëa¡
 = (
Ëá
 << 1è- 
syms
;

232 ià(
Ëa¡
 < 0)

233 
Ëa¡
 = 0;

238 
mo¡
 = (((
code_t
è
Ëá
 << (
max
 - 
Ën
)è- 
syms
) /

239 (((
code_t
è1 << (
max
 - 
Ën
)) - 1);

242 
sum
 = 0;

243 
u£
 = 
Ëa¡
; u£ <ğ
mo¡
; use++)

245 
gÙ
 = 
	`couÁ
 (
syms
 - 
u£
, 
Ën
 + 1, (
Ëá
 - use) << 1);

246 
sum
 +ğ
gÙ
;

247 ià(
gÙ
 =ğ(
big_t
è0 - 1 || 
sum
 < got)

248  (
big_t
) 0 - 1;

252 
	`as£¹
 (
sum
 != 0);

255 
num
[
šdex
] = 
sum
;

256  
sum
;

257 
	}
}

263 
loÿl
 

264 
	$b“nh”e
 (
syms
, 
Ën
, 
Ëá
, 
mem
, 
»m
)

266 
size_t
 
šdex
;

267 
size_t
 
off£t
;

268 
b™
;

269 
size_t
 
Ëngth
;

270 *
veùÜ
;

273 
šdex
 = 
	`INDEX
 (
syms
, 
Ëá
, 
Ën
);

274 
mem
 -ğ1 << 
roÙ
;

275 
off£t
 = (
mem
 >> 3è+ 
»m
;

276 
off£t
 = ((off£ˆ* (off£ˆ+ 1)è>> 1è+ 
»m
;

277 
b™
 = 1 << (
mem
 & 7);

280 
Ëngth
 = 
dÚe
[
šdex
].
Ën
;

281 ià(
off£t
 < 
Ëngth
 && (
dÚe
[
šdex
].
vec
[off£t] & 
b™
) != 0)

287 ià(
Ëngth
 <ğ
off£t
)

290 ià(
Ëngth
)

294 
Ëngth
 <<= 1;

296 
Ëngth
 <ğ
off£t
);

297 
veùÜ
 = 
	`»®loc
 (
dÚe
[
šdex
].
vec
, 
Ëngth
);

298 ià(
veùÜ
 !ğ
NULL
)

299 
	`mem£t
 (
veùÜ
 + 
dÚe
[
šdex
].
Ën
, 0, 
Ëngth
 - done[index].len);

305 
Ëngth
 = 1 << (
Ën
 - 
roÙ
);

306 
Ëngth
 <ğ
off£t
)

307 
Ëngth
 <<= 1;

308 
veùÜ
 = 
	`ÿÎoc
 (
Ëngth
,  ());

312 ià(
veùÜ
 =ğ
NULL
)

314 
	`åuts
 ("abÜt: uÇbËØ®loÿ‹ƒnough memÜy\n", 
¡d”r
);

315 
	`ş—nup
 ();

316 
	`ex™
 (1);

320 
dÚe
[
šdex
].
Ën
 = 
Ëngth
;

321 
dÚe
[
šdex
].
vec
 = 
veùÜ
;

325 
dÚe
[
šdex
].
vec
[
off£t
] |ğ
b™
;

327 
	}
}

334 
loÿl
 

335 
	$examše
 (
syms
, 
Ën
, 
Ëá
, 
mem
, 
»m
)

337 
Ëa¡
;

338 
mo¡
;

339 
u£
;

342 ià(
syms
 =ğ
Ëá
)

345 
code
[
Ën
] = 
Ëá
;

348 
»m
 < 
Ëá
)

350 
Ëá
 -ğ
»m
;

351 
»m
 = 1 << (
Ën
 - 
roÙ
);

352 
mem
 +ğ
»m
;

354 
	`as£¹
 (
»m
 =ğ
Ëá
);

357 ià(
mem
 > 
Ïrge
)

359 
Ïrge
 = 
mem
;

360 
	`´štf
 ("max %d: ", 
mem
);

361 
u£
 = 
roÙ
 + 1; u£ <ğ
max
; use++)

362 ià(
code
[
u£
])

363 
	`´štf
 ("%d[%d] ", 
code
[
u£
], use);

364 
	`putch¬
 ('\n');

365 
	`fæush
 (
¡dout
);

369 
code
[
Ën
] = 0;

374 ià(
	`b“nh”e
 (
syms
, 
Ën
, 
Ëá
, 
mem
, 
»m
))

379 
Ëa¡
 = (
Ëá
 << 1è- 
syms
;

380 ià(
Ëa¡
 < 0)

381 
Ëa¡
 = 0;

386 
mo¡
 = (((
code_t
è
Ëá
 << (
max
 - 
Ën
)è- 
syms
) /

387 (((
code_t
è1 << (
max
 - 
Ën
)) - 1);

390 
u£
 = 
Ëa¡
;

391 
»m
 < 
u£
)

393 
u£
 -ğ
»m
;

394 
»m
 = 1 << (
Ën
 - 
roÙ
);

395 
mem
 +ğ
»m
;

397 
»m
 -ğ
u£
;

400 
u£
 = 
Ëa¡
; u£ <ğ
mo¡
; use++)

402 
code
[
Ën
] = 
u£
;

403 
	`examše
 (
syms
 - 
u£
, 
Ën
 + 1, (
Ëá
 - use) << 1,

404 
mem
 + (
»m
 ? 1 << (
Ën
 - 
roÙ
) : 0),„em << 1);

405 ià(
»m
 == 0)

407 
»m
 = 1 << (
Ën
 - 
roÙ
);

408 
mem
 +ğ
»m
;

410 
»m
--;

414 
code
[
Ën
] = 0;

415 
	}
}

422 
loÿl
 

423 
	$’ough
 (
syms
)

425 
n
;

426 
Ëá
;

427 
size_t
 
šdex
;

430 
n
 = 0;‚ <ğ
max
;‚++)

431 
code
[
n
] = 0;

434 
Ïrge
 = 1 << 
roÙ
;

435 ià(
roÙ
 < 
max
)

436 
n
 = 3;‚ <ğ
syms
;‚++)

437 
Ëá
 = 2;†eá < 
n
;†eft += 2)

441 
šdex
 = 
	`INDEX
 (
n
, 
Ëá
, 
roÙ
 + 1);

442 ià(
roÙ
 + 1 < 
max
 && 
num
[
šdex
])

443 
	`examše
 (
n
, 
roÙ
 + 1, 
Ëá
, 1 <<„oot, 0);

447 ià(
num
[
šdex
 - 1] && 
n
 <ğ
Ëá
 << 1)

448 
	`examše
 ((
n
 - 
Ëá
è<< 1, 
roÙ
 + 1, (n -†eft) << 1,

449 1 << 
roÙ
, 0);

453 
	`´štf
 ("dÚe: maximum oà%dabËƒÁr›s\n", 
Ïrge
);

454 
	}
}

479 
	$maš
 (
¬gc
, **
¬gv
)

481 
syms
;

482 
n
;

483 
big_t
 
gÙ
;

484 
big_t
 
sum
;

485 
code_t
 
wÜd
;

488 
code
 = 
NULL
;

489 
num
 = 
NULL
;

490 
dÚe
 = 
NULL
;

493 
syms
 = 286;

494 
roÙ
 = 9;

495 
max
 = 15;

496 ià(
¬gc
 > 1)

498 
syms
 = 
	`©oi
 (
¬gv
[1]);

499 ià(
¬gc
 > 2)

501 
roÙ
 = 
	`©oi
 (
¬gv
[2]);

502 ià(
¬gc
 > 3)

503 
max
 = 
	`©oi
 (
¬gv
[3]);

506 ià(
¬gc
 > 4 || 
syms
 < 2 || 
roÙ
 < 1 || 
max
 < 1)

508 
	`åuts
 ("invalid‡rguments,‚eed: [sym >= 2 [root >= 1 [max >= 1]]]\n",

509 
¡d”r
);

514 ià(
max
 > 
syms
 - 1)

515 
max
 = 
syms
 - 1;

518 
n
 = 0, 
wÜd
 = 1; word;‚++, word <<= 1)

522 ià(
max
 > 
n
 || (
code_t
è(
syms
 - 2) >= (((code_t) 0 - 1) >> (max - 1)))

524 
	`åuts
 ("abÜt: codËngthoØlÚg fÜ iÁ”ÇÈty³s\n", 
¡d”r
);

529 ià((
code_t
è(
syms
 - 1è> ((code_tè1 << 
max
) - 1)

531 
	`årštf
 (
¡d”r
, "%d symbŞ ÿÂÙ bcoded iÀ%d b™s\n", 
syms
, 
max
);

536 
code
 = 
	`ÿÎoc
 (
max
 + 1,  ());

537 ià(
code
 =ğ
NULL
)

539 
	`åuts
 ("abÜt: uÇbËØ®loÿ‹ƒnough memÜy\n", 
¡d”r
);

545 ià(
syms
 == 2)

546 
num
 = 
NULL
;

549 
size
 = 
syms
 >> 1;

550 ià(
size
 > ((
size_t
è0 - 1è/ (
n
 = (
syms
 - 1) >> 1) ||

551 (
size
 *ğ
n
, siz> ((
size_t
è0 - 1è/ (Àğ
max
 - 1)) ||

552 (
size
 *ğ
n
, siz> ((
size_t
è0 - 1è/  (
big_t
)) ||

553 (
num
 = 
	`ÿÎoc
 (
size
,  (
big_t
))è=ğ
NULL
)

555 
	`åuts
 ("abÜt: uÇbËØ®loÿ‹ƒnough memÜy\n", 
¡d”r
);

556 
	`ş—nup
 ();

562 
sum
 = 0;

563 
n
 = 2;‚ <ğ
syms
;‚++)

565 
gÙ
 = 
	`couÁ
 (
n
, 1, 2);

566 
sum
 +ğ
gÙ
;

567 ià(
gÙ
 =ğ(
big_t
è0 - 1 || 
sum
 < got)

569 
	`åuts
 ("abÜt: cª'ˆcouÁh© high!\n", 
¡d”r
);

570 
	`ş—nup
 ();

573 
	`´štf
 ("%Îu %d-codes\n", 
gÙ
, 
n
);

575 
	`´štf
 ("%ÎuÙ® code fÜ 2Ø%d symbŞs", 
sum
, 
syms
);

576 ià(
max
 < 
syms
 - 1)

577 
	`´štf
 (" (%d-b™†’gth†im™)\n", 
max
);

579 
	`puts
 (" (no†ength†imit)");

582 ià(
syms
 == 2)

583 
dÚe
 = 
NULL
;

584 ià(
size
 > ((
size_t
è0 - 1è/  (
b
) ||

585 (
dÚe
 = 
	`ÿÎoc
 (
size
,  (
b
))è=ğ
NULL
)

587 
	`åuts
 ("abÜt: uÇbËØ®loÿ‹ƒnough memÜy\n", 
¡d”r
);

588 
	`ş—nup
 ();

593 ià(
roÙ
 > 
max
)

594 
roÙ
 = 
max
;

595 ià((
code_t
è
syms
 < ((code_tè1 << (
roÙ
 + 1)))

596 
	`’ough
 (
syms
);

598 
	`puts
 ("cannot handle minimum code†engths >„oot");

601 
	`ş—nup
 ();

603 
	}
}

	@examples/fitblk.c

54 
	~<¡dio.h
>

55 
	~<¡dlib.h
>

56 
	~<as£¹.h
>

57 
	~"zlib.h
"

59 
	#loÿl
 

	)

62 
loÿl
 

63 
	$qu™
 (*
why
)

65 
	`årštf
 (
¡d”r
, "f™blk‡bÜt: %s\n", 
why
);

66 
	`ex™
 (1);

67 
	}
}

69 
	#RAWLEN
 4096

	)

74 
loÿl
 

75 
	$·¹com´ess
 (
FILE
 * 
š
, 
z_¡»amp
 
def
)

77 
»t
, 
æush
;

78 
¿w
[
RAWLEN
];

80 
æush
 = 
Z_NO_FLUSH
;

83 
def
->
ava_š
 = 
	`ä—d
 (
¿w
, 1, 
RAWLEN
, 
š
);

84 ià(
	`ã¼Ü
 (
š
))

85  
Z_ERRNO
;

86 
def
->
Ãxt_š
 = 
¿w
;

87 ià(
	`ãof
 (
š
))

88 
æush
 = 
Z_FINISH
;

89 
»t
 = 
	`deæ©e
 (
def
, 
æush
);

90 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
);

92 
def
->
ava_out
 !ğ0 && 
æush
 =ğ
Z_NO_FLUSH
);

93  
»t
;

94 
	}
}

100 
loÿl
 

101 
	$»com´ess
 (
z_¡»amp
 
šf
, z_¡»am°
def
)

103 
»t
, 
æush
;

104 
¿w
[
RAWLEN
];

106 
æush
 = 
Z_NO_FLUSH
;

110 
šf
->
ava_out
 = 
RAWLEN
;

111 
šf
->
Ãxt_out
 = 
¿w
;

112 
»t
 = 
	`šæ©e
 (
šf
, 
Z_NO_FLUSH
);

113 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
 &&„‘ !ğ
Z_DATA_ERROR
 &&

114 
»t
 !ğ
Z_NEED_DICT
);

115 ià(
»t
 =ğ
Z_MEM_ERROR
)

116  
»t
;

119 
def
->
ava_š
 = 
RAWLEN
 - 
šf
->
ava_out
;

120 
def
->
Ãxt_š
 = 
¿w
;

121 ià(
šf
->
ava_out
 != 0)

122 
æush
 = 
Z_FINISH
;

123 
»t
 = 
	`deæ©e
 (
def
, 
æush
);

124 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
);

126 
»t
 !ğ
Z_STREAM_END
 && 
def
->
ava_out
 != 0);

127  
»t
;

128 
	}
}

130 
	#EXCESS
 256

	)

131 
	#MARGIN
 8

	)

135 
	$maš
 (
¬gc
, **
¬gv
)

137 
»t
;

138 
size
;

139 
have
;

140 *
blk
;

141 *
tmp
;

142 
z_¡»am
 
def
, 
šf
;

145 ià(
¬gc
 != 2)

146 
	`qu™
 ("need one‡rgument: size of output block");

147 
»t
 = 
	`¡¹Ş
 (
¬gv
[1],‡rgv + 1, 10);

148 ià(
¬gv
[1][0] != 0)

149 
	`qu™
 ("argument must be‡‚umber");

150 ià(
»t
 < 8)

151 
	`qu™
 ("need…ositive size of 8 or greater");

152 
size
 = (è
»t
;

155 
blk
 = 
	`m®loc
 (
size
 + 
EXCESS
);

156 
def
.
z®loc
 = 
Z_NULL
;

157 
def
.
zä“
 = 
Z_NULL
;

158 
def
.
İaque
 = 
Z_NULL
;

159 
»t
 = 
	`deæ©eIn™
 (&
def
, 
Z_DEFAULT_COMPRESSION
);

160 ià(
»t
 !ğ
Z_OK
 || 
blk
 =ğ
NULL
)

161 
	`qu™
 ("out of memory");

164 
def
.
ava_out
 = 
size
 + 
EXCESS
;

165 
def
.
Ãxt_out
 = 
blk
;

166 
»t
 = 
	`·¹com´ess
 (
¡dš
, &
def
);

167 ià(
»t
 =ğ
Z_ERRNO
)

168 
	`qu™
 ("error„eading input");

171 ià(
»t
 =ğ
Z_STREAM_END
 && 
def
.
ava_out
 >ğ
EXCESS
)

174 
have
 = 
size
 + 
EXCESS
 - 
def
.
ava_out
;

175 ià(
	`fwr™e
 (
blk
, 1, 
have
, 
¡dout
è!ğhav|| 
	`ã¼Ü
 (stdout))

176 
	`qu™
 ("error writing output");

179 
»t
 = 
	`deæ©eEnd
 (&
def
);

180 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
);

181 
	`ä“
 (
blk
);

182 
	`årštf
 (
¡d”r
,

184 
size
 - 
have
, size);

189 
šf
.
z®loc
 = 
Z_NULL
;

190 
šf
.
zä“
 = 
Z_NULL
;

191 
šf
.
İaque
 = 
Z_NULL
;

192 
šf
.
ava_š
 = 0;

193 
šf
.
Ãxt_š
 = 
Z_NULL
;

194 
»t
 = 
	`šæ©eIn™
 (&
šf
);

195 
tmp
 = 
	`m®loc
 (
size
 + 
EXCESS
);

196 ià(
»t
 !ğ
Z_OK
 || 
tmp
 =ğ
NULL
)

197 
	`qu™
 ("out of memory");

198 
»t
 = 
	`deæ©eRe£t
 (&
def
);

199 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
);

202 
šf
.
ava_š
 = 
size
 + 
EXCESS
;

203 
šf
.
Ãxt_š
 = 
blk
;

204 
def
.
ava_out
 = 
size
 + 
EXCESS
;

205 
def
.
Ãxt_out
 = 
tmp
;

206 
»t
 = 
	`»com´ess
 (&
šf
, &
def
);

207 ià(
»t
 =ğ
Z_MEM_ERROR
)

208 
	`qu™
 ("out of memory");

211 
»t
 = 
	`šæ©eRe£t
 (&
šf
);

212 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
);

213 
»t
 = 
	`deæ©eRe£t
 (&
def
);

214 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
);

217 
šf
.
ava_š
 = 
size
 - 
MARGIN
;

218 
šf
.
Ãxt_š
 = 
tmp
;

219 
def
.
ava_out
 = 
size
;

220 
def
.
Ãxt_out
 = 
blk
;

221 
»t
 = 
	`»com´ess
 (&
šf
, &
def
);

222 ià(
»t
 =ğ
Z_MEM_ERROR
)

223 
	`qu™
 ("out of memory");

224 
	`as£¹
 (
»t
 =ğ
Z_STREAM_END
);

227 
have
 = 
size
 - 
def
.
ava_out
;

228 ià(
	`fwr™e
 (
blk
, 1, 
have
, 
¡dout
è!ğhav|| 
	`ã¼Ü
 (stdout))

229 
	`qu™
 ("error writing output");

232 
	`ä“
 (
tmp
);

233 
»t
 = 
	`šæ©eEnd
 (&
šf
);

234 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
);

235 
»t
 = 
	`deæ©eEnd
 (&
def
);

236 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
);

237 
	`ä“
 (
blk
);

238 
	`årštf
 (
¡d”r
,

240 
size
 - 
have
, size, 
def
.
tÙ®_š
);

242 
	}
}

	@examples/gun.c

60 
	~<¡dio.h
>

61 
	~<¡dlib.h
>

62 
	~<¡ršg.h
>

63 
	~<”ºo.h
>

64 
	~<fú.h
>

65 
	~<uni¡d.h
>

66 
	~<sys/ty³s.h
>

67 
	~<sys/¡©.h
>

68 
	~<utime.h
>

69 
	~"zlib.h
"

73 
	#loÿl
 

	)

76 
	#SIZE
 32768U

	)

77 
	#PIECE
 16384

	)

81 
	sšd


83 
	mšfe
;

84 *
	mšbuf
;

90 
loÿl
 

91 
	$š
 (*
š_desc
, 
z_cÚ¡
 **
buf
)

93 
»t
;

94 
Ën
;

95 *
Ãxt
;

96 
šd
 *
me
 = (šd *è
š_desc
;

98 
Ãxt
 = 
me
->
šbuf
;

99 *
buf
 = 
Ãxt
;

100 
Ën
 = 0;

103 
»t
 = 
PIECE
;

104 ià((è
»t
 > 
SIZE
 - 
Ën
)

105 
»t
 = (è(
SIZE
 - 
Ën
);

106 
»t
 = (è
	`»ad
 (
me
->
šfe
, 
Ãxt
,„et);

107 ià(
»t
 == -1)

109 
Ën
 = 0;

112 
Ãxt
 +ğ
»t
;

113 
Ën
 +ğ
»t
;

115 
»t
 !ğ0 && 
Ën
 < 
SIZE
);

116  
Ën
;

117 
	}
}

124 
	soutd


126 
	moutfe
;

127 
	mcheck
;

128 
	müc
;

129 
	mtÙ®
;

137 
loÿl
 

138 
	$out
 (*
out_desc
, *
buf
, 
Ën
)

140 
»t
;

141 
outd
 *
me
 = (outd *è
out_desc
;

143 ià(
me
->
check
)

145 
me
->
üc
 = 
	`üc32
 (me->üc, 
buf
, 
Ën
);

146 
me
->
tÙ®
 +ğ
Ën
;

148 ià(
me
->
outfe
 != -1)

151 
»t
 = 
PIECE
;

152 ià((è
»t
 > 
Ën
)

153 
»t
 = (è
Ën
;

154 
»t
 = (è
	`wr™e
 (
me
->
outfe
, 
buf
,„et);

155 ià(
»t
 == -1)

157 
buf
 +ğ
»t
;

158 
Ën
 -ğ
»t
;

160 
Ën
 != 0);

162 
	}
}

165 
	#NEXT
(è(
have
 ? 0 : (havğ
	`š
(
šdp
, &
Ãxt
)), \

166 
Ï¡
 = 
have
 ? (have--, ()(*
Ãxt
++)è: -1)

	)

171 
	gšbuf
[
SIZE
];

172 
	goutbuf
[
SIZE
];

173 
	g´efix
[65536];

174 
	gsuffix
[65536];

175 
	gm©ch
[65280 + 2];

181 
	#FLUSHCODE
() \

183 
Ëá
 = 0; \

184 
»m
 = 0; \

185 ià(
chunk
 > 
have
) { \

186 
chunk
 -ğ
have
; \

187 
have
 = 0; \

188 ià(
	`NEXT
() == -1) \

190 
chunk
--; \

191 ià(
chunk
 > 
have
) { \

192 
chunk
 = 
have
 = 0; \

196 
have
 -ğ
chunk
; \

197 
Ãxt
 +ğ
chunk
; \

198 
chunk
 = 0; \

199 } 0)

	)

210 
loÿl
 

211 
	$luÅe
 (
have
, 
z_cÚ¡
 *
Ãxt
, 
šd
 *
šdp
,

212 
outfe
, 
z_¡»am
 * 
¡rm
)

214 
Ï¡
;

215 
chunk
;

216 
Ëá
;

217 
»m
;

218 
b™s
;

219 
code
;

220 
mask
;

221 
max
;

222 
æags
;

223 
’d
;

224 
‹mp
;

225 
´ev
;

226 
fš®
;

227 
¡ack
;

228 
outút
;

229 
outd
 outd;

230 *
p
;

233 
outd
.
outfe
 = outfile;

234 
outd
.
check
 = 0;

237 
æags
 = 
	`NEXT
 ();

238 ià(
Ï¡
 == -1)

239  
Z_BUF_ERROR
;

240 ià(
æags
 & 0x60)

242 
¡rm
->
msg
 = (*) "unknown†zw flags set";

243  
Z_DATA_ERROR
;

245 
max
 = 
æags
 & 0x1f;

246 ià(
max
 < 9 || max > 16)

248 
¡rm
->
msg
 = (*) "lzw bits out of„ange";

249  
Z_DATA_ERROR
;

251 ià(
max
 == 9)

252 
max
 = 10;

253 
æags
 &= 0x80;

256 
b™s
 = 9;

257 
mask
 = 0x1ff;

258 
’d
 = 
æags
 ? 256 : 255;

262 ià(
	`NEXT
 () == -1)

263  
Z_OK
;

264 
fš®
 = 
´ev
 = (è
Ï¡
;

265 ià(
	`NEXT
 () == -1)

266  
Z_BUF_ERROR
;

267 ià(
Ï¡
 & 1)

269 
¡rm
->
msg
 = (*) "invalid†zw code";

270  
Z_DATA_ERROR
;

272 
»m
 = (è
Ï¡
 >> 1;

273 
Ëá
 = 7;

274 
chunk
 = 
b™s
 - 2;

275 
outbuf
[0] = (è
fš®
;

276 
outút
 = 1;

279 
¡ack
 = 0;

283 ià(
’d
 >ğ
mask
 && 
b™s
 < 
max
)

285 
	`FLUSHCODE
 ();

286 
b™s
++;

287 
mask
 <<= 1;

288 
mask
++;

292 ià(
chunk
 == 0)

293 
chunk
 = 
b™s
;

294 
code
 = 
»m
;

295 ià(
	`NEXT
 () == -1)

298 ià(
outút
 && 
	`out
 (&
outd
, 
outbuf
, outcnt))

300 
¡rm
->
Ãxt_š
 = 
outbuf
;

301  
Z_BUF_ERROR
;

303  
Z_OK
;

305 
code
 +ğ(è
Ï¡
 << 
Ëá
;

306 
Ëá
 += 8;

307 
chunk
--;

308 ià(
b™s
 > 
Ëá
)

310 ià(
	`NEXT
 () == -1)

311  
Z_BUF_ERROR
;

312 
code
 +ğ(è
Ï¡
 << 
Ëá
;

313 
Ëá
 += 8;

314 
chunk
--;

316 
code
 &ğ
mask
;

317 
Ëá
 -ğ
b™s
;

318 
»m
 = (è
Ï¡
 >> (8 - 
Ëá
);

321 ià(
code
 =ğ256 && 
æags
)

323 
	`FLUSHCODE
 ();

324 
b™s
 = 9;

325 
mask
 = 0x1ff;

326 
’d
 = 255;

331 
‹mp
 = 
code
;

332 ià(
code
 > 
’d
)

342 ià(
code
 !ğ
’d
 + 1 || 
´ev
 >ƒnd)

344 
¡rm
->
msg
 = (*) "invalid†zw code";

345  
Z_DATA_ERROR
;

347 
m©ch
[
¡ack
++] = (è
fš®
;

348 
code
 = 
´ev
;

352 
p
 = 
m©ch
 + 
¡ack
;

353 
code
 >= 256)

355 *
p
++ = 
suffix
[
code
];

356 
code
 = 
´efix
[code];

358 
¡ack
 = 
p
 - 
m©ch
;

359 
m©ch
[
¡ack
++] = (è
code
;

360 
fš®
 = 
code
;

363 ià(
’d
 < 
mask
)

365 
’d
++;

366 
´efix
[
’d
] = (è
´ev
;

367 
suffix
[
’d
] = (è
fš®
;

371 
´ev
 = 
‹mp
;

374 
¡ack
 > 
SIZE
 - 
outút
)

376 
outút
 < 
SIZE
)

377 
outbuf
[
outút
++] = 
m©ch
[--
¡ack
];

378 ià(
	`out
 (&
outd
, 
outbuf
, 
outút
))

380 
¡rm
->
Ãxt_š
 = 
outbuf
;

381  
Z_BUF_ERROR
;

383 
outút
 = 0;

385 
p
 = 
m©ch
 + 
¡ack
;

388 
outbuf
[
outút
++] = *--
p
;

390 
p
 > 
m©ch
);

391 
¡ack
 = 0;

397 
	}
}

411 
loÿl
 

412 
	$guÅe
 (
z_¡»am
 * 
¡rm
, 
šfe
, 
outfe
)

414 
»t
, 
fœ¡
, 
Ï¡
;

415 
have
, 
æags
, 
Ën
;

416 
z_cÚ¡
 *
Ãxt
 = 
NULL
;

417 
šd
 ind, *
šdp
;

418 
outd
 outd;

421 
šd
.
šfe
 = infile;

422 
šd
.
šbuf
 = inbuf;

423 
šdp
 = &
šd
;

426 
have
 = 0;

427 
fœ¡
 = 1;

428 
¡rm
->
Ãxt_š
 = 
Z_NULL
;

432 ià(
	`NEXT
 () == -1)

434 
»t
 = 
Z_OK
;

437 ià(
Ï¡
 !ğ31 || (
	`NEXT
 () != 139 &&†ast != 157))

439 
¡rm
->
msg
 = (*) "incorrect header check";

440 
»t
 = 
fœ¡
 ? 
Z_DATA_ERROR
 : 
Z_ERRNO
;

443 
fœ¡
 = 0;

446 ià(
Ï¡
 == 157)

448 
»t
 = 
	`luÅe
 (
have
, 
Ãxt
, 
šdp
, 
outfe
, 
¡rm
);

453 
»t
 = 
Z_BUF_ERROR
;

454 ià(
	`NEXT
 () != 8)

456 ià(
Ï¡
 == -1)

458 
¡rm
->
msg
 = (*) "unknown compression method";

459 
»t
 = 
Z_DATA_ERROR
;

462 
æags
 = 
	`NEXT
 ();

463 
	`NEXT
 ();

464 
	`NEXT
 ();

465 
	`NEXT
 ();

466 
	`NEXT
 ();

467 
	`NEXT
 ();

468 
	`NEXT
 ();

469 ià(
Ï¡
 == -1)

471 ià(
æags
 & 0xe0)

473 
¡rm
->
msg
 = (*) "unknown header flags set";

474 
»t
 = 
Z_DATA_ERROR
;

477 ià(
æags
 & 4)

479 
Ën
 = 
	`NEXT
 ();

480 
Ën
 +ğ(è(
	`NEXT
 ()) << 8;

481 ià(
Ï¡
 == -1)

483 
Ën
 > 
have
)

485 
Ën
 -ğ
have
;

486 
have
 = 0;

487 ià(
	`NEXT
 () == -1)

489 
Ën
--;

491 ià(
Ï¡
 == -1)

493 
have
 -ğ
Ën
;

494 
Ãxt
 +ğ
Ën
;

496 ià(
æags
 & 8)

497 
	`NEXT
 (è!ğ0 && 
Ï¡
 != -1)

499 ià(
æags
 & 16)

500 
	`NEXT
 (è!ğ0 && 
Ï¡
 != -1)

502 ià(
æags
 & 2)

504 
	`NEXT
 ();

505 
	`NEXT
 ();

507 ià(
Ï¡
 == -1)

511 
outd
.
outfe
 = outfile;

512 
outd
.
check
 = 1;

513 
outd
.
üc
 = 
	`üc32
 (0L, 
Z_NULL
, 0);

514 
outd
.
tÙ®
 = 0;

517 
¡rm
->
Ãxt_š
 = 
Ãxt
;

518 
¡rm
->
ava_š
 = 
have
;

519 
»t
 = 
	`šæ©eBack
 (
¡rm
, 
š
, 
šdp
, 
out
, &
outd
);

520 ià(
»t
 !ğ
Z_STREAM_END
)

522 
Ãxt
 = 
¡rm
->
Ãxt_š
;

523 
have
 = 
¡rm
->
ava_š
;

524 
¡rm
->
Ãxt_š
 = 
Z_NULL
;

527 
»t
 = 
Z_BUF_ERROR
;

528 ià(
	`NEXT
 (è!ğ(è(
outd
.
üc
 & 0xff) ||

529 
	`NEXT
 (è!ğ(è((
outd
.
üc
 >> 8) & 0xff) ||

530 
	`NEXT
 (è!ğ(è((
outd
.
üc
 >> 16) & 0xff) ||

531 
	`NEXT
 (è!ğ(è((
outd
.
üc
 >> 24) & 0xff))

534 ià(
Ï¡
 != -1)

536 
¡rm
->
msg
 = (*) "incorrect data check";

537 
»t
 = 
Z_DATA_ERROR
;

541 ià(
	`NEXT
 (è!ğ(è(
outd
.
tÙ®
 & 0xff) ||

542 
	`NEXT
 (è!ğ(è((
outd
.
tÙ®
 >> 8) & 0xff) ||

543 
	`NEXT
 (è!ğ(è((
outd
.
tÙ®
 >> 16) & 0xff) ||

544 
	`NEXT
 (è!ğ(è((
outd
.
tÙ®
 >> 24) & 0xff))

547 ià(
Ï¡
 != -1)

549 
¡rm
->
msg
 = (*) "incorrect†ength check";

550 
»t
 = 
Z_DATA_ERROR
;

559  
»t
;

560 
	}
}

566 
loÿl
 

567 
	$cİym‘a
 (*
äom
, *
to
)

569 
¡©
 
was
;

570 
utimbuf
 
wh’
;

573 ià(
	`¡©
 (
äom
, &
was
è!ğ0 || (was.
¡_mode
 & 
S_IFMT
è!ğ
S_IFREG
)

577 (è
	`chmod
 (
to
, 
was
.
¡_mode
 & 07777);

580 (è
	`chown
 (
to
, 
was
.
¡_uid
, was.
¡_gid
);

583 
wh’
.
aùime
 = 
was
.
¡_©ime
;

584 
wh’
.
modtime
 = 
was
.
¡_mtime
;

585 (è
	`utime
 (
to
, &
wh’
);

586 
	}
}

598 
loÿl
 

599 
	$gunz
 (
z_¡»am
 * 
¡rm
, *
šÇme
, *
ouŠame
, 
‹¡
)

601 
»t
;

602 
šfe
, 
outfe
;

605 ià(
šÇme
 =ğ
NULL
 || *inname == 0)

607 
šÇme
 = "-";

608 
šfe
 = 0;

612 
šfe
 = 
	`İ’
 (
šÇme
, 
O_RDONLY
, 0);

613 ià(
šfe
 == -1)

615 
	`årštf
 (
¡d”r
, "guÀÿÂÙ o³À%s\n", 
šÇme
);

619 ià(
‹¡
)

620 
outfe
 = -1;

621 ià(
ouŠame
 =ğ
NULL
 || *outname == 0)

623 
ouŠame
 = "-";

624 
outfe
 = 1;

628 
outfe
 = 
	`İ’
 (
ouŠame
, 
O_CREAT
 | 
O_TRUNC
 | 
O_WRONLY
, 0666);

629 ià(
outfe
 == -1)

631 
	`şo£
 (
šfe
);

632 
	`årštf
 (
¡d”r
, "guÀÿÂÙ c»©%s\n", 
ouŠame
);

636 
”ºo
 = 0;

639 
»t
 = 
	`guÅe
 (
¡rm
, 
šfe
, 
outfe
);

640 ià(
outfe
 > 2)

641 
	`şo£
 (
outfe
);

642 ià(
šfe
 > 2)

643 
	`şo£
 (
šfe
);

646 
»t
)

648 
Z_OK
:

649 
Z_ERRNO
:

650 ià(
šfe
 > 2 && 
outfe
 > 2)

652 
	`cİym‘a
 (
šÇme
, 
ouŠame
);

653 
	`uÆšk
 (
šÇme
);

655 ià(
»t
 =ğ
Z_ERRNO
)

656 
	`årštf
 (
¡d”r
, "gun warning:railing garbage ignored in %s\n",

657 
šÇme
);

659 
Z_DATA_ERROR
:

660 ià(
outfe
 > 2)

661 
	`uÆšk
 (
ouŠame
);

662 
	`årštf
 (
¡d”r
, "guÀd©¨”rÜ oÀ%s: %s\n", 
šÇme
, 
¡rm
->
msg
);

664 
Z_MEM_ERROR
:

665 ià(
outfe
 > 2)

666 
	`uÆšk
 (
ouŠame
);

667 
	`årštf
 (
¡d”r
, "gun out of memoryƒrror--aborting\n");

669 
Z_BUF_ERROR
:

670 ià(
outfe
 > 2)

671 
	`uÆšk
 (
ouŠame
);

672 ià(
¡rm
->
Ãxt_š
 !ğ
Z_NULL
)

674 
	`årštf
 (
¡d”r
, "gun writeƒrror on %s: %s\n",

675 
ouŠame
, 
	`¡»¼Ü
 (
”ºo
));

677 ià(
”ºo
)

679 
	`årštf
 (
¡d”r
, "gun„eadƒrror on %s: %s\n",

680 
šÇme
, 
	`¡»¼Ü
 (
”ºo
));

684 
	`årštf
 (
¡d”r
, "guÀuÃx³ùedƒnd oàfÚ %s\n", 
šÇme
);

688 ià(
outfe
 > 2)

689 
	`uÆšk
 (
ouŠame
);

690 
	`årštf
 (
¡d”r
, "gun internalƒrror--aborting\n");

694 
	}
}

699 
	$maš
 (
¬gc
, **
¬gv
)

701 
»t
, 
Ën
, 
‹¡
;

702 *
ouŠame
;

703 *
wšdow
;

704 
z_¡»am
 
¡rm
;

707 
wšdow
 = 
m©ch
;

708 
¡rm
.
z®loc
 = 
Z_NULL
;

709 
¡rm
.
zä“
 = 
Z_NULL
;

710 
¡rm
.
İaque
 = 
Z_NULL
;

711 
»t
 = 
	`šæ©eBackIn™
 (&
¡rm
, 15, 
wšdow
);

712 ià(
»t
 !ğ
Z_OK
)

714 
	`årštf
 (
¡d”r
, "gun out of memoryƒrror--aborting\n");

719 
¬gc
--;

720 
¬gv
++;

721 
‹¡
 = 0;

722 ià(
¬gc
 && 
	`¡rcmp
 (*
¬gv
, "-h") == 0)

724 
	`årštf
 (
¡d”r
, "gun 1.6 (17 Jan 2010)\n");

725 
	`årštf
 (
¡d”r
, "Copyright (C) 2003-2010 Mark Adler\n");

726 
	`årštf
 (
¡d”r
, "usage: gun [-t] [file1.gz [file2.Z ...]]\n");

729 ià(
¬gc
 && 
	`¡rcmp
 (*
¬gv
, "-t") == 0)

731 
‹¡
 = 1;

732 
¬gc
--;

733 
¬gv
++;

735 ià(
¬gc
)

738 ià(
‹¡
)

739 
ouŠame
 = 
NULL
;

742 
Ën
 = (è
	`¡¾’
 (*
¬gv
);

743 ià(
	`¡rcmp
 (*
¬gv
 + 
Ën
 - 3, ".gz") == 0 ||

744 
	`¡rcmp
 (*
¬gv
 + 
Ën
 - 3, "-gz") == 0)

745 
Ën
 -= 3;

746 ià(
	`¡rcmp
 (*
¬gv
 + 
Ën
 - 2, ".z") == 0 ||

747 
	`¡rcmp
 (*
¬gv
 + 
Ën
 - 2, "-z") == 0 ||

748 
	`¡rcmp
 (*
¬gv
 + 
Ën
 - 2, "_z") == 0 ||

749 
	`¡rcmp
 (*
¬gv
 + 
Ën
 - 2, ".Z") == 0)

750 
Ën
 -= 2;

753 
	`årštf
 (
¡d”r
, "gunƒrror:‚o gzype on %s--skipping\n",

754 *
¬gv
);

757 
ouŠame
 = 
	`m®loc
 (
Ën
 + 1);

758 ià(
ouŠame
 =ğ
NULL
)

760 
	`årštf
 (
¡d”r
, "gun out of memoryƒrror--aborting\n");

761 
»t
 = 1;

764 
	`memıy
 (
ouŠame
, *
¬gv
, 
Ën
);

765 
ouŠame
[
Ën
] = 0;

767 
»t
 = 
	`gunz
 (&
¡rm
, *
¬gv
, 
ouŠame
, 
‹¡
);

768 ià(
ouŠame
 !ğ
NULL
)

769 
	`ä“
 (
ouŠame
);

770 ià(
»t
)

773 
¬gv
++, --
¬gc
);

775 
»t
 = 
	`gunz
 (&
¡rm
, 
NULL
, NULL, 
‹¡
);

778 
	`šæ©eBackEnd
 (&
¡rm
);

779  
»t
;

780 
	}
}

	@examples/gzappend.c

80 
	~<¡dio.h
>

81 
	~<¡dlib.h
>

82 
	~<¡ršg.h
>

83 
	~<fú.h
>

84 
	~<uni¡d.h
>

85 
	~"zlib.h
"

87 
	#loÿl
 

	)

88 
	#LGCHUNK
 14

	)

89 
	#CHUNK
 (1U << 
LGCHUNK
)

	)

90 
	#DSIZE
 32768U

	)

93 
loÿl
 

94 
	$bye
 (*
msg1
, *
msg2
)

96 
	`årštf
 (
¡d”r
, "gz­³ndƒ¼Ü: %s%s\n", 
msg1
, 
msg2
);

97 
	`ex™
 (1);

98 
	}
}

103 
loÿl
 

104 
	$gcd
 (
a
, 
b
)

106 
c
;

108 
a
 && 
b
)

109 ià(
a
 > 
b
)

111 
c
 = 
b
;

112 
a
 - 
c
 >= c)

113 
c
 <<= 1;

114 
a
 -ğ
c
;

118 
c
 = 
a
;

119 
b
 - 
c
 >= c)

120 
c
 <<= 1;

121 
b
 -ğ
c
;

123  
a
 + 
b
;

124 
	}
}

127 
loÿl
 

128 
	$rÙ©e
 (*
li¡
, 
Ën
, 
rÙ
)

130 
tmp
;

131 
cyşes
;

132 *
¡¬t
, *
Ï¡
, *
to
, *
äom
;

135 ià(
Ën
 < 2)

137 ià(
rÙ
 >ğ
Ën
)

138 
rÙ
 %ğ
Ën
;

139 ià(
rÙ
 == 0)

143 
Ï¡
 = 
li¡
 + (
Ën
 - 1);

146 ià(
rÙ
 == 1)

148 
tmp
 = *
li¡
;

149 
	`memıy
 (
li¡
,†i¡ + 1, 
Ën
 - 1);

150 *
Ï¡
 = 
tmp
;

155 ià(
rÙ
 =ğ
Ën
 - 1)

157 
tmp
 = *
Ï¡
;

158 
	`memmove
 (
li¡
 + 1,†i¡, 
Ën
 - 1);

159 *
li¡
 = 
tmp
;

164 
cyşes
 = 
	`gcd
 (
Ën
, 
rÙ
);

167 
¡¬t
 = 
äom
 = 
li¡
 + 
cyşes
;

168 
tmp
 = *
äom
;

171 
to
 = 
äom
;

172 
äom
 +ğ
rÙ
;

173 ià(
äom
 > 
Ï¡
)

174 
äom
 -ğ
Ën
;

175 ià(
äom
 =ğ
¡¬t
)

177 *
to
 = *
äom
;

179 *
to
 = 
tmp
;

181 --
cyşes
);

182 
	}
}

187 
	mfd
;

188 
	msize
;

189 
	mËá
;

190 *
	mbuf
;

191 
z_cÚ¡
 *
	mÃxt
;

192 *
	mÇme
;

193 } 
	tfe
;

196 
loÿl
 

197 
	$»adš
 (
fe
 * 
š
)

199 
Ën
;

201 
Ën
 = 
	`»ad
 (
š
->
fd
, in->
buf
, 1 << in->
size
);

202 ià(
Ën
 == -1)

203 
	`bye
 ("”rÜ„—dšg ", 
š
->
Çme
);

204 
š
->
Ëá
 = (è
Ën
;

205 
š
->
Ãxt
 = in->
buf
;

206  
Ën
;

207 
	}
}

210 
loÿl
 

211 
	$»admÜe
 (
fe
 * 
š
)

213 ià(
	`»adš
 (
š
) == 0)

214 
	`bye
 ("uÃx³ùedƒnd oà", 
š
->
Çme
);

216 
	}
}

218 
	#»ad1
(
š
è(š->
Ëá
 =ğ0 ? 
	`»admÜe
(in) : 0, \

219 
š
->
Ëá
--, *(š->
Ãxt
)++)

	)

222 
loÿl
 

223 
	$sk
 (
fe
 * 
š
, 
n
)

225 
by·ss
;

227 ià(
n
 > 
š
->
Ëá
)

229 
n
 -ğ
š
->
Ëá
;

230 
by·ss
 = 
n
 & ~((1U << 
š
->
size
) - 1);

231 ià(
by·ss
)

233 ià(
	`l£ek
 (
š
->
fd
, (
off_t
è
by·ss
, 
SEEK_CUR
) == -1)

234 
	`bye
 ("£ekšg ", 
š
->
Çme
);

235 
n
 -ğ
by·ss
;

237 
	`»admÜe
 (
š
);

238 ià(
n
 > 
š
->
Ëá
)

239 
	`bye
 ("uÃx³ùedƒnd oà", 
š
->
Çme
);

241 
š
->
Ëá
 -ğ
n
;

242 
š
->
Ãxt
 +ğ
n
;

243 
	}
}

247 
	$»ad4
 (
fe
 * 
š
)

249 
v®
;

251 
v®
 = 
	`»ad1
 (
š
);

252 
v®
 +ğ(è
	`»ad1
 (
š
) << 8;

253 
v®
 +ğ(è
	`»ad1
 (
š
) << 16;

254 
v®
 +ğ(è
	`»ad1
 (
š
) << 24;

255  
v®
;

256 
	}
}

259 
loÿl
 

260 
	$gzh—d”
 (
fe
 * 
š
)

262 
æags
;

263 
n
;

265 ià(
	`»ad1
 (
š
) != 31 ||„ead1 (in) != 139)

266 
	`bye
 (
š
->
Çme
, "‚ot‡ gzip file");

267 ià(
	`»ad1
 (
š
) != 8)

268 
	`bye
 ("unknowÀcom´essiÚ m‘hod in", 
š
->
Çme
);

269 
æags
 = 
	`»ad1
 (
š
);

270 ià(
æags
 & 0xe0)

271 
	`bye
 ("unknowÀh—d” fÏg £ˆš", 
š
->
Çme
);

272 
	`sk
 (
š
, 6);

273 ià(
æags
 & 4)

275 
n
 = 
	`»ad1
 (
š
);

276 
n
 +ğ(è(
	`»ad1
 (
š
)) << 8;

277 
	`sk
 (
š
, 
n
);

279 ià(
æags
 & 8)

280 
	`»ad1
 (
š
) != 0);

281 ià(
æags
 & 16)

282 
	`»ad1
 (
š
) != 0);

283 ià(
æags
 & 2)

284 
	`sk
 (
š
, 2);

285 
	}
}

291 
loÿl
 

292 
	$gzsÿn
 (*
Çme
, 
z_¡»am
 * 
¡rm
, 
Ëv–
)

294 
»t
, 
Ï¡b™
, 
Ëá
, 
fuÎ
;

295 
have
;

296 
üc
, 
tÙ
;

297 *
wšdow
;

298 
off_t
 
Ï¡off
, 
’d
;

299 
fe
 
gz
;

302 
gz
.
Çme
 =‚ame;

303 
gz
.
fd
 = 
	`İ’
 (
Çme
, 
O_RDWR
, 0);

304 ià(
gz
.
fd
 == -1)

305 
	`bye
 ("ÿÂÙ o³À", 
Çme
);

306 
gz
.
buf
 = 
	`m®loc
 (
CHUNK
);

307 ià(
gz
.
buf
 =ğ
NULL
)

308 
	`bye
 ("out of memory", "");

309 
gz
.
size
 = 
LGCHUNK
;

310 
gz
.
Ëá
 = 0;

313 
	`gzh—d”
 (&
gz
);

316 
wšdow
 = 
	`m®loc
 (
DSIZE
);

317 ià(
wšdow
 =ğ
NULL
)

318 
	`bye
 ("out of memory", "");

319 
¡rm
->
z®loc
 = 
Z_NULL
;

320 
¡rm
->
zä“
 = 
Z_NULL
;

321 
¡rm
->
İaque
 = 
Z_NULL
;

322 
»t
 = 
	`šæ©eIn™2
 (
¡rm
, -15);

323 ià(
»t
 !ğ
Z_OK
)

324 
	`bye
 ("out of memory", " or†ibrary mismatch");

327 
Ï¡b™
 = 0;

328 
Ï¡off
 = 
	`l£ek
 (
gz
.
fd
, 0L, 
SEEK_CUR
è- gz.
Ëá
;

329 
Ëá
 = 0;

330 
¡rm
->
ava_š
 = 
gz
.
Ëá
;

331 
¡rm
->
Ãxt_š
 = 
gz
.
Ãxt
;

332 
üc
 = 
	`üc32
 (0L, 
Z_NULL
, 0);

333 
have
 = 
fuÎ
 = 0;

337 ià(
¡rm
->
ava_š
 == 0)

339 
	`»admÜe
 (&
gz
);

340 
¡rm
->
ava_š
 = 
gz
.
Ëá
;

341 
¡rm
->
Ãxt_š
 = 
gz
.
Ãxt
;

345 
¡rm
->
ava_out
 = 
DSIZE
 - 
have
;

346 
¡rm
->
Ãxt_out
 = 
wšdow
 + 
have
;

349 
»t
 = 
	`šæ©e
 (
¡rm
, 
Z_BLOCK
);

350 ià(
»t
 =ğ
Z_STREAM_ERROR
)

351 
	`bye
 ("internal streamƒrror!", "");

352 ià(
»t
 =ğ
Z_MEM_ERROR
)

353 
	`bye
 ("out of memory", "");

354 ià(
»t
 =ğ
Z_DATA_ERROR
)

355 
	`bye
 ("šv®id com´es£d d©a--fÜm© viŞ©ed in", 
Çme
);

358 
üc
 = 
	`üc32
 (üc, 
wšdow
 + 
have
, 
DSIZE
 - hav- 
¡rm
->
ava_out
);

359 ià(
¡rm
->
ava_out
)

360 
have
 = 
DSIZE
 - 
¡rm
->
ava_out
;

363 
have
 = 0;

364 
fuÎ
 = 1;

368 ià(
¡rm
->
d©a_ty³
 & 128)

370 ià(
¡rm
->
d©a_ty³
 & 64)

371 
Ëá
 = 
¡rm
->
d©a_ty³
 & 0x1f;

374 
Ï¡b™
 = 
¡rm
->
d©a_ty³
 & 0x1f;

375 
Ï¡off
 = 
	`l£ek
 (
gz
.
fd
, 0L, 
SEEK_CUR
è- 
¡rm
->
ava_š
;

379 
»t
 !ğ
Z_STREAM_END
);

380 
	`šæ©eEnd
 (
¡rm
);

381 
gz
.
Ëá
 = 
¡rm
->
ava_š
;

382 
gz
.
Ãxt
 = 
¡rm
->
Ãxt_š
;

385 
’d
 = 
	`l£ek
 (
gz
.
fd
, 0L, 
SEEK_CUR
è- gz.
Ëá
;

388 ià(
üc
 !ğ
	`»ad4
 (&
gz
))

389 
	`bye
 ("šv®id com´es£d d©a--üømism©ch iÀ", 
Çme
);

390 
tÙ
 = 
¡rm
->
tÙ®_out
;

391 ià((
tÙ
 & 0xffffffffULè!ğ
	`»ad4
 (&
gz
))

392 
	`bye
 ("šv®id com´es£d d©a--Ëngth mism©ch in", 
Çme
);

395 ià(
gz
.
Ëá
 || 
	`»adš
 (&gz))

396 
	`årštf
 (
¡d”r
,

400 
	`l£ek
 (
gz
.
fd
, 
Ï¡off
 - (
Ï¡b™
 !ğ0), 
SEEK_SET
);

401 ià(
	`»ad
 (
gz
.
fd
, gz.
buf
, 1) != 1)

402 
	`bye
 ("»adšg‡á” s“k oÀ", 
Çme
);

403 *
gz
.
buf
 = (è(*gz.buà^ (1 << ((8 - 
Ï¡b™
) & 7)));

404 
	`l£ek
 (
gz
.
fd
, -1L, 
SEEK_CUR
);

405 ià(
	`wr™e
 (
gz
.
fd
, gz.
buf
, 1) != 1)

406 
	`bye
 ("wr™šg‡á” s“kØ", 
Çme
);

409 ià(
fuÎ
)

411 
	`rÙ©e
 (
wšdow
, 
DSIZE
, 
have
);

412 
have
 = 
DSIZE
;

416 
»t
 = 
	`deæ©eIn™2
 (
¡rm
, 
Ëv–
, 
Z_DEFLATED
, -15, 8, 
Z_DEFAULT_STRATEGY
);

417 ià(
»t
 !ğ
Z_OK
)

418 
	`bye
 ("out of memory", "");

419 
	`deæ©eS‘DiùiÚ¬y
 (
¡rm
, 
wšdow
, 
have
);

420 
¡rm
->
adËr
 = 
üc
;

421 
¡rm
->
tÙ®_š
 = 
tÙ
;

422 ià(
Ëá
)

424 
	`l£ek
 (
gz
.
fd
, --
’d
, 
SEEK_SET
);

425 ià(
	`»ad
 (
gz
.
fd
, gz.
buf
, 1) != 1)

426 
	`bye
 ("»adšg‡á” s“k oÀ", 
Çme
);

427 
	`deæ©ePrime
 (
¡rm
, 8 - 
Ëá
, *
gz
.
buf
);

429 
	`l£ek
 (
gz
.
fd
, 
’d
, 
SEEK_SET
);

432 
	`ä“
 (
wšdow
);

433 
	`ä“
 (
gz
.
buf
);

434  
gz
.
fd
;

435 
	}
}

439 
loÿl
 

440 
	$gzck
 (*
Çme
, 
gd
, 
z_¡»am
 * 
¡rm
, 
Ï¡
)

442 
fd
, 
Ën
, 
»t
;

443 
Ëá
;

444 *
š
, *
out
;

447 
fd
 = 0;

448 ià(
Çme
 !ğ
NULL
)

450 
fd
 = 
	`İ’
 (
Çme
, 
O_RDONLY
, 0);

451 ià(
fd
 == -1)

452 
	`årštf
 (
¡d”r
, "gzappend warning: %s‚ot found, skipping ...\n",

453 
Çme
);

457 
š
 = 
	`m®loc
 (
CHUNK
);

458 
out
 = 
	`m®loc
 (
CHUNK
);

459 ià(
š
 =ğ
NULL
 || 
out
 == NULL)

460 
	`bye
 ("out of memory", "");

466 
Ën
 = 
	`»ad
 (
fd
, 
š
, 
CHUNK
);

467 ià(
Ën
 == -1)

469 
	`årštf
 (
¡d”r
,

471 
Çme
);

472 
Ën
 = 0;

474 
¡rm
->
ava_š
 = (è
Ën
;

475 
¡rm
->
Ãxt_š
 = 
š
;

476 ià(
Ën
)

477 
¡rm
->
adËr
 = 
	`üc32
 (¡rm->adËr, 
š
, (è
Ën
);

482 
¡rm
->
ava_out
 = 
CHUNK
;

483 
¡rm
->
Ãxt_out
 = 
out
;

484 
»t
 = 
	`deæ©e
 (
¡rm
, 
Ï¡
 && 
Ën
 =ğ0 ? 
Z_FINISH
 : 
Z_NO_FLUSH
);

485 
Ëá
 = 
CHUNK
 - 
¡rm
->
ava_out
;

486 
Ëá
)

488 
Ën
 = 
	`wr™e
 (
gd
, 
out
 + 
CHUNK
 - 
¡rm
->
ava_out
 - 
Ëá
,†eft);

489 ià(
Ën
 == -1)

490 
	`bye
 ("writing gzip file", "");

491 
Ëá
 -ğ(è
Ën
;

494 
¡rm
->
ava_out
 =ğ0 && 
»t
 !ğ
Z_STREAM_END
);

496 
Ën
 != 0);

499 ià(
Ï¡
)

501 
	`deæ©eEnd
 (
¡rm
);

502 
out
[0] = (è(
¡rm
->
adËr
);

503 
out
[1] = (è(
¡rm
->
adËr
 >> 8);

504 
out
[2] = (è(
¡rm
->
adËr
 >> 16);

505 
out
[3] = (è(
¡rm
->
adËr
 >> 24);

506 
out
[4] = (è(
¡rm
->
tÙ®_š
);

507 
out
[5] = (è(
¡rm
->
tÙ®_š
 >> 8);

508 
out
[6] = (è(
¡rm
->
tÙ®_š
 >> 16);

509 
out
[7] = (è(
¡rm
->
tÙ®_š
 >> 24);

510 
Ën
 = 8;

513 
»t
 = 
	`wr™e
 (
gd
, 
out
 + 8 - 
Ën
,†en);

514 ià(
»t
 == -1)

515 
	`bye
 ("writing gzip file", "");

516 
Ën
 -ğ
»t
;

518 
Ën
);

519 
	`şo£
 (
gd
);

523 
	`ä“
 (
out
);

524 
	`ä“
 (
š
);

525 ià(
fd
 > 0)

526 
	`şo£
 (
fd
);

527 
	}
}

534 
	$maš
 (
¬gc
, **
¬gv
)

536 
gd
, 
Ëv–
;

537 
z_¡»am
 
¡rm
;

540 
¬gc
--;

541 
¬gv
++;

544 ià(*
¬gv
 =ğ
NULL
)

546 
´štf


548 
´štf


554 
Ëv–
 = 
Z_DEFAULT_COMPRESSION
;

555 ià(
¬gv
[0][0] == '-')

557 ià(
¬gv
[0][1] < '0' ||‡rgv[0][1] > '9' ||‡rgv[0][2] != 0)

558 
	`bye
 ("invalid compression†evel", "");

559 
Ëv–
 = 
¬gv
[0][1] - '0';

560 ià(*++
¬gv
 =ğ
NULL
)

561 
	`bye
 ("no gzip file‚ame‡fter options", "");

565 
gd
 = 
	`gzsÿn
 (*
¬gv
++, &
¡rm
, 
Ëv–
);

568 ià(*
¬gv
 =ğ
NULL
)

569 
	`gzck
 (
NULL
, 
gd
, &
¡rm
, 1);

573 
	`gzck
 (*
¬gv
, 
gd
, &
¡rm
,‡rgv[1] =ğ
NULL
);

575 *++
¬gv
 !ğ
NULL
);

577 
	}
}

	@examples/gzjoin.c

56 
	~<¡dio.h
>

57 
	~<¡dlib.h
>

58 
	~<fú.h
>

59 
	~<uni¡d.h
>

60 
	~"zlib.h
"

63 
	#loÿl
 

	)

66 
loÿl
 

67 
	$ba
 (*
why1
, *
why2
)

69 
	`årštf
 (
¡d”r
, "gzjošƒ¼Ü: %s%s, ouuˆšcom¶‘e\n", 
why1
, 
why2
);

70 
	`ex™
 (1);

72 
	}
}

76 
	#CHUNK
 32768

	)

81 *
	mÇme
;

82 
	mfd
;

83 
	mËá
;

84 *
	mÃxt
;

85 *
	mbuf
;

86 } 
	tbš
;

89 
loÿl
 

90 
	$bşo£
 (
bš
 * 
š
)

92 ià(
š
 !ğ
NULL
)

94 ià(
š
->
fd
 != -1)

95 
	`şo£
 (
š
->
fd
);

96 ià(
š
->
buf
 !ğ
NULL
)

97 
	`ä“
 (
š
->
buf
);

98 
	`ä“
 (
š
);

100 
	}
}

104 
loÿl
 
bš
 *

105 
	$bİ’
 (*
Çme
)

107 
bš
 *
š
;

109 
š
 = 
	`m®loc
 ( (
bš
));

110 ià(
š
 =ğ
NULL
)

111  
NULL
;

112 
š
->
buf
 = 
	`m®loc
 (
CHUNK
);

113 
š
->
fd
 = 
	`İ’
 (
Çme
, 
O_RDONLY
, 0);

114 ià(
š
->
buf
 =ğ
NULL
 || in->
fd
 == -1)

116 
	`bşo£
 (
š
);

117  
NULL
;

119 
š
->
Ëá
 = 0;

120 
š
->
Ãxt
 = in->
buf
;

121 
š
->
Çme
 =‚ame;

122  
š
;

123 
	}
}

127 
loÿl
 

128 
	$blßd
 (
bš
 * 
š
)

130 
Ën
;

132 ià(
š
 =ğ
NULL
)

134 ià(
š
->
Ëá
 != 0)

136 
š
->
Ãxt
 = in->
buf
;

139 
Ën
 = (è
	`»ad
 (
š
->
fd
, in->
buf
 + in->
Ëá
, 
CHUNK
 - in->left);

140 ià(
Ën
 < 0)

142 
š
->
Ëá
 +ğ(è
Ën
;

144 
Ën
 !ğ0 && 
š
->
Ëá
 < 
CHUNK
);

145  
Ën
 == 0 ? 1 : 0;

146 
	}
}

149 
	#bg‘
(
š
è(š->
Ëá
 ? 0 : 
	`blßd
(in), \

150 
š
->
Ëá
 ? (š->Ëá--, *(š->
Ãxt
)++) : \

151 
	`ba
("uÃx³ùedƒnd oàfÚ ", 
š
->
Çme
))

	)

154 
loÿl
 

155 
	$bg‘4
 (
bš
 * 
š
)

157 
v®
;

159 
v®
 = 
	`bg‘
 (
š
);

160 
v®
 +ğ(è(
	`bg‘
 (
š
)) << 8;

161 
v®
 +ğ(è(
	`bg‘
 (
š
)) << 16;

162 
v®
 +ğ(è(
	`bg‘
 (
š
)) << 24;

163  
v®
;

164 
	}
}

167 
loÿl
 

168 
	$bsk
 (
bš
 * 
š
, 
sk
)

171 ià(
š
 =ğ
NULL
)

175 ià(
sk
 <ğ
š
->
Ëá
)

177 
š
->
Ëá
 -ğ
sk
;

178 
š
->
Ãxt
 +ğ
sk
;

183 
sk
 -ğ
š
->
Ëá
;

184 
š
->
Ëá
 = 0;

187 ià(
sk
 > 
CHUNK
)

189 
Ëá
;

191 
Ëá
 = 
sk
 & (
CHUNK
 - 1);

192 ià(
Ëá
 == 0)

196 
	`l£ek
 (
š
->
fd
, 
sk
 - 1, 
SEEK_CUR
);

197 ià(
	`»ad
 (
š
->
fd
, in->
buf
, 1) != 1)

198 
	`ba
 ("uÃx³ùedƒnd oàfÚ ", 
š
->
Çme
);

203 
	`l£ek
 (
š
->
fd
, 
sk
 - 
Ëá
, 
SEEK_CUR
);

204 
sk
 = 
Ëá
;

208 
	`blßd
 (
š
);

209 ià(
sk
 > 
š
->
Ëá
)

210 
	`ba
 ("uÃx³ùedƒnd oàfÚ ", 
š
->
Çme
);

211 
š
->
Ëá
 -ğ
sk
;

212 
š
->
Ãxt
 +ğ
sk
;

213 
	}
}

218 
loÿl
 

219 
	$gzh—d
 (
bš
 * 
š
)

221 
æags
;

224 ià(
	`bg‘
 (
š
) != 0x1f || bget (in) != 0x8b || bget (in) != 8)

225 
	`ba
 (
š
->
Çme
, " is‚ot‡ valid gzip file");

228 
æags
 = 
	`bg‘
 (
š
);

229 ià((
æags
 & 0xe0) != 0)

230 
	`ba
 ("unknowÀ»£rved b™ £ˆš ", 
š
->
Çme
);

233 
	`bsk
 (
š
, 6);

236 ià(
æags
 & 4)

238 
Ën
;

240 
Ën
 = 
	`bg‘
 (
š
);

241 
Ën
 +ğ(è(
	`bg‘
 (
š
)) << 8;

242 
	`bsk
 (
š
, 
Ën
);

246 ià(
æags
 & 8)

247 
	`bg‘
 (
š
) != 0)

251 ià(
æags
 & 16)

252 
	`bg‘
 (
š
) != 0)

256 ià(
æags
 & 2)

257 
	`bsk
 (
š
, 2);

258 
	}
}

261 
loÿl
 

262 
	$put4
 (
v®
, 
FILE
 * 
out
)

264 
	`putc
 (
v®
 & 0xff, 
out
);

265 
	`putc
 ((
v®
 >> 8è& 0xff, 
out
);

266 
	`putc
 ((
v®
 >> 16è& 0xff, 
out
);

267 
	`putc
 ((
v®
 >> 24è& 0xff, 
out
);

268 
	}
}

271 
loÿl
 

272 
	$zpuÎ
 (
z_¡»amp
 
¡rm
, 
bš
 * 
š
)

274 ià(
š
->
Ëá
 == 0)

275 
	`blßd
 (
š
);

276 ià(
š
->
Ëá
 == 0)

277 
	`ba
 ("uÃx³ùedƒnd oàfÚ ", 
š
->
Çme
);

278 
¡rm
->
ava_š
 = 
š
->
Ëá
;

279 
¡rm
->
Ãxt_š
 = 
š
->
Ãxt
;

280 
	}
}

283 
loÿl
 

284 
	$gzš™
 (*
üc
, *
tÙ
, 
FILE
 * 
out
)

286 
	`fwr™e
 ("\x1f\x8b\x08\0\0\0\0\0\0\xff", 1, 10, 
out
);

287 *
üc
 = 
	`üc32
 (0L, 
Z_NULL
, 0);

288 *
tÙ
 = 0;

289 
	}
}

298 
loÿl
 

299 
	$gzcİy
 (*
Çme
, 
şr
, *
üc
, *
tÙ
,

300 
FILE
 * 
out
)

302 
»t
;

303 
pos
;

304 
Ï¡
;

305 
bš
 *
š
;

306 *
¡¬t
;

307 *
junk
;

308 
z_off_t
 
Ën
;

309 
z_¡»am
 
¡rm
;

312 
š
 = 
	`bİ’
 (
Çme
);

313 ià(
š
 =ğ
NULL
)

314 
	`ba
 ("could‚Ù o³À", 
Çme
);

315 
	`gzh—d
 (
š
);

319 
junk
 = 
	`m®loc
 (
CHUNK
);

320 
¡rm
.
z®loc
 = 
Z_NULL
;

321 
¡rm
.
zä“
 = 
Z_NULL
;

322 
¡rm
.
İaque
 = 
Z_NULL
;

323 
¡rm
.
ava_š
 = 0;

324 
¡rm
.
Ãxt_š
 = 
Z_NULL
;

325 
»t
 = 
	`šæ©eIn™2
 (&
¡rm
, -15);

326 ià(
junk
 =ğ
NULL
 || 
»t
 !ğ
Z_OK
)

327 
	`ba
 ("out of memory", "");

330 
Ën
 = 0;

331 
	`zpuÎ
 (&
¡rm
, 
š
);

332 
¡¬t
 = 
š
->
Ãxt
;

333 
Ï¡
 = 
¡¬t
[0] & 1;

334 ià(
Ï¡
 && 
şr
)

335 
¡¬t
[0] &= ~1;

336 
¡rm
.
ava_out
 = 0;

340 ià(
¡rm
.
ava_š
 =ğ0 && sŒm.
ava_out
 != 0)

342 
	`fwr™e
 (
¡¬t
, 1, 
¡rm
.
Ãxt_š
 - s¹, 
out
);

343 
¡¬t
 = 
š
->
buf
;

344 
š
->
Ëá
 = 0;

345 
	`zpuÎ
 (&
¡rm
, 
š
);

349 
¡rm
.
ava_out
 = 
CHUNK
;

350 
¡rm
.
Ãxt_out
 = 
junk
;

351 
»t
 = 
	`šæ©e
 (&
¡rm
, 
Z_BLOCK
);

352 
»t
)

354 
Z_MEM_ERROR
:

355 
	`ba
 ("out of memory", "");

356 
Z_DATA_ERROR
:

357 
	`ba
 ("šv®id com´es£d d©¨š ", 
š
->
Çme
);

361 
Ën
 +ğ
CHUNK
 - 
¡rm
.
ava_out
;

364 ià(
¡rm
.
d©a_ty³
 & 128)

367 ià(
Ï¡
)

371 
pos
 = 
¡rm
.
d©a_ty³
 & 7;

374 ià(
pos
 != 0)

377 
pos
 = 0x100 >>…os;

378 
Ï¡
 = 
¡rm
.
Ãxt_š
[-1] & 
pos
;

379 ià(
Ï¡
 && 
şr
)

380 
š
->
buf
[
¡rm
.
Ãxt_š
 - in->buà- 1] &ğ~
pos
;

385 ià(
¡rm
.
ava_š
 == 0)

388 
	`fwr™e
 (
¡¬t
, 1, 
¡rm
.
Ãxt_š
 - s¹, 
out
);

389 
¡¬t
 = 
š
->
buf
;

390 
š
->
Ëá
 = 0;

391 
	`zpuÎ
 (&
¡rm
, 
š
);

393 
Ï¡
 = 
¡rm
.
Ãxt_š
[0] & 1;

394 ià(
Ï¡
 && 
şr
)

395 
š
->
buf
[
¡rm
.
Ãxt_š
 - in->buf] &= ~1;

401 
š
->
Ëá
 = 
¡rm
.
ava_š
;

402 
š
->
Ãxt
 = in->
buf
 + (
¡rm
.
Ãxt_š
 - in->buf);

405 
pos
 = 
¡rm
.
d©a_ty³
 & 7;

406 
	`fwr™e
 (
¡¬t
, 1, 
š
->
Ãxt
 - s¹ - 1, 
out
);

407 
Ï¡
 = 
š
->
Ãxt
[-1];

408 ià(
pos
 =ğ0 || !
şr
)

410 
	`putc
 (
Ï¡
, 
out
);

414 
Ï¡
 &ğ((0x100 >> 
pos
) - 1);

415 ià(
pos
 & 1)

418 
	`putc
 (
Ï¡
, 
out
);

419 ià(
pos
 == 1)

420 
	`putc
 (0, 
out
);

421 
	`fwr™e
 ("\0\0\xff\xff", 1, 4, 
out
);

426 
pos
)

429 
	`putc
 (
Ï¡
 | 8, 
out
);

430 
Ï¡
 = 0;

432 
	`putc
 (
Ï¡
 | 0x20, 
out
);

433 
Ï¡
 = 0;

435 
	`putc
 (
Ï¡
 | 0x80, 
out
);

436 
	`putc
 (0, 
out
);

442 *
üc
 = 
	`üc32_combše
 (*üc, 
	`bg‘4
 (
š
), 
Ën
);

443 *
tÙ
 +ğ(è
Ën
;

446 
	`šæ©eEnd
 (&
¡rm
);

447 
	`ä“
 (
junk
);

448 
	`bşo£
 (
š
);

451 ià(!
şr
)

453 
	`put4
 (*
üc
, 
out
);

454 
	`put4
 (*
tÙ
, 
out
);

456 
	}
}

460 
	$maš
 (
¬gc
, **
¬gv
)

462 
üc
, 
tÙ
;

465 
¬gc
--;

466 
¬gv
++;

469 ià(
¬gc
 == 0)

471 
	`åuts
 ("gzjoin usage: gzjoin f1.gz [f2.gz [f3.gz ...]] > fjoin.gz\n",

472 
¡d”r
);

477 
	`gzš™
 (&
üc
, &
tÙ
, 
¡dout
);

478 
¬gc
--)

479 
	`gzcİy
 (*
¬gv
++, 
¬gc
, &
üc
, &
tÙ
, 
¡dout
);

483 
	}
}

	@examples/gzlog.c

226 
	~<sys/ty³s.h
>

227 
	~<¡dio.h
>

228 
	~<¡dlib.h
>

229 
	~<¡ršg.h
>

230 
	~<fú.h
>

231 
	~<uni¡d.h
>

233 
	~<”ºo.h
>

234 
	~<time.h
>

235 
	~<sys/¡©.h
>

236 
	~<sys/time.h
>

237 
	~"zlib.h
"

239 
	~"gzlog.h
"

241 
	#loÿl
 

	)

242 
	tušt
;

243 
	tulÚg
;

246 #ifdeà
DEBUG


247 
	~<£tjmp.h
>

248 
jmp_buf
 
	ggzlog_jump
;

249 
	ggzlog_ba
 = 0;

250 
	ggzlog_couÁ
 = -1;

251 
	#BAIL
(
n
èdØ{ iàÒ =ğ
gzlog_ba
 && 
gzlog_couÁ
-- == 0) \

252 
	`lÚgjmp
(
gzlog_jump
, 
gzlog_ba
); } 0)

	)

254 
	#BAIL
(
n
)

	)

258 
	#PATIENCE
 300

	)

261 
	#MAX_STORE
 16

	)

266 
	#TRIGGER
 1024

	)

269 
	#DICT
 32768U

	)

272 
	#NO_OP
 0

	)

273 
	#APPEND_OP
 1

	)

274 
	#COMPRESS_OP
 2

	)

275 
	#REPLACE_OP
 3

	)

278 
	#PULL2
(
p
è(Õ)[0]+((
ušt
)(Õ)[1])<<8))

	)

279 
	#PULL4
(
p
è(
	`PULL2
Õ)+((
ulÚg
)PULL2Õ+2)<<16))

	)

280 
	#PULL8
(
p
è(
	`PULL4
Õ)+((
off_t
)PULL4Õ+4)<<32))

	)

283 
	#PUT2
(
p
,
a
èdØ{Õ)[0]÷;Õ)[1]=×)>>8;} 0)

	)

284 
	#PUT4
(
p
,
a
èdØ{
	`PUT2
Õ,a);PUT2Õ+2,a>>16);} 0)

	)

285 
	#PUT8
(
p
,
a
èdØ{
	`PUT4
Õ,a);PUT4Õ+4,a>>32);} 0)

	)

288 
	#LOGID
 "\106\035\172"

	)

289 
	slog


291 
	mid
[4];

292 
	mfd
;

293 *
	m·th
;

294 *
	m’d
;

295 
off_t
 
	mfœ¡
;

296 
	mback
;

297 
ušt
 
	m¡Üed
;

298 
off_t
 
	mÏ¡
;

299 
ulÚg
 
	mcüc
;

300 
ulÚg
 
	mş’
;

301 
ulÚg
 
	mtüc
;

302 
ulÚg
 
	m’
;

303 
time_t
 
	mlock
;

307 
loÿl
 
	glog_gzh—d
[] = {

317 
	#HEAD
 (
log_gzh—d
è

	)

320 
loÿl
 
	glog_gzext
[] = {

329 
	#EXTRA
 (
log_gzext
è

	)

332 
loÿl
 
	glog_gzbody
[] = {

338 
	#BODY
 (
log_gzbody
)

	)

349 
loÿl
 

350 
	$log_lock
 (
log
 *log)

352 
fd
;

353 
¡©
 
¡
;

355 
	`¡rıy
 (
log
->
’d
, ".lock");

356 (
fd
 = 
	`İ’
 (
log
->
·th
, 
O_CREAT
 | 
O_EXCL
, 0644)) < 0)

358 ià(
”ºo
 !ğ
EEXIST
)

360 ià(
	`¡©
 (
log
->
·th
, &
¡
è=ğ0 && 
	`time
 (
NULL
è- st.
¡_mtime
 > 
PATIENCE
)

362 
	`uÆšk
 (
log
->
·th
);

365 
	`¦“p
 (2);

367 
	`şo£
 (
fd
);

368 ià(
	`¡©
 (
log
->
·th
, &
¡
) == 0)

369 
log
->
lock
 = 
¡
.
¡_mtime
;

371 
	}
}

376 
loÿl
 

377 
	$log_touch
 (
log
 *log)

379 
¡©
 
¡
;

381 
	`¡rıy
 (
log
->
’d
, ".lock");

382 
	`utimes
 (
log
->
·th
, 
NULL
);

383 ià(
	`¡©
 (
log
->
·th
, &
¡
) == 0)

384 
log
->
lock
 = 
¡
.
¡_mtime
;

385 
	}
}

389 
loÿl
 

390 
	$log_check
 (
log
 *log)

392 
¡©
 
¡
;

394 
	`¡rıy
 (
log
->
’d
, ".lock");

395 ià(
	`¡©
 (
log
->
·th
, &
¡
è|| st.
¡_mtime
 !ğlog->
lock
)

397 
	`log_touch
 (
log
);

399 
	}
}

402 
loÿl
 

403 
	$log_uÆock
 (
log
 *log)

405 ià(
	`log_check
 (
log
))

407 
	`¡rıy
 (
log
->
’d
, ".lock");

408 
	`uÆšk
 (
log
->
·th
);

409 
log
->
lock
 = 0;

410 
	}
}

417 
loÿl
 

418 
	$log_h—d
 (
log
 *log)

420 
İ
;

421 
buf
[
HEAD
 + 
EXTRA
];

423 ià(
	`l£ek
 (
log
->
fd
, 0, 
SEEK_SET
) < 0 ||

424 
	`»ad
 (
log
->
fd
, 
buf
, 
HEAD
 + 
EXTRA
) != HEAD + EXTRA ||

425 
	`memcmp
 (
buf
, 
log_gzh—d
, 
HEAD
))

429 
log
->
fœ¡
 = 
	`PULL8
 (
buf
 + 
HEAD
);

430 
log
->
Ï¡
 = 
	`PULL8
 (
buf
 + 
HEAD
 + 8);

431 
log
->
cüc
 = 
	`PULL4
 (
buf
 + 
HEAD
 + 16);

432 
log
->
ş’
 = 
	`PULL4
 (
buf
 + 
HEAD
 + 20);

433 
log
->
tüc
 = 
	`PULL4
 (
buf
 + 
HEAD
 + 24);

434 
log
->
’
 = 
	`PULL4
 (
buf
 + 
HEAD
 + 28);

435 
log
->
¡Üed
 = 
	`PULL2
 (
buf
 + 
HEAD
 + 32);

436 
log
->
back
 = 3 + (
buf
[
HEAD
 + 34] & 7);

437 
İ
 = (
buf
[
HEAD
 + 34] >> 3) & 3;

438  
İ
;

439 
	}
}

446 
loÿl
 

447 
	$log_m¬k
 (
log
 *log, 
İ
)

449 
»t
;

450 
ext
[
EXTRA
];

452 
	`PUT8
 (
ext
, 
log
->
fœ¡
);

453 
	`PUT8
 (
ext
 + 8, 
log
->
Ï¡
);

454 
	`PUT4
 (
ext
 + 16, 
log
->
cüc
);

455 
	`PUT4
 (
ext
 + 20, 
log
->
ş’
);

456 
	`PUT4
 (
ext
 + 24, 
log
->
tüc
);

457 
	`PUT4
 (
ext
 + 28, 
log
->
’
);

458 
	`PUT2
 (
ext
 + 32, 
log
->
¡Üed
);

459 
ext
[34] = 
log
->
back
 - 3 + (
İ
 << 3);

460 
	`fsync
 (
log
->
fd
);

461 
»t
 = 
	`l£ek
 (
log
->
fd
, 
HEAD
, 
SEEK_SET
) < 0 ||

462 
	`wr™e
 (
log
->
fd
, 
ext
, 
EXTRA
) != EXTRA ? -1 : 0;

463 
	`fsync
 (
log
->
fd
);

464  
»t
;

465 
	}
}

472 
loÿl
 

473 
	$log_Ï¡
 (
log
 *log, 
Ï¡
)

475 
back
, 
Ën
, 
mask
;

476 
buf
[6];

479 
back
 = 
log
->
Ï¡
 =ğlog->
fœ¡
 ?†og->back : 8;

480 
Ën
 = 
back
 > 8 ? 2 : 1;

481 
mask
 = 0x80 >> ((
back
 - 1) & 7);

486 
buf
[0] = 0;

487 ià(
back
 !ğ8 && (
	`l£ek
 (
log
->
fd
,†og->
Ï¡
 - 
Ën
, 
SEEK_SET
) < 0 ||

488 
	`»ad
 (
log
->
fd
, 
buf
, 1) != 1))

495 
buf
[1] = 0;

496 
buf
[2 - 
Ën
] = (*buà& (
mask
 - 1)è+ (
Ï¡
 ? mask : 0);

500 
	`PUT2
 (
buf
 + 2, 
log
->
¡Üed
);

501 
	`PUT2
 (
buf
 + 4, 
log
->
¡Üed
 ^ 0xffff);

502  
	`l£ek
 (
log
->
fd
,†og->
Ï¡
 - 
Ën
, 
SEEK_SET
) < 0 ||

503 
	`wr™e
 (
log
->
fd
, 
buf
 + 2 - 
Ën
,†en + 4) !=†en + 4 ||

504 
	`l£ek
 (
log
->
fd
,†og->
¡Üed
, 
SEEK_CUR
) < 0 ? -1 : 0;

505 
	}
}

512 
loÿl
 

513 
	$log_­³nd
 (
log
 *log, *
d©a
, 
size_t
 
Ën
)

515 
ušt
 
put
;

516 
off_t
 
’d
;

517 
buf
[8];

522 ià(
	`log_Ï¡
 (
log
, 1))

527 
Ën
)

530 
put
 = (
MAX_STORE
 << 10è- 
log
->
¡Üed
;

531 ià(
put
 > 
Ën
)

532 
put
 = (
ušt
è
Ën
;

533 ià(
put
)

535 ià(
	`wr™e
 (
log
->
fd
, 
d©a
, 
put
) !=…ut)

537 
	`BAIL
 (1);

538 
log
->
tüc
 = 
	`üc32
 (log->tüc, 
d©a
, 
put
);

539 
log
->
’
 +ğ
put
;

540 
log
->
¡Üed
 +ğ
put
;

541 
d©a
 +ğ
put
;

542 
Ën
 -ğ
put
;

546 ià(
Ën
)

549 ià(
	`log_Ï¡
 (
log
, 0))

553 
log
->
Ï¡
 +ğ4 +†og->
¡Üed
 + 1;

554 
log
->
¡Üed
 = 0;

558 ià(
	`log_Ï¡
 (
log
, 1))

560 
	`BAIL
 (2);

565 
	`PUT4
 (
buf
, 
log
->
tüc
);

566 
	`PUT4
 (
buf
 + 4, 
log
->
’
);

567 ià(
	`wr™e
 (
log
->
fd
, 
buf
, 8) != 8 ||

568 (
’d
 = 
	`l£ek
 (
log
->
fd
, 0, 
SEEK_CUR
)è< 0 || 
	`árunÿ‹
 (log->fd,ƒnd))

572 ià(
	`log_m¬k
 (
log
, 
NO_OP
))

574 
	`¡rıy
 (
log
->
’d
, ".add");

575 
	`uÆšk
 (
log
->
·th
);

577 
	}
}

586 
loÿl
 

587 
	$log_»¶aû
 (
log
 *log)

589 
»t
;

590 *
de¡
;

593 
	`¡rıy
 (
log
->
’d
, ".add");

594 
	`uÆšk
 (
log
->
·th
);

595 
	`BAIL
 (3);

598 
	`¡rıy
 (
log
->
’d
, ".dict");

599 
de¡
 = 
	`m®loc
 (
	`¡¾’
 (
log
->
·th
) + 1);

600 ià(
de¡
 =ğ
NULL
)

602 
	`¡rıy
 (
de¡
, 
log
->
·th
);

603 
	`¡rıy
 (
log
->
’d
, ".temp");

604 
»t
 = 
	`»Çme
 (
log
->
·th
, 
de¡
);

605 
	`ä“
 (
de¡
);

606 ià(
»t
 && 
”ºo
 !ğ
ENOENT
)

608 
	`BAIL
 (4);

611  
	`log_m¬k
 (
log
, 
NO_OP
);

612 
	}
}

624 
loÿl
 

625 
	$log_com´ess
 (
log
 *log, *
d©a
, 
size_t
 
Ën
)

627 
fd
;

628 
ušt
 
gÙ
, 
max
;

629 
ssize_t
 
diù
;

630 
off_t
 
’d
;

631 
z_¡»am
 
¡rm
;

632 
buf
[
DICT
];

635 ià(
Ën
)

638 
¡rm
.
z®loc
 = 
Z_NULL
;

639 
¡rm
.
zä“
 = 
Z_NULL
;

640 
¡rm
.
İaque
 = 
Z_NULL
;

641 ià(
	`deæ©eIn™2
 (&
¡rm
, 
Z_DEFAULT_COMPRESSION
, 
Z_DEFLATED
, -15, 8,

642 
Z_DEFAULT_STRATEGY
è!ğ
Z_OK
)

646 
	`¡rıy
 (
log
->
’d
, ".dict");

647 
fd
 = 
	`İ’
 (
log
->
·th
, 
O_RDONLY
, 0);

648 ià(
fd
 >= 0)

650 
diù
 = 
	`»ad
 (
fd
, 
buf
, 
DICT
);

651 
	`şo£
 (
fd
);

652 ià(
diù
 < 0)

654 
	`deæ©eEnd
 (&
¡rm
);

657 ià(
diù
)

658 
	`deæ©eS‘DiùiÚ¬y
 (&
¡rm
, 
buf
, (
ušt
è
diù
);

660 
	`log_touch
 (
log
);

664 ià(
	`l£ek
 (
log
->
fd
,†og->
fœ¡
 - (log->
back
 > 8 ? 2 : 1),

665 
SEEK_SET
) < 0 ||

666 
	`»ad
 (
log
->
fd
, 
buf
, 1è!ğ1 || 
	`l£ek
 (log->fd, -1, 
SEEK_CUR
) < 0)

668 
	`deæ©eEnd
 (&
¡rm
);

671 
	`deæ©ePrime
 (&
¡rm
, (8 - 
log
->
back
è& 7, *
buf
);

674 
¡rm
.
Ãxt_š
 = 
d©a
;

675 
max
 = (((
ušt
) 0 - 1) >> 1) + 1;

678 
¡rm
.
ava_š
 = 
Ën
 > 
max
 ? max : (
ušt
)†en;

679 
Ën
 -ğ
¡rm
.
ava_š
;

682 
¡rm
.
ava_out
 = 
DICT
;

683 
¡rm
.
Ãxt_out
 = 
buf
;

684 
	`deæ©e
 (&
¡rm
, 
Ën
 ? 
Z_NO_FLUSH
 : 
Z_PARTIAL_FLUSH
);

685 
gÙ
 = 
DICT
 - 
¡rm
.
ava_out
;

686 ià(
gÙ
 && 
	`wr™e
 (
log
->
fd
, 
buf
, got) != got)

688 
	`deæ©eEnd
 (&
¡rm
);

691 
	`log_touch
 (
log
);

693 
¡rm
.
ava_out
 == 0);

695 
Ën
);

696 
	`deæ©eEnd
 (&
¡rm
);

697 
	`BAIL
 (5);

703 ià((
log
->
fœ¡
 = 
	`l£ek
 (log->
fd
, -1, 
SEEK_CUR
)) < 0 ||

704 
	`»ad
 (
log
->
fd
, 
buf
, 1) != 1)

706 
log
->
fœ¡
++;

707 ià(*
buf
)

709 
log
->
back
 = 1;

710 (*
buf
 & ((
ušt
è1 << (8 - 
log
->
back
++))) == 0)

714 
log
->
back
 = 10;

717 
log
->
cüc
 =†og->
tüc
;

718 
log
->
ş’
 =†og->
’
;

723 
log
->
tüc
 =†og->
cüc
;

724 
log
->
’
 =†og->
ş’
;

728 
log
->
Ï¡
 =†og->
fœ¡
;

729 
log
->
¡Üed
 = 0;

730 
	`PUT4
 (
buf
, 
log
->
tüc
);

731 
	`PUT4
 (
buf
 + 4, 
log
->
’
);

732 ià(
	`log_Ï¡
 (
log
, 1è|| 
	`wr™e
 (log->
fd
, 
buf
, 8) != 8 ||

733 (
’d
 = 
	`l£ek
 (
log
->
fd
, 0, 
SEEK_CUR
)è< 0 || 
	`árunÿ‹
 (log->fd,ƒnd))

735 
	`BAIL
 (6);

738 ià(
	`log_m¬k
 (
log
, 
REPLACE_OP
))

742  
	`log_»¶aû
 (
log
);

743 
	}
}

746 
loÿl
 

747 
	$log_log
 (
log
 *log, 
İ
, *
»cÜd
)

749 
time_t
 
now
;

750 
FILE
 *
»c
;

752 
now
 = 
	`time
 (
NULL
);

753 
	`¡rıy
 (
log
->
’d
, ".repairs");

754 
»c
 = 
	`fİ’
 (
log
->
·th
, "a");

755 ià(
»c
 =ğ
NULL
)

757 
	`årštf
 (
»c
, "%.24 % »cov”y: %s\n", 
	`ùime
 (&
now
), 
İ
 =ğ
APPEND_OP
 ?

758 "­³nd" : (
İ
 =ğ
COMPRESS_OP
 ? "com´ess" : "»¶aû"), 
»cÜd
);

759 
	`fşo£
 (
»c
);

761 
	}
}

767 
loÿl
 

768 
	$log_»cov”
 (
log
 *log, 
İ
)

770 
fd
, 
»t
 = 0;

771 *
d©a
 = 
NULL
;

772 
size_t
 
Ën
 = 0;

773 
¡©
 
¡
;

776 
	`log_log
 (
log
, 
İ
, "start");

779 ià(
İ
 =ğ
APPEND_OP
 || o°=ğ
COMPRESS_OP
)

781 
	`¡rıy
 (
log
->
’d
, ".add");

782 ià(
	`¡©
 (
log
->
·th
, &
¡
è=ğ0 && st.
¡_size
)

784 
Ën
 = (
size_t
è(
¡
.
¡_size
);

785 ià((
off_t
è
Ën
 !ğ
¡
.
¡_size
 ||

786 (
d©a
 = 
	`m®loc
 (
¡
.
¡_size
)è=ğ
NULL
)

788 
	`log_log
 (
log
, 
İ
, "allocation failure");

791 ià((
fd
 = 
	`İ’
 (
log
->
·th
, 
O_RDONLY
, 0)) < 0)

793 
	`log_log
 (
log
, 
İ
, ".add file„ead failure");

796 
»t
 = (
size_t
è
	`»ad
 (
fd
, 
d©a
, 
Ën
) !=†en;

797 
	`şo£
 (
fd
);

798 ià(
»t
)

800 
	`log_log
 (
log
, 
İ
, ".add file„ead failure");

803 
	`log_log
 (
log
, 
İ
, "loaded .add file");

806 
	`log_log
 (
log
, 
İ
, "missing .add file!");

810 
İ
)

812 
APPEND_OP
:

813 
»t
 = 
	`log_­³nd
 (
log
, 
d©a
, 
Ën
);

815 
COMPRESS_OP
:

816 
»t
 = 
	`log_com´ess
 (
log
, 
d©a
, 
Ën
);

818 
REPLACE_OP
:

819 
»t
 = 
	`log_»¶aû
 (
log
);

823 
	`log_log
 (
log
, 
İ
, 
»t
 ? "failure" : "complete");

826 ià(
d©a
 !ğ
NULL
)

827 
	`ä“
 (
d©a
);

828  
»t
;

829 
	}
}

832 
loÿl
 

833 
	$log_şo£
 (
log
 *log)

835 ià(
log
->
fd
 >= 0)

836 
	`şo£
 (
log
->
fd
);

837 
log
->
fd
 = -1;

838 
	`log_uÆock
 (
log
);

839 
	}
}

850 
loÿl
 

851 
	$log_İ’
 (
log
 *log)

853 
İ
;

857 ià(
log
->
fd
 >= 0)

858 
	`şo£
 (
log
->
fd
);

859 
log
->
fd
 = -1;

862 ià(
	`log_lock
 (
log
) < 0)

866 
	`¡rıy
 (
log
->
’d
, ".gz");

867 
log
->
fd
 = 
	`İ’
 (log->
·th
, 
O_RDWR
 | 
O_CREAT
, 0644);

868 ià(
log
->
fd
 < 0)

870 
	`log_şo£
 (
log
);

875 ià(
	`l£ek
 (
log
->
fd
, 0, 
SEEK_END
) == 0)

877 ià(
	`wr™e
 (
log
->
fd
, 
log_gzh—d
, 
HEAD
) != HEAD ||

878 
	`wr™e
 (
log
->
fd
, 
log_gzext
, 
EXTRA
) != EXTRA ||

879 
	`wr™e
 (
log
->
fd
, 
log_gzbody
, 
BODY
) != BODY)

881 
	`log_şo£
 (
log
);

884 
	`¡rıy
 (
log
->
’d
, ".dict");

885 
	`uÆšk
 (
log
->
·th
);

889 ià((
İ
 = 
	`log_h—d
 (
log
)) < 0)

891 
	`log_şo£
 (
log
);

896 ià(
İ
 !ğ
NO_OP
 && 
	`log_»cov”
 (
log
, op))

898 
	`log_şo£
 (
log
);

903 
	`log_touch
 (
log
);

905 
	}
}

908 
gzlog
 *

909 
	$gzlog_İ’
 (*
·th
)

911 
size_t
 
n
;

912 
log
 *log;

915 ià(
·th
 =ğ
NULL
 || *path == 0)

916  
NULL
;

919 
log
 = 
	`m®loc
 ( (log));

920 ià(
log
 =ğ
NULL
)

921  
NULL
;

922 
	`¡rıy
 (
log
->
id
, 
LOGID
);

923 
log
->
fd
 = -1;

926 
n
 = 
	`¡¾’
 (
·th
);

927 
log
->
·th
 = 
	`m®loc
 (
n
 + 9);

928 ià(
log
->
·th
 =ğ
NULL
)

930 
	`ä“
 (
log
);

931  
NULL
;

933 
	`¡rıy
 (
log
->
·th
,…ath);

934 
log
->
’d
 =†og->
·th
 + 
n
;

938 ià(
	`log_İ’
 (
log
))

940 
	`ä“
 (
log
->
·th
);

941 
	`ä“
 (
log
);

942  
NULL
;

946  
log
;

947 
	}
}

955 
	$gzlog_com´ess
 (
gzlog
 * 
logd
)

957 
fd
, 
»t
;

958 
ušt
 
block
;

959 
size_t
 
Ën
, 
Ãxt
;

960 *
d©a
, 
buf
[5];

961 
log
 *log = 
logd
;

964 ià(
log
 =ğ
NULL
 || 
	`¡rcmp
 (log->
id
, 
LOGID
))

970 ià(
	`log_check
 (
log
è&& 
	`log_İ’
 (log))

974 
Ën
 = ((
size_t
è(
log
->
Ï¡
 -†og->
fœ¡
) & ~(((size_t) 1 << 10) - 1)) +

975 
log
->
¡Üed
;

976 ià((
d©a
 = 
	`m®loc
 (
Ën
)è=ğ
NULL
)

983 ià(
	`l£ek
 (
log
->
fd
,†og->
fœ¡
 - 1, 
SEEK_SET
) < 0)

985 
Ãxt
 = 0;

986 
Ãxt
 < 
Ën
)

988 ià(
	`»ad
 (
log
->
fd
, 
buf
, 5) != 5)

990 
block
 = 
	`PULL2
 (
buf
 + 1);

991 ià(
Ãxt
 + 
block
 > 
Ën
 ||

992 
	`»ad
 (
log
->
fd
, (*è
d©a
 + 
Ãxt
, 
block
) != block)

994 
Ãxt
 +ğ
block
;

996 ià(
	`l£ek
 (
log
->
fd
, 0, 
SEEK_CUR
è!ğlog->
Ï¡
 + 4 +†og->
¡Üed
)

998 
	`log_touch
 (
log
);

1001 
	`¡rıy
 (
log
->
’d
, ".add");

1002 
fd
 = 
	`İ’
 (
log
->
·th
, 
O_WRONLY
 | 
O_CREAT
 | 
O_TRUNC
, 0644);

1003 ià(
fd
 < 0)

1005 
»t
 = (
size_t
è
	`wr™e
 (
fd
, 
d©a
, 
Ën
) !=†en;

1006 ià(
»t
 | 
	`şo£
 (
fd
))

1008 
	`log_touch
 (
log
);

1011 
	`¡rıy
 (
log
->
’d
, ".temp");

1012 
fd
 = 
	`İ’
 (
log
->
·th
, 
O_WRONLY
 | 
O_CREAT
 | 
O_TRUNC
, 0644);

1013 ià(
fd
 < 0)

1015 
Ãxt
 = 
DICT
 > 
Ën
 ?†en : DICT;

1016 
»t
 = (
size_t
è
	`wr™e
 (
fd
, (*è
d©a
 + 
Ën
 - 
Ãxt
,‚ext) !=‚ext;

1017 ià(
»t
 | 
	`şo£
 (
fd
))

1019 
	`log_touch
 (
log
);

1022 
log
->
Ï¡
 =†og->
fœ¡
;

1023 
log
->
¡Üed
 = 0;

1024 ià(
	`log_m¬k
 (
log
, 
COMPRESS_OP
))

1026 
	`BAIL
 (7);

1029 
»t
 = 
	`log_com´ess
 (
log
, 
d©a
, 
Ën
);

1030 
	`ä“
 (
d©a
);

1031  
»t
;

1036 
	`ä“
 (
d©a
);

1038 
	}
}

1046 
	$gzlog_wr™e
 (
gzlog
 * 
logd
, *
d©a
, 
size_t
 
Ën
)

1048 
fd
, 
»t
;

1049 
log
 *log = 
logd
;

1052 ià(
log
 =ğ
NULL
 || 
	`¡rcmp
 (log->
id
, 
LOGID
))

1054 ià(
d©a
 =ğ
NULL
 || 
Ën
 <= 0)

1060 ià(
	`log_check
 (
log
è&& 
	`log_İ’
 (log))

1064 
	`¡rıy
 (
log
->
’d
, ".add");

1065 
fd
 = 
	`İ’
 (
log
->
·th
, 
O_WRONLY
 | 
O_CREAT
 | 
O_TRUNC
, 0644);

1066 ià(
fd
 < 0)

1068 
»t
 = (
size_t
è
	`wr™e
 (
fd
, 
d©a
, 
Ën
) !=†en;

1069 ià(
»t
 | 
	`şo£
 (
fd
))

1071 
	`log_touch
 (
log
);

1074 ià(
	`log_m¬k
 (
log
, 
APPEND_OP
))

1076 
	`BAIL
 (8);

1079 ià(
	`log_­³nd
 (
log
, 
d©a
, 
Ën
))

1083 ià(((
log
->
Ï¡
 -†og->
fœ¡
è>> 10è+ (log->
¡Üed
 >> 10è< 
TRIGGER
)

1087  
	`gzlog_com´ess
 (
log
);

1088 
	}
}

1094 
	$gzlog_şo£
 (
gzlog
 * 
logd
)

1096 
log
 *log = 
logd
;

1099 ià(
log
 =ğ
NULL
 || 
	`¡rcmp
 (log->
id
, 
LOGID
))

1103 
	`log_şo£
 (
log
);

1106 ià(
log
->
·th
 !ğ
NULL
)

1107 
	`ä“
 (
log
->
·th
);

1108 
	`¡rıy
 (
log
->
id
, "bad");

1109 
	`ä“
 (
log
);

1111 
	}
}

	@examples/gzlog.h

48 #iâdeà
GZLOG_H


49 
	#GZLOG_H


	)

52 
	tgzlog
;

66 
gzlog
 *
gzlog_İ’
(*
·th
);

77 
gzlog_wr™e
(
gzlog
 *
log
, *
d©a
, 
size_t
 
Ën
);

85 
gzlog_com´ess
(
gzlog
 *
log
);

89 
gzlog_şo£
(
gzlog
 *
log
);

	@examples/zpipe.c

15 
	~<¡dio.h
>

16 
	~<¡ršg.h
>

17 
	~<as£¹.h
>

18 
	~"zlib.h
"

20 #ià
defšed
(
MSDOS
è|| defšed(
OS2
è|| defšed(
WIN32
è|| defšed(
__CYGWIN__
)

21 
	~<fú.h
>

22 
	~<io.h
>

23 
	#SET_BINARY_MODE
(
fe
è
	`£tmode
(
	`f’o
(fe), 
O_BINARY
)

	)

25 
	#SET_BINARY_MODE
(
fe
)

	)

28 
	#CHUNK
 16384

	)

37 
	$def
 (
FILE
 * 
sourû
, FILE * 
de¡
, 
Ëv–
)

39 
»t
, 
æush
;

40 
have
;

41 
z_¡»am
 
¡rm
;

42 
š
[
CHUNK
];

43 
out
[
CHUNK
];

46 
¡rm
.
z®loc
 = 
Z_NULL
;

47 
¡rm
.
zä“
 = 
Z_NULL
;

48 
¡rm
.
İaque
 = 
Z_NULL
;

49 
»t
 = 
	`deæ©eIn™
 (&
¡rm
, 
Ëv–
);

50 ià(
»t
 !ğ
Z_OK
)

51  
»t
;

56 
¡rm
.
ava_š
 = 
	`ä—d
 (
š
, 1, 
CHUNK
, 
sourû
);

57 ià(
	`ã¼Ü
 (
sourû
))

59 (è
	`deæ©eEnd
 (&
¡rm
);

60  
Z_ERRNO
;

62 
æush
 = 
	`ãof
 (
sourû
è? 
Z_FINISH
 : 
Z_NO_FLUSH
;

63 
¡rm
.
Ãxt_š
 = 
š
;

69 
¡rm
.
ava_out
 = 
CHUNK
;

70 
¡rm
.
Ãxt_out
 = 
out
;

71 
»t
 = 
	`deæ©e
 (&
¡rm
, 
æush
);

72 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
);

73 
have
 = 
CHUNK
 - 
¡rm
.
ava_out
;

74 ià(
	`fwr™e
 (
out
, 1, 
have
, 
de¡
è!ğhav|| 
	`ã¼Ü
 (dest))

76 (è
	`deæ©eEnd
 (&
¡rm
);

77  
Z_ERRNO
;

80 
¡rm
.
ava_out
 == 0);

81 
	`as£¹
 (
¡rm
.
ava_š
 == 0);

85 
æush
 !ğ
Z_FINISH
);

86 
	`as£¹
 (
»t
 =ğ
Z_STREAM_END
);

89 (è
	`deæ©eEnd
 (&
¡rm
);

90  
Z_OK
;

91 
	}
}

100 
	$šf
 (
FILE
 * 
sourû
, FILE * 
de¡
)

102 
»t
;

103 
have
;

104 
z_¡»am
 
¡rm
;

105 
š
[
CHUNK
];

106 
out
[
CHUNK
];

109 
¡rm
.
z®loc
 = 
Z_NULL
;

110 
¡rm
.
zä“
 = 
Z_NULL
;

111 
¡rm
.
İaque
 = 
Z_NULL
;

112 
¡rm
.
ava_š
 = 0;

113 
¡rm
.
Ãxt_š
 = 
Z_NULL
;

114 
»t
 = 
	`šæ©eIn™
 (&
¡rm
);

115 ià(
»t
 !ğ
Z_OK
)

116  
»t
;

121 
¡rm
.
ava_š
 = 
	`ä—d
 (
š
, 1, 
CHUNK
, 
sourû
);

122 ià(
	`ã¼Ü
 (
sourû
))

124 (è
	`šæ©eEnd
 (&
¡rm
);

125  
Z_ERRNO
;

127 ià(
¡rm
.
ava_š
 == 0)

129 
¡rm
.
Ãxt_š
 = 
š
;

134 
¡rm
.
ava_out
 = 
CHUNK
;

135 
¡rm
.
Ãxt_out
 = 
out
;

136 
»t
 = 
	`šæ©e
 (&
¡rm
, 
Z_NO_FLUSH
);

137 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
);

138 
»t
)

140 
Z_NEED_DICT
:

141 
»t
 = 
Z_DATA_ERROR
;

142 
Z_DATA_ERROR
:

143 
Z_MEM_ERROR
:

144 (è
	`šæ©eEnd
 (&
¡rm
);

145  
»t
;

147 
have
 = 
CHUNK
 - 
¡rm
.
ava_out
;

148 ià(
	`fwr™e
 (
out
, 1, 
have
, 
de¡
è!ğhav|| 
	`ã¼Ü
 (dest))

150 (è
	`šæ©eEnd
 (&
¡rm
);

151  
Z_ERRNO
;

154 
¡rm
.
ava_out
 == 0);

158 
»t
 !ğ
Z_STREAM_END
);

161 (è
	`šæ©eEnd
 (&
¡rm
);

162  
»t
 =ğ
Z_STREAM_END
 ? 
Z_OK
 : 
Z_DATA_ERROR
;

163 
	}
}

167 
	$z”r
 (
»t
)

169 
	`åuts
 ("zpe: ", 
¡d”r
);

170 
»t
)

172 
Z_ERRNO
:

173 ià(
	`ã¼Ü
 (
¡dš
))

174 
	`åuts
 ("”rÜ„—dšg stdš\n", 
¡d”r
);

175 ià(
	`ã¼Ü
 (
¡dout
))

176 
	`åuts
 ("”rÜ wr™šg stdout\n", 
¡d”r
);

178 
Z_STREAM_ERROR
:

179 
	`åuts
 ("šv®id com´essiÚ†ev–\n", 
¡d”r
);

181 
Z_DATA_ERROR
:

182 
	`åuts
 ("šv®id o¸šcom¶‘deæ©d©a\n", 
¡d”r
);

184 
Z_MEM_ERROR
:

185 
	`åuts
 ("ouˆoàmemÜy\n", 
¡d”r
);

187 
Z_VERSION_ERROR
:

188 
	`åuts
 ("zlib v”siÚ mism©ch!\n", 
¡d”r
);

190 
	}
}

194 
	$maš
 (
¬gc
, **
¬gv
)

196 
»t
;

199 
	`SET_BINARY_MODE
 (
¡dš
);

200 
	`SET_BINARY_MODE
 (
¡dout
);

203 ià(
¬gc
 == 1)

205 
»t
 = 
	`def
 (
¡dš
, 
¡dout
, 
Z_DEFAULT_COMPRESSION
);

206 ià(
»t
 !ğ
Z_OK
)

207 
	`z”r
 (
»t
);

208  
»t
;

212 ià(
¬gc
 =ğ2 && 
	`¡rcmp
 (
¬gv
[1], "-d") == 0)

214 
»t
 = 
	`šf
 (
¡dš
, 
¡dout
);

215 ià(
»t
 !ğ
Z_OK
)

216 
	`z”r
 (
»t
);

217  
»t
;

223 
	`åuts
 ("zpu§ge: zp[-d] < sourû > de¡\n", 
¡d”r
);

226 
	}
}

	@examples/zran.c

55 
	~<¡dio.h
>

56 
	~<¡dlib.h
>

57 
	~<¡ršg.h
>

58 
	~"zlib.h
"

60 
	#loÿl
 

	)

62 
	#SPAN
 1048576L

	)

63 
	#WINSIZE
 32768U

	)

64 
	#CHUNK
 16384

	)

67 
	spošt


69 
off_t
 
	mout
;

70 
off_t
 
	mš
;

71 
	mb™s
;

72 
	mwšdow
[
WINSIZE
];

76 
	sacûss


78 
	mhave
;

79 
	msize
;

80 
pošt
 *
	mli¡
;

84 
loÿl
 

85 
	$ä“_šdex
 (
acûss
 *
šdex
)

87 ià(
šdex
 !ğ
NULL
)

89 
	`ä“
 (
šdex
->
li¡
);

90 
	`ä“
 (
šdex
);

92 
	}
}

96 
loÿl
 
acûss
 *

97 
	$addpošt
 (
acûss
 *
šdex
, 
b™s
,

98 
off_t
 
š
, off_ˆ
out
, 
Ëá
, *
wšdow
)

100 
pošt
 *
Ãxt
;

103 ià(
šdex
 =ğ
NULL
)

105 
šdex
 = 
	`m®loc
 ( (
acûss
));

106 ià(
šdex
 =ğ
NULL
)

107  
NULL
;

108 
šdex
->
li¡
 = 
	`m®loc
 ( (
pošt
) << 3);

109 ià(
šdex
->
li¡
 =ğ
NULL
)

111 
	`ä“
 (
šdex
);

112  
NULL
;

114 
šdex
->
size
 = 8;

115 
šdex
->
have
 = 0;

119 ià(
šdex
->
have
 =ğšdex->
size
)

121 
šdex
->
size
 <<= 1;

122 
Ãxt
 = 
	`»®loc
 (
šdex
->
li¡
,  (
pošt
è* index->
size
);

123 ià(
Ãxt
 =ğ
NULL
)

125 
	`ä“_šdex
 (
šdex
);

126  
NULL
;

128 
šdex
->
li¡
 = 
Ãxt
;

132 
Ãxt
 = 
šdex
->
li¡
 + index->
have
;

133 
Ãxt
->
b™s
 = bits;

134 
Ãxt
->
š
 = in;

135 
Ãxt
->
out
 = out;

136 ià(
Ëá
)

137 
	`memıy
 (
Ãxt
->
wšdow
, wšdow + 
WINSIZE
 - 
Ëá
,†eft);

138 ià(
Ëá
 < 
WINSIZE
)

139 
	`memıy
 (
Ãxt
->
wšdow
 + 
Ëá
, wšdow, 
WINSIZE
 -†eft);

140 
šdex
->
have
++;

143  
šdex
;

144 
	}
}

154 
loÿl
 

155 
	$bud_šdex
 (
FILE
 * 
š
, 
off_t
 
¥ª
, 
acûss
 **
but
)

157 
»t
;

158 
off_t
 
tÙš
, 
tÙout
;

159 
off_t
 
Ï¡
;

160 
acûss
 *
šdex
;

161 
z_¡»am
 
¡rm
;

162 
šput
[
CHUNK
];

163 
wšdow
[
WINSIZE
];

166 
¡rm
.
z®loc
 = 
Z_NULL
;

167 
¡rm
.
zä“
 = 
Z_NULL
;

168 
¡rm
.
İaque
 = 
Z_NULL
;

169 
¡rm
.
ava_š
 = 0;

170 
¡rm
.
Ãxt_š
 = 
Z_NULL
;

171 
»t
 = 
	`šæ©eIn™2
 (&
¡rm
, 47);

172 ià(
»t
 !ğ
Z_OK
)

173  
»t
;

178 
tÙš
 = 
tÙout
 = 
Ï¡
 = 0;

179 
šdex
 = 
NULL
;

180 
¡rm
.
ava_out
 = 0;

184 
¡rm
.
ava_š
 = 
	`ä—d
 (
šput
, 1, 
CHUNK
, 
š
);

185 ià(
	`ã¼Ü
 (
š
))

187 
»t
 = 
Z_ERRNO
;

188 
bud_šdex_”rÜ
;

190 ià(
¡rm
.
ava_š
 == 0)

192 
»t
 = 
Z_DATA_ERROR
;

193 
bud_šdex_”rÜ
;

195 
¡rm
.
Ãxt_š
 = 
šput
;

201 ià(
¡rm
.
ava_out
 == 0)

203 
¡rm
.
ava_out
 = 
WINSIZE
;

204 
¡rm
.
Ãxt_out
 = 
wšdow
;

209 
tÙš
 +ğ
¡rm
.
ava_š
;

210 
tÙout
 +ğ
¡rm
.
ava_out
;

211 
»t
 = 
	`šæ©e
 (&
¡rm
, 
Z_BLOCK
);

212 
tÙš
 -ğ
¡rm
.
ava_š
;

213 
tÙout
 -ğ
¡rm
.
ava_out
;

214 ià(
»t
 =ğ
Z_NEED_DICT
)

215 
»t
 = 
Z_DATA_ERROR
;

216 ià(
»t
 =ğ
Z_MEM_ERROR
 ||„‘ =ğ
Z_DATA_ERROR
)

217 
bud_šdex_”rÜ
;

218 ià(
»t
 =ğ
Z_STREAM_END
)

230 ià((
¡rm
.
d©a_ty³
 & 128) && !(strm.data_type & 64) &&

231 (
tÙout
 =ğ0 ||Ùouˆ- 
Ï¡
 > 
¥ª
))

233 
šdex
 = 
	`addpošt
 (šdex, 
¡rm
.
d©a_ty³
 & 7, 
tÙš
,

234 
tÙout
, 
¡rm
.
ava_out
, 
wšdow
);

235 ià(
šdex
 =ğ
NULL
)

237 
»t
 = 
Z_MEM_ERROR
;

238 
bud_šdex_”rÜ
;

240 
Ï¡
 = 
tÙout
;

243 
¡rm
.
ava_š
 != 0);

245 
»t
 !ğ
Z_STREAM_END
);

248 (è
	`šæ©eEnd
 (&
¡rm
);

249 
šdex
->
li¡
 = 
	`»®loc
 (šdex->li¡,  (
pošt
è* index->
have
);

250 
šdex
->
size
 = index->
have
;

251 *
but
 = 
šdex
;

252  
šdex
->
size
;

255 
bud_šdex_”rÜ
:

256 (è
	`šæ©eEnd
 (&
¡rm
);

257 ià(
šdex
 !ğ
NULL
)

258 
	`ä“_šdex
 (
šdex
);

259  
»t
;

260 
	}
}

269 
loÿl
 

270 
	$exŒaù
 (
FILE
 * 
š
, 
acûss
 *
šdex
, 
off_t
 
off£t
,

271 *
buf
, 
Ën
)

273 
»t
, 
sk
;

274 
z_¡»am
 
¡rm
;

275 
pošt
 *
h”e
;

276 
šput
[
CHUNK
];

277 
disÿrd
[
WINSIZE
];

280 ià(
Ën
 < 0)

284 
h”e
 = 
šdex
->
li¡
;

285 
»t
 = 
šdex
->
have
;

286 --
»t
 && 
h”e
[1].
out
 <ğ
off£t
)

287 
h”e
++;

290 
¡rm
.
z®loc
 = 
Z_NULL
;

291 
¡rm
.
zä“
 = 
Z_NULL
;

292 
¡rm
.
İaque
 = 
Z_NULL
;

293 
¡rm
.
ava_š
 = 0;

294 
¡rm
.
Ãxt_š
 = 
Z_NULL
;

295 
»t
 = 
	`šæ©eIn™2
 (&
¡rm
, -15);

296 ià(
»t
 !ğ
Z_OK
)

297  
»t
;

298 
»t
 = 
	`f£eko
 (
š
, 
h”e
->š - (h”e->
b™s
 ? 1 : 0), 
SEEK_SET
);

299 ià(
»t
 == -1)

300 
exŒaù_»t
;

301 ià(
h”e
->
b™s
)

303 
»t
 = 
	`g‘c
 (
š
);

304 ià(
»t
 == -1)

306 
»t
 = 
	`ã¼Ü
 (
š
è? 
Z_ERRNO
 : 
Z_DATA_ERROR
;

307 
exŒaù_»t
;

309 (è
	`šæ©ePrime
 (&
¡rm
, 
h”e
->
b™s
, 
»t
 >> (8 - here->bits));

311 (è
	`šæ©eS‘DiùiÚ¬y
 (&
¡rm
, 
h”e
->
wšdow
, 
WINSIZE
);

314 
off£t
 -ğ
h”e
->
out
;

315 
¡rm
.
ava_š
 = 0;

316 
sk
 = 1;

320 ià(
off£t
 =ğ0 && 
sk
)

322 
¡rm
.
ava_out
 = 
Ën
;

323 
¡rm
.
Ãxt_out
 = 
buf
;

324 
sk
 = 0;

326 ià(
off£t
 > 
WINSIZE
)

328 
¡rm
.
ava_out
 = 
WINSIZE
;

329 
¡rm
.
Ãxt_out
 = 
disÿrd
;

330 
off£t
 -ğ
WINSIZE
;

332 ià(
off£t
 != 0)

334 
¡rm
.
ava_out
 = (è
off£t
;

335 
¡rm
.
Ãxt_out
 = 
disÿrd
;

336 
off£t
 = 0;

342 ià(
¡rm
.
ava_š
 == 0)

344 
¡rm
.
ava_š
 = 
	`ä—d
 (
šput
, 1, 
CHUNK
, 
š
);

345 ià(
	`ã¼Ü
 (
š
))

347 
»t
 = 
Z_ERRNO
;

348 
exŒaù_»t
;

350 ià(
¡rm
.
ava_š
 == 0)

352 
»t
 = 
Z_DATA_ERROR
;

353 
exŒaù_»t
;

355 
¡rm
.
Ãxt_š
 = 
šput
;

357 
»t
 = 
	`šæ©e
 (&
¡rm
, 
Z_NO_FLUSH
);

358 ià(
»t
 =ğ
Z_NEED_DICT
)

359 
»t
 = 
Z_DATA_ERROR
;

360 ià(
»t
 =ğ
Z_MEM_ERROR
 ||„‘ =ğ
Z_DATA_ERROR
)

361 
exŒaù_»t
;

362 ià(
»t
 =ğ
Z_STREAM_END
)

365 
¡rm
.
ava_out
 != 0);

368 ià(
»t
 =ğ
Z_STREAM_END
)

373 
sk
);

376 
»t
 = 
sk
 ? 0 : 
Ën
 - 
¡rm
.
ava_out
;

379 
exŒaù_»t
:

380 (è
	`šæ©eEnd
 (&
¡rm
);

381  
»t
;

382 
	}
}

388 
	$maš
 (
¬gc
, **
¬gv
)

390 
Ën
;

391 
off_t
 
off£t
;

392 
FILE
 *
š
;

393 
acûss
 *
šdex
 = 
NULL
;

394 
buf
[
CHUNK
];

397 ià(
¬gc
 != 2)

399 
	`årštf
 (
¡d”r
, "usage: zran file.gz\n");

402 
š
 = 
	`fİ’
 (
¬gv
[1], "rb");

403 ià(
š
 =ğ
NULL
)

405 
	`årštf
 (
¡d”r
, "z¿n: could‚Ù o³À% fÜ„—dšg\n", 
¬gv
[1]);

410 
Ën
 = 
	`bud_šdex
 (
š
, 
SPAN
, &
šdex
);

411 ià(
Ën
 < 0)

413 
	`fşo£
 (
š
);

414 
Ën
)

416 
Z_MEM_ERROR
:

417 
	`årštf
 (
¡d”r
, "zran: out of memory\n");

419 
Z_DATA_ERROR
:

420 
	`årštf
 (
¡d”r
, "z¿n: com´es£d d©¨”rÜ iÀ%s\n", 
¬gv
[1]);

422 
Z_ERRNO
:

423 
	`årštf
 (
¡d”r
, "z¿n:„—dƒ¼Ü oÀ%s\n", 
¬gv
[1]);

426 
	`årštf
 (
¡d”r
, "z¿n:ƒ¼Ü %d whbudšg index\n", 
Ën
);

430 
	`årštf
 (
¡d”r
, "z¿n: buˆšdex w™h %d‡cûs pošts\n", 
Ën
);

433 
off£t
 = (
šdex
->
li¡
[šdex->
have
 - 1].
out
 << 1) / 3;

434 
Ën
 = 
	`exŒaù
 (
š
, 
šdex
, 
off£t
, 
buf
, 
CHUNK
);

435 ià(
Ën
 < 0)

436 
	`årštf
 (
¡d”r
, "zran:ƒxtraction failed: %sƒrror\n",

437 
Ën
 =ğ
Z_MEM_ERROR
 ? "out of memory" : "input corrupted");

440 
	`fwr™e
 (
buf
, 1, 
Ën
, 
¡dout
);

441 
	`årštf
 (
¡d”r
, "z¿n:ƒxŒaùed %d by‹ © %Îu\n", 
Ën
, 
off£t
);

445 
	`ä“_šdex
 (
šdex
);

446 
	`fşo£
 (
š
);

448 
	}
}

	@gzclose.c

6 
	~"gzguts.h
"

11 
ZEXPORT


12 
	$gzşo£
 (
gzFe
 
fe
)

14 #iâdeà
NO_GZCOMPRESS


15 
gz_¡©•
 
¡©e
;

17 ià(
fe
 =ğ
NULL
)

18  
Z_STREAM_ERROR
;

19 
¡©e
 = (
gz_¡©•
è
fe
;

21  
¡©e
->
mode
 =ğ
GZ_READ
 ? 
	`gzşo£_r
 (
fe
è: 
	`gzşo£_w
 (file);

23  
	`gzşo£_r
 (
fe
);

25 
	}
}

	@gzguts.h

6 #ifdeà
_LARGEFILE64_SOURCE


7 #iâdeà
_LARGEFILE_SOURCE


8 
	#_LARGEFILE_SOURCE
 1

	)

10 #ifdeà
_FILE_OFFSET_BITS


11 #undeà
_FILE_OFFSET_BITS


15 #ifdeà
HAVE_HIDDEN


16 
	#ZLIB_INTERNAL
 
	`__©Œibu‹__
((
	`visib™y
 ("hidd’")))

	)

18 
	#ZLIB_INTERNAL


	)

21 
	~<¡dio.h
>

22 
	~"zlib.h
"

23 #ifdeà
STDC


24 
	~<¡ršg.h
>

25 
	~<¡dlib.h
>

26 
	~<lim™s.h
>

28 
	~<fú.h
>

30 #ifdeà
_WIN32


31 
	~<¡ddef.h
>

34 #ià
defšed
(
__TURBOC__
è|| defšed(
_MSC_VER
è|| defšed(
_WIN32
)

35 
	~<io.h
>

38 #ifdeà
WINAPI_FAMILY


39 
	#İ’
 
_İ’


	)

40 
	#»ad
 
_»ad


	)

41 
	#wr™e
 
_wr™e


	)

42 
	#şo£
 
_şo£


	)

45 #ifdeà
NO_DEFLATE


46 
	#NO_GZCOMPRESS


	)

49 #ià
defšed
(
STDC99
è|| (defšed(
__TURBOC__
) && __TURBOC__ >= 0x550)

50 #iâdeà
HAVE_VSNPRINTF


51 
	#HAVE_VSNPRINTF


	)

55 #ià
defšed
(
__CYGWIN__
)

56 #iâdeà
HAVE_VSNPRINTF


57 
	#HAVE_VSNPRINTF


	)

61 #ià
defšed
(
MSDOS
è&& defšed(
__BORLANDC__
è&& (
BORLANDC
 > 0x410)

62 #iâdeà
HAVE_VSNPRINTF


63 
	#HAVE_VSNPRINTF


	)

67 #iâdeà
HAVE_VSNPRINTF


68 #ifdeà
MSDOS


71 
	#NO_v¢´štf


	)

73 #ifdeà
__TURBOC__


74 
	#NO_v¢´štf


	)

76 #ifdeà
WIN32


78 #ià!
defšed
(
v¢´štf
è&& !defšed(
NO_v¢´štf
)

79 #ià!
defšed
(
_MSC_VER
) || ( defined(_MSC_VER) && _MSC_VER < 1500 )

80 
	#v¢´štf
 
_v¢´štf


	)

84 #ifdeà
__SASC


85 
	#NO_v¢´štf


	)

87 #ifdeà
VMS


88 
	#NO_v¢´štf


	)

90 #ifdeà
__OS400__


91 
	#NO_v¢´štf


	)

93 #ifdeà
__MVS__


94 
	#NO_v¢´štf


	)

102 #ifdeà
_MSC_VER


103 
	#¢´štf
 
_¢´štf


	)

106 #iâdeà
loÿl


107 
	#loÿl
 

	)

112 #iâdeà
STDC


113 
voidp
 
m®loc
 
OF
((
uIÁ
 
size
));

114 
ä“
 
OF
((
voidpf
 
±r
));

118 #ià
defšed
 
UNDER_CE


119 
	~<wšdows.h
>

120 
	#z¡»¼Ü
(è
	`gz_¡rwš”rÜ
((
DWORD
)
	`G‘La¡E¼Ü
())

	)

122 #iâdeà
NO_STRERROR


123 
	~<”ºo.h
>

124 
	#z¡»¼Ü
(è
	`¡»¼Ü
(
”ºo
)

	)

126 
	#z¡»¼Ü
(è"¡diØ”rÜ (cÚsuÉƒ¼no)"

	)

131 #ià!
defšed
(
_LARGEFILE64_SOURCE
è|| 
_LFS64_LARGEFILE
-0 == 0

132 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’64
 
OF
((const *, const *));

133 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gz£ek64
 
OF
((
gzFe
, z_off64_t, ));

134 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gz‹Î64
 
OF
((
gzFe
));

135 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gzoff£t64
 
OF
((
gzFe
));

139 #ià
MAX_MEM_LEVEL
 >= 8

140 
	#DEF_MEM_LEVEL
 8

	)

142 
	#DEF_MEM_LEVEL
 
MAX_MEM_LEVEL


	)

147 
	#GZBUFSIZE
 8192

	)

150 
	#GZ_NONE
 0

	)

151 
	#GZ_READ
 7247

	)

152 
	#GZ_WRITE
 31153

	)

153 
	#GZ_APPEND
 1

	)

156 
	#LOOK
 0

	)

157 
	#COPY
 1

	)

158 
	#GZIP
 2

	)

163 
gzFe_s
 
	mx
;

168 
	mmode
;

169 
	mfd
;

170 *
	m·th
;

171 
	msize
;

172 
	mwªt
;

173 *
	mš
;

174 *
	mout
;

175 
	mdœeù
;

177 
	mhow
;

178 
z_off64_t
 
	m¡¬t
;

179 
	meof
;

180 
	m·¡
;

182 
	mËv–
;

183 
	m¡¿‹gy
;

185 
z_off64_t
 
	msk
;

186 
	m£ek
;

188 
	m”r
;

189 *
	mmsg
;

191 
z_¡»am
 
	m¡rm
;

192 } 
	tgz_¡©e
;

193 
gz_¡©e
 
	tFAR
 *
	tgz_¡©•
;

196 
ZLIB_INTERNAL
 
gz_”rÜ
 
OF
((
gz_¡©•
, , const *));

197 #ià
defšed
 
UNDER_CE


198 
ZLIB_INTERNAL
 *
gz_¡rwš”rÜ
 
OF
((
DWORD
 
”rÜ
));

204 #ifdeà
INT_MAX


205 
	#GT_OFF
(
x
è((è=ğ(
z_off64_t
è&& (xè> 
INT_MAX
)

	)

207 
ZLIB_INTERNAL
 
gz_štmax
 
OF
(());

208 
	#GT_OFF
(
x
è((è=ğ(
z_off64_t
è&& (xè> 
	`gz_štmax
())

	)

	@gzlib.c

6 
	~"gzguts.h
"

8 #ià
defšed
(
_WIN32
è&& !defšed(
__BORLANDC__
)

9 
	#LSEEK
 
_l£eki64


	)

11 #ià
defšed
(
_LARGEFILE64_SOURCE
è&& 
_LFS64_LARGEFILE
-0

12 
	#LSEEK
 
l£ek64


	)

14 
	#LSEEK
 
l£ek


	)

19 
loÿl
 
gz_»£t
 
OF
 ((
gz_¡©•
));

20 
loÿl
 
gzFe
 
gz_İ’
 
OF
 ((const *, , const *));

22 #ià
defšed
 
UNDER_CE


33 
ZLIB_INTERNAL
 *

34 
	$gz_¡rwš”rÜ
 (
”rÜ
)

35 
DWORD
 
”rÜ
;

37 
buf
[1024];

39 
wch¬_t
 *
msgbuf
;

40 
DWORD
 
Ï¡”r
 = 
	`G‘La¡E¼Ü
 ();

41 
DWORD
 
ch¬s
 = 
	`FÜm©Mes§ge
 (
FORMAT_MESSAGE_FROM_SYSTEM


42 | 
FORMAT_MESSAGE_ALLOCATE_BUFFER
,

43 
NULL
,

44 
”rÜ
,

46 (
LPVOID
è& 
msgbuf
,

48 
NULL
);

49 ià(
ch¬s
 != 0)

52 ià(
ch¬s
 >= 2

53 && 
msgbuf
[
ch¬s
 - 2] == '\r' && msgbuf[chars - 1] == '\n')

55 
ch¬s
 -= 2;

56 
msgbuf
[
ch¬s
] = 0;

59 ià(
ch¬s
 >  (
buf
) - 1)

61 
ch¬s
 =  (
buf
) - 1;

62 
msgbuf
[
ch¬s
] = 0;

65 
	`wc¡ombs
 (
buf
, 
msgbuf
, 
ch¬s
 + 1);

66 
	`LoÿlF»e
 (
msgbuf
);

70 
	`¥rštf
 (
buf
, "unknowÀwš32ƒ¼Ü (%ld)", 
”rÜ
);

73 
	`S‘La¡E¼Ü
 (
Ï¡”r
);

74  
buf
;

75 
	}
}

80 
loÿl
 

81 
	$gz_»£t
 (
gz_¡©•
 
¡©e
)

83 
¡©e
->
x
.
have
 = 0;

84 ià(
¡©e
->
mode
 =ğ
GZ_READ
)

86 
¡©e
->
eof
 = 0;

87 
¡©e
->
·¡
 = 0;

88 
¡©e
->
how
 = 
LOOK
;

90 
¡©e
->
£ek
 = 0;

91 
	`gz_”rÜ
 (
¡©e
, 
Z_OK
, 
NULL
);

92 
¡©e
->
x
.
pos
 = 0;

93 
¡©e
->
¡rm
.
ava_š
 = 0;

94 
	}
}

97 
loÿl
 
gzFe


98 
	$gz_İ’
 (cÚ¡ *
·th
, 
fd
, cÚ¡ *
mode
)

100 
gz_¡©•
 
¡©e
;

101 
size_t
 
Ën
;

102 
oæag
;

103 #ifdeà
O_CLOEXEC


104 
şÛxec
 = 0;

106 #ifdeà
O_EXCL


107 
exşusive
 = 0;

111 ià(
·th
 =ğ
NULL
)

112  
NULL
;

115 
¡©e
 = (
gz_¡©•
è
	`m®loc
 ( (
gz_¡©e
));

116 ià(
¡©e
 =ğ
NULL
)

117  
NULL
;

118 
¡©e
->
size
 = 0;

119 
¡©e
->
wªt
 = 
GZBUFSIZE
;

120 
¡©e
->
msg
 = 
NULL
;

123 
¡©e
->
mode
 = 
GZ_NONE
;

124 
¡©e
->
Ëv–
 = 
Z_DEFAULT_COMPRESSION
;

125 
¡©e
->
¡¿‹gy
 = 
Z_DEFAULT_STRATEGY
;

126 
¡©e
->
dœeù
 = 0;

127 *
mode
)

129 ià(*
mode
 >= '0' && *mode <= '9')

130 
¡©e
->
Ëv–
 = *
mode
 - '0';

132 *
mode
)

135 
¡©e
->
mode
 = 
GZ_READ
;

137 #iâdeà
NO_GZCOMPRESS


139 
¡©e
->
mode
 = 
GZ_WRITE
;

142 
¡©e
->
mode
 = 
GZ_APPEND
;

146 
	`ä“
 (
¡©e
);

147  
NULL
;

150 #ifdeà
O_CLOEXEC


152 
şÛxec
 = 1;

155 #ifdeà
O_EXCL


157 
exşusive
 = 1;

161 
¡©e
->
¡¿‹gy
 = 
Z_FILTERED
;

164 
¡©e
->
¡¿‹gy
 = 
Z_HUFFMAN_ONLY
;

167 
¡©e
->
¡¿‹gy
 = 
Z_RLE
;

170 
¡©e
->
¡¿‹gy
 = 
Z_FIXED
;

173 
¡©e
->
dœeù
 = 1;

178 
mode
++;

182 ià(
¡©e
->
mode
 =ğ
GZ_NONE
)

184 
	`ä“
 (
¡©e
);

185  
NULL
;

189 ià(
¡©e
->
mode
 =ğ
GZ_READ
)

191 ià(
¡©e
->
dœeù
)

193 
	`ä“
 (
¡©e
);

194  
NULL
;

196 
¡©e
->
dœeù
 = 1;

200 #ifdeà
_WIN32


201 ià(
fd
 == -2)

203 
Ën
 = 
	`wc¡ombs
 (
NULL
, 
·th
, 0);

204 ià(
Ën
 =ğ(
size_t
) - 1)

205 
Ën
 = 0;

209 
Ën
 = 
	`¡¾’
 ((cÚ¡ *è
·th
);

210 
¡©e
->
·th
 = (*è
	`m®loc
 (
Ën
 + 1);

211 ià(
¡©e
->
·th
 =ğ
NULL
)

213 
	`ä“
 (
¡©e
);

214  
NULL
;

216 #ifdeà
_WIN32


217 ià(
fd
 == -2)

218 ià(
Ën
)

219 
	`wc¡ombs
 (
¡©e
->
·th
,…©h, 
Ën
 + 1);

221 *(
¡©e
->
·th
) = 0;

224 #ià!
	`defšed
(
NO_¢´štf
è&& !defšed(
NO_v¢´štf
)

225 
	`¢´štf
 (
¡©e
->
·th
, 
Ën
 + 1, "%s", (const *)…ath);

227 
	`¡rıy
 (
¡©e
->
·th
,…ath);

231 
oæag
 =

232 #ifdeà
O_LARGEFILE


233 
O_LARGEFILE
 |

235 #ifdeà
O_BINARY


236 
O_BINARY
 |

238 #ifdeà
O_CLOEXEC


239 (
şÛxec
 ? 
O_CLOEXEC
 : 0) |

241 (
¡©e
->
mode
 =ğ
GZ_READ
 ? 
O_RDONLY
 : (
O_WRONLY
 | 
O_CREAT
 |

242 #ifdeà
O_EXCL


243 (
exşusive
 ? 
O_EXCL
 : 0) |

245 (
¡©e
->
mode
 =ğ
GZ_WRITE
 ?

246 
O_TRUNC
 : 
O_APPEND
)));

249 
¡©e
->
fd
 = fd > -1 ? fd : (

250 #ifdeà
_WIN32


251 
fd
 =ğ-2 ? 
	`_wİ’
 (
·th
, 
oæag
, 0666) :

253 
	`İ’
 ((cÚ¡ *è
·th
, 
oæag
, 0666));

254 ià(
¡©e
->
fd
 == -1)

256 
	`ä“
 (
¡©e
->
·th
);

257 
	`ä“
 (
¡©e
);

258  
NULL
;

260 ià(
¡©e
->
mode
 =ğ
GZ_APPEND
)

261 
¡©e
->
mode
 = 
GZ_WRITE
;

264 ià(
¡©e
->
mode
 =ğ
GZ_READ
)

266 
¡©e
->
¡¬t
 = 
	`LSEEK
 (¡©e->
fd
, 0, 
SEEK_CUR
);

267 ià(
¡©e
->
¡¬t
 == -1)

268 
¡©e
->
¡¬t
 = 0;

272 
	`gz_»£t
 (
¡©e
);

275  (
gzFe
è
¡©e
;

276 
	}
}

279 
gzFe
 
ZEXPORT


280 
	$gzİ’
 (cÚ¡ *
·th
, cÚ¡ *
mode
)

282  
	`gz_İ’
 (
·th
, -1, 
mode
);

283 
	}
}

286 
gzFe
 
ZEXPORT


287 
	$gzİ’64
 (cÚ¡ *
·th
, cÚ¡ *
mode
)

289  
	`gz_İ’
 (
·th
, -1, 
mode
);

290 
	}
}

293 
gzFe
 
ZEXPORT


294 
	$gzdİ’
 (
fd
, cÚ¡ *
mode
)

296 *
·th
;

297 
gzFe
 
gz
;

299 ià(
fd
 =ğ-1 || (
·th
 = (*è
	`m®loc
 (7 + 3 *  ())è=ğ
NULL
)

300  
NULL
;

301 #ià!
	`defšed
(
NO_¢´štf
è&& !defšed(
NO_v¢´štf
)

302 
	`¢´štf
 (
·th
, 7 + 3 *  (), "<fd:%d>", 
fd
);

304 
	`¥rštf
 (
·th
, "<fd:%d>", 
fd
);

306 
gz
 = 
	`gz_İ’
 (
·th
, 
fd
, 
mode
);

307 
	`ä“
 (
·th
);

308  
gz
;

309 
	}
}

312 #ifdeà
_WIN32


313 
gzFe
 
ZEXPORT


314 
	$gzİ’_w
 (cÚ¡ 
wch¬_t
 * 
·th
, cÚ¡ *
mode
)

316  
	`gz_İ’
 (
·th
, -2, 
mode
);

317 
	}
}

321 
ZEXPORT


322 
	$gzbufãr
 (
gzFe
 
fe
, 
size
)

324 
gz_¡©•
 
¡©e
;

327 ià(
fe
 =ğ
NULL
)

329 
¡©e
 = (
gz_¡©•
è
fe
;

330 ià(
¡©e
->
mode
 !ğ
GZ_READ
 && s‹->mod!ğ
GZ_WRITE
)

334 ià(
¡©e
->
size
 != 0)

338 ià(
size
 < 2)

339 
size
 = 2;

340 
¡©e
->
wªt
 = 
size
;

342 
	}
}

345 
ZEXPORT


346 
	$gz»wšd
 (
gzFe
 
fe
)

348 
gz_¡©•
 
¡©e
;

351 ià(
fe
 =ğ
NULL
)

353 
¡©e
 = (
gz_¡©•
è
fe
;

356 ià(
¡©e
->
mode
 !ğ
GZ_READ
 ||

357 (
¡©e
->
”r
 !ğ
Z_OK
 && s‹->”¸!ğ
Z_BUF_ERROR
))

361 ià(
	`LSEEK
 (
¡©e
->
fd
, s‹->
¡¬t
, 
SEEK_SET
) == -1)

363 
	`gz_»£t
 (
¡©e
);

365 
	}
}

368 
z_off64_t
 
ZEXPORT


369 
	$gz£ek64
 (
gzFe
 
fe
, 
z_off64_t
 
off£t
, 
wh’û
)

371 
n
;

372 
z_off64_t
 
»t
;

373 
gz_¡©•
 
¡©e
;

376 ià(
fe
 =ğ
NULL
)

378 
¡©e
 = (
gz_¡©•
è
fe
;

379 ià(
¡©e
->
mode
 !ğ
GZ_READ
 && s‹->mod!ğ
GZ_WRITE
)

383 ià(
¡©e
->
”r
 !ğ
Z_OK
 && s‹->”¸!ğ
Z_BUF_ERROR
)

387 ià(
wh’û
 !ğ
SEEK_SET
 && wh’û !ğ
SEEK_CUR
)

391 ià(
wh’û
 =ğ
SEEK_SET
)

392 
off£t
 -ğ
¡©e
->
x
.
pos
;

393 ià(
¡©e
->
£ek
)

394 
off£t
 +ğ
¡©e
->
sk
;

395 
¡©e
->
£ek
 = 0;

398 ià(
¡©e
->
mode
 =ğ
GZ_READ
 && s‹->
how
 =ğ
COPY
 &&

399 
¡©e
->
x
.
pos
 + 
off£t
 >= 0)

401 
»t
 = 
	`LSEEK
 (
¡©e
->
fd
, 
off£t
 - s‹->
x
.
have
, 
SEEK_CUR
);

402 ià(
»t
 == -1)

404 
¡©e
->
x
.
have
 = 0;

405 
¡©e
->
eof
 = 0;

406 
¡©e
->
·¡
 = 0;

407 
¡©e
->
£ek
 = 0;

408 
	`gz_”rÜ
 (
¡©e
, 
Z_OK
, 
NULL
);

409 
¡©e
->
¡rm
.
ava_š
 = 0;

410 
¡©e
->
x
.
pos
 +ğ
off£t
;

411  
¡©e
->
x
.
pos
;

415 ià(
off£t
 < 0)

417 ià(
¡©e
->
mode
 !ğ
GZ_READ
)

419 
off£t
 +ğ
¡©e
->
x
.
pos
;

420 ià(
off£t
 < 0)

422 ià(
	`gz»wšd
 (
fe
) == -1)

427 ià(
¡©e
->
mode
 =ğ
GZ_READ
)

429 
n
 = 
	`GT_OFF
 (
¡©e
->
x
.
have
è|| (
z_off64_t
è¡©e->x.hav> 
off£t
 ?

430 (è
off£t
 : 
¡©e
->
x
.
have
;

431 
¡©e
->
x
.
have
 -ğ
n
;

432 
¡©e
->
x
.
Ãxt
 +ğ
n
;

433 
¡©e
->
x
.
pos
 +ğ
n
;

434 
off£t
 -ğ
n
;

438 ià(
off£t
)

440 
¡©e
->
£ek
 = 1;

441 
¡©e
->
sk
 = 
off£t
;

443  
¡©e
->
x
.
pos
 + 
off£t
;

444 
	}
}

447 
z_off_t
 
ZEXPORT


448 
	$gz£ek
 (
gzFe
 
fe
, 
z_off_t
 
off£t
, 
wh’û
)

450 
z_off64_t
 
»t
;

452 
»t
 = 
	`gz£ek64
 (
fe
, (
z_off64_t
è
off£t
, 
wh’û
);

453  
»t
 =ğ(
z_off_t
)„et ? (z_off_t)„et : -1;

454 
	}
}

457 
z_off64_t
 
ZEXPORT


458 
	$gz‹Î64
 (
gzFe
 
fe
)

460 
gz_¡©•
 
¡©e
;

463 ià(
fe
 =ğ
NULL
)

465 
¡©e
 = (
gz_¡©•
è
fe
;

466 ià(
¡©e
->
mode
 !ğ
GZ_READ
 && s‹->mod!ğ
GZ_WRITE
)

470  
¡©e
->
x
.
pos
 + (¡©e->
£ek
 ? s‹->
sk
 : 0);

471 
	}
}

474 
z_off_t
 
ZEXPORT


475 
	$gz‹Î
 (
gzFe
 
fe
)

477 
z_off64_t
 
»t
;

479 
»t
 = 
	`gz‹Î64
 (
fe
);

480  
»t
 =ğ(
z_off_t
)„et ? (z_off_t)„et : -1;

481 
	}
}

484 
z_off64_t
 
ZEXPORT


485 
	$gzoff£t64
 (
gzFe
 
fe
)

487 
z_off64_t
 
off£t
;

488 
gz_¡©•
 
¡©e
;

491 ià(
fe
 =ğ
NULL
)

493 
¡©e
 = (
gz_¡©•
è
fe
;

494 ià(
¡©e
->
mode
 !ğ
GZ_READ
 && s‹->mod!ğ
GZ_WRITE
)

498 
off£t
 = 
	`LSEEK
 (
¡©e
->
fd
, 0, 
SEEK_CUR
);

499 ià(
off£t
 == -1)

501 ià(
¡©e
->
mode
 =ğ
GZ_READ
)

502 
off£t
 -ğ
¡©e
->
¡rm
.
ava_š
;

503  
off£t
;

504 
	}
}

507 
z_off_t
 
ZEXPORT


508 
	$gzoff£t
 (
gzFe
 
fe
)

510 
z_off64_t
 
»t
;

512 
»t
 = 
	`gzoff£t64
 (
fe
);

513  
»t
 =ğ(
z_off_t
)„et ? (z_off_t)„et : -1;

514 
	}
}

517 
ZEXPORT


518 
	$gzeof
 (
gzFe
 
fe
)

520 
gz_¡©•
 
¡©e
;

523 ià(
fe
 =ğ
NULL
)

525 
¡©e
 = (
gz_¡©•
è
fe
;

526 ià(
¡©e
->
mode
 !ğ
GZ_READ
 && s‹->mod!ğ
GZ_WRITE
)

530  
¡©e
->
mode
 =ğ
GZ_READ
 ? s‹->
·¡
 : 0;

531 
	}
}

534 cÚ¡ *
ZEXPORT


535 
	$gz”rÜ
 (
gzFe
 
fe
, *
”ºum
)

537 
gz_¡©•
 
¡©e
;

540 ià(
fe
 =ğ
NULL
)

541  
NULL
;

542 
¡©e
 = (
gz_¡©•
è
fe
;

543 ià(
¡©e
->
mode
 !ğ
GZ_READ
 && s‹->mod!ğ
GZ_WRITE
)

544  
NULL
;

547 ià(
”ºum
 !ğ
NULL
)

548 *
”ºum
 = 
¡©e
->
”r
;

549  
¡©e
->
”r
 =ğ
Z_MEM_ERROR
 ? "out of memory" :

550 (
¡©e
->
msg
 =ğ
NULL
 ? "" : state->msg);

551 
	}
}

554 
ZEXPORT


555 
	$gzş—»¼
 (
gzFe
 
fe
)

557 
gz_¡©•
 
¡©e
;

560 ià(
fe
 =ğ
NULL
)

562 
¡©e
 = (
gz_¡©•
è
fe
;

563 ià(
¡©e
->
mode
 !ğ
GZ_READ
 && s‹->mod!ğ
GZ_WRITE
)

567 ià(
¡©e
->
mode
 =ğ
GZ_READ
)

569 
¡©e
->
eof
 = 0;

570 
¡©e
->
·¡
 = 0;

572 
	`gz_”rÜ
 (
¡©e
, 
Z_OK
, 
NULL
);

573 
	}
}

581 
ZLIB_INTERNAL


582 
	$gz_”rÜ
 (
gz_¡©•
 
¡©e
, 
”r
, cÚ¡ *
msg
)

585 ià(
¡©e
->
msg
 !ğ
NULL
)

587 ià(
¡©e
->
”r
 !ğ
Z_MEM_ERROR
)

588 
	`ä“
 (
¡©e
->
msg
);

589 
¡©e
->
msg
 = 
NULL
;

593 ià(
”r
 !ğ
Z_OK
 &&ƒ¼ !ğ
Z_BUF_ERROR
)

594 
¡©e
->
x
.
have
 = 0;

597 
¡©e
->
”r
 =ƒrr;

598 ià(
msg
 =ğ
NULL
)

602 ià(
”r
 =ğ
Z_MEM_ERROR
)

606 ià((
¡©e
->
msg
 =

607 (*è
	`m®loc
 (
	`¡¾’
 (
¡©e
->
·th
è+ sŒËÀ(
msg
è+ 3)è=ğ
NULL
)

609 
¡©e
->
”r
 = 
Z_MEM_ERROR
;

612 #ià!
	`defšed
(
NO_¢´štf
è&& !defšed(
NO_v¢´štf
)

613 
	`¢´štf
 (
¡©e
->
msg
, 
	`¡¾’
 (¡©e->
·th
) + strlen (msg) + 3,

614 "%s%s%s", 
¡©e
->
·th
, ": ", 
msg
);

616 
	`¡rıy
 (
¡©e
->
msg
, s‹->
·th
);

617 
	`¡rÿt
 (
¡©e
->
msg
, ": ");

618 
	`¡rÿt
 (
¡©e
->
msg
, msg);

621 
	}
}

623 #iâdeà
INT_MAX


628 
ZLIB_INTERNAL


629 
	$gz_štmax
 ()

631 
p
, 
q
;

633 
p
 = 1;

636 
q
 = 
p
;

637 
p
 <<= 1;

638 
p
++;

640 
p
 > 
q
);

641  
q
 >> 1;

642 
	}
}

	@gzread.c

6 
	~"gzguts.h
"

9 
loÿl
 
gz_lßd
 
OF
 ((
gz_¡©•
, *, , *));

10 
loÿl
 
gz_ava
 
OF
 ((
gz_¡©•
));

11 
loÿl
 
gz_look
 
OF
 ((
gz_¡©•
));

12 
loÿl
 
gz_decomp
 
OF
 ((
gz_¡©•
));

13 
loÿl
 
gz_ãtch
 
OF
 ((
gz_¡©•
));

14 
loÿl
 
gz_sk
 
OF
 ((
gz_¡©•
, 
z_off64_t
));

20 
loÿl
 

21 
	$gz_lßd
 (
gz_¡©•
 
¡©e
, *
buf
, 
Ën
, *
have
)

23 
»t
;

25 *
have
 = 0;

28 
»t
 = 
	`»ad
 (
¡©e
->
fd
, 
buf
 + *
have
, 
Ën
 - *have);

29 ià(
»t
 <= 0)

31 *
have
 +ğ
»t
;

33 *
have
 < 
Ën
);

34 ià(
»t
 < 0)

36 
	`gz_”rÜ
 (
¡©e
, 
Z_ERRNO
, 
	`z¡»¼Ü
 ());

39 ià(
»t
 == 0)

40 
¡©e
->
eof
 = 1;

42 
	}
}

51 
loÿl
 

52 
	$gz_ava
 (
gz_¡©•
 
¡©e
)

54 
gÙ
;

55 
z_¡»amp
 
¡rm
 = &(
¡©e
->strm);

57 ià(
¡©e
->
”r
 !ğ
Z_OK
 && s‹->”¸!ğ
Z_BUF_ERROR
)

59 ià(
¡©e
->
eof
 == 0)

61 ià(
¡rm
->
ava_š
)

63 *
p
 = 
¡©e
->
š
;

64 cÚ¡ *
q
 = 
¡rm
->
Ãxt_š
;

65 
n
 = 
¡rm
->
ava_š
;

68 *
p
++ = *
q
++;

70 --
n
);

72 ià(
	`gz_lßd
 (
¡©e
, s‹->
š
 + 
¡rm
->
ava_š
,

73 
¡©e
->
size
 - 
¡rm
->
ava_š
, &
gÙ
) == -1)

75 
¡rm
->
ava_š
 +ğ
gÙ
;

76 
¡rm
->
Ãxt_š
 = 
¡©e
->
š
;

79 
	}
}

90 
loÿl
 

91 
	$gz_look
 (
gz_¡©•
 
¡©e
)

93 
z_¡»amp
 
¡rm
 = &(
¡©e
->strm);

96 ià(
¡©e
->
size
 == 0)

99 
¡©e
->
š
 = (*è
	`m®loc
 (¡©e->
wªt
);

100 
¡©e
->
out
 = (*è
	`m®loc
 (¡©e->
wªt
 << 1);

101 ià(
¡©e
->
š
 =ğ
NULL
 || s‹->
out
 == NULL)

103 ià(
¡©e
->
out
 !ğ
NULL
)

104 
	`ä“
 (
¡©e
->
out
);

105 ià(
¡©e
->
š
 !ğ
NULL
)

106 
	`ä“
 (
¡©e
->
š
);

107 
	`gz_”rÜ
 (
¡©e
, 
Z_MEM_ERROR
, "out of memory");

110 
¡©e
->
size
 = s‹->
wªt
;

113 
¡©e
->
¡rm
.
z®loc
 = 
Z_NULL
;

114 
¡©e
->
¡rm
.
zä“
 = 
Z_NULL
;

115 
¡©e
->
¡rm
.
İaque
 = 
Z_NULL
;

116 
¡©e
->
¡rm
.
ava_š
 = 0;

117 
¡©e
->
¡rm
.
Ãxt_š
 = 
Z_NULL
;

118 ià(
	`šæ©eIn™2
 (&(
¡©e
->
¡rm
), 15 + 16è!ğ
Z_OK
)

120 
	`ä“
 (
¡©e
->
out
);

121 
	`ä“
 (
¡©e
->
š
);

122 
¡©e
->
size
 = 0;

123 
	`gz_”rÜ
 (
¡©e
, 
Z_MEM_ERROR
, "out of memory");

129 ià(
¡rm
->
ava_š
 < 2)

131 ià(
	`gz_ava
 (
¡©e
) == -1)

133 ià(
¡rm
->
ava_š
 == 0)

144 ià(
¡rm
->
ava_š
 > 1 && sŒm->
Ãxt_š
[0] == 31 && strm->next_in[1] == 139)

146 
	`šæ©eRe£t
 (
¡rm
);

147 
¡©e
->
how
 = 
GZIP
;

148 
¡©e
->
dœeù
 = 0;

154 ià(
¡©e
->
dœeù
 == 0)

156 
¡rm
->
ava_š
 = 0;

157 
¡©e
->
eof
 = 1;

158 
¡©e
->
x
.
have
 = 0;

165 
¡©e
->
x
.
Ãxt
 = s‹->
out
;

166 ià(
¡rm
->
ava_š
)

168 
	`memıy
 (
¡©e
->
x
.
Ãxt
, 
¡rm
->
Ãxt_š
, sŒm->
ava_š
);

169 
¡©e
->
x
.
have
 = 
¡rm
->
ava_š
;

170 
¡rm
->
ava_š
 = 0;

172 
¡©e
->
how
 = 
COPY
;

173 
¡©e
->
dœeù
 = 1;

175 
	}
}

182 
loÿl
 

183 
	$gz_decomp
 (
gz_¡©•
 
¡©e
)

185 
»t
 = 
Z_OK
;

186 
had
;

187 
z_¡»amp
 
¡rm
 = &(
¡©e
->strm);

190 
had
 = 
¡rm
->
ava_out
;

194 ià(
¡rm
->
ava_š
 =ğ0 && 
	`gz_ava
 (
¡©e
) == -1)

196 ià(
¡rm
->
ava_š
 == 0)

198 
	`gz_”rÜ
 (
¡©e
, 
Z_BUF_ERROR
, "unexpectedƒnd of file");

203 
»t
 = 
	`šæ©e
 (
¡rm
, 
Z_NO_FLUSH
);

204 ià(
»t
 =ğ
Z_STREAM_ERROR
 ||„‘ =ğ
Z_NEED_DICT
)

206 
	`gz_”rÜ
 (
¡©e
, 
Z_STREAM_ERROR
,

210 ià(
»t
 =ğ
Z_MEM_ERROR
)

212 
	`gz_”rÜ
 (
¡©e
, 
Z_MEM_ERROR
, "out of memory");

215 ià(
»t
 =ğ
Z_DATA_ERROR
)

217 
	`gz_”rÜ
 (
¡©e
, 
Z_DATA_ERROR
,

218 
¡rm
->
msg
 =ğ
NULL
 ? "compressed dataƒrror" : strm->msg);

222 
¡rm
->
ava_out
 && 
»t
 !ğ
Z_STREAM_END
);

225 
¡©e
->
x
.
have
 = 
had
 - 
¡rm
->
ava_out
;

226 
¡©e
->
x
.
Ãxt
 = 
¡rm
->
Ãxt_out
 - s‹->x.
have
;

229 ià(
»t
 =ğ
Z_STREAM_END
)

230 
¡©e
->
how
 = 
LOOK
;

234 
	}
}

242 
loÿl
 

243 
	$gz_ãtch
 (
gz_¡©•
 
¡©e
)

245 
z_¡»amp
 
¡rm
 = &(
¡©e
->strm);

249 
¡©e
->
how
)

251 
LOOK
:

252 ià(
	`gz_look
 (
¡©e
) == -1)

254 ià(
¡©e
->
how
 =ğ
LOOK
)

257 
COPY
:

258 ià(
	`gz_lßd
 (
¡©e
, s‹->
out
, s‹->
size
 << 1, &(¡©e->
x
.
have
))

261 
¡©e
->
x
.
Ãxt
 = s‹->
out
;

263 
GZIP
:

264 
¡rm
->
ava_out
 = 
¡©e
->
size
 << 1;

265 
¡rm
->
Ãxt_out
 = 
¡©e
->
out
;

266 ià(
	`gz_decomp
 (
¡©e
) == -1)

270 
¡©e
->
x
.
have
 =ğ0 && (!¡©e->
eof
 || 
¡rm
->
ava_š
));

272 
	}
}

275 
loÿl
 

276 
	$gz_sk
 (
gz_¡©•
 
¡©e
, 
z_off64_t
 
Ën
)

278 
n
;

281 
Ën
)

283 ià(
¡©e
->
x
.
have
)

285 
n
 = 
	`GT_OFF
 (
¡©e
->
x
.
have
è|| (
z_off64_t
è¡©e->x.hav> 
Ën
 ?

286 (è
Ën
 : 
¡©e
->
x
.
have
;

287 
¡©e
->
x
.
have
 -ğ
n
;

288 
¡©e
->
x
.
Ãxt
 +ğ
n
;

289 
¡©e
->
x
.
pos
 +ğ
n
;

290 
Ën
 -ğ
n
;

294 ià(
¡©e
->
eof
 && s‹->
¡rm
.
ava_š
 == 0)

301 ià(
	`gz_ãtch
 (
¡©e
) == -1)

305 
	}
}

308 
ZEXPORT


309 
	$gz»ad
 (
gzFe
 
fe
, 
voidp
 
buf
, 
Ën
)

311 
gÙ
, 
n
;

312 
gz_¡©•
 
¡©e
;

313 
z_¡»amp
 
¡rm
;

316 ià(
fe
 =ğ
NULL
)

318 
¡©e
 = (
gz_¡©•
è
fe
;

319 
¡rm
 = &(
¡©e
->strm);

322 ià(
¡©e
->
mode
 !ğ
GZ_READ
 ||

323 (
¡©e
->
”r
 !ğ
Z_OK
 && s‹->”¸!ğ
Z_BUF_ERROR
))

328 ià((è
Ën
 < 0)

330 
	`gz_”rÜ
 (
¡©e
, 
Z_DATA_ERROR
, "requested†ength does‚ot fit in int");

335 ià(
Ën
 == 0)

339 ià(
¡©e
->
£ek
)

341 
¡©e
->
£ek
 = 0;

342 ià(
	`gz_sk
 (
¡©e
, s‹->
sk
) == -1)

347 
gÙ
 = 0;

351 ià(
¡©e
->
x
.
have
)

353 
n
 = 
¡©e
->
x
.
have
 > 
Ën
 ?†en : state->x.have;

354 
	`memıy
 (
buf
, 
¡©e
->
x
.
Ãxt
, 
n
);

355 
¡©e
->
x
.
Ãxt
 +ğ
n
;

356 
¡©e
->
x
.
have
 -ğ
n
;

360 ià(
¡©e
->
eof
 && 
¡rm
->
ava_š
 == 0)

362 
¡©e
->
·¡
 = 1;

368 ià(
¡©e
->
how
 =ğ
LOOK
 || 
Ën
 < (¡©e->
size
 << 1))

371 ià(
	`gz_ãtch
 (
¡©e
) == -1)

379 ià(
¡©e
->
how
 =ğ
COPY
)

381 ià(
	`gz_lßd
 (
¡©e
, (*è
buf
, 
Ën
, &
n
) == -1)

388 
¡rm
->
ava_out
 = 
Ën
;

389 
¡rm
->
Ãxt_out
 = (*è
buf
;

390 ià(
	`gz_decomp
 (
¡©e
) == -1)

392 
n
 = 
¡©e
->
x
.
have
;

393 
¡©e
->
x
.
have
 = 0;

397 
Ën
 -ğ
n
;

398 
buf
 = (*èbuà+ 
n
;

399 
gÙ
 +ğ
n
;

400 
¡©e
->
x
.
pos
 +ğ
n
;

402 
Ën
);

405  (è
gÙ
;

406 
	}
}

409 #ifdeà
Z_PREFIX_SET


410 #undeà
z_gzg‘c


412 #undeà
gzg‘c


414 
ZEXPORT


415 
	$gzg‘c
 (
gzFe
 
fe
)

417 
»t
;

418 
buf
[1];

419 
gz_¡©•
 
¡©e
;

422 ià(
fe
 =ğ
NULL
)

424 
¡©e
 = (
gz_¡©•
è
fe
;

427 ià(
¡©e
->
mode
 !ğ
GZ_READ
 ||

428 (
¡©e
->
”r
 !ğ
Z_OK
 && s‹->”¸!ğ
Z_BUF_ERROR
))

432 ià(
¡©e
->
x
.
have
)

434 
¡©e
->
x
.
have
--;

435 
¡©e
->
x
.
pos
++;

436  *(
¡©e
->
x
.
Ãxt
)++;

440 
»t
 = 
	`gz»ad
 (
fe
, 
buf
, 1);

441  
»t
 < 1 ? -1 : 
buf
[0];

442 
	}
}

444 
ZEXPORT


445 
	$gzg‘c_
 (
gzFe
 
fe
)

447  
	`gzg‘c
 (
fe
);

448 
	}
}

451 
ZEXPORT


452 
	$gzung‘c
 (
c
, 
gzFe
 
fe
)

454 
gz_¡©•
 
¡©e
;

457 ià(
fe
 =ğ
NULL
)

459 
¡©e
 = (
gz_¡©•
è
fe
;

462 ià(
¡©e
->
mode
 !ğ
GZ_READ
 ||

463 (
¡©e
->
”r
 !ğ
Z_OK
 && s‹->”¸!ğ
Z_BUF_ERROR
))

467 ià(
¡©e
->
£ek
)

469 
¡©e
->
£ek
 = 0;

470 ià(
	`gz_sk
 (
¡©e
, s‹->
sk
) == -1)

475 ià(
c
 < 0)

479 ià(
¡©e
->
x
.
have
 == 0)

481 
¡©e
->
x
.
have
 = 1;

482 
¡©e
->
x
.
Ãxt
 = s‹->
out
 + (¡©e->
size
 << 1) - 1;

483 
¡©e
->
x
.
Ãxt
[0] = 
c
;

484 
¡©e
->
x
.
pos
--;

485 
¡©e
->
·¡
 = 0;

486  
c
;

490 ià(
¡©e
->
x
.
have
 =ğ(¡©e->
size
 << 1))

492 
	`gz_”rÜ
 (
¡©e
, 
Z_DATA_ERROR
, "out of„oomo…ush characters");

497 ià(
¡©e
->
x
.
Ãxt
 =ğ¡©e->
out
)

499 *
¤c
 = 
¡©e
->
out
 + s‹->
x
.
have
;

500 *
de¡
 = 
¡©e
->
out
 + (¡©e->
size
 << 1);

501 
¤c
 > 
¡©e
->
out
)

502 *--
de¡
 = *--
¤c
;

503 
¡©e
->
x
.
Ãxt
 = 
de¡
;

505 
¡©e
->
x
.
have
++;

506 
¡©e
->
x
.
Ãxt
--;

507 
¡©e
->
x
.
Ãxt
[0] = 
c
;

508 
¡©e
->
x
.
pos
--;

509 
¡©e
->
·¡
 = 0;

510  
c
;

511 
	}
}

514 *
ZEXPORT


515 
	$gzg‘s
 (
gzFe
 
fe
, *
buf
, 
Ën
)

517 
Ëá
, 
n
;

518 *
¡r
;

519 *
eŞ
;

520 
gz_¡©•
 
¡©e
;

523 ià(
fe
 =ğ
NULL
 || 
buf
 =ğNULL || 
Ën
 < 1)

524  
NULL
;

525 
¡©e
 = (
gz_¡©•
è
fe
;

528 ià(
¡©e
->
mode
 !ğ
GZ_READ
 ||

529 (
¡©e
->
”r
 !ğ
Z_OK
 && s‹->”¸!ğ
Z_BUF_ERROR
))

530  
NULL
;

533 ià(
¡©e
->
£ek
)

535 
¡©e
->
£ek
 = 0;

536 ià(
	`gz_sk
 (
¡©e
, s‹->
sk
) == -1)

537  
NULL
;

543 
¡r
 = 
buf
;

544 
Ëá
 = (è
Ën
 - 1;

545 ià(
Ëá
)

549 ià(
¡©e
->
x
.
have
 =ğ0 && 
	`gz_ãtch
 (state) == -1)

550  
NULL
;

551 ià(
¡©e
->
x
.
have
 == 0)

553 
¡©e
->
·¡
 = 1;

558 
n
 = 
¡©e
->
x
.
have
 > 
Ëá
 ?†eft : state->x.have;

559 
eŞ
 = (*è
	`memchr
 (
¡©e
->
x
.
Ãxt
, '\n', 
n
);

560 ià(
eŞ
 !ğ
NULL
)

561 
n
 = (è(
eŞ
 - 
¡©e
->
x
.
Ãxt
) + 1;

564 
	`memıy
 (
buf
, 
¡©e
->
x
.
Ãxt
, 
n
);

565 
¡©e
->
x
.
have
 -ğ
n
;

566 
¡©e
->
x
.
Ãxt
 +ğ
n
;

567 
¡©e
->
x
.
pos
 +ğ
n
;

568 
Ëá
 -ğ
n
;

569 
buf
 +ğ
n
;

571 
Ëá
 && 
eŞ
 =ğ
NULL
);

574 ià(
buf
 =ğ
¡r
)

575  
NULL
;

576 
buf
[0] = 0;

577  
¡r
;

578 
	}
}

581 
ZEXPORT


582 
	$gzdœeù
 (
gzFe
 
fe
)

584 
gz_¡©•
 
¡©e
;

587 ià(
fe
 =ğ
NULL
)

589 
¡©e
 = (
gz_¡©•
è
fe
;

593 ià(
¡©e
->
mode
 =ğ
GZ_READ
 && s‹->
how
 =ğ
LOOK
 && s‹->
x
.
have
 == 0)

594 (è
	`gz_look
 (
¡©e
);

597  
¡©e
->
dœeù
;

598 
	}
}

601 
ZEXPORT


602 
	$gzşo£_r
 (
gzFe
 
fe
)

604 
»t
, 
”r
;

605 
gz_¡©•
 
¡©e
;

608 ià(
fe
 =ğ
NULL
)

609  
Z_STREAM_ERROR
;

610 
¡©e
 = (
gz_¡©•
è
fe
;

613 ià(
¡©e
->
mode
 !ğ
GZ_READ
)

614  
Z_STREAM_ERROR
;

617 ià(
¡©e
->
size
)

619 
	`šæ©eEnd
 (&(
¡©e
->
¡rm
));

620 
	`ä“
 (
¡©e
->
out
);

621 
	`ä“
 (
¡©e
->
š
);

623 
”r
 = 
¡©e
->”¸=ğ
Z_BUF_ERROR
 ? Z_BUF_ERROR : 
Z_OK
;

624 
	`gz_”rÜ
 (
¡©e
, 
Z_OK
, 
NULL
);

625 
	`ä“
 (
¡©e
->
·th
);

626 
»t
 = 
	`şo£
 (
¡©e
->
fd
);

627 
	`ä“
 (
¡©e
);

628  
»t
 ? 
Z_ERRNO
 : 
”r
;

629 
	}
}

	@gzwrite.c

6 
	~"gzguts.h
"

9 
loÿl
 
gz_š™
 
OF
 ((
gz_¡©•
));

10 
loÿl
 
gz_comp
 
OF
 ((
gz_¡©•
, ));

11 
loÿl
 
gz_z”o
 
OF
 ((
gz_¡©•
, 
z_off64_t
));

15 
loÿl
 

16 
	$gz_š™
 (
gz_¡©•
 
¡©e
)

18 
»t
;

19 
z_¡»amp
 
¡rm
 = &(
¡©e
->strm);

22 
¡©e
->
š
 = (*è
	`m®loc
 (¡©e->
wªt
);

23 ià(
¡©e
->
š
 =ğ
NULL
)

25 
	`gz_”rÜ
 (
¡©e
, 
Z_MEM_ERROR
, "out of memory");

30 ià(!
¡©e
->
dœeù
)

33 
¡©e
->
out
 = (*è
	`m®loc
 (¡©e->
wªt
);

34 ià(
¡©e
->
out
 =ğ
NULL
)

36 
	`ä“
 (
¡©e
->
š
);

37 
	`gz_”rÜ
 (
¡©e
, 
Z_MEM_ERROR
, "out of memory");

42 
¡rm
->
z®loc
 = 
Z_NULL
;

43 
¡rm
->
zä“
 = 
Z_NULL
;

44 
¡rm
->
İaque
 = 
Z_NULL
;

45 
»t
 = 
	`deæ©eIn™2
 (
¡rm
, 
¡©e
->
Ëv–
, 
Z_DEFLATED
,

46 
MAX_WBITS
 + 16, 
DEF_MEM_LEVEL
, 
¡©e
->
¡¿‹gy
);

47 ià(
»t
 !ğ
Z_OK
)

49 
	`ä“
 (
¡©e
->
out
);

50 
	`ä“
 (
¡©e
->
š
);

51 
	`gz_”rÜ
 (
¡©e
, 
Z_MEM_ERROR
, "out of memory");

57 
¡©e
->
size
 = s‹->
wªt
;

60 ià(!
¡©e
->
dœeù
)

62 
¡rm
->
ava_out
 = 
¡©e
->
size
;

63 
¡rm
->
Ãxt_out
 = 
¡©e
->
out
;

64 
¡©e
->
x
.
Ãxt
 = 
¡rm
->
Ãxt_out
;

67 
	}
}

75 
loÿl
 

76 
	$gz_comp
 (
gz_¡©•
 
¡©e
, 
æush
)

78 
»t
, 
gÙ
;

79 
have
;

80 
z_¡»amp
 
¡rm
 = &(
¡©e
->strm);

83 ià(
¡©e
->
size
 =ğ0 && 
	`gz_š™
 (state) == -1)

87 ià(
¡©e
->
dœeù
)

89 
gÙ
 = 
	`wr™e
 (
¡©e
->
fd
, 
¡rm
->
Ãxt_š
, sŒm->
ava_š
);

90 ià(
gÙ
 < 0 || (ègÙ !ğ
¡rm
->
ava_š
)

92 
	`gz_”rÜ
 (
¡©e
, 
Z_ERRNO
, 
	`z¡»¼Ü
 ());

95 
¡rm
->
ava_š
 = 0;

100 
»t
 = 
Z_OK
;

105 ià(
¡rm
->
ava_out
 =ğ0 || (
æush
 !ğ
Z_NO_FLUSH
 &&

106 (
æush
 !ğ
Z_FINISH


107 || 
»t
 =ğ
Z_STREAM_END
)))

109 
have
 = (è(
¡rm
->
Ãxt_out
 - 
¡©e
->
x
.
Ãxt
);

110 ià(
have
 && ((
gÙ
 = 
	`wr™e
 (
¡©e
->
fd
, s‹->
x
.
Ãxt
, have)) < 0 ||

111 (è
gÙ
 !ğ
have
))

113 
	`gz_”rÜ
 (
¡©e
, 
Z_ERRNO
, 
	`z¡»¼Ü
 ());

116 ià(
¡rm
->
ava_out
 == 0)

118 
¡rm
->
ava_out
 = 
¡©e
->
size
;

119 
¡rm
->
Ãxt_out
 = 
¡©e
->
out
;

121 
¡©e
->
x
.
Ãxt
 = 
¡rm
->
Ãxt_out
;

125 
have
 = 
¡rm
->
ava_out
;

126 
»t
 = 
	`deæ©e
 (
¡rm
, 
æush
);

127 ià(
»t
 =ğ
Z_STREAM_ERROR
)

129 
	`gz_”rÜ
 (
¡©e
, 
Z_STREAM_ERROR
,

133 
have
 -ğ
¡rm
->
ava_out
;

135 
have
);

138 ià(
æush
 =ğ
Z_FINISH
)

139 
	`deæ©eRe£t
 (
¡rm
);

143 
	}
}

146 
loÿl
 

147 
	$gz_z”o
 (
gz_¡©•
 
¡©e
, 
z_off64_t
 
Ën
)

149 
fœ¡
;

150 
n
;

151 
z_¡»amp
 
¡rm
 = &(
¡©e
->strm);

154 ià(
¡rm
->
ava_š
 && 
	`gz_comp
 (
¡©e
, 
Z_NO_FLUSH
) == -1)

158 
fœ¡
 = 1;

159 
Ën
)

161 
n
 = 
	`GT_OFF
 (
¡©e
->
size
è|| (
z_off64_t
è¡©e->siz> 
Ën
 ?

162 (è
Ën
 : 
¡©e
->
size
;

163 ià(
fœ¡
)

165 
	`mem£t
 (
¡©e
->
š
, 0, 
n
);

166 
fœ¡
 = 0;

168 
¡rm
->
ava_š
 = 
n
;

169 
¡rm
->
Ãxt_š
 = 
¡©e
->
š
;

170 
¡©e
->
x
.
pos
 +ğ
n
;

171 ià(
	`gz_comp
 (
¡©e
, 
Z_NO_FLUSH
) == -1)

173 
Ën
 -ğ
n
;

176 
	}
}

179 
ZEXPORT


180 
	$gzwr™e
 (
gzFe
 
fe
, 
voidpc
 
buf
, 
Ën
)

182 
put
 = 
Ën
;

183 
gz_¡©•
 
¡©e
;

184 
z_¡»amp
 
¡rm
;

187 ià(
fe
 =ğ
NULL
)

189 
¡©e
 = (
gz_¡©•
è
fe
;

190 
¡rm
 = &(
¡©e
->strm);

193 ià(
¡©e
->
mode
 !ğ
GZ_WRITE
 || s‹->
”r
 !ğ
Z_OK
)

198 ià((è
Ën
 < 0)

200 
	`gz_”rÜ
 (
¡©e
, 
Z_DATA_ERROR
, "requested†ength does‚ot fit in int");

205 ià(
Ën
 == 0)

209 ià(
¡©e
->
size
 =ğ0 && 
	`gz_š™
 (state) == -1)

213 ià(
¡©e
->
£ek
)

215 
¡©e
->
£ek
 = 0;

216 ià(
	`gz_z”o
 (
¡©e
, s‹->
sk
) == -1)

221 ià(
Ën
 < 
¡©e
->
size
)

226 
have
, 
cİy
;

228 ià(
¡rm
->
ava_š
 == 0)

229 
¡rm
->
Ãxt_š
 = 
¡©e
->
š
;

230 
have
 = (è((
¡rm
->
Ãxt_š
 + sŒm->
ava_š
è- 
¡©e
->
š
);

231 
cİy
 = 
¡©e
->
size
 - 
have
;

232 ià(
cİy
 > 
Ën
)

233 
cİy
 = 
Ën
;

234 
	`memıy
 (
¡©e
->
š
 + 
have
, 
buf
, 
cİy
);

235 
¡rm
->
ava_š
 +ğ
cİy
;

236 
¡©e
->
x
.
pos
 +ğ
cİy
;

237 
buf
 = (cÚ¡ *èbuà+ 
cİy
;

238 
Ën
 -ğ
cİy
;

239 ià(
Ën
 && 
	`gz_comp
 (
¡©e
, 
Z_NO_FLUSH
) == -1)

242 
Ën
);

247 ià(
¡rm
->
ava_š
 && 
	`gz_comp
 (
¡©e
, 
Z_NO_FLUSH
) == -1)

251 
¡rm
->
ava_š
 = 
Ën
;

252 
¡rm
->
Ãxt_š
 = (
z_cÚ¡
 
By‹f
 *è
buf
;

253 
¡©e
->
x
.
pos
 +ğ
Ën
;

254 ià(
	`gz_comp
 (
¡©e
, 
Z_NO_FLUSH
) == -1)

259  (è
put
;

260 
	}
}

263 
ZEXPORT


264 
	$gzputc
 (
gzFe
 
fe
, 
c
)

266 
have
;

267 
buf
[1];

268 
gz_¡©•
 
¡©e
;

269 
z_¡»amp
 
¡rm
;

272 ià(
fe
 =ğ
NULL
)

274 
¡©e
 = (
gz_¡©•
è
fe
;

275 
¡rm
 = &(
¡©e
->strm);

278 ià(
¡©e
->
mode
 !ğ
GZ_WRITE
 || s‹->
”r
 !ğ
Z_OK
)

282 ià(
¡©e
->
£ek
)

284 
¡©e
->
£ek
 = 0;

285 ià(
	`gz_z”o
 (
¡©e
, s‹->
sk
) == -1)

291 ià(
¡©e
->
size
)

293 ià(
¡rm
->
ava_š
 == 0)

294 
¡rm
->
Ãxt_š
 = 
¡©e
->
š
;

295 
have
 = (è((
¡rm
->
Ãxt_š
 + sŒm->
ava_š
è- 
¡©e
->
š
);

296 ià(
have
 < 
¡©e
->
size
)

298 
¡©e
->
š
[
have
] = 
c
;

299 
¡rm
->
ava_š
++;

300 
¡©e
->
x
.
pos
++;

301  
c
 & 0xff;

306 
buf
[0] = 
c
;

307 ià(
	`gzwr™e
 (
fe
, 
buf
, 1) != 1)

309  
c
 & 0xff;

310 
	}
}

313 
ZEXPORT


314 
	$gzputs
 (
gzFe
 
fe
, cÚ¡ *
¡r
)

316 
»t
;

317 
Ën
;

320 
Ën
 = (è
	`¡¾’
 (
¡r
);

321 
»t
 = 
	`gzwr™e
 (
fe
, 
¡r
, 
Ën
);

322  
»t
 =ğ0 && 
Ën
 != 0 ? -1 :„et;

323 
	}
}

325 #ià
defšed
(
STDC
è|| defšed(
Z_HAVE_STDARG_H
)

326 
	~<¡d¬g.h
>

329 
ZEXPORTVA


330 
	$gzv´štf
 (
gzFe
 
fe
, cÚ¡ *
fÜm©
, 
va_li¡
 
va
)

332 
size
, 
Ën
;

333 
gz_¡©•
 
¡©e
;

334 
z_¡»amp
 
¡rm
;

337 ià(
fe
 =ğ
NULL
)

339 
¡©e
 = (
gz_¡©•
è
fe
;

340 
¡rm
 = &(
¡©e
->strm);

343 ià(
¡©e
->
mode
 !ğ
GZ_WRITE
 || s‹->
”r
 !ğ
Z_OK
)

347 ià(
¡©e
->
size
 =ğ0 && 
	`gz_š™
 (state) == -1)

351 ià(
¡©e
->
£ek
)

353 
¡©e
->
£ek
 = 0;

354 ià(
	`gz_z”o
 (
¡©e
, s‹->
sk
) == -1)

359 ià(
¡rm
->
ava_š
 && 
	`gz_comp
 (
¡©e
, 
Z_NO_FLUSH
) == -1)

363 
size
 = (è(
¡©e
->size);

364 
¡©e
->
š
[
size
 - 1] = 0;

365 #ifdeà
NO_v¢´štf


366 #ifdeà
HAS_v¥rštf_void


367 (è
	`v¥rštf
 ((*è(
¡©e
->
š
), 
fÜm©
, 
va
);

368 
Ën
 = 0;†’ < 
size
;†en++)

369 ià(
¡©e
->
š
[
Ën
] == 0)

372 
Ën
 = 
	`v¥rštf
 ((*è(
¡©e
->
š
), 
fÜm©
, 
va
);

375 #ifdeà
HAS_v¢´štf_void


376 (è
	`v¢´štf
 ((*è(
¡©e
->
š
), 
size
, 
fÜm©
, 
va
);

377 
Ën
 = 
	`¡¾’
 ((*è(
¡©e
->
š
));

379 
Ën
 = 
	`v¢´štf
 ((*è(
¡©e
->
š
), 
size
, 
fÜm©
, 
va
);

384 ià(
Ën
 <ğ0 ||†’ >ğ(è
size
 || 
¡©e
->
š
[size - 1] != 0)

388 
¡rm
->
ava_š
 = (è
Ën
;

389 
¡rm
->
Ãxt_š
 = 
¡©e
->
š
;

390 
¡©e
->
x
.
pos
 +ğ
Ën
;

391  
Ën
;

392 
	}
}

394 
ZEXPORTVA


395 
	$gz´štf
 (
gzFe
 
fe
, cÚ¡ *
fÜm©
, ...)

397 
va_li¡
 
va
;

398 
»t
;

400 
	`va_¡¬t
 (
va
, 
fÜm©
);

401 
»t
 = 
	`gzv´štf
 (
fe
, 
fÜm©
, 
va
);

402 
	`va_’d
 (
va
);

403  
»t
;

404 
	}
}

409 
ZEXPORTVA


410 
	$gz´štf
 (
gzfe
 
fe
, cÚ¡ *
fÜm©
, 
a1
, 
a2
, 
a3
, 
a4
,

411 
a5
, 
a6
, 
a7
, 
a8
, 
a9
, 
a10
, 
a11
, 
a12
,

412 
a13
, 
a14
, 
a15
, 
a16
, 
a17
, 
a18
, 
a19
,

413 
a20
)

415 
size
, 
Ën
;

416 
gz_¡©•
 
¡©e
;

417 
z_¡»amp
 
¡rm
;

420 ià(
fe
 =ğ
NULL
)

422 
¡©e
 = (
gz_¡©•
è
fe
;

423 
¡rm
 = &(
¡©e
->strm);

430 ià(
¡©e
->
mode
 !ğ
GZ_WRITE
 || s‹->
”r
 !ğ
Z_OK
)

434 ià(
¡©e
->
size
 =ğ0 && 
	`gz_š™
 (state) == -1)

438 ià(
¡©e
->
£ek
)

440 
¡©e
->
£ek
 = 0;

441 ià(
	`gz_z”o
 (
¡©e
, s‹->
sk
) == -1)

446 ià(
¡rm
->
ava_š
 && 
	`gz_comp
 (
¡©e
, 
Z_NO_FLUSH
) == -1)

450 
size
 = (è(
¡©e
->size);

451 
¡©e
->
š
[
size
 - 1] = 0;

452 #ifdeà
NO_¢´štf


453 #ifdeà
HAS_¥rštf_void


454 
	`¥rštf
 ((*è(
¡©e
->
š
), 
fÜm©
, 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
, 
a7
, 
a8
,

455 
a9
, 
a10
, 
a11
, 
a12
, 
a13
, 
a14
, 
a15
, 
a16
, 
a17
, 
a18
, 
a19
, 
a20
);

456 
Ën
 = 0;†’ < 
size
;†en++)

457 ià(
¡©e
->
š
[
Ën
] == 0)

460 
Ën
 = 
	`¥rštf
 ((*è(
¡©e
->
š
), 
fÜm©
, 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
, 
a7
, 
a8
,

461 
a9
, 
a10
, 
a11
, 
a12
, 
a13
, 
a14
, 
a15
, 
a16
, 
a17
, 
a18
, 
a19
, 
a20
);

464 #ifdeà
HAS_¢´štf_void


465 
	`¢´štf
 ((*è(
¡©e
->
š
), 
size
, 
fÜm©
, 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
, 
a7
,

466 
a8
, 
a9
, 
a10
, 
a11
, 
a12
, 
a13
, 
a14
, 
a15
, 
a16
, 
a17
, 
a18
, 
a19
, 
a20
);

467 
Ën
 = 
	`¡¾’
 ((*è(
¡©e
->
š
));

469 
Ën
 = 
	`¢´štf
 ((*è(
¡©e
->
š
), 
size
, 
fÜm©
, 
a1
, 
a2
, 
a3
, 
a4
, 
a5
, 
a6
,

470 
a7
, 
a8
, 
a9
, 
a10
, 
a11
, 
a12
, 
a13
, 
a14
, 
a15
, 
a16
, 
a17
, 
a18
,

471 
a19
, 
a20
);

476 ià(
Ën
 <ğ0 ||†’ >ğ(è
size
 || 
¡©e
->
š
[size - 1] != 0)

480 
¡rm
->
ava_š
 = (è
Ën
;

481 
¡rm
->
Ãxt_š
 = 
¡©e
->
š
;

482 
¡©e
->
x
.
pos
 +ğ
Ën
;

483  
Ën
;

484 
	}
}

489 
ZEXPORT


490 
	$gzæush
 (
gzFe
 
fe
, 
æush
)

492 
gz_¡©•
 
¡©e
;

495 ià(
fe
 =ğ
NULL
)

497 
¡©e
 = (
gz_¡©•
è
fe
;

500 ià(
¡©e
->
mode
 !ğ
GZ_WRITE
 || s‹->
”r
 !ğ
Z_OK
)

501  
Z_STREAM_ERROR
;

504 ià(
æush
 < 0 || flush > 
Z_FINISH
)

505  
Z_STREAM_ERROR
;

508 ià(
¡©e
->
£ek
)

510 
¡©e
->
£ek
 = 0;

511 ià(
	`gz_z”o
 (
¡©e
, s‹->
sk
) == -1)

516 
	`gz_comp
 (
¡©e
, 
æush
);

517  
¡©e
->
”r
;

518 
	}
}

521 
ZEXPORT


522 
	$gz£¬ams
 (
gzFe
 
fe
, 
Ëv–
, 
¡¿‹gy
)

524 
gz_¡©•
 
¡©e
;

525 
z_¡»amp
 
¡rm
;

528 ià(
fe
 =ğ
NULL
)

529  
Z_STREAM_ERROR
;

530 
¡©e
 = (
gz_¡©•
è
fe
;

531 
¡rm
 = &(
¡©e
->strm);

534 ià(
¡©e
->
mode
 !ğ
GZ_WRITE
 || s‹->
”r
 !ğ
Z_OK
)

535  
Z_STREAM_ERROR
;

538 ià(
Ëv–
 =ğ
¡©e
->Ëv– && 
¡¿‹gy
 == state->strategy)

539  
Z_OK
;

542 ià(
¡©e
->
£ek
)

544 
¡©e
->
£ek
 = 0;

545 ià(
	`gz_z”o
 (
¡©e
, s‹->
sk
) == -1)

550 ià(
¡©e
->
size
)

553 ià(
¡rm
->
ava_š
 && 
	`gz_comp
 (
¡©e
, 
Z_PARTIAL_FLUSH
) == -1)

554  
¡©e
->
”r
;

555 
	`deæ©eP¬ams
 (
¡rm
, 
Ëv–
, 
¡¿‹gy
);

557 
¡©e
->
Ëv–
 =†evel;

558 
¡©e
->
¡¿‹gy
 = strategy;

559  
Z_OK
;

560 
	}
}

563 
ZEXPORT


564 
	$gzşo£_w
 (
gzFe
 
fe
)

566 
»t
 = 
Z_OK
;

567 
gz_¡©•
 
¡©e
;

570 ià(
fe
 =ğ
NULL
)

571  
Z_STREAM_ERROR
;

572 
¡©e
 = (
gz_¡©•
è
fe
;

575 ià(
¡©e
->
mode
 !ğ
GZ_WRITE
)

576  
Z_STREAM_ERROR
;

579 ià(
¡©e
->
£ek
)

581 
¡©e
->
£ek
 = 0;

582 ià(
	`gz_z”o
 (
¡©e
, s‹->
sk
) == -1)

583 
»t
 = 
¡©e
->
”r
;

587 ià(
	`gz_comp
 (
¡©e
, 
Z_FINISH
) == -1)

588 
»t
 = 
¡©e
->
”r
;

589 ià(
¡©e
->
size
)

591 ià(!
¡©e
->
dœeù
)

593 (è
	`deæ©eEnd
 (&(
¡©e
->
¡rm
));

594 
	`ä“
 (
¡©e
->
out
);

596 
	`ä“
 (
¡©e
->
š
);

598 
	`gz_”rÜ
 (
¡©e
, 
Z_OK
, 
NULL
);

599 
	`ä“
 (
¡©e
->
·th
);

600 ià(
	`şo£
 (
¡©e
->
fd
) == -1)

601 
»t
 = 
Z_ERRNO
;

602 
	`ä“
 (
¡©e
);

603  
»t
;

604 
	}
}

	@infback.c

13 
	~"zut.h
"

14 
	~"šá»es.h
"

15 
	~"šæ©e.h
"

16 
	~"šfç¡.h
"

19 
loÿl
 
fixedbËs
 
OF
 ((
šæ©e_¡©e
 
FAR
 * 
¡©e
));

28 
ZEXPORT


29 
	$šæ©eBackIn™_
 (
z_¡»amp
 
¡rm
, 
wšdowB™s
, 
FAR
 * 
wšdow
,

30 cÚ¡ *
v”siÚ
, 
¡»am_size
)

32 
šæ©e_¡©e
 
FAR
 *
¡©e
;

34 ià(
v”siÚ
 =ğ
Z_NULL
 || v”siÚ[0] !ğ
ZLIB_VERSION
[0] ||

35 
¡»am_size
 !ğ(è( (
z_¡»am
)))

36  
Z_VERSION_ERROR
;

37 ià(
¡rm
 =ğ
Z_NULL
 || 
wšdow
 =ğZ_NULL || 
wšdowB™s
 < 8 || windowBits > 15)

38  
Z_STREAM_ERROR
;

39 
¡rm
->
msg
 = 
Z_NULL
;

40 ià(
¡rm
->
z®loc
 =ğ(
®loc_func
) 0)

42 #ifdeà
Z_SOLO


43  
Z_STREAM_ERROR
;

45 
¡rm
->
z®loc
 = 
zÿÎoc
;

46 
¡rm
->
İaque
 = (
voidpf
) 0;

49 ià(
¡rm
->
zä“
 =ğ(
ä“_func
) 0)

50 #ifdeà
Z_SOLO


51  
Z_STREAM_ERROR
;

53 
¡rm
->
zä“
 = 
zcä“
;

55 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
	`ZALLOC
 (
¡rm
, 1,

56  (
šæ©e_¡©e
));

57 ià(
¡©e
 =ğ
Z_NULL
)

58  
Z_MEM_ERROR
;

59 
	`T¿ûv
 ((
¡d”r
, "inflate:‡llocated\n"));

60 
¡rm
->
¡©e
 = (
š‹º®_¡©e
 
FAR
 *) state;

61 
¡©e
->
dmax
 = 32768U;

62 
¡©e
->
wb™s
 = 
wšdowB™s
;

63 
¡©e
->
wsize
 = 1U << 
wšdowB™s
;

64 
¡©e
->
wšdow
 = window;

65 
¡©e
->
wÃxt
 = 0;

66 
¡©e
->
whave
 = 0;

67  
Z_OK
;

68 
	}
}

80 
loÿl
 

81 
	$fixedbËs
 (
šæ©e_¡©e
 
FAR
 * 
¡©e
)

83 #ifdeà
BUILDFIXED


84 
vœgš
 = 1;

85 
code
 *
Ënfix
, *
di¡fix
;

86 
code
 
fixed
[544];

89 ià(
vœgš
)

91 
sym
, 
b™s
;

92 
code
 *
Ãxt
;

95 
sym
 = 0;

96 
sym
 < 144)

97 
¡©e
->
Ëns
[
sym
++] = 8;

98 
sym
 < 256)

99 
¡©e
->
Ëns
[
sym
++] = 9;

100 
sym
 < 280)

101 
¡©e
->
Ëns
[
sym
++] = 7;

102 
sym
 < 288)

103 
¡©e
->
Ëns
[
sym
++] = 8;

104 
Ãxt
 = 
fixed
;

105 
Ënfix
 = 
Ãxt
;

106 
b™s
 = 9;

107 
	`šæ©e_bË
 (
LENS
, 
¡©e
->
Ëns
, 288, &(
Ãxt
), &(
b™s
), s‹->
wÜk
);

110 
sym
 = 0;

111 
sym
 < 32)

112 
¡©e
->
Ëns
[
sym
++] = 5;

113 
di¡fix
 = 
Ãxt
;

114 
b™s
 = 5;

115 
	`šæ©e_bË
 (
DISTS
, 
¡©e
->
Ëns
, 32, &(
Ãxt
), &(
b™s
), s‹->
wÜk
);

118 
vœgš
 = 0;

121 
	~"šffixed.h
"

123 
¡©e
->
Ëncode
 = 
Ënfix
;

124 
¡©e
->
Ënb™s
 = 9;

125 
¡©e
->
di¡code
 = 
di¡fix
;

126 
¡©e
->
di¡b™s
 = 5;

127 
	}
}

132 
	#LOAD
() \

134 
put
 = 
¡rm
->
Ãxt_out
; \

135 
Ëá
 = 
¡rm
->
ava_out
; \

136 
Ãxt
 = 
¡rm
->
Ãxt_š
; \

137 
have
 = 
¡rm
->
ava_š
; \

138 
hŞd
 = 
¡©e
->hold; \

139 
b™s
 = 
¡©e
->bits; \

140 } 0)

	)

143 
	#RESTORE
() \

145 
¡rm
->
Ãxt_out
 = 
put
; \

146 
¡rm
->
ava_out
 = 
Ëá
; \

147 
¡rm
->
Ãxt_š
 = 
Ãxt
; \

148 
¡rm
->
ava_š
 = 
have
; \

149 
¡©e
->
hŞd
 = hold; \

150 
¡©e
->
b™s
 = bits; \

151 } 0)

	)

154 
	#INITBITS
() \

156 
hŞd
 = 0; \

157 
b™s
 = 0; \

158 } 0)

	)

162 
	#PULL
() \

164 ià(
have
 == 0) { \

165 
have
 = 
	`š
(
š_desc
, &
Ãxt
); \

166 ià(
have
 == 0) { \

167 
Ãxt
 = 
Z_NULL
; \

168 
»t
 = 
Z_BUF_ERROR
; \

169 
šf_Ëave
; \

172 } 0)

	)

176 
	#PULLBYTE
() \

178 
	`PULL
(); \

179 
have
--; \

180 
hŞd
 +ğ()(*
Ãxt
++è<< 
b™s
; \

181 
b™s
 += 8; \

182 } 0)

	)

187 
	#NEEDBITS
(
n
) \

189 
b™s
 < ()(
n
)) \

190 
	`PULLBYTE
(); \

191 } 0)

	)

194 
	#BITS
(
n
) \

195 (()
hŞd
 & ((1U << (
n
)è- 1))

	)

198 
	#DROPBITS
(
n
) \

200 
hŞd
 >>ğ(
n
); \

201 
b™s
 -ğ()(
n
); \

202 } 0)

	)

205 
	#BYTEBITS
() \

207 
hŞd
 >>ğ
b™s
 & 7; \

208 
b™s
 -= bits & 7; \

209 } 0)

	)

214 
	#ROOM
() \

216 ià(
Ëá
 == 0) { \

217 
put
 = 
¡©e
->
wšdow
; \

218 
Ëá
 = 
¡©e
->
wsize
; \

219 
¡©e
->
whave
 = 
Ëá
; \

220 ià(
	`out
(
out_desc
, 
put
, 
Ëá
)) { \

221 
»t
 = 
Z_BUF_ERROR
; \

222 
šf_Ëave
; \

225 } 0)

	)

254 
ZEXPORT


255 
	$šæ©eBack
 (
z_¡»amp
 
¡rm
, 
š_func
 
š
, 
FAR
 * 
š_desc
, 
out_func
 
out
,

256 
FAR
 * 
out_desc
)

258 
šæ©e_¡©e
 
FAR
 *
¡©e
;

259 
z_cÚ¡
 
FAR
 *
Ãxt
;

260 
FAR
 *
put
;

261 
have
, 
Ëá
;

262 
hŞd
;

263 
b™s
;

264 
cİy
;

265 
FAR
 *
äom
;

266 
code
 
h”e
;

267 
code
 
Ï¡
;

268 
Ën
;

269 
»t
;

270 cÚ¡ 
Üd”
[19] =

274 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

275  
Z_STREAM_ERROR
;

276 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

279 
¡rm
->
msg
 = 
Z_NULL
;

280 
¡©e
->
mode
 = 
TYPE
;

281 
¡©e
->
Ï¡
 = 0;

282 
¡©e
->
whave
 = 0;

283 
Ãxt
 = 
¡rm
->
Ãxt_š
;

284 
have
 = 
Ãxt
 !ğ
Z_NULL
 ? 
¡rm
->
ava_š
 : 0;

285 
hŞd
 = 0;

286 
b™s
 = 0;

287 
put
 = 
¡©e
->
wšdow
;

288 
Ëá
 = 
¡©e
->
wsize
;

292 
¡©e
->
mode
)

294 
TYPE
:

296 ià(
¡©e
->
Ï¡
)

298 
	`BYTEBITS
 ();

299 
¡©e
->
mode
 = 
DONE
;

302 
	`NEEDBITS
 (3);

303 
¡©e
->
Ï¡
 = 
	`BITS
 (1);

304 
	`DROPBITS
 (1);

305 
	`BITS
 (2))

308 
	`T¿ûv
 ((
¡d”r
, "inflate: stored block%s\n",

309 
¡©e
->
Ï¡
 ? " (last)" : ""));

310 
¡©e
->
mode
 = 
STORED
;

313 
	`fixedbËs
 (
¡©e
);

314 
	`T¿ûv
 ((
¡d”r
, "inflate: fixed codes block%s\n",

315 
¡©e
->
Ï¡
 ? " (last)" : ""));

316 
¡©e
->
mode
 = 
LEN
;

319 
	`T¿ûv
 ((
¡d”r
, "inflate: dynamic codes block%s\n",

320 
¡©e
->
Ï¡
 ? " (last)" : ""));

321 
¡©e
->
mode
 = 
TABLE
;

324 
¡rm
->
msg
 = (*) "invalid blockype";

325 
¡©e
->
mode
 = 
BAD
;

327 
	`DROPBITS
 (2);

330 
STORED
:

332 
	`BYTEBITS
 ();

333 
	`NEEDBITS
 (32);

334 ià((
hŞd
 & 0xffff) != ((hold >> 16) ^ 0xffff))

336 
¡rm
->
msg
 = (*) "invalid stored block†engths";

337 
¡©e
->
mode
 = 
BAD
;

340 
¡©e
->
Ëngth
 = (è
hŞd
 & 0xffff;

341 
	`T¿ûv
 ((
¡d”r
, "šæ©e: stÜed†’gth %u\n", 
¡©e
->
Ëngth
));

342 
	`INITBITS
 ();

345 
¡©e
->
Ëngth
 != 0)

347 
cİy
 = 
¡©e
->
Ëngth
;

348 
	`PULL
 ();

349 
	`ROOM
 ();

350 ià(
cİy
 > 
have
)

351 
cİy
 = 
have
;

352 ià(
cİy
 > 
Ëá
)

353 
cİy
 = 
Ëá
;

354 
	`zmemıy
 (
put
, 
Ãxt
, 
cİy
);

355 
have
 -ğ
cİy
;

356 
Ãxt
 +ğ
cİy
;

357 
Ëá
 -ğ
cİy
;

358 
put
 +ğ
cİy
;

359 
¡©e
->
Ëngth
 -ğ
cİy
;

361 
	`T¿ûv
 ((
¡d”r
, "inflate: storedƒnd\n"));

362 
¡©e
->
mode
 = 
TYPE
;

365 
TABLE
:

367 
	`NEEDBITS
 (14);

368 
¡©e
->
Æ’
 = 
	`BITS
 (5) + 257;

369 
	`DROPBITS
 (5);

370 
¡©e
->
ndi¡
 = 
	`BITS
 (5) + 1;

371 
	`DROPBITS
 (5);

372 
¡©e
->
ncode
 = 
	`BITS
 (4) + 4;

373 
	`DROPBITS
 (4);

374 #iâdeà
PKZIP_BUG_WORKAROUND


375 ià(
¡©e
->
Æ’
 > 286 || s‹->
ndi¡
 > 30)

377 
¡rm
->
msg
 = (*) "too many†ength or distance symbols";

378 
¡©e
->
mode
 = 
BAD
;

382 
	`T¿ûv
 ((
¡d”r
, "inflate:able sizes ok\n"));

385 
¡©e
->
have
 = 0;

386 
¡©e
->
have
 < s‹->
ncode
)

388 
	`NEEDBITS
 (3);

389 
¡©e
->
Ëns
[
Üd”
[¡©e->
have
++]] = (è
	`BITS
 (3);

390 
	`DROPBITS
 (3);

392 
¡©e
->
have
 < 19)

393 
¡©e
->
Ëns
[
Üd”
[¡©e->
have
++]] = 0;

394 
¡©e
->
Ãxt
 = s‹->
codes
;

395 
¡©e
->
Ëncode
 = (
code
 cÚ¡ 
FAR
 *è(¡©e->
Ãxt
);

396 
¡©e
->
Ënb™s
 = 7;

397 
»t
 = 
	`šæ©e_bË
 (
CODES
, 
¡©e
->
Ëns
, 19, &(¡©e->
Ãxt
),

398 &(
¡©e
->
Ënb™s
), s‹->
wÜk
);

399 ià(
»t
)

401 
¡rm
->
msg
 = (*) "invalid code†engths set";

402 
¡©e
->
mode
 = 
BAD
;

405 
	`T¿ûv
 ((
¡d”r
, "inflate: code†engths ok\n"));

408 
¡©e
->
have
 = 0;

409 
¡©e
->
have
 < s‹->
Æ’
 + s‹->
ndi¡
)

413 
h”e
 = 
¡©e
->
Ëncode
[
	`BITS
 (¡©e->
Ënb™s
)];

414 ià((è(
h”e
.
b™s
) <= bits)

416 
	`PULLBYTE
 ();

418 ià(
h”e
.
v®
 < 16)

420 
	`DROPBITS
 (
h”e
.
b™s
);

421 
¡©e
->
Ëns
[¡©e->
have
++] = 
h”e
.
v®
;

425 ià(
h”e
.
v®
 == 16)

427 
	`NEEDBITS
 (
h”e
.
b™s
 + 2);

428 
	`DROPBITS
 (
h”e
.
b™s
);

429 ià(
¡©e
->
have
 == 0)

431 
¡rm
->
msg
 = (*) "invalid bit†ength„epeat";

432 
¡©e
->
mode
 = 
BAD
;

435 
Ën
 = (è(
¡©e
->
Ëns
[¡©e->
have
 - 1]);

436 
cİy
 = 3 + 
	`BITS
 (2);

437 
	`DROPBITS
 (2);

439 ià(
h”e
.
v®
 == 17)

441 
	`NEEDBITS
 (
h”e
.
b™s
 + 3);

442 
	`DROPBITS
 (
h”e
.
b™s
);

443 
Ën
 = 0;

444 
cİy
 = 3 + 
	`BITS
 (3);

445 
	`DROPBITS
 (3);

449 
	`NEEDBITS
 (
h”e
.
b™s
 + 7);

450 
	`DROPBITS
 (
h”e
.
b™s
);

451 
Ën
 = 0;

452 
cİy
 = 11 + 
	`BITS
 (7);

453 
	`DROPBITS
 (7);

455 ià(
¡©e
->
have
 + 
cİy
 > s‹->
Æ’
 + s‹->
ndi¡
)

457 
¡rm
->
msg
 = (*) "invalid bit†ength„epeat";

458 
¡©e
->
mode
 = 
BAD
;

461 
cİy
--)

462 
¡©e
->
Ëns
[¡©e->
have
++] = (è
Ën
;

467 ià(
¡©e
->
mode
 =ğ
BAD
)

471 ià(
¡©e
->
Ëns
[256] == 0)

473 
¡rm
->
msg
 = (*) "invalid code -- missingƒnd-of-block";

474 
¡©e
->
mode
 = 
BAD
;

481 
¡©e
->
Ãxt
 = s‹->
codes
;

482 
¡©e
->
Ëncode
 = (
code
 cÚ¡ 
FAR
 *è(¡©e->
Ãxt
);

483 
¡©e
->
Ënb™s
 = 9;

484 
»t
 = 
	`šæ©e_bË
 (
LENS
, 
¡©e
->
Ëns
, s‹->
Æ’
, &(¡©e->
Ãxt
),

485 &(
¡©e
->
Ënb™s
), s‹->
wÜk
);

486 ià(
»t
)

488 
¡rm
->
msg
 = (*) "invalid†iteral/lengths set";

489 
¡©e
->
mode
 = 
BAD
;

492 
¡©e
->
di¡code
 = (
code
 cÚ¡ 
FAR
 *è(¡©e->
Ãxt
);

493 
¡©e
->
di¡b™s
 = 6;

494 
»t
 = 
	`šæ©e_bË
 (
DISTS
, 
¡©e
->
Ëns
 + s‹->
Æ’
, s‹->
ndi¡
,

495 &(
¡©e
->
Ãxt
), &(¡©e->
di¡b™s
), s‹->
wÜk
);

496 ià(
»t
)

498 
¡rm
->
msg
 = (*) "invalid distances set";

499 
¡©e
->
mode
 = 
BAD
;

502 
	`T¿ûv
 ((
¡d”r
, "inflate: codes ok\n"));

503 
¡©e
->
mode
 = 
LEN
;

505 
LEN
:

507 ià(
have
 >ğ6 && 
Ëá
 >= 258)

509 
	`RESTORE
 ();

510 ià(
¡©e
->
whave
 < s‹->
wsize
)

511 
¡©e
->
whave
 = s‹->
wsize
 - 
Ëá
;

512 
	`šæ©e_ç¡
 (
¡rm
, 
¡©e
->
wsize
);

513 
	`LOAD
 ();

520 
h”e
 = 
¡©e
->
Ëncode
[
	`BITS
 (¡©e->
Ënb™s
)];

521 ià((è(
h”e
.
b™s
) <= bits)

523 
	`PULLBYTE
 ();

525 ià(
h”e
.
İ
 && (here.op & 0xf0) == 0)

527 
Ï¡
 = 
h”e
;

530 
h”e
 = 
¡©e
->
Ëncode
[
Ï¡
.
v®
 +

531 (
	`BITS
 (
Ï¡
.
b™s
 +†a¡.
İ
) >>†ast.

532 
b™s
)];

533 ià((è(
Ï¡
.
b™s
 + 
h”e
.bits) <= bits)

535 
	`PULLBYTE
 ();

537 
	`DROPBITS
 (
Ï¡
.
b™s
);

539 
	`DROPBITS
 (
h”e
.
b™s
);

540 
¡©e
->
Ëngth
 = (è
h”e
.
v®
;

543 ià(
h”e
.
İ
 == 0)

545 
	`T¿ûvv
 ((
¡d”r
, 
h”e
.
v®
 >= 0x20 && here.val < 0x7f ?

547 "šæ©e:†™”® 0x%02x\n", 
h”e
.
v®
));

548 
	`ROOM
 ();

549 *
put
++ = (è(
¡©e
->
Ëngth
);

550 
Ëá
--;

551 
¡©e
->
mode
 = 
LEN
;

556 ià(
h”e
.
İ
 & 32)

558 
	`T¿ûvv
 ((
¡d”r
, "inflate:ƒnd of block\n"));

559 
¡©e
->
mode
 = 
TYPE
;

564 ià(
h”e
.
İ
 & 64)

566 
¡rm
->
msg
 = (*) "invalid†iteral/length code";

567 
¡©e
->
mode
 = 
BAD
;

572 
¡©e
->
exŒa
 = (è(
h”e
.
İ
) & 15;

573 ià(
¡©e
->
exŒa
 != 0)

575 
	`NEEDBITS
 (
¡©e
->
exŒa
);

576 
¡©e
->
Ëngth
 +ğ
	`BITS
 (¡©e->
exŒa
);

577 
	`DROPBITS
 (
¡©e
->
exŒa
);

579 
	`T¿ûvv
 ((
¡d”r
, "šæ©e:†’gth %u\n", 
¡©e
->
Ëngth
));

584 
h”e
 = 
¡©e
->
di¡code
[
	`BITS
 (¡©e->
di¡b™s
)];

585 ià((è(
h”e
.
b™s
) <= bits)

587 
	`PULLBYTE
 ();

589 ià((
h”e
.
İ
 & 0xf0) == 0)

591 
Ï¡
 = 
h”e
;

594 
h”e
 = 
¡©e
->
di¡code
[
Ï¡
.
v®
 +

595 (
	`BITS
 (
Ï¡
.
b™s
 +†a¡.
İ
) >>†ast.

596 
b™s
)];

597 ià((è(
Ï¡
.
b™s
 + 
h”e
.bits) <= bits)

599 
	`PULLBYTE
 ();

601 
	`DROPBITS
 (
Ï¡
.
b™s
);

603 
	`DROPBITS
 (
h”e
.
b™s
);

604 ià(
h”e
.
İ
 & 64)

606 
¡rm
->
msg
 = (*) "invalid distance code";

607 
¡©e
->
mode
 = 
BAD
;

610 
¡©e
->
off£t
 = (è
h”e
.
v®
;

613 
¡©e
->
exŒa
 = (è(
h”e
.
İ
) & 15;

614 ià(
¡©e
->
exŒa
 != 0)

616 
	`NEEDBITS
 (
¡©e
->
exŒa
);

617 
¡©e
->
off£t
 +ğ
	`BITS
 (¡©e->
exŒa
);

618 
	`DROPBITS
 (
¡©e
->
exŒa
);

620 ià(
¡©e
->
off£t
 > s‹->
wsize
 - (¡©e->
whave
 < state->wsize ?

621 
Ëá
 : 0))

623 
¡rm
->
msg
 = (*) "invalid distanceoo far back";

624 
¡©e
->
mode
 = 
BAD
;

627 
	`T¿ûvv
 ((
¡d”r
, "šæ©e: di¡ªû %u\n", 
¡©e
->
off£t
));

632 
	`ROOM
 ();

633 
cİy
 = 
¡©e
->
wsize
 - s‹->
off£t
;

634 ià(
cİy
 < 
Ëá
)

636 
äom
 = 
put
 + 
cİy
;

637 
cİy
 = 
Ëá
 - copy;

641 
äom
 = 
put
 - 
¡©e
->
off£t
;

642 
cİy
 = 
Ëá
;

644 ià(
cİy
 > 
¡©e
->
Ëngth
)

645 
cİy
 = 
¡©e
->
Ëngth
;

646 
¡©e
->
Ëngth
 -ğ
cİy
;

647 
Ëá
 -ğ
cİy
;

650 *
put
++ = *
äom
++;

652 --
cİy
);

654 
¡©e
->
Ëngth
 != 0);

657 
DONE
:

659 
»t
 = 
Z_STREAM_END
;

660 ià(
Ëá
 < 
¡©e
->
wsize
)

662 ià(
	`out
 (
out_desc
, 
¡©e
->
wšdow
, s‹->
wsize
 - 
Ëá
))

663 
»t
 = 
Z_BUF_ERROR
;

665 
šf_Ëave
;

667 
BAD
:

668 
»t
 = 
Z_DATA_ERROR
;

669 
šf_Ëave
;

672 
»t
 = 
Z_STREAM_ERROR
;

673 
šf_Ëave
;

677 
šf_Ëave
:

678 
¡rm
->
Ãxt_š
 = 
Ãxt
;

679 
¡rm
->
ava_š
 = 
have
;

680  
»t
;

681 
	}
}

683 
ZEXPORT


684 
	$šæ©eBackEnd
 (
z_¡»amp
 
¡rm
)

686 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 =ğZ_NULL || sŒm->
zä“
 =ğ(
ä“_func
) 0)

687  
Z_STREAM_ERROR
;

688 
	`ZFREE
 (
¡rm
, sŒm->
¡©e
);

689 
¡rm
->
¡©e
 = 
Z_NULL
;

690 
	`T¿ûv
 ((
¡d”r
, "inflate:ƒnd\n"));

691  
Z_OK
;

692 
	}
}

	@inffast.c

6 
	~"zut.h
"

7 
	~"šá»es.h
"

8 
	~"šæ©e.h
"

9 
	~"šfç¡.h
"

11 #iâdeà
ASMINF


24 #ifdeà
POSTINC


25 
	#OFF
 0

	)

26 
	#PUP
(
a
è*×)++

	)

28 
	#OFF
 1

	)

29 
	#PUP
(
a
è*++×)

	)

67 
ZLIB_INTERNAL


68 
	$šæ©e_ç¡
 (
z_¡»amp
 
¡rm
, 
¡¬t
)

71 
šæ©e_¡©e
 
FAR
 *
¡©e
;

72 
z_cÚ¡
 
FAR
 *
š
;

73 
z_cÚ¡
 
FAR
 *
Ï¡
;

74 
FAR
 *
out
;

75 
FAR
 *
beg
;

76 
FAR
 *
’d
;

77 #ifdeà
INFLATE_STRICT


78 
dmax
;

80 
wsize
;

81 
whave
;

82 
wÃxt
;

83 
FAR
 *
wšdow
;

84 
hŞd
;

85 
b™s
;

86 
code
 cÚ¡ 
FAR
 *
lcode
;

87 
code
 cÚ¡ 
FAR
 *
dcode
;

88 
lmask
;

89 
dmask
;

90 
code
 
h”e
;

91 
İ
;

93 
Ën
;

94 
di¡
;

95 
FAR
 *
äom
;

98 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

99 
š
 = 
¡rm
->
Ãxt_š
 - 
OFF
;

100 
Ï¡
 = 
š
 + (
¡rm
->
ava_š
 - 5);

101 
out
 = 
¡rm
->
Ãxt_out
 - 
OFF
;

102 
beg
 = 
out
 - (
¡¬t
 - 
¡rm
->
ava_out
);

103 
’d
 = 
out
 + (
¡rm
->
ava_out
 - 257);

104 #ifdeà
INFLATE_STRICT


105 
dmax
 = 
¡©e
->dmax;

107 
wsize
 = 
¡©e
->wsize;

108 
whave
 = 
¡©e
->whave;

109 
wÃxt
 = 
¡©e
->wnext;

110 
wšdow
 = 
¡©e
->window;

111 
hŞd
 = 
¡©e
->hold;

112 
b™s
 = 
¡©e
->bits;

113 
lcode
 = 
¡©e
->
Ëncode
;

114 
dcode
 = 
¡©e
->
di¡code
;

115 
lmask
 = (1U << 
¡©e
->
Ënb™s
) - 1;

116 
dmask
 = (1U << 
¡©e
->
di¡b™s
) - 1;

122 ià(
b™s
 < 15)

124 
hŞd
 +ğ(è(
	`PUP
 (
š
)è<< 
b™s
;

125 
b™s
 += 8;

126 
hŞd
 +ğ(è(
	`PUP
 (
š
)è<< 
b™s
;

127 
b™s
 += 8;

129 
h”e
 = 
lcode
[
hŞd
 & 
lmask
];

130 
dŞ’
:

131 
İ
 = (è(
h”e
.
b™s
);

132 
hŞd
 >>ğ
İ
;

133 
b™s
 -ğ
İ
;

134 
İ
 = (è(
h”e
.op);

135 ià(
İ
 == 0)

137 
	`T¿ûvv
 ((
¡d”r
, 
h”e
.
v®
 >= 0x20 && here.val < 0x7f ?

139 "šæ©e:†™”® 0x%02x\n", 
h”e
.
v®
));

140 
	`PUP
 (
out
èğ(è(
h”e
.
v®
);

142 ià(
İ
 & 16)

144 
Ën
 = (è(
h”e
.
v®
);

145 
İ
 &= 15;

146 ià(
İ
)

148 ià(
b™s
 < 
İ
)

150 
hŞd
 +ğ(è(
	`PUP
 (
š
)è<< 
b™s
;

151 
b™s
 += 8;

153 
Ën
 +ğ(è
hŞd
 & ((1U << 
İ
) - 1);

154 
hŞd
 >>ğ
İ
;

155 
b™s
 -ğ
İ
;

157 
	`T¿ûvv
 ((
¡d”r
, "šæ©e:†’gth %u\n", 
Ën
));

158 ià(
b™s
 < 15)

160 
hŞd
 +ğ(è(
	`PUP
 (
š
)è<< 
b™s
;

161 
b™s
 += 8;

162 
hŞd
 +ğ(è(
	`PUP
 (
š
)è<< 
b™s
;

163 
b™s
 += 8;

165 
h”e
 = 
dcode
[
hŞd
 & 
dmask
];

166 
dodi¡
:

167 
İ
 = (è(
h”e
.
b™s
);

168 
hŞd
 >>ğ
İ
;

169 
b™s
 -ğ
İ
;

170 
İ
 = (è(
h”e
.op);

171 ià(
İ
 & 16)

173 
di¡
 = (è(
h”e
.
v®
);

174 
İ
 &= 15;

175 ià(
b™s
 < 
İ
)

177 
hŞd
 +ğ(è(
	`PUP
 (
š
)è<< 
b™s
;

178 
b™s
 += 8;

179 ià(
b™s
 < 
İ
)

181 
hŞd
 +ğ(è(
	`PUP
 (
š
)è<< 
b™s
;

182 
b™s
 += 8;

185 
di¡
 +ğ(è
hŞd
 & ((1U << 
İ
) - 1);

186 #ifdeà
INFLATE_STRICT


187 ià(
di¡
 > 
dmax
)

189 
¡rm
->
msg
 = (*) "invalid distanceoo far back";

190 
¡©e
->
mode
 = 
BAD
;

194 
hŞd
 >>ğ
İ
;

195 
b™s
 -ğ
İ
;

196 
	`T¿ûvv
 ((
¡d”r
, "šæ©e: di¡ªû %u\n", 
di¡
));

197 
İ
 = (è(
out
 - 
beg
);

198 ià(
di¡
 > 
İ
)

200 
İ
 = 
di¡
 - op;

201 ià(
İ
 > 
whave
)

203 ià(
¡©e
->
§Ã
)

205 
¡rm
->
msg
 =

207 
¡©e
->
mode
 = 
BAD
;

210 #ifdeà
INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR


211 ià(
Ën
 <ğ
İ
 - 
whave
)

215 
	`PUP
 (
out
) = 0;

217 --
Ën
);

220 
Ën
 -ğ
İ
 - 
whave
;

223 
	`PUP
 (
out
) = 0;

225 --
İ
 > 
whave
);

226 ià(
İ
 == 0)

228 
äom
 = 
out
 - 
di¡
;

231 
	`PUP
 (
out
èğPUP (
äom
);

233 --
Ën
);

238 
äom
 = 
wšdow
 - 
OFF
;

239 ià(
wÃxt
 == 0)

241 
äom
 +ğ
wsize
 - 
İ
;

242 ià(
İ
 < 
Ën
)

244 
Ën
 -ğ
İ
;

247 
	`PUP
 (
out
èğPUP (
äom
);

249 --
İ
);

250 
äom
 = 
out
 - 
di¡
;

253 ià(
wÃxt
 < 
İ
)

255 
äom
 +ğ
wsize
 + 
wÃxt
 - 
İ
;

256 
İ
 -ğ
wÃxt
;

257 ià(
İ
 < 
Ën
)

259 
Ën
 -ğ
İ
;

262 
	`PUP
 (
out
èğPUP (
äom
);

264 --
İ
);

265 
äom
 = 
wšdow
 - 
OFF
;

266 ià(
wÃxt
 < 
Ën
)

268 
İ
 = 
wÃxt
;

269 
Ën
 -ğ
İ
;

272 
	`PUP
 (
out
èğPUP (
äom
);

274 --
İ
);

275 
äom
 = 
out
 - 
di¡
;

281 
äom
 +ğ
wÃxt
 - 
İ
;

282 ià(
İ
 < 
Ën
)

284 
Ën
 -ğ
İ
;

287 
	`PUP
 (
out
èğPUP (
äom
);

289 --
İ
);

290 
äom
 = 
out
 - 
di¡
;

293 
Ën
 > 2)

295 
	`PUP
 (
out
èğPUP (
äom
);

296 
	`PUP
 (
out
èğPUP (
äom
);

297 
	`PUP
 (
out
èğPUP (
äom
);

298 
Ën
 -= 3;

300 ià(
Ën
)

302 
	`PUP
 (
out
èğPUP (
äom
);

303 ià(
Ën
 > 1)

304 
	`PUP
 (
out
èğPUP (
äom
);

309 
äom
 = 
out
 - 
di¡
;

312 
	`PUP
 (
out
èğPUP (
äom
);

313 
	`PUP
 (
out
èğPUP (
äom
);

314 
	`PUP
 (
out
èğPUP (
äom
);

315 
Ën
 -= 3;

317 
Ën
 > 2);

318 ià(
Ën
)

320 
	`PUP
 (
out
èğPUP (
äom
);

321 ià(
Ën
 > 1)

322 
	`PUP
 (
out
èğPUP (
äom
);

326 ià((
İ
 & 64) == 0)

328 
h”e
 = 
dcode
[h”e.
v®
 + (
hŞd
 & ((1U << 
İ
) - 1))];

329 
dodi¡
;

333 
¡rm
->
msg
 = (*) "invalid distance code";

334 
¡©e
->
mode
 = 
BAD
;

338 ià((
İ
 & 64) == 0)

340 
h”e
 = 
lcode
[h”e.
v®
 + (
hŞd
 & ((1U << 
İ
) - 1))];

341 
dŞ’
;

343 ià(
İ
 & 32)

345 
	`T¿ûvv
 ((
¡d”r
, "inflate:ƒnd of block\n"));

346 
¡©e
->
mode
 = 
TYPE
;

351 
¡rm
->
msg
 = (*) "invalid†iteral/length code";

352 
¡©e
->
mode
 = 
BAD
;

356 
š
 < 
Ï¡
 && 
out
 < 
’d
);

359 
Ën
 = 
b™s
 >> 3;

360 
š
 -ğ
Ën
;

361 
b™s
 -ğ
Ën
 << 3;

362 
hŞd
 &ğ(1U << 
b™s
) - 1;

365 
¡rm
->
Ãxt_š
 = 
š
 + 
OFF
;

366 
¡rm
->
Ãxt_out
 = 
out
 + 
OFF
;

367 
¡rm
->
ava_š
 = (è(
š
 < 
Ï¡
 ? 5 + (last - in) : 5 - (in -†ast));

368 
¡rm
->
ava_out
 = (è(
out
 < 
’d
 ?

369 257 + (
’d
 - 
out
) : 257 - (out -ƒnd));

370 
¡©e
->
hŞd
 = hold;

371 
¡©e
->
b™s
 = bits;

373 
	}
}

	@inffast.h

11 
ZLIB_INTERNAL
 
šæ©e_ç¡
 
OF
((
z_¡»amp
 
¡rm
, 
¡¬t
));

	@inffixed.h

10 cÚ¡ 
code
 
	gËnfix
[512] = {

87 cÚ¡ 
code
 
	gdi¡fix
[32] = {

	@inflate.c

83 
	~"zut.h
"

84 
	~"šá»es.h
"

85 
	~"šæ©e.h
"

86 
	~"šfç¡.h
"

88 #ifdeà
MAKEFIXED


89 #iâdeà
BUILDFIXED


90 
	#BUILDFIXED


	)

95 
loÿl
 
fixedbËs
 
OF
 ((
šæ©e_¡©e
 
FAR
 * 
¡©e
));

96 
loÿl
 
upd©ewšdow
 
OF
 ((
z_¡»amp
 
¡rm
, cÚ¡ 
FAR
 * 
’d
,

97 
cİy
));

98 #ifdeà
BUILDFIXED


99 
makefixed
 
OF
 (());

101 
loÿl
 
sync£¬ch


102 
OF
 ((
FAR
 * 
have
, cÚ¡ FAR * 
buf
, 
Ën
));

104 
ZEXPORT


105 
	$šæ©eRe£tK“p
 (
z_¡»amp
 
¡rm
)

107 
šæ©e_¡©e
 
FAR
 *
¡©e
;

109 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

110  
Z_STREAM_ERROR
;

111 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

112 
¡rm
->
tÙ®_š
 = sŒm->
tÙ®_out
 = 
¡©e
->
tÙ®
 = 0;

113 
¡rm
->
msg
 = 
Z_NULL
;

114 ià(
¡©e
->
w¿p
)

115 
¡rm
->
adËr
 = 
¡©e
->
w¿p
 & 1;

116 
¡©e
->
mode
 = 
HEAD
;

117 
¡©e
->
Ï¡
 = 0;

118 
¡©e
->
havediù
 = 0;

119 
¡©e
->
dmax
 = 32768U;

120 
¡©e
->
h—d
 = 
Z_NULL
;

121 
¡©e
->
hŞd
 = 0;

122 
¡©e
->
b™s
 = 0;

123 
¡©e
->
Ëncode
 = s‹->
di¡code
 = s‹->
Ãxt
 = s‹->
codes
;

124 
¡©e
->
§Ã
 = 1;

125 
¡©e
->
back
 = -1;

126 
	`T¿ûv
 ((
¡d”r
, "inflate:„eset\n"));

127  
Z_OK
;

128 
	}
}

130 
ZEXPORT


131 
	$šæ©eRe£t
 (
z_¡»amp
 
¡rm
)

133 
šæ©e_¡©e
 
FAR
 *
¡©e
;

135 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

136  
Z_STREAM_ERROR
;

137 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

138 
¡©e
->
wsize
 = 0;

139 
¡©e
->
whave
 = 0;

140 
¡©e
->
wÃxt
 = 0;

141  
	`šæ©eRe£tK“p
 (
¡rm
);

142 
	}
}

144 
ZEXPORT


145 
	$šæ©eRe£t2
 (
z_¡»amp
 
¡rm
, 
wšdowB™s
)

147 
w¿p
;

148 
šæ©e_¡©e
 
FAR
 *
¡©e
;

151 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

152  
Z_STREAM_ERROR
;

153 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

156 ià(
wšdowB™s
 < 0)

158 
w¿p
 = 0;

159 
wšdowB™s
 = -windowBits;

163 
w¿p
 = (
wšdowB™s
 >> 4) + 1;

164 #ifdeà
GUNZIP


165 ià(
wšdowB™s
 < 48)

166 
wšdowB™s
 &= 15;

171 ià(
wšdowB™s
 && (windowBits < 8 || windowBits > 15))

172  
Z_STREAM_ERROR
;

173 ià(
¡©e
->
wšdow
 !ğ
Z_NULL
 && s‹->
wb™s
 !ğ(è
wšdowB™s
)

175 
	`ZFREE
 (
¡rm
, 
¡©e
->
wšdow
);

176 
¡©e
->
wšdow
 = 
Z_NULL
;

180 
¡©e
->
w¿p
 = wrap;

181 
¡©e
->
wb™s
 = (è
wšdowB™s
;

182  
	`šæ©eRe£t
 (
¡rm
);

183 
	}
}

185 
ZEXPORT


186 
	$šæ©eIn™2_
 (
z_¡»amp
 
¡rm
, 
wšdowB™s
, cÚ¡ *
v”siÚ
,

187 
¡»am_size
)

189 
»t
;

190 
šæ©e_¡©e
 
FAR
 *
¡©e
;

192 ià(
v”siÚ
 =ğ
Z_NULL
 || v”siÚ[0] !ğ
ZLIB_VERSION
[0] ||

193 
¡»am_size
 !ğ(è( (
z_¡»am
)))

194  
Z_VERSION_ERROR
;

195 ià(
¡rm
 =ğ
Z_NULL
)

196  
Z_STREAM_ERROR
;

197 
¡rm
->
msg
 = 
Z_NULL
;

198 ià(
¡rm
->
z®loc
 =ğ(
®loc_func
) 0)

200 #ifdeà
Z_SOLO


201  
Z_STREAM_ERROR
;

203 
¡rm
->
z®loc
 = 
zÿÎoc
;

204 
¡rm
->
İaque
 = (
voidpf
) 0;

207 ià(
¡rm
->
zä“
 =ğ(
ä“_func
) 0)

208 #ifdeà
Z_SOLO


209  
Z_STREAM_ERROR
;

211 
¡rm
->
zä“
 = 
zcä“
;

213 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *)

214 
	`ZALLOC
 (
¡rm
, 1,  (
šæ©e_¡©e
));

215 ià(
¡©e
 =ğ
Z_NULL
)

216  
Z_MEM_ERROR
;

217 
	`T¿ûv
 ((
¡d”r
, "inflate:‡llocated\n"));

218 
¡rm
->
¡©e
 = (
š‹º®_¡©e
 
FAR
 *) state;

219 
¡©e
->
wšdow
 = 
Z_NULL
;

220 
»t
 = 
	`šæ©eRe£t2
 (
¡rm
, 
wšdowB™s
);

221 ià(
»t
 !ğ
Z_OK
)

223 
	`ZFREE
 (
¡rm
, 
¡©e
);

224 
¡rm
->
¡©e
 = 
Z_NULL
;

226  
»t
;

227 
	}
}

229 
ZEXPORT


230 
	$šæ©eIn™_
 (
z_¡»amp
 
¡rm
, cÚ¡ *
v”siÚ
, 
¡»am_size
)

232  
	`šæ©eIn™2_
 (
¡rm
, 
DEF_WBITS
, 
v”siÚ
, 
¡»am_size
);

233 
	}
}

235 
ZEXPORT


236 
	$šæ©ePrime
 (
z_¡»amp
 
¡rm
, 
b™s
, 
v®ue
)

238 
šæ©e_¡©e
 
FAR
 *
¡©e
;

240 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

241  
Z_STREAM_ERROR
;

242 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

243 ià(
b™s
 < 0)

245 
¡©e
->
hŞd
 = 0;

246 
¡©e
->
b™s
 = 0;

247  
Z_OK
;

249 ià(
b™s
 > 16 || 
¡©e
->bits + bits > 32)

250  
Z_STREAM_ERROR
;

251 
v®ue
 &ğ(1L << 
b™s
) - 1;

252 
¡©e
->
hŞd
 +ğ
v®ue
 << s‹->
b™s
;

253 
¡©e
->
b™s
 += bits;

254  
Z_OK
;

255 
	}
}

267 
loÿl
 

268 
	$fixedbËs
 (
šæ©e_¡©e
 
FAR
 * 
¡©e
)

270 #ifdeà
BUILDFIXED


271 
vœgš
 = 1;

272 
code
 *
Ënfix
, *
di¡fix
;

273 
code
 
fixed
[544];

276 ià(
vœgš
)

278 
sym
, 
b™s
;

279 
code
 *
Ãxt
;

282 
sym
 = 0;

283 
sym
 < 144)

284 
¡©e
->
Ëns
[
sym
++] = 8;

285 
sym
 < 256)

286 
¡©e
->
Ëns
[
sym
++] = 9;

287 
sym
 < 280)

288 
¡©e
->
Ëns
[
sym
++] = 7;

289 
sym
 < 288)

290 
¡©e
->
Ëns
[
sym
++] = 8;

291 
Ãxt
 = 
fixed
;

292 
Ënfix
 = 
Ãxt
;

293 
b™s
 = 9;

294 
	`šæ©e_bË
 (
LENS
, 
¡©e
->
Ëns
, 288, &(
Ãxt
), &(
b™s
), s‹->
wÜk
);

297 
sym
 = 0;

298 
sym
 < 32)

299 
¡©e
->
Ëns
[
sym
++] = 5;

300 
di¡fix
 = 
Ãxt
;

301 
b™s
 = 5;

302 
	`šæ©e_bË
 (
DISTS
, 
¡©e
->
Ëns
, 32, &(
Ãxt
), &(
b™s
), s‹->
wÜk
);

305 
vœgš
 = 0;

308 
	~"šffixed.h
"

310 
¡©e
->
Ëncode
 = 
Ënfix
;

311 
¡©e
->
Ënb™s
 = 9;

312 
¡©e
->
di¡code
 = 
di¡fix
;

313 
¡©e
->
di¡b™s
 = 5;

314 
	}
}

316 #ifdeà
MAKEFIXED


317 
	~<¡dio.h
>

338 
	$makefixed
 ()

340 
low
, 
size
;

341 
šæ©e_¡©e
 
¡©e
;

343 
	`fixedbËs
 (&
¡©e
);

344 
	`puts
 (" /* inffixed.h --able for decoding fixed codes");

345 
	`puts
 (" * Generated‡utomatically by makefixed().");

346 
	`puts
 (" */");

347 
	`puts
 ("");

348 
	`puts
 (" /* WARNING:his file should *not* be used by‡pplications.");

349 
	`puts
 (" It is…art ofhe implementation ofhis†ibrary‡nd is");

350 
	`puts
 (" subjecto change. Applications should only use zlib.h.");

351 
	`puts
 (" */");

352 
	`puts
 ("");

353 
size
 = 1U << 9;

354 
	`´štf
 (" stiøcÚ¡ codËnfix[%u] = {", 
size
);

355 
low
 = 0;

358 ià((
low
 % 7) == 0)

359 
	`´štf
 ("\n ");

360 
	`´štf
 ("{%u,%u,%d}", (
low
 & 127è=ğ99 ? 64 : 
¡©e
.
Ëncode
[low].
İ
,

361 
¡©e
.
Ëncode
[
low
].
b™s
, s‹.Ëncode[low].
v®
);

362 ià(++
low
 =ğ
size
)

364 
	`putch¬
 (',');

366 
	`puts
 ("\n };");

367 
size
 = 1U << 5;

368 
	`´štf
 ("\À stiøcÚ¡ coddi¡fix[%u] = {", 
size
);

369 
low
 = 0;

372 ià((
low
 % 6) == 0)

373 
	`´štf
 ("\n ");

374 
	`´štf
 ("{%u,%u,%d}", 
¡©e
.
di¡code
[
low
].
İ
, s‹.di¡code[low].
b™s
,

375 
¡©e
.
di¡code
[
low
].
v®
);

376 ià(++
low
 =ğ
size
)

378 
	`putch¬
 (',');

380 
	`puts
 ("\n };");

381 
	}
}

398 
loÿl
 

399 
	$upd©ewšdow
 (
z_¡»amp
 
¡rm
, cÚ¡ 
By‹f
 * 
’d
, 
cİy
)

401 
šæ©e_¡©e
 
FAR
 *
¡©e
;

402 
di¡
;

404 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

407 ià(
¡©e
->
wšdow
 =ğ
Z_NULL
)

409 
¡©e
->
wšdow
 = (
FAR
 *)

410 
	`ZALLOC
 (
¡rm
, 1U << 
¡©e
->
wb™s
,  ());

411 ià(
¡©e
->
wšdow
 =ğ
Z_NULL
)

416 ià(
¡©e
->
wsize
 == 0)

418 
¡©e
->
wsize
 = 1U << s‹->
wb™s
;

419 
¡©e
->
wÃxt
 = 0;

420 
¡©e
->
whave
 = 0;

424 ià(
cİy
 >ğ
¡©e
->
wsize
)

426 
	`zmemıy
 (
¡©e
->
wšdow
, 
’d
 - s‹->
wsize
, state->wsize);

427 
¡©e
->
wÃxt
 = 0;

428 
¡©e
->
whave
 = s‹->
wsize
;

432 
di¡
 = 
¡©e
->
wsize
 - s‹->
wÃxt
;

433 ià(
di¡
 > 
cİy
)

434 
di¡
 = 
cİy
;

435 
	`zmemıy
 (
¡©e
->
wšdow
 + s‹->
wÃxt
, 
’d
 - 
cİy
, 
di¡
);

436 
cİy
 -ğ
di¡
;

437 ià(
cİy
)

439 
	`zmemıy
 (
¡©e
->
wšdow
, 
’d
 - 
cİy
, copy);

440 
¡©e
->
wÃxt
 = 
cİy
;

441 
¡©e
->
whave
 = s‹->
wsize
;

445 
¡©e
->
wÃxt
 +ğ
di¡
;

446 ià(
¡©e
->
wÃxt
 =ğ¡©e->
wsize
)

447 
¡©e
->
wÃxt
 = 0;

448 ià(
¡©e
->
whave
 < s‹->
wsize
)

449 
¡©e
->
whave
 +ğ
di¡
;

453 
	}
}

458 #ifdeà
GUNZIP


459 
	#UPDATE
(
check
, 
buf
, 
Ën
) \

460 (
¡©e
->
æags
 ? 
	`üc32
(
check
, 
buf
, 
Ën
è: 
	`adËr32
(check, buf,†’))

	)

462 
	#UPDATE
(
check
, 
buf
, 
Ën
è
	`adËr32
(check, buf,†’)

	)

466 #ifdeà
GUNZIP


467 
	#CRC2
(
check
, 
wÜd
) \

469 
hbuf
[0] = ()(
wÜd
); \

470 
hbuf
[1] = ()((
wÜd
) >> 8); \

471 
check
 = 
	`üc32
(check, 
hbuf
, 2); \

472 } 0)

	)

474 
	#CRC4
(
check
, 
wÜd
) \

476 
hbuf
[0] = ()(
wÜd
); \

477 
hbuf
[1] = ()((
wÜd
) >> 8); \

478 
hbuf
[2] = ()((
wÜd
) >> 16); \

479 
hbuf
[3] = ()((
wÜd
) >> 24); \

480 
check
 = 
	`üc32
(check, 
hbuf
, 4); \

481 } 0)

	)

485 
	#LOAD
() \

487 
put
 = 
¡rm
->
Ãxt_out
; \

488 
Ëá
 = 
¡rm
->
ava_out
; \

489 
Ãxt
 = 
¡rm
->
Ãxt_š
; \

490 
have
 = 
¡rm
->
ava_š
; \

491 
hŞd
 = 
¡©e
->hold; \

492 
b™s
 = 
¡©e
->bits; \

493 } 0)

	)

496 
	#RESTORE
() \

498 
¡rm
->
Ãxt_out
 = 
put
; \

499 
¡rm
->
ava_out
 = 
Ëá
; \

500 
¡rm
->
Ãxt_š
 = 
Ãxt
; \

501 
¡rm
->
ava_š
 = 
have
; \

502 
¡©e
->
hŞd
 = hold; \

503 
¡©e
->
b™s
 = bits; \

504 } 0)

	)

507 
	#INITBITS
() \

509 
hŞd
 = 0; \

510 
b™s
 = 0; \

511 } 0)

	)

515 
	#PULLBYTE
() \

517 ià(
have
 =ğ0è
šf_Ëave
; \

518 
have
--; \

519 
hŞd
 +ğ()(*
Ãxt
++è<< 
b™s
; \

520 
b™s
 += 8; \

521 } 0)

	)

525 
	#NEEDBITS
(
n
) \

527 
b™s
 < ()(
n
)) \

528 
	`PULLBYTE
(); \

529 } 0)

	)

532 
	#BITS
(
n
) \

533 (()
hŞd
 & ((1U << (
n
)è- 1))

	)

536 
	#DROPBITS
(
n
) \

538 
hŞd
 >>ğ(
n
); \

539 
b™s
 -ğ()(
n
); \

540 } 0)

	)

543 
	#BYTEBITS
() \

545 
hŞd
 >>ğ
b™s
 & 7; \

546 
b™s
 -= bits & 7; \

547 } 0)

	)

631 
ZEXPORT


632 
	$šæ©e
 (
z_¡»amp
 
¡rm
, 
æush
)

634 
šæ©e_¡©e
 
FAR
 *
¡©e
;

635 
z_cÚ¡
 
FAR
 *
Ãxt
;

636 
FAR
 *
put
;

637 
have
, 
Ëá
;

638 
hŞd
;

639 
b™s
;

640 
š
, 
out
;

641 
cİy
;

642 
FAR
 *
äom
;

643 
code
 
h”e
;

644 
code
 
Ï¡
;

645 
Ën
;

646 
»t
;

647 #ifdeà
GUNZIP


648 
hbuf
[4];

650 cÚ¡ 
Üd”
[19] =

653 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 =ğZ_NULL || sŒm->
Ãxt_out
 == Z_NULL ||

654 (
¡rm
->
Ãxt_š
 =ğ
Z_NULL
 && sŒm->
ava_š
 != 0))

655  
Z_STREAM_ERROR
;

657 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

658 ià(
¡©e
->
mode
 =ğ
TYPE
)

659 
¡©e
->
mode
 = 
TYPEDO
;

660 
	`LOAD
 ();

661 
š
 = 
have
;

662 
out
 = 
Ëá
;

663 
»t
 = 
Z_OK
;

665 
¡©e
->
mode
)

667 
HEAD
:

668 ià(
¡©e
->
w¿p
 == 0)

670 
¡©e
->
mode
 = 
TYPEDO
;

673 
	`NEEDBITS
 (16);

674 #ifdeà
GUNZIP


675 ià((
¡©e
->
w¿p
 & 2è&& 
hŞd
 == 0x8b1f)

677 
¡©e
->
check
 = 
	`üc32
 (0L, 
Z_NULL
, 0);

678 
	`CRC2
 (
¡©e
->
check
, 
hŞd
);

679 
	`INITBITS
 ();

680 
¡©e
->
mode
 = 
FLAGS
;

683 
¡©e
->
æags
 = 0;

684 ià(
¡©e
->
h—d
 !ğ
Z_NULL
)

685 
¡©e
->
h—d
->
dÚe
 = -1;

686 ià(!(
¡©e
->
w¿p
 & 1) ||

690 ((
	`BITS
 (8è<< 8è+ (
hŞd
 >> 8)) % 31)

692 
¡rm
->
msg
 = (*) "incorrect header check";

693 
¡©e
->
mode
 = 
BAD
;

696 ià(
	`BITS
 (4è!ğ
Z_DEFLATED
)

698 
¡rm
->
msg
 = (*) "unknown compression method";

699 
¡©e
->
mode
 = 
BAD
;

702 
	`DROPBITS
 (4);

703 
Ën
 = 
	`BITS
 (4) + 8;

704 ià(
¡©e
->
wb™s
 == 0)

705 
¡©e
->
wb™s
 = 
Ën
;

706 ià(
Ën
 > 
¡©e
->
wb™s
)

708 
¡rm
->
msg
 = (*) "invalid window size";

709 
¡©e
->
mode
 = 
BAD
;

712 
¡©e
->
dmax
 = 1U << 
Ën
;

713 
	`T¿ûv
 ((
¡d”r
, "inflate: zlib header ok\n"));

714 
¡rm
->
adËr
 = 
¡©e
->
check
 = 
	`adËr32
 (0L, 
Z_NULL
, 0);

715 
¡©e
->
mode
 = 
hŞd
 & 0x200 ? 
DICTID
 : 
TYPE
;

716 
	`INITBITS
 ();

718 #ifdeà
GUNZIP


719 
FLAGS
:

720 
	`NEEDBITS
 (16);

721 
¡©e
->
æags
 = (è(
hŞd
);

722 ià((
¡©e
->
æags
 & 0xffè!ğ
Z_DEFLATED
)

724 
¡rm
->
msg
 = (*) "unknown compression method";

725 
¡©e
->
mode
 = 
BAD
;

728 ià(
¡©e
->
æags
 & 0xe000)

730 
¡rm
->
msg
 = (*) "unknown header flags set";

731 
¡©e
->
mode
 = 
BAD
;

734 ià(
¡©e
->
h—d
 !ğ
Z_NULL
)

735 
¡©e
->
h—d
->
‹xt
 = (è((
hŞd
 >> 8) & 1);

736 ià(
¡©e
->
æags
 & 0x0200)

737 
	`CRC2
 (
¡©e
->
check
, 
hŞd
);

738 
	`INITBITS
 ();

739 
¡©e
->
mode
 = 
TIME
;

740 
TIME
:

741 
	`NEEDBITS
 (32);

742 ià(
¡©e
->
h—d
 !ğ
Z_NULL
)

743 
¡©e
->
h—d
->
time
 = 
hŞd
;

744 ià(
¡©e
->
æags
 & 0x0200)

745 
	`CRC4
 (
¡©e
->
check
, 
hŞd
);

746 
	`INITBITS
 ();

747 
¡©e
->
mode
 = 
OS
;

748 
OS
:

749 
	`NEEDBITS
 (16);

750 ià(
¡©e
->
h—d
 !ğ
Z_NULL
)

752 
¡©e
->
h—d
->
xæags
 = (è(
hŞd
 & 0xff);

753 
¡©e
->
h—d
->
os
 = (è(
hŞd
 >> 8);

755 ià(
¡©e
->
æags
 & 0x0200)

756 
	`CRC2
 (
¡©e
->
check
, 
hŞd
);

757 
	`INITBITS
 ();

758 
¡©e
->
mode
 = 
EXLEN
;

759 
EXLEN
:

760 ià(
¡©e
->
æags
 & 0x0400)

762 
	`NEEDBITS
 (16);

763 
¡©e
->
Ëngth
 = (è(
hŞd
);

764 ià(
¡©e
->
h—d
 !ğ
Z_NULL
)

765 
¡©e
->
h—d
->
exŒa_Ën
 = (è
hŞd
;

766 ià(
¡©e
->
æags
 & 0x0200)

767 
	`CRC2
 (
¡©e
->
check
, 
hŞd
);

768 
	`INITBITS
 ();

770 ià(
¡©e
->
h—d
 !ğ
Z_NULL
)

771 
¡©e
->
h—d
->
exŒa
 = 
Z_NULL
;

772 
¡©e
->
mode
 = 
EXTRA
;

773 
EXTRA
:

774 ià(
¡©e
->
æags
 & 0x0400)

776 
cİy
 = 
¡©e
->
Ëngth
;

777 ià(
cİy
 > 
have
)

778 
cİy
 = 
have
;

779 ià(
cİy
)

781 ià(
¡©e
->
h—d
 !ğ
Z_NULL
 && s‹->h—d->
exŒa
 != Z_NULL)

783 
Ën
 = 
¡©e
->
h—d
->
exŒa_Ën
 - s‹->
Ëngth
;

784 
	`zmemıy
 (
¡©e
->
h—d
->
exŒa
 + 
Ën
, 
Ãxt
,

785 
Ën
 + 
cİy
 > 
¡©e
->
h—d
->
exŒa_max
 ?

786 
¡©e
->
h—d
->
exŒa_max
 - 
Ën
 : 
cİy
);

788 ià(
¡©e
->
æags
 & 0x0200)

789 
¡©e
->
check
 = 
	`üc32
 (¡©e->check, 
Ãxt
, 
cİy
);

790 
have
 -ğ
cİy
;

791 
Ãxt
 +ğ
cİy
;

792 
¡©e
->
Ëngth
 -ğ
cİy
;

794 ià(
¡©e
->
Ëngth
)

795 
šf_Ëave
;

797 
¡©e
->
Ëngth
 = 0;

798 
¡©e
->
mode
 = 
NAME
;

799 
NAME
:

800 ià(
¡©e
->
æags
 & 0x0800)

802 ià(
have
 == 0)

803 
šf_Ëave
;

804 
cİy
 = 0;

807 
Ën
 = (è(
Ãxt
[
cİy
++]);

808 ià(
¡©e
->
h—d
 !ğ
Z_NULL
 &&

809 
¡©e
->
h—d
->
Çme
 !ğ
Z_NULL
 &&

810 
¡©e
->
Ëngth
 < s‹->
h—d
->
Çme_max
)

811 
¡©e
->
h—d
->
Çme
[¡©e->
Ëngth
++] = 
Ën
;

813 
Ën
 && 
cİy
 < 
have
);

814 ià(
¡©e
->
æags
 & 0x0200)

815 
¡©e
->
check
 = 
	`üc32
 (¡©e->check, 
Ãxt
, 
cİy
);

816 
have
 -ğ
cİy
;

817 
Ãxt
 +ğ
cİy
;

818 ià(
Ën
)

819 
šf_Ëave
;

821 ià(
¡©e
->
h—d
 !ğ
Z_NULL
)

822 
¡©e
->
h—d
->
Çme
 = 
Z_NULL
;

823 
¡©e
->
Ëngth
 = 0;

824 
¡©e
->
mode
 = 
COMMENT
;

825 
COMMENT
:

826 ià(
¡©e
->
æags
 & 0x1000)

828 ià(
have
 == 0)

829 
šf_Ëave
;

830 
cİy
 = 0;

833 
Ën
 = (è(
Ãxt
[
cİy
++]);

834 ià(
¡©e
->
h—d
 !ğ
Z_NULL
 &&

835 
¡©e
->
h—d
->
comm’t
 !ğ
Z_NULL
 &&

836 
¡©e
->
Ëngth
 < s‹->
h—d
->
comm_max
)

837 
¡©e
->
h—d
->
comm’t
[¡©e->
Ëngth
++] = 
Ën
;

839 
Ën
 && 
cİy
 < 
have
);

840 ià(
¡©e
->
æags
 & 0x0200)

841 
¡©e
->
check
 = 
	`üc32
 (¡©e->check, 
Ãxt
, 
cİy
);

842 
have
 -ğ
cİy
;

843 
Ãxt
 +ğ
cİy
;

844 ià(
Ën
)

845 
šf_Ëave
;

847 ià(
¡©e
->
h—d
 !ğ
Z_NULL
)

848 
¡©e
->
h—d
->
comm’t
 = 
Z_NULL
;

849 
¡©e
->
mode
 = 
HCRC
;

850 
HCRC
:

851 ià(
¡©e
->
æags
 & 0x0200)

853 
	`NEEDBITS
 (16);

854 ià(
hŞd
 !ğ(
¡©e
->
check
 & 0xffff))

856 
¡rm
->
msg
 = (*) "header crc mismatch";

857 
¡©e
->
mode
 = 
BAD
;

860 
	`INITBITS
 ();

862 ià(
¡©e
->
h—d
 !ğ
Z_NULL
)

864 
¡©e
->
h—d
->
hüc
 = (è((¡©e->
æags
 >> 9) & 1);

865 
¡©e
->
h—d
->
dÚe
 = 1;

867 
¡rm
->
adËr
 = 
¡©e
->
check
 = 
	`üc32
 (0L, 
Z_NULL
, 0);

868 
¡©e
->
mode
 = 
TYPE
;

871 
DICTID
:

872 
	`NEEDBITS
 (32);

873 
¡rm
->
adËr
 = 
¡©e
->
check
 = 
	`ZSWAP32
 (
hŞd
);

874 
	`INITBITS
 ();

875 
¡©e
->
mode
 = 
DICT
;

876 
DICT
:

877 ià(
¡©e
->
havediù
 == 0)

879 
	`RESTORE
 ();

880  
Z_NEED_DICT
;

882 
¡rm
->
adËr
 = 
¡©e
->
check
 = 
	`adËr32
 (0L, 
Z_NULL
, 0);

883 
¡©e
->
mode
 = 
TYPE
;

884 
TYPE
:

885 ià(
æush
 =ğ
Z_BLOCK
 || flush =ğ
Z_TREES
)

886 
šf_Ëave
;

887 
TYPEDO
:

888 ià(
¡©e
->
Ï¡
)

890 
	`BYTEBITS
 ();

891 
¡©e
->
mode
 = 
CHECK
;

894 
	`NEEDBITS
 (3);

895 
¡©e
->
Ï¡
 = 
	`BITS
 (1);

896 
	`DROPBITS
 (1);

897 
	`BITS
 (2))

900 
	`T¿ûv
 ((
¡d”r
, "inflate: stored block%s\n",

901 
¡©e
->
Ï¡
 ? " (last)" : ""));

902 
¡©e
->
mode
 = 
STORED
;

905 
	`fixedbËs
 (
¡©e
);

906 
	`T¿ûv
 ((
¡d”r
, "inflate: fixed codes block%s\n",

907 
¡©e
->
Ï¡
 ? " (last)" : ""));

908 
¡©e
->
mode
 = 
LEN_
;

909 ià(
æush
 =ğ
Z_TREES
)

911 
	`DROPBITS
 (2);

912 
šf_Ëave
;

916 
	`T¿ûv
 ((
¡d”r
, "inflate: dynamic codes block%s\n",

917 
¡©e
->
Ï¡
 ? " (last)" : ""));

918 
¡©e
->
mode
 = 
TABLE
;

921 
¡rm
->
msg
 = (*) "invalid blockype";

922 
¡©e
->
mode
 = 
BAD
;

924 
	`DROPBITS
 (2);

926 
STORED
:

927 
	`BYTEBITS
 ();

928 
	`NEEDBITS
 (32);

929 ià((
hŞd
 & 0xffff) != ((hold >> 16) ^ 0xffff))

931 
¡rm
->
msg
 = (*) "invalid stored block†engths";

932 
¡©e
->
mode
 = 
BAD
;

935 
¡©e
->
Ëngth
 = (è
hŞd
 & 0xffff;

936 
	`T¿ûv
 ((
¡d”r
, "šæ©e: stÜed†’gth %u\n", 
¡©e
->
Ëngth
));

937 
	`INITBITS
 ();

938 
¡©e
->
mode
 = 
COPY_
;

939 ià(
æush
 =ğ
Z_TREES
)

940 
šf_Ëave
;

941 
COPY_
:

942 
¡©e
->
mode
 = 
COPY
;

943 
COPY
:

944 
cİy
 = 
¡©e
->
Ëngth
;

945 ià(
cİy
)

947 ià(
cİy
 > 
have
)

948 
cİy
 = 
have
;

949 ià(
cİy
 > 
Ëá
)

950 
cİy
 = 
Ëá
;

951 ià(
cİy
 == 0)

952 
šf_Ëave
;

953 
	`zmemıy
 (
put
, 
Ãxt
, 
cİy
);

954 
have
 -ğ
cİy
;

955 
Ãxt
 +ğ
cİy
;

956 
Ëá
 -ğ
cİy
;

957 
put
 +ğ
cİy
;

958 
¡©e
->
Ëngth
 -ğ
cİy
;

961 
	`T¿ûv
 ((
¡d”r
, "inflate: storedƒnd\n"));

962 
¡©e
->
mode
 = 
TYPE
;

964 
TABLE
:

965 
	`NEEDBITS
 (14);

966 
¡©e
->
Æ’
 = 
	`BITS
 (5) + 257;

967 
	`DROPBITS
 (5);

968 
¡©e
->
ndi¡
 = 
	`BITS
 (5) + 1;

969 
	`DROPBITS
 (5);

970 
¡©e
->
ncode
 = 
	`BITS
 (4) + 4;

971 
	`DROPBITS
 (4);

972 #iâdeà
PKZIP_BUG_WORKAROUND


973 ià(
¡©e
->
Æ’
 > 286 || s‹->
ndi¡
 > 30)

975 
¡rm
->
msg
 = (*) "too many†ength or distance symbols";

976 
¡©e
->
mode
 = 
BAD
;

980 
	`T¿ûv
 ((
¡d”r
, "inflate:able sizes ok\n"));

981 
¡©e
->
have
 = 0;

982 
¡©e
->
mode
 = 
LENLENS
;

983 
LENLENS
:

984 
¡©e
->
have
 < s‹->
ncode
)

986 
	`NEEDBITS
 (3);

987 
¡©e
->
Ëns
[
Üd”
[¡©e->
have
++]] = (è
	`BITS
 (3);

988 
	`DROPBITS
 (3);

990 
¡©e
->
have
 < 19)

991 
¡©e
->
Ëns
[
Üd”
[¡©e->
have
++]] = 0;

992 
¡©e
->
Ãxt
 = s‹->
codes
;

993 
¡©e
->
Ëncode
 = (cÚ¡ 
code
 
FAR
 *è(¡©e->
Ãxt
);

994 
¡©e
->
Ënb™s
 = 7;

995 
»t
 = 
	`šæ©e_bË
 (
CODES
, 
¡©e
->
Ëns
, 19, &(¡©e->
Ãxt
),

996 &(
¡©e
->
Ënb™s
), s‹->
wÜk
);

997 ià(
»t
)

999 
¡rm
->
msg
 = (*) "invalid code†engths set";

1000 
¡©e
->
mode
 = 
BAD
;

1003 
	`T¿ûv
 ((
¡d”r
, "inflate: code†engths ok\n"));

1004 
¡©e
->
have
 = 0;

1005 
¡©e
->
mode
 = 
CODELENS
;

1006 
CODELENS
:

1007 
¡©e
->
have
 < s‹->
Æ’
 + s‹->
ndi¡
)

1011 
h”e
 = 
¡©e
->
Ëncode
[
	`BITS
 (¡©e->
Ënb™s
)];

1012 ià((è(
h”e
.
b™s
) <= bits)

1014 
	`PULLBYTE
 ();

1016 ià(
h”e
.
v®
 < 16)

1018 
	`DROPBITS
 (
h”e
.
b™s
);

1019 
¡©e
->
Ëns
[¡©e->
have
++] = 
h”e
.
v®
;

1023 ià(
h”e
.
v®
 == 16)

1025 
	`NEEDBITS
 (
h”e
.
b™s
 + 2);

1026 
	`DROPBITS
 (
h”e
.
b™s
);

1027 ià(
¡©e
->
have
 == 0)

1029 
¡rm
->
msg
 = (*) "invalid bit†ength„epeat";

1030 
¡©e
->
mode
 = 
BAD
;

1033 
Ën
 = 
¡©e
->
Ëns
[¡©e->
have
 - 1];

1034 
cİy
 = 3 + 
	`BITS
 (2);

1035 
	`DROPBITS
 (2);

1037 ià(
h”e
.
v®
 == 17)

1039 
	`NEEDBITS
 (
h”e
.
b™s
 + 3);

1040 
	`DROPBITS
 (
h”e
.
b™s
);

1041 
Ën
 = 0;

1042 
cİy
 = 3 + 
	`BITS
 (3);

1043 
	`DROPBITS
 (3);

1047 
	`NEEDBITS
 (
h”e
.
b™s
 + 7);

1048 
	`DROPBITS
 (
h”e
.
b™s
);

1049 
Ën
 = 0;

1050 
cİy
 = 11 + 
	`BITS
 (7);

1051 
	`DROPBITS
 (7);

1053 ià(
¡©e
->
have
 + 
cİy
 > s‹->
Æ’
 + s‹->
ndi¡
)

1055 
¡rm
->
msg
 = (*) "invalid bit†ength„epeat";

1056 
¡©e
->
mode
 = 
BAD
;

1059 
cİy
--)

1060 
¡©e
->
Ëns
[¡©e->
have
++] = (è
Ën
;

1065 ià(
¡©e
->
mode
 =ğ
BAD
)

1069 ià(
¡©e
->
Ëns
[256] == 0)

1071 
¡rm
->
msg
 = (*) "invalid code -- missingƒnd-of-block";

1072 
¡©e
->
mode
 = 
BAD
;

1079 
¡©e
->
Ãxt
 = s‹->
codes
;

1080 
¡©e
->
Ëncode
 = (cÚ¡ 
code
 
FAR
 *è(¡©e->
Ãxt
);

1081 
¡©e
->
Ënb™s
 = 9;

1082 
»t
 = 
	`šæ©e_bË
 (
LENS
, 
¡©e
->
Ëns
, s‹->
Æ’
, &(¡©e->
Ãxt
),

1083 &(
¡©e
->
Ënb™s
), s‹->
wÜk
);

1084 ià(
»t
)

1086 
¡rm
->
msg
 = (*) "invalid†iteral/lengths set";

1087 
¡©e
->
mode
 = 
BAD
;

1090 
¡©e
->
di¡code
 = (cÚ¡ 
code
 
FAR
 *è(¡©e->
Ãxt
);

1091 
¡©e
->
di¡b™s
 = 6;

1092 
»t
 = 
	`šæ©e_bË
 (
DISTS
, 
¡©e
->
Ëns
 + s‹->
Æ’
, s‹->
ndi¡
,

1093 &(
¡©e
->
Ãxt
), &(¡©e->
di¡b™s
), s‹->
wÜk
);

1094 ià(
»t
)

1096 
¡rm
->
msg
 = (*) "invalid distances set";

1097 
¡©e
->
mode
 = 
BAD
;

1100 
	`T¿ûv
 ((
¡d”r
, "inflate: codes ok\n"));

1101 
¡©e
->
mode
 = 
LEN_
;

1102 ià(
æush
 =ğ
Z_TREES
)

1103 
šf_Ëave
;

1104 
LEN_
:

1105 
¡©e
->
mode
 = 
LEN
;

1106 
LEN
:

1107 ià(
have
 >ğ6 && 
Ëá
 >= 258)

1109 
	`RESTORE
 ();

1110 
	`šæ©e_ç¡
 (
¡rm
, 
out
);

1111 
	`LOAD
 ();

1112 ià(
¡©e
->
mode
 =ğ
TYPE
)

1113 
¡©e
->
back
 = -1;

1116 
¡©e
->
back
 = 0;

1119 
h”e
 = 
¡©e
->
Ëncode
[
	`BITS
 (¡©e->
Ënb™s
)];

1120 ià((è(
h”e
.
b™s
) <= bits)

1122 
	`PULLBYTE
 ();

1124 ià(
h”e
.
İ
 && (here.op & 0xf0) == 0)

1126 
Ï¡
 = 
h”e
;

1129 
h”e
 = 
¡©e
->
Ëncode
[
Ï¡
.
v®
 +

1130 (
	`BITS
 (
Ï¡
.
b™s
 +†a¡.
İ
) >>†ast.

1131 
b™s
)];

1132 ià((è(
Ï¡
.
b™s
 + 
h”e
.bits) <= bits)

1134 
	`PULLBYTE
 ();

1136 
	`DROPBITS
 (
Ï¡
.
b™s
);

1137 
¡©e
->
back
 +ğ
Ï¡
.
b™s
;

1139 
	`DROPBITS
 (
h”e
.
b™s
);

1140 
¡©e
->
back
 +ğ
h”e
.
b™s
;

1141 
¡©e
->
Ëngth
 = (è
h”e
.
v®
;

1142 ià((è(
h”e
.
İ
) == 0)

1144 
	`T¿ûvv
 ((
¡d”r
, 
h”e
.
v®
 >= 0x20 && here.val < 0x7f ?

1146 "šæ©e:†™”® 0x%02x\n", 
h”e
.
v®
));

1147 
¡©e
->
mode
 = 
LIT
;

1150 ià(
h”e
.
İ
 & 32)

1152 
	`T¿ûvv
 ((
¡d”r
, "inflate:ƒnd of block\n"));

1153 
¡©e
->
back
 = -1;

1154 
¡©e
->
mode
 = 
TYPE
;

1157 ià(
h”e
.
İ
 & 64)

1159 
¡rm
->
msg
 = (*) "invalid†iteral/length code";

1160 
¡©e
->
mode
 = 
BAD
;

1163 
¡©e
->
exŒa
 = (è(
h”e
.
İ
) & 15;

1164 
¡©e
->
mode
 = 
LENEXT
;

1165 
LENEXT
:

1166 ià(
¡©e
->
exŒa
)

1168 
	`NEEDBITS
 (
¡©e
->
exŒa
);

1169 
¡©e
->
Ëngth
 +ğ
	`BITS
 (¡©e->
exŒa
);

1170 
	`DROPBITS
 (
¡©e
->
exŒa
);

1171 
¡©e
->
back
 +ğ¡©e->
exŒa
;

1173 
	`T¿ûvv
 ((
¡d”r
, "šæ©e:†’gth %u\n", 
¡©e
->
Ëngth
));

1174 
¡©e
->
was
 = s‹->
Ëngth
;

1175 
¡©e
->
mode
 = 
DIST
;

1176 
DIST
:

1179 
h”e
 = 
¡©e
->
di¡code
[
	`BITS
 (¡©e->
di¡b™s
)];

1180 ià((è(
h”e
.
b™s
) <= bits)

1182 
	`PULLBYTE
 ();

1184 ià((
h”e
.
İ
 & 0xf0) == 0)

1186 
Ï¡
 = 
h”e
;

1189 
h”e
 = 
¡©e
->
di¡code
[
Ï¡
.
v®
 +

1190 (
	`BITS
 (
Ï¡
.
b™s
 +†a¡.
İ
) >>†ast.

1191 
b™s
)];

1192 ià((è(
Ï¡
.
b™s
 + 
h”e
.bits) <= bits)

1194 
	`PULLBYTE
 ();

1196 
	`DROPBITS
 (
Ï¡
.
b™s
);

1197 
¡©e
->
back
 +ğ
Ï¡
.
b™s
;

1199 
	`DROPBITS
 (
h”e
.
b™s
);

1200 
¡©e
->
back
 +ğ
h”e
.
b™s
;

1201 ià(
h”e
.
İ
 & 64)

1203 
¡rm
->
msg
 = (*) "invalid distance code";

1204 
¡©e
->
mode
 = 
BAD
;

1207 
¡©e
->
off£t
 = (è
h”e
.
v®
;

1208 
¡©e
->
exŒa
 = (è(
h”e
.
İ
) & 15;

1209 
¡©e
->
mode
 = 
DISTEXT
;

1210 
DISTEXT
:

1211 ià(
¡©e
->
exŒa
)

1213 
	`NEEDBITS
 (
¡©e
->
exŒa
);

1214 
¡©e
->
off£t
 +ğ
	`BITS
 (¡©e->
exŒa
);

1215 
	`DROPBITS
 (
¡©e
->
exŒa
);

1216 
¡©e
->
back
 +ğ¡©e->
exŒa
;

1218 #ifdeà
INFLATE_STRICT


1219 ià(
¡©e
->
off£t
 > s‹->
dmax
)

1221 
¡rm
->
msg
 = (*) "invalid distanceoo far back";

1222 
¡©e
->
mode
 = 
BAD
;

1226 
	`T¿ûvv
 ((
¡d”r
, "šæ©e: di¡ªû %u\n", 
¡©e
->
off£t
));

1227 
¡©e
->
mode
 = 
MATCH
;

1228 
MATCH
:

1229 ià(
Ëá
 == 0)

1230 
šf_Ëave
;

1231 
cİy
 = 
out
 - 
Ëá
;

1232 ià(
¡©e
->
off£t
 > 
cİy
)

1234 
cİy
 = 
¡©e
->
off£t
 - copy;

1235 ià(
cİy
 > 
¡©e
->
whave
)

1237 ià(
¡©e
->
§Ã
)

1239 
¡rm
->
msg
 = (*) "invalid distanceoo far back";

1240 
¡©e
->
mode
 = 
BAD
;

1243 #ifdeà
INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR


1244 
	`T¿û
 ((
¡d”r
, "inflate.coo far\n"));

1245 
cİy
 -ğ
¡©e
->
whave
;

1246 ià(
cİy
 > 
¡©e
->
Ëngth
)

1247 
cİy
 = 
¡©e
->
Ëngth
;

1248 ià(
cİy
 > 
Ëá
)

1249 
cİy
 = 
Ëá
;

1250 
Ëá
 -ğ
cİy
;

1251 
¡©e
->
Ëngth
 -ğ
cİy
;

1254 *
put
++ = 0;

1256 --
cİy
);

1257 ià(
¡©e
->
Ëngth
 == 0)

1258 
¡©e
->
mode
 = 
LEN
;

1262 ià(
cİy
 > 
¡©e
->
wÃxt
)

1264 
cİy
 -ğ
¡©e
->
wÃxt
;

1265 
äom
 = 
¡©e
->
wšdow
 + (¡©e->
wsize
 - 
cİy
);

1268 
äom
 = 
¡©e
->
wšdow
 + (¡©e->
wÃxt
 - 
cİy
);

1269 ià(
cİy
 > 
¡©e
->
Ëngth
)

1270 
cİy
 = 
¡©e
->
Ëngth
;

1274 
äom
 = 
put
 - 
¡©e
->
off£t
;

1275 
cİy
 = 
¡©e
->
Ëngth
;

1277 ià(
cİy
 > 
Ëá
)

1278 
cİy
 = 
Ëá
;

1279 
Ëá
 -ğ
cİy
;

1280 
¡©e
->
Ëngth
 -ğ
cİy
;

1283 *
put
++ = *
äom
++;

1285 --
cİy
);

1286 ià(
¡©e
->
Ëngth
 == 0)

1287 
¡©e
->
mode
 = 
LEN
;

1289 
LIT
:

1290 ià(
Ëá
 == 0)

1291 
šf_Ëave
;

1292 *
put
++ = (è(
¡©e
->
Ëngth
);

1293 
Ëá
--;

1294 
¡©e
->
mode
 = 
LEN
;

1296 
CHECK
:

1297 ià(
¡©e
->
w¿p
)

1299 
	`NEEDBITS
 (32);

1300 
out
 -ğ
Ëá
;

1301 
¡rm
->
tÙ®_out
 +ğ
out
;

1302 
¡©e
->
tÙ®
 +ğ
out
;

1303 ià(
out
)

1304 
¡rm
->
adËr
 = 
¡©e
->
check
 =

1305 
	`UPDATE
 (
¡©e
->
check
, 
put
 - 
out
, out);

1306 
out
 = 
Ëá
;

1308 #ifdeà
GUNZIP


1309 
¡©e
->
æags
 ? 
hŞd
 :

1311 
	`ZSWAP32
 (
hŞd
)è!ğ
¡©e
->
check
)

1313 
¡rm
->
msg
 = (*) "incorrect data check";

1314 
¡©e
->
mode
 = 
BAD
;

1317 
	`INITBITS
 ();

1318 
	`T¿ûv
 ((
¡d”r
, "inflate: check matchesrailer\n"));

1320 #ifdeà
GUNZIP


1321 
¡©e
->
mode
 = 
LENGTH
;

1322 
LENGTH
:

1323 ià(
¡©e
->
w¿p
 && s‹->
æags
)

1325 
	`NEEDBITS
 (32);

1326 ià(
hŞd
 !ğ(
¡©e
->
tÙ®
 & 0xffffffffUL))

1328 
¡rm
->
msg
 = (*) "incorrect†ength check";

1329 
¡©e
->
mode
 = 
BAD
;

1332 
	`INITBITS
 ();

1333 
	`T¿ûv
 ((
¡d”r
, "inflate:†ength matchesrailer\n"));

1336 
¡©e
->
mode
 = 
DONE
;

1337 
DONE
:

1338 
»t
 = 
Z_STREAM_END
;

1339 
šf_Ëave
;

1340 
BAD
:

1341 
»t
 = 
Z_DATA_ERROR
;

1342 
šf_Ëave
;

1343 
MEM
:

1344  
Z_MEM_ERROR
;

1345 
SYNC
:

1347  
Z_STREAM_ERROR
;

1356 
šf_Ëave
:

1357 
	`RESTORE
 ();

1358 ià(
¡©e
->
wsize
 || (
out
 !ğ
¡rm
->
ava_out
 && s‹->
mode
 < 
BAD
 &&

1359 (
¡©e
->
mode
 < 
CHECK
 || 
æush
 !ğ
Z_FINISH
)))

1360 ià(
	`upd©ewšdow
 (
¡rm
, sŒm->
Ãxt_out
, 
out
 - sŒm->
ava_out
))

1362 
¡©e
->
mode
 = 
MEM
;

1363  
Z_MEM_ERROR
;

1365 
š
 -ğ
¡rm
->
ava_š
;

1366 
out
 -ğ
¡rm
->
ava_out
;

1367 
¡rm
->
tÙ®_š
 +ğ
š
;

1368 
¡rm
->
tÙ®_out
 +ğ
out
;

1369 
¡©e
->
tÙ®
 +ğ
out
;

1370 ià(
¡©e
->
w¿p
 && 
out
)

1371 
¡rm
->
adËr
 = 
¡©e
->
check
 =

1372 
	`UPDATE
 (
¡©e
->
check
, 
¡rm
->
Ãxt_out
 - 
out
, out);

1373 
¡rm
->
d©a_ty³
 = 
¡©e
->
b™s
 + (¡©e->
Ï¡
 ? 64 : 0) +

1374 (
¡©e
->
mode
 =ğ
TYPE
 ? 128 : 0) +

1375 (
¡©e
->
mode
 =ğ
LEN_
 || s‹->mod=ğ
COPY_
 ? 256 : 0);

1376 ià(((
š
 =ğ0 && 
out
 =ğ0è|| 
æush
 =ğ
Z_FINISH
è&& 
»t
 =ğ
Z_OK
)

1377 
»t
 = 
Z_BUF_ERROR
;

1378  
»t
;

1379 
	}
}

1381 
ZEXPORT


1382 
	$šæ©eEnd
 (
z_¡»amp
 
¡rm
)

1384 
šæ©e_¡©e
 
FAR
 *
¡©e
;

1385 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 =ğZ_NULL || sŒm->
zä“
 =ğ(
ä“_func
) 0)

1386  
Z_STREAM_ERROR
;

1387 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

1388 ià(
¡©e
->
wšdow
 !ğ
Z_NULL
)

1389 
	`ZFREE
 (
¡rm
, 
¡©e
->
wšdow
);

1390 
	`ZFREE
 (
¡rm
, sŒm->
¡©e
);

1391 
¡rm
->
¡©e
 = 
Z_NULL
;

1392 
	`T¿ûv
 ((
¡d”r
, "inflate:ƒnd\n"));

1393  
Z_OK
;

1394 
	}
}

1396 
ZEXPORT


1397 
	$šæ©eG‘DiùiÚ¬y
 (
z_¡»amp
 
¡rm
, 
By‹f
 * 
diùiÚ¬y
, 
uIÁ
 * 
diùL’gth
)

1399 
šæ©e_¡©e
 
FAR
 *
¡©e
;

1402 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

1403  
Z_STREAM_ERROR
;

1404 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

1407 ià(
¡©e
->
whave
 && 
diùiÚ¬y
 !ğ
Z_NULL
)

1409 
	`zmemıy
 (
diùiÚ¬y
, 
¡©e
->
wšdow
 + s‹->
wÃxt
,

1410 
¡©e
->
whave
 - s‹->
wÃxt
);

1411 
	`zmemıy
 (
diùiÚ¬y
 + 
¡©e
->
whave
 - s‹->
wÃxt
,

1412 
¡©e
->
wšdow
, s‹->
wÃxt
);

1414 ià(
diùL’gth
 !ğ
Z_NULL
)

1415 *
diùL’gth
 = 
¡©e
->
whave
;

1416  
Z_OK
;

1417 
	}
}

1419 
ZEXPORT


1420 
	$šæ©eS‘DiùiÚ¬y
 (
z_¡»amp
 
¡rm
, cÚ¡ 
By‹f
 * 
diùiÚ¬y
,

1421 
uIÁ
 
diùL’gth
)

1423 
šæ©e_¡©e
 
FAR
 *
¡©e
;

1424 
diùid
;

1425 
»t
;

1428 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

1429  
Z_STREAM_ERROR
;

1430 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

1431 ià(
¡©e
->
w¿p
 !ğ0 && s‹->
mode
 !ğ
DICT
)

1432  
Z_STREAM_ERROR
;

1435 ià(
¡©e
->
mode
 =ğ
DICT
)

1437 
diùid
 = 
	`adËr32
 (0L, 
Z_NULL
, 0);

1438 
diùid
 = 
	`adËr32
 (diùid, 
diùiÚ¬y
, 
diùL’gth
);

1439 ià(
diùid
 !ğ
¡©e
->
check
)

1440  
Z_DATA_ERROR
;

1445 
»t
 = 
	`upd©ewšdow
 (
¡rm
, 
diùiÚ¬y
 + 
diùL’gth
, dictLength);

1446 ià(
»t
)

1448 
¡©e
->
mode
 = 
MEM
;

1449  
Z_MEM_ERROR
;

1451 
¡©e
->
havediù
 = 1;

1452 
	`T¿ûv
 ((
¡d”r
, "inflate: dictionary set\n"));

1453  
Z_OK
;

1454 
	}
}

1456 
ZEXPORT


1457 
	$šæ©eG‘H—d”
 (
z_¡»amp
 
¡rm
, 
gz_h—d”p
 
h—d
)

1459 
šæ©e_¡©e
 
FAR
 *
¡©e
;

1462 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

1463  
Z_STREAM_ERROR
;

1464 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

1465 ià((
¡©e
->
w¿p
 & 2) == 0)

1466  
Z_STREAM_ERROR
;

1469 
¡©e
->
h—d
 = head;

1470 
h—d
->
dÚe
 = 0;

1471  
Z_OK
;

1472 
	}
}

1485 
loÿl
 

1486 
	$sync£¬ch
 (
FAR
 * 
have
, cÚ¡ FAR * 
buf
, 
Ën
)

1488 
gÙ
;

1489 
Ãxt
;

1491 
gÙ
 = *
have
;

1492 
Ãxt
 = 0;

1493 
Ãxt
 < 
Ën
 && 
gÙ
 < 4)

1495 ià((è(
buf
[
Ãxt
]è=ğ(
gÙ
 < 2 ? 0 : 0xff))

1496 
gÙ
++;

1497 ià(
buf
[
Ãxt
])

1498 
gÙ
 = 0;

1500 
gÙ
 = 4 - got;

1501 
Ãxt
++;

1503 *
have
 = 
gÙ
;

1504  
Ãxt
;

1505 
	}
}

1507 
ZEXPORT


1508 
	$šæ©eSync
 (
z_¡»amp
 
¡rm
)

1510 
Ën
;

1511 
š
, 
out
;

1512 
buf
[4];

1513 
šæ©e_¡©e
 
FAR
 *
¡©e
;

1516 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

1517  
Z_STREAM_ERROR
;

1518 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

1519 ià(
¡rm
->
ava_š
 =ğ0 && 
¡©e
->
b™s
 < 8)

1520  
Z_BUF_ERROR
;

1523 ià(
¡©e
->
mode
 !ğ
SYNC
)

1525 
¡©e
->
mode
 = 
SYNC
;

1526 
¡©e
->
hŞd
 <<ğ¡©e->
b™s
 & 7;

1527 
¡©e
->
b™s
 -= state->bits & 7;

1528 
Ën
 = 0;

1529 
¡©e
->
b™s
 >= 8)

1531 
buf
[
Ën
++] = (è(
¡©e
->
hŞd
);

1532 
¡©e
->
hŞd
 >>= 8;

1533 
¡©e
->
b™s
 -= 8;

1535 
¡©e
->
have
 = 0;

1536 
	`sync£¬ch
 (&(
¡©e
->
have
), 
buf
, 
Ën
);

1540 
Ën
 = 
	`sync£¬ch
 (&(
¡©e
->
have
), 
¡rm
->
Ãxt_š
, sŒm->
ava_š
);

1541 
¡rm
->
ava_š
 -ğ
Ën
;

1542 
¡rm
->
Ãxt_š
 +ğ
Ën
;

1543 
¡rm
->
tÙ®_š
 +ğ
Ën
;

1546 ià(
¡©e
->
have
 != 4)

1547  
Z_DATA_ERROR
;

1548 
š
 = 
¡rm
->
tÙ®_š
;

1549 
out
 = 
¡rm
->
tÙ®_out
;

1550 
	`šæ©eRe£t
 (
¡rm
);

1551 
¡rm
->
tÙ®_š
 = 
š
;

1552 
¡rm
->
tÙ®_out
 = 
out
;

1553 
¡©e
->
mode
 = 
TYPE
;

1554  
Z_OK
;

1555 
	}
}

1565 
ZEXPORT


1566 
	$šæ©eSyncPošt
 (
z_¡»amp
 
¡rm
)

1568 
šæ©e_¡©e
 
FAR
 *
¡©e
;

1570 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

1571  
Z_STREAM_ERROR
;

1572 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

1573  
¡©e
->
mode
 =ğ
STORED
 && s‹->
b™s
 == 0;

1574 
	}
}

1576 
ZEXPORT


1577 
	$šæ©eCİy
 (
z_¡»amp
 
de¡
, z_¡»am°
sourû
)

1579 
šæ©e_¡©e
 
FAR
 *
¡©e
;

1580 
šæ©e_¡©e
 
FAR
 *
cİy
;

1581 
FAR
 *
wšdow
;

1582 
wsize
;

1585 ià(
de¡
 =ğ
Z_NULL
 || 
sourû
 =ğZ_NULL || sourû->
¡©e
 == Z_NULL ||

1586 
sourû
->
z®loc
 =ğ(
®loc_func
è0 || sourû->
zä“
 =ğ(
ä“_func
) 0)

1587  
Z_STREAM_ERROR
;

1588 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
sourû
->state;

1591 
cİy
 = (
šæ©e_¡©e
 
FAR
 *)

1592 
	`ZALLOC
 (
sourû
, 1,  (
šæ©e_¡©e
));

1593 ià(
cİy
 =ğ
Z_NULL
)

1594  
Z_MEM_ERROR
;

1595 
wšdow
 = 
Z_NULL
;

1596 ià(
¡©e
->
wšdow
 !ğ
Z_NULL
)

1598 
wšdow
 = (
FAR
 *)

1599 
	`ZALLOC
 (
sourû
, 1U << 
¡©e
->
wb™s
,  ());

1600 ià(
wšdow
 =ğ
Z_NULL
)

1602 
	`ZFREE
 (
sourû
, 
cİy
);

1603  
Z_MEM_ERROR
;

1608 
	`zmemıy
 ((
voidpf
è
de¡
, (voidpfè
sourû
,  (
z_¡»am
));

1609 
	`zmemıy
 ((
voidpf
è
cİy
, (voidpfè
¡©e
,  (
šæ©e_¡©e
));

1610 ià(
¡©e
->
Ëncode
 >ğ¡©e->
codes
 &&

1611 
¡©e
->
Ëncode
 <ğ¡©e->
codes
 + 
ENOUGH
 - 1)

1613 
cİy
->
Ëncode
 = cİy->
codes
 + (
¡©e
->lencode - state->codes);

1614 
cİy
->
di¡code
 = cİy->
codes
 + (
¡©e
->distcode - state->codes);

1616 
cİy
->
Ãxt
 = cİy->
codes
 + (
¡©e
->next - state->codes);

1617 ià(
wšdow
 !ğ
Z_NULL
)

1619 
wsize
 = 1U << 
¡©e
->
wb™s
;

1620 
	`zmemıy
 (
wšdow
, 
¡©e
->wšdow, 
wsize
);

1622 
cİy
->
wšdow
 = window;

1623 
de¡
->
¡©e
 = (
š‹º®_¡©e
 
FAR
 *è
cİy
;

1624  
Z_OK
;

1625 
	}
}

1627 
ZEXPORT


1628 
	$šæ©eUnd”mše
 (
z_¡»amp
 
¡rm
, 
subv”t
)

1630 
šæ©e_¡©e
 
FAR
 *
¡©e
;

1632 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

1633  
Z_STREAM_ERROR
;

1634 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

1635 
¡©e
->
§Ã
 = !
subv”t
;

1636 #ifdeà
INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR


1637  
Z_OK
;

1639 
¡©e
->
§Ã
 = 1;

1640  
Z_DATA_ERROR
;

1642 
	}
}

1644 
ZEXPORT


1645 
	$šæ©eM¬k
 (
z_¡»amp
 
¡rm
)

1647 
šæ©e_¡©e
 
FAR
 *
¡©e
;

1649 ià(
¡rm
 =ğ
Z_NULL
 || sŒm->
¡©e
 == Z_NULL)

1651 
¡©e
 = (
šæ©e_¡©e
 
FAR
 *è
¡rm
->state;

1652  ((è(
¡©e
->
back
) << 16) +

1653 (
¡©e
->
mode
 =ğ
COPY
 ? s‹->
Ëngth
 :

1654 (
¡©e
->
mode
 =ğ
MATCH
 ? s‹->
was
 - s‹->
Ëngth
 : 0));

1655 
	}
}

	@inflate.h

15 #iâdeà
NO_GZIP


16 
	#GUNZIP


	)

21 
	mHEAD
,

22 
	mFLAGS
,

23 
	mTIME
,

24 
	mOS
,

25 
	mEXLEN
,

26 
	mEXTRA
,

27 
	mNAME
,

28 
	mCOMMENT
,

29 
	mHCRC
,

30 
	mDICTID
,

31 
	mDICT
,

32 
	mTYPE
,

33 
	mTYPEDO
,

34 
	mSTORED
,

35 
	mCOPY_
,

36 
	mCOPY
,

37 
	mTABLE
,

38 
	mLENLENS
,

39 
	mCODELENS
,

40 
	mLEN_
,

41 
	mLEN
,

42 
	mLENEXT
,

43 
	mDIST
,

44 
	mDISTEXT
,

45 
	mMATCH
,

46 
	mLIT
,

47 
	mCHECK
,

48 
	mLENGTH
,

49 
	mDONE
,

50 
	mBAD
,

51 
	mMEM
,

52 
	mSYNC


53 } 
	tšæ©e_mode
;

81 
	sšæ©e_¡©e
 {

82 
šæ©e_mode
 
	mmode
;

83 
	mÏ¡
;

84 
	mw¿p
;

85 
	mhavediù
;

86 
	mæags
;

87 
	mdmax
;

88 
	mcheck
;

89 
	mtÙ®
;

90 
gz_h—d”p
 
	mh—d
;

92 
	mwb™s
;

93 
	mwsize
;

94 
	mwhave
;

95 
	mwÃxt
;

96 
FAR
 *
	mwšdow
;

98 
	mhŞd
;

99 
	mb™s
;

101 
	mËngth
;

102 
	moff£t
;

104 
	mexŒa
;

106 
code
 cÚ¡ 
FAR
 *
	mËncode
;

107 
code
 cÚ¡ 
FAR
 *
	mdi¡code
;

108 
	mËnb™s
;

109 
	mdi¡b™s
;

111 
	mncode
;

112 
	mÆ’
;

113 
	mndi¡
;

114 
	mhave
;

115 
code
 
FAR
 *
	mÃxt
;

116 
	mËns
[320];

117 
	mwÜk
[288];

118 
code
 
	mcodes
[
ENOUGH
];

119 
	m§Ã
;

120 
	mback
;

121 
	mwas
;

	@inftrees.c

6 
	~"zut.h
"

7 
	~"šá»es.h
"

9 
	#MAXBITS
 15

	)

11 cÚ¡ 
	gšæ©e_cİyright
[] =

32 
ZLIB_INTERNAL


33 
	$šæ©e_bË
 (
cod‘y³
 
ty³
, 
FAR
 * 
Ëns
, 
codes
,

34 
code
 
FAR
 * FAR * 
bË
, FAR * 
b™s
,

35 
FAR
 * 
wÜk
)

37 
Ën
;

38 
sym
;

39 
mš
, 
max
;

40 
roÙ
;

41 
cu¼
;

42 
drİ
;

43 
Ëá
;

44 
u£d
;

45 
huff
;

46 
šü
;

47 
fl
;

48 
low
;

49 
mask
;

50 
code
 
h”e
;

51 
code
 
FAR
 *
Ãxt
;

52 cÚ¡ 
FAR
 *
ba£
;

53 cÚ¡ 
FAR
 *
exŒa
;

54 
’d
;

55 
couÁ
[
MAXBITS
 + 1];

56 
offs
[
MAXBITS
 + 1];

57 cÚ¡ 
lba£
[31] = {

61 cÚ¡ 
Ëxt
[31] = {

65 cÚ¡ 
dba£
[32] = {

70 cÚ¡ 
dext
[32] = {

108 
Ën
 = 0;†’ <ğ
MAXBITS
;†en++)

109 
couÁ
[
Ën
] = 0;

110 
sym
 = 0; sym < 
codes
; sym++)

111 
couÁ
[
Ëns
[
sym
]]++;

114 
roÙ
 = *
b™s
;

115 
max
 = 
MAXBITS
; max >= 1; max--)

116 ià(
couÁ
[
max
] != 0)

118 ià(
roÙ
 > 
max
)

119 
roÙ
 = 
max
;

120 ià(
max
 == 0)

122 
h”e
.
İ
 = () 64;

123 
h”e
.
b™s
 = () 1;

124 
h”e
.
v®
 = () 0;

125 *(*
bË
)++ = 
h”e
;

126 *(*
bË
)++ = 
h”e
;

127 *
b™s
 = 1;

130 
mš
 = 1; mš < 
max
; min++)

131 ià(
couÁ
[
mš
] != 0)

133 ià(
roÙ
 < 
mš
)

134 
roÙ
 = 
mš
;

137 
Ëá
 = 1;

138 
Ën
 = 1;†’ <ğ
MAXBITS
;†en++)

140 
Ëá
 <<= 1;

141 
Ëá
 -ğ
couÁ
[
Ën
];

142 ià(
Ëá
 < 0)

145 ià(
Ëá
 > 0 && (
ty³
 =ğ
CODES
 || 
max
 != 1))

149 
offs
[1] = 0;

150 
Ën
 = 1;†’ < 
MAXBITS
;†en++)

151 
offs
[
Ën
 + 1] = offs[Ën] + 
couÁ
[len];

154 
sym
 = 0; sym < 
codes
; sym++)

155 ià(
Ëns
[
sym
] != 0)

156 
wÜk
[
offs
[
Ëns
[
sym
]]++] = () sym;

190 
ty³
)

192 
CODES
:

193 
ba£
 = 
exŒa
 = 
wÜk
;

194 
’d
 = 19;

196 
LENS
:

197 
ba£
 = 
lba£
;

198 
ba£
 -= 257;

199 
exŒa
 = 
Ëxt
;

200 
exŒa
 -= 257;

201 
’d
 = 256;

204 
ba£
 = 
dba£
;

205 
exŒa
 = 
dext
;

206 
’d
 = -1;

210 
huff
 = 0;

211 
sym
 = 0;

212 
Ën
 = 
mš
;

213 
Ãxt
 = *
bË
;

214 
cu¼
 = 
roÙ
;

215 
drİ
 = 0;

216 
low
 = () (-1);

217 
u£d
 = 1U << 
roÙ
;

218 
mask
 = 
u£d
 - 1;

221 ià((
ty³
 =ğ
LENS
 && 
u£d
 > 
ENOUGH_LENS
) ||

222 (
ty³
 =ğ
DISTS
 && 
u£d
 > 
ENOUGH_DISTS
))

229 
h”e
.
b™s
 = (è(
Ën
 - 
drİ
);

230 ià((è(
wÜk
[
sym
]è< 
’d
)

232 
h”e
.
İ
 = () 0;

233 
h”e
.
v®
 = 
wÜk
[
sym
];

235 ià((è(
wÜk
[
sym
]è> 
’d
)

237 
h”e
.
İ
 = (è(
exŒa
[
wÜk
[
sym
]]);

238 
h”e
.
v®
 = 
ba£
[
wÜk
[
sym
]];

242 
h”e
.
İ
 = () (32 + 64);

243 
h”e
.
v®
 = 0;

247 
šü
 = 1U << (
Ën
 - 
drİ
);

248 
fl
 = 1U << 
cu¼
;

249 
mš
 = 
fl
;

252 
fl
 -ğ
šü
;

253 
Ãxt
[(
huff
 >> 
drİ
è+ 
fl
] = 
h”e
;

255 
fl
 != 0);

258 
šü
 = 1U << (
Ën
 - 1);

259 
huff
 & 
šü
)

260 
šü
 >>= 1;

261 ià(
šü
 != 0)

263 
huff
 &ğ
šü
 - 1;

264 
huff
 +ğ
šü
;

267 
huff
 = 0;

270 
sym
++;

271 ià(--(
couÁ
[
Ën
]) == 0)

273 ià(
Ën
 =ğ
max
)

275 
Ën
 = 
Ëns
[
wÜk
[
sym
]];

279 ià(
Ën
 > 
roÙ
 && (
huff
 & 
mask
è!ğ
low
)

282 ià(
drİ
 == 0)

283 
drİ
 = 
roÙ
;

286 
Ãxt
 +ğ
mš
;

289 
cu¼
 = 
Ën
 - 
drİ
;

290 
Ëá
 = (è(1 << 
cu¼
);

291 
cu¼
 + 
drİ
 < 
max
)

293 
Ëá
 -ğ
couÁ
[
cu¼
 + 
drİ
];

294 ià(
Ëá
 <= 0)

296 
cu¼
++;

297 
Ëá
 <<= 1;

301 
u£d
 +ğ1U << 
cu¼
;

302 ià((
ty³
 =ğ
LENS
 && 
u£d
 > 
ENOUGH_LENS
) ||

303 (
ty³
 =ğ
DISTS
 && 
u£d
 > 
ENOUGH_DISTS
))

307 
low
 = 
huff
 & 
mask
;

308 (*
bË
)[
low
].
İ
 = (è
cu¼
;

309 (*
bË
)[
low
].
b™s
 = (è
roÙ
;

310 (*
bË
)[
low
].
v®
 = (è(
Ãxt
 - *table);

317 ià(
huff
 != 0)

319 
h”e
.
İ
 = () 64;

320 
h”e
.
b™s
 = (è(
Ën
 - 
drİ
);

321 
h”e
.
v®
 = () 0;

322 
Ãxt
[
huff
] = 
h”e
;

326 *
bË
 +ğ
u£d
;

327 *
b™s
 = 
roÙ
;

329 
	}
}

	@inftrees.h

25 
	mİ
;

26 
	mb™s
;

27 
	mv®
;

28 } 
	tcode
;

49 
	#ENOUGH_LENS
 852

	)

50 
	#ENOUGH_DISTS
 592

	)

51 
	#ENOUGH
 (
ENOUGH_LENS
+
ENOUGH_DISTS
)

	)

55 
	mCODES
,

56 
	mLENS
,

57 
	mDISTS


58 } 
	tcod‘y³
;

60 
ZLIB_INTERNAL
 
šæ©e_bË
 
OF
((
cod‘y³
 
ty³
, 
FAR
 *
Ëns
,

61 
codes
, 
code
 
FAR
 * FAR *
bË
,

62 
FAR
 *
b™s
, FAR *
wÜk
));

	@test/example.c

8 
	~"zlib.h
"

9 
	~<¡dio.h
>

11 #ifdeà
STDC


12 
	~<¡ršg.h
>

13 
	~<¡dlib.h
>

16 #ià
defšed
(
VMS
è|| defšed(
RISCOS
)

17 
	#TESTFILE
 "foo-gz"

	)

19 
	#TESTFILE
 "foo.gz"

	)

22 
	#CHECK_ERR
(
”r
, 
msg
) { \

23 ià(
”r
 !ğ
Z_OK
) { \

24 
	`årštf
(
¡d”r
, "% ”rÜ: %d\n", 
msg
, 
”r
); \

25 
	`ex™
(1); \

27 }

	)

29 
z_cÚ¡
 
	gh–lo
[] = "hello, hello!";

34 cÚ¡ 
	gdiùiÚ¬y
[] = "hello";

35 
uLÚg
 
	gdiùId
;

37 
‹¡_deæ©e
 
OF
 ((
By‹
 * 
com´
, 
uLÚg
 
com´L’
));

38 
‹¡_šæ©e
 
OF
 ((
By‹
 * 
com´
, 
uLÚg
 
com´L’
,

39 
By‹
 * 
uncom´
, 
uLÚg
 
uncom´L’
));

40 
‹¡_Ïrge_deæ©e
 
OF
 ((
By‹
 * 
com´
, 
uLÚg
 
com´L’
,

41 
By‹
 * 
uncom´
, 
uLÚg
 
uncom´L’
));

42 
‹¡_Ïrge_šæ©e
 
OF
 ((
By‹
 * 
com´
, 
uLÚg
 
com´L’
,

43 
By‹
 * 
uncom´
, 
uLÚg
 
uncom´L’
));

44 
‹¡_æush
 
OF
 ((
By‹
 * 
com´
, 
uLÚg
 * 
com´L’
));

45 
‹¡_sync
 
OF
 ((
By‹
 * 
com´
, 
uLÚg
 
com´L’
,

46 
By‹
 * 
uncom´
, 
uLÚg
 
uncom´L’
));

47 
‹¡_diù_deæ©e
 
OF
 ((
By‹
 * 
com´
, 
uLÚg
 
com´L’
));

48 
‹¡_diù_šæ©e
 
OF
 ((
By‹
 * 
com´
, 
uLÚg
 
com´L’
,

49 
By‹
 * 
uncom´
, 
uLÚg
 
uncom´L’
));

50 
maš
 
OF
 ((
¬gc
, *
¬gv
[]));

53 #ifdeà
Z_SOLO


55 *
my®loc
 
OF
 ((*, , ));

56 
myä“
 
OF
 ((*, *));

59 
	$my®loc
 (*
q
, 
unsign
 
n
, 
m
)

61 
q
 = 
Z_NULL
;

62  
	`ÿÎoc
 (
n
, 
m
);

63 
	}
}

66 
	$myä“
 (*
q
, *
p
)

68 
q
 = 
Z_NULL
;

69 
	`ä“
 (
p
);

70 
	}
}

72 
®loc_func
 
	gz®loc
 = 
my®loc
;

73 
ä“_func
 
	gzä“
 = 
myä“
;

77 
®loc_func
 
	gz®loc
 = (alloc_func) 0;

78 
ä“_func
 
	gzä“
 = (free_func) 0;

80 
‹¡_com´ess
 
OF
 ((
By‹
 * 
com´
, 
uLÚg
 
com´L’
,

81 
By‹
 * 
uncom´
, 
uLÚg
 
uncom´L’
));

82 
‹¡_gzio
 
OF
 ((cÚ¡ *
âame
, 
By‹
 * 
uncom´
, 
uLÚg
 
uncom´L’
));

88 
	$‹¡_com´ess
 (
By‹
 * 
com´
, 
uLÚg
 
com´L’
, By‹ * 
uncom´
, uLÚg 
uncom´L’
)

90 
”r
;

91 
uLÚg
 
Ën
 = (uLÚgè
	`¡¾’
 (
h–lo
) + 1;

93 
”r
 = 
	`com´ess
 (
com´
, &
com´L’
, (cÚ¡ 
By‹f
 *è
h–lo
, 
Ën
);

94 
	`CHECK_ERR
 (
”r
, "compress");

96 
	`¡rıy
 ((*è
uncom´
, "garbage");

98 
”r
 = 
	`uncom´ess
 (
uncom´
, &
uncom´L’
, 
com´
, 
com´L’
);

99 
	`CHECK_ERR
 (
”r
, "uncompress");

101 ià(
	`¡rcmp
 ((*è
uncom´
, 
h–lo
))

103 
	`årštf
 (
¡d”r
, "bad uncompress\n");

104 
	`ex™
 (1);

108 
	`´štf
 ("uncom´ess(): %s\n", (*è
uncom´
);

110 
	}
}

116 
	$‹¡_gzio
 (cÚ¡ *
âame
, 
By‹
 * 
uncom´
, 
uLÚg
 
uncom´L’
)

119 #ifdeà
NO_GZCOMPRESS


120 
	`årštf
 (
¡d”r
, "NO_GZCOMPRESS -- gz* functions cannot compress\n");

122 
”r
;

123 
Ën
 = (è
	`¡¾’
 (
h–lo
) + 1;

124 
gzFe
 
fe
;

125 
z_off_t
 
pos
;

127 
fe
 = 
	`gzİ’
 (
âame
, "wb");

128 ià(
fe
 =ğ
NULL
)

130 
	`årštf
 (
¡d”r
, "gzopenƒrror\n");

131 
	`ex™
 (1);

133 
	`gzputc
 (
fe
, 'h');

134 ià(
	`gzputs
 (
fe
, "ello") != 4)

136 
	`årštf
 (
¡d”r
, "gzput ”r: %s\n", 
	`gz”rÜ
 (
fe
, &
”r
));

137 
	`ex™
 (1);

139 ià(
	`gz´štf
 (
fe
, ", %s!", "hello") != 8)

141 
	`årštf
 (
¡d”r
, "gz´štà”r: %s\n", 
	`gz”rÜ
 (
fe
, &
”r
));

142 
	`ex™
 (1);

144 
	`gz£ek
 (
fe
, 1L, 
SEEK_CUR
);

145 
	`gzşo£
 (
fe
);

147 
fe
 = 
	`gzİ’
 (
âame
, "rb");

148 ià(
fe
 =ğ
NULL
)

150 
	`årštf
 (
¡d”r
, "gzopenƒrror\n");

151 
	`ex™
 (1);

153 
	`¡rıy
 ((*è
uncom´
, "garbage");

155 ià(
	`gz»ad
 (
fe
, 
uncom´
, (è
uncom´L’
è!ğ
Ën
)

157 
	`årštf
 (
¡d”r
, "gz»adƒ¼: %s\n", 
	`gz”rÜ
 (
fe
, &
”r
));

158 
	`ex™
 (1);

160 ià(
	`¡rcmp
 ((*è
uncom´
, 
h–lo
))

162 
	`årštf
 (
¡d”r
, "bad gz»ad: %s\n", (*è
uncom´
);

163 
	`ex™
 (1);

167 
	`´štf
 ("gz»ad(): %s\n", (*è
uncom´
);

170 
pos
 = 
	`gz£ek
 (
fe
, -8L, 
SEEK_CUR
);

171 ià(
pos
 !ğ6 || 
	`gz‹Î
 (
fe
) !=…os)

173 
	`årštf
 (
¡d”r
, "gzseekƒrror,…os=%ld, gztell=%ld\n",

174 (è
pos
, (è
	`gz‹Î
 (
fe
));

175 
	`ex™
 (1);

178 ià(
	`gzg‘c
 (
fe
) != ' ')

180 
	`årštf
 (
¡d”r
, "gzgetcƒrror\n");

181 
	`ex™
 (1);

184 ià(
	`gzung‘c
 (' ', 
fe
) != ' ')

186 
	`årštf
 (
¡d”r
, "gzungetcƒrror\n");

187 
	`ex™
 (1);

190 
	`gzg‘s
 (
fe
, (*è
uncom´
, (è
uncom´L’
);

191 ià(
	`¡¾’
 ((*è
uncom´
) != 7)

193 
	`årštf
 (
¡d”r
, "gzg‘ ”¸aá” gz£ek: %s\n", 
	`gz”rÜ
 (
fe
, &
”r
));

194 
	`ex™
 (1);

196 ià(
	`¡rcmp
 ((*è
uncom´
, 
h–lo
 + 6))

198 
	`årštf
 (
¡d”r
, "bad gzgets‡fter gzseek\n");

199 
	`ex™
 (1);

203 
	`´štf
 ("gzg‘s(èaá” gz£ek: %s\n", (*è
uncom´
);

206 
	`gzşo£
 (
fe
);

208 
	}
}

216 
	$‹¡_deæ©e
 (
By‹
 * 
com´
, 
uLÚg
 
com´L’
)

218 
z_¡»am
 
c_¡»am
;

219 
”r
;

220 
uLÚg
 
Ën
 = (uLÚgè
	`¡¾’
 (
h–lo
) + 1;

222 
c_¡»am
.
z®loc
 = zalloc;

223 
c_¡»am
.
zä“
 = zfree;

224 
c_¡»am
.
İaque
 = (
voidpf
) 0;

226 
”r
 = 
	`deæ©eIn™
 (&
c_¡»am
, 
Z_DEFAULT_COMPRESSION
);

227 
	`CHECK_ERR
 (
”r
, "deflateInit");

229 
c_¡»am
.
Ãxt_š
 = (
z_cÚ¡
 *è
h–lo
;

230 
c_¡»am
.
Ãxt_out
 = 
com´
;

232 
c_¡»am
.
tÙ®_š
 !ğ
Ën
 && c_¡»am.
tÙ®_out
 < 
com´L’
)

234 
c_¡»am
.
ava_š
 = c_¡»am.
ava_out
 = 1;

235 
”r
 = 
	`deæ©e
 (&
c_¡»am
, 
Z_NO_FLUSH
);

236 
	`CHECK_ERR
 (
”r
, "deflate");

241 
c_¡»am
.
ava_out
 = 1;

242 
”r
 = 
	`deæ©e
 (&
c_¡»am
, 
Z_FINISH
);

243 ià(
”r
 =ğ
Z_STREAM_END
)

245 
	`CHECK_ERR
 (
”r
, "deflate");

248 
”r
 = 
	`deæ©eEnd
 (&
c_¡»am
);

249 
	`CHECK_ERR
 (
”r
, "deflateEnd");

250 
	}
}

256 
	$‹¡_šæ©e
 (
By‹
 * 
com´
, 
uLÚg
 
com´L’
, By‹ * 
uncom´
, uLÚg 
uncom´L’
)

258 
”r
;

259 
z_¡»am
 
d_¡»am
;

261 
	`¡rıy
 ((*è
uncom´
, "garbage");

263 
d_¡»am
.
z®loc
 = zalloc;

264 
d_¡»am
.
zä“
 = zfree;

265 
d_¡»am
.
İaque
 = (
voidpf
) 0;

267 
d_¡»am
.
Ãxt_š
 = 
com´
;

268 
d_¡»am
.
ava_š
 = 0;

269 
d_¡»am
.
Ãxt_out
 = 
uncom´
;

271 
”r
 = 
	`šæ©eIn™
 (&
d_¡»am
);

272 
	`CHECK_ERR
 (
”r
, "inflateInit");

274 
d_¡»am
.
tÙ®_out
 < 
uncom´L’
 && d_¡»am.
tÙ®_š
 < 
com´L’
)

276 
d_¡»am
.
ava_š
 = d_¡»am.
ava_out
 = 1;

277 
”r
 = 
	`šæ©e
 (&
d_¡»am
, 
Z_NO_FLUSH
);

278 ià(
”r
 =ğ
Z_STREAM_END
)

280 
	`CHECK_ERR
 (
”r
, "inflate");

283 
”r
 = 
	`šæ©eEnd
 (&
d_¡»am
);

284 
	`CHECK_ERR
 (
”r
, "inflateEnd");

286 ià(
	`¡rcmp
 ((*è
uncom´
, 
h–lo
))

288 
	`årštf
 (
¡d”r
, "bad inflate\n");

289 
	`ex™
 (1);

293 
	`´štf
 ("šæ©e(): %s\n", (*è
uncom´
);

295 
	}
}

301 
	$‹¡_Ïrge_deæ©e
 (
By‹
 * 
com´
, 
uLÚg
 
com´L’
, By‹ * 
uncom´
,

302 
uLÚg
 
uncom´L’
)

304 
z_¡»am
 
c_¡»am
;

305 
”r
;

307 
c_¡»am
.
z®loc
 = zalloc;

308 
c_¡»am
.
zä“
 = zfree;

309 
c_¡»am
.
İaque
 = (
voidpf
) 0;

311 
”r
 = 
	`deæ©eIn™
 (&
c_¡»am
, 
Z_BEST_SPEED
);

312 
	`CHECK_ERR
 (
”r
, "deflateInit");

314 
c_¡»am
.
Ãxt_out
 = 
com´
;

315 
c_¡»am
.
ava_out
 = (
uIÁ
è
com´L’
;

320 
c_¡»am
.
Ãxt_š
 = 
uncom´
;

321 
c_¡»am
.
ava_š
 = (
uIÁ
è
uncom´L’
;

322 
”r
 = 
	`deæ©e
 (&
c_¡»am
, 
Z_NO_FLUSH
);

323 
	`CHECK_ERR
 (
”r
, "deflate");

324 ià(
c_¡»am
.
ava_š
 != 0)

326 
	`årštf
 (
¡d”r
, "deflate‚ot greedy\n");

327 
	`ex™
 (1);

331 
	`deæ©eP¬ams
 (&
c_¡»am
, 
Z_NO_COMPRESSION
, 
Z_DEFAULT_STRATEGY
);

332 
c_¡»am
.
Ãxt_š
 = 
com´
;

333 
c_¡»am
.
ava_š
 = (
uIÁ
è
com´L’
 / 2;

334 
”r
 = 
	`deæ©e
 (&
c_¡»am
, 
Z_NO_FLUSH
);

335 
	`CHECK_ERR
 (
”r
, "deflate");

338 
	`deæ©eP¬ams
 (&
c_¡»am
, 
Z_BEST_COMPRESSION
, 
Z_FILTERED
);

339 
c_¡»am
.
Ãxt_š
 = 
uncom´
;

340 
c_¡»am
.
ava_š
 = (
uIÁ
è
uncom´L’
;

341 
”r
 = 
	`deæ©e
 (&
c_¡»am
, 
Z_NO_FLUSH
);

342 
	`CHECK_ERR
 (
”r
, "deflate");

344 
”r
 = 
	`deæ©e
 (&
c_¡»am
, 
Z_FINISH
);

345 ià(
”r
 !ğ
Z_STREAM_END
)

347 
	`årštf
 (
¡d”r
, "deflate should„eport Z_STREAM_END\n");

348 
	`ex™
 (1);

350 
”r
 = 
	`deæ©eEnd
 (&
c_¡»am
);

351 
	`CHECK_ERR
 (
”r
, "deflateEnd");

352 
	}
}

358 
	$‹¡_Ïrge_šæ©e
 (
By‹
 * 
com´
, 
uLÚg
 
com´L’
, By‹ * 
uncom´
,

359 
uLÚg
 
uncom´L’
)

361 
”r
;

362 
z_¡»am
 
d_¡»am
;

364 
	`¡rıy
 ((*è
uncom´
, "garbage");

366 
d_¡»am
.
z®loc
 = zalloc;

367 
d_¡»am
.
zä“
 = zfree;

368 
d_¡»am
.
İaque
 = (
voidpf
) 0;

370 
d_¡»am
.
Ãxt_š
 = 
com´
;

371 
d_¡»am
.
ava_š
 = (
uIÁ
è
com´L’
;

373 
”r
 = 
	`šæ©eIn™
 (&
d_¡»am
);

374 
	`CHECK_ERR
 (
”r
, "inflateInit");

378 
d_¡»am
.
Ãxt_out
 = 
uncom´
;

379 
d_¡»am
.
ava_out
 = (
uIÁ
è
uncom´L’
;

380 
”r
 = 
	`šæ©e
 (&
d_¡»am
, 
Z_NO_FLUSH
);

381 ià(
”r
 =ğ
Z_STREAM_END
)

383 
	`CHECK_ERR
 (
”r
, "large inflate");

386 
”r
 = 
	`šæ©eEnd
 (&
d_¡»am
);

387 
	`CHECK_ERR
 (
”r
, "inflateEnd");

389 ià(
d_¡»am
.
tÙ®_out
 !ğ2 * 
uncom´L’
 + 
com´L’
 / 2)

391 
	`årštf
 (
¡d”r
, "bad†¬gšæ©e: %ld\n", 
d_¡»am
.
tÙ®_out
);

392 
	`ex™
 (1);

396 
	`´štf
 ("large_inflate(): OK\n");

398 
	}
}

404 
	$‹¡_æush
 (
By‹
 * 
com´
, 
uLÚg
 * 
com´L’
)

406 
z_¡»am
 
c_¡»am
;

407 
”r
;

408 
uIÁ
 
Ën
 = (uIÁè
	`¡¾’
 (
h–lo
) + 1;

410 
c_¡»am
.
z®loc
 = zalloc;

411 
c_¡»am
.
zä“
 = zfree;

412 
c_¡»am
.
İaque
 = (
voidpf
) 0;

414 
”r
 = 
	`deæ©eIn™
 (&
c_¡»am
, 
Z_DEFAULT_COMPRESSION
);

415 
	`CHECK_ERR
 (
”r
, "deflateInit");

417 
c_¡»am
.
Ãxt_š
 = (
z_cÚ¡
 *è
h–lo
;

418 
c_¡»am
.
Ãxt_out
 = 
com´
;

419 
c_¡»am
.
ava_š
 = 3;

420 
c_¡»am
.
ava_out
 = (
uIÁ
è* 
com´L’
;

421 
”r
 = 
	`deæ©e
 (&
c_¡»am
, 
Z_FULL_FLUSH
);

422 
	`CHECK_ERR
 (
”r
, "deflate");

424 
com´
[3]++;

425 
c_¡»am
.
ava_š
 = 
Ën
 - 3;

427 
”r
 = 
	`deæ©e
 (&
c_¡»am
, 
Z_FINISH
);

428 ià(
”r
 !ğ
Z_STREAM_END
)

430 
	`CHECK_ERR
 (
”r
, "deflate");

432 
”r
 = 
	`deæ©eEnd
 (&
c_¡»am
);

433 
	`CHECK_ERR
 (
”r
, "deflateEnd");

435 *
com´L’
 = 
c_¡»am
.
tÙ®_out
;

436 
	}
}

442 
	$‹¡_sync
 (
By‹
 * 
com´
, 
uLÚg
 
com´L’
, By‹ * 
uncom´
, uLÚg 
uncom´L’
)

444 
”r
;

445 
z_¡»am
 
d_¡»am
;

447 
	`¡rıy
 ((*è
uncom´
, "garbage");

449 
d_¡»am
.
z®loc
 = zalloc;

450 
d_¡»am
.
zä“
 = zfree;

451 
d_¡»am
.
İaque
 = (
voidpf
) 0;

453 
d_¡»am
.
Ãxt_š
 = 
com´
;

454 
d_¡»am
.
ava_š
 = 2;

456 
”r
 = 
	`šæ©eIn™
 (&
d_¡»am
);

457 
	`CHECK_ERR
 (
”r
, "inflateInit");

459 
d_¡»am
.
Ãxt_out
 = 
uncom´
;

460 
d_¡»am
.
ava_out
 = (
uIÁ
è
uncom´L’
;

462 
	`šæ©e
 (&
d_¡»am
, 
Z_NO_FLUSH
);

463 
	`CHECK_ERR
 (
”r
, "inflate");

465 
d_¡»am
.
ava_š
 = (
uIÁ
è
com´L’
 - 2;

466 
”r
 = 
	`šæ©eSync
 (&
d_¡»am
);

467 
	`CHECK_ERR
 (
”r
, "inflateSync");

469 
”r
 = 
	`šæ©e
 (&
d_¡»am
, 
Z_FINISH
);

470 ià(
”r
 !ğ
Z_DATA_ERROR
)

472 
	`årštf
 (
¡d”r
, "inflate should„eport DATA_ERROR\n");

474 
	`ex™
 (1);

476 
”r
 = 
	`šæ©eEnd
 (&
d_¡»am
);

477 
	`CHECK_ERR
 (
”r
, "inflateEnd");

479 
	`´štf
 ("aá” inæ©eSync(): h–%s\n", (*è
uncom´
);

480 
	}
}

486 
	$‹¡_diù_deæ©e
 (
By‹
 * 
com´
, 
uLÚg
 
com´L’
)

488 
z_¡»am
 
c_¡»am
;

489 
”r
;

491 
c_¡»am
.
z®loc
 = zalloc;

492 
c_¡»am
.
zä“
 = zfree;

493 
c_¡»am
.
İaque
 = (
voidpf
) 0;

495 
”r
 = 
	`deæ©eIn™
 (&
c_¡»am
, 
Z_BEST_COMPRESSION
);

496 
	`CHECK_ERR
 (
”r
, "deflateInit");

498 
”r
 = 
	`deæ©eS‘DiùiÚ¬y
 (&
c_¡»am
,

499 (cÚ¡ 
By‹f
 *è
diùiÚ¬y
,

500 (è (
diùiÚ¬y
));

501 
	`CHECK_ERR
 (
”r
, "deflateSetDictionary");

503 
diùId
 = 
c_¡»am
.
adËr
;

504 
c_¡»am
.
Ãxt_out
 = 
com´
;

505 
c_¡»am
.
ava_out
 = (
uIÁ
è
com´L’
;

507 
c_¡»am
.
Ãxt_š
 = (
z_cÚ¡
 *è
h–lo
;

508 
c_¡»am
.
ava_š
 = (
uIÁ
è
	`¡¾’
 (
h–lo
) + 1;

510 
”r
 = 
	`deæ©e
 (&
c_¡»am
, 
Z_FINISH
);

511 ià(
”r
 !ğ
Z_STREAM_END
)

513 
	`årštf
 (
¡d”r
, "deflate should„eport Z_STREAM_END\n");

514 
	`ex™
 (1);

516 
”r
 = 
	`deæ©eEnd
 (&
c_¡»am
);

517 
	`CHECK_ERR
 (
”r
, "deflateEnd");

518 
	}
}

524 
	$‹¡_diù_šæ©e
 (
By‹
 * 
com´
, 
uLÚg
 
com´L’
, By‹ * 
uncom´
,

525 
uLÚg
 
uncom´L’
)

527 
”r
;

528 
z_¡»am
 
d_¡»am
;

530 
	`¡rıy
 ((*è
uncom´
, "garbage");

532 
d_¡»am
.
z®loc
 = zalloc;

533 
d_¡»am
.
zä“
 = zfree;

534 
d_¡»am
.
İaque
 = (
voidpf
) 0;

536 
d_¡»am
.
Ãxt_š
 = 
com´
;

537 
d_¡»am
.
ava_š
 = (
uIÁ
è
com´L’
;

539 
”r
 = 
	`šæ©eIn™
 (&
d_¡»am
);

540 
	`CHECK_ERR
 (
”r
, "inflateInit");

542 
d_¡»am
.
Ãxt_out
 = 
uncom´
;

543 
d_¡»am
.
ava_out
 = (
uIÁ
è
uncom´L’
;

547 
”r
 = 
	`šæ©e
 (&
d_¡»am
, 
Z_NO_FLUSH
);

548 ià(
”r
 =ğ
Z_STREAM_END
)

550 ià(
”r
 =ğ
Z_NEED_DICT
)

552 ià(
d_¡»am
.
adËr
 !ğ
diùId
)

554 
	`årštf
 (
¡d”r
, "unexpected dictionary");

555 
	`ex™
 (1);

557 
”r
 = 
	`šæ©eS‘DiùiÚ¬y
 (&
d_¡»am
, (cÚ¡ 
By‹f
 *è
diùiÚ¬y
,

558 (è (
diùiÚ¬y
));

560 
	`CHECK_ERR
 (
”r
, "inflate with dict");

563 
”r
 = 
	`šæ©eEnd
 (&
d_¡»am
);

564 
	`CHECK_ERR
 (
”r
, "inflateEnd");

566 ià(
	`¡rcmp
 ((*è
uncom´
, 
h–lo
))

568 
	`årštf
 (
¡d”r
, "bad inflate with dict\n");

569 
	`ex™
 (1);

573 
	`´štf
 ("šæ©w™h diùiÚ¬y: %s\n", (*è
uncom´
);

575 
	}
}

582 
	$maš
 (
¬gc
, *
¬gv
[])

584 
By‹
 *
com´
, *
uncom´
;

585 
uLÚg
 
com´L’
 = 10000 *  ();

586 
uLÚg
 
uncom´L’
 = 
com´L’
;

587 cÚ¡ *
myV”siÚ
 = 
ZLIB_VERSION
;

589 ià(
	`zlibV”siÚ
 ()[0] !ğ
myV”siÚ
[0])

591 
	`årštf
 (
¡d”r
, "incompatible zlib version\n");

592 
	`ex™
 (1);

595 ià(
	`¡rcmp
 (
	`zlibV”siÚ
 (), 
ZLIB_VERSION
) != 0)

597 
	`årštf
 (
¡d”r
, "warning: different zlib version\n");

600 
	`´štf
 ("zlib version %s = 0x%04x, compile flags = 0x%lx\n",

601 
ZLIB_VERSION
, 
ZLIB_VERNUM
, 
	`zlibCompeFÏgs
 ());

603 
com´
 = (
By‹
 *è
	`ÿÎoc
 ((
uIÁ
è
com´L’
, 1);

604 
uncom´
 = (
By‹
 *è
	`ÿÎoc
 ((
uIÁ
è
uncom´L’
, 1);

608 ià(
com´
 =ğ
Z_NULL
 || 
uncom´
 == Z_NULL)

610 
	`´štf
 ("out of memory\n");

611 
	`ex™
 (1);

614 #ifdeà
Z_SOLO


615 
¬gc
 = 
	`¡¾’
 (
¬gv
[0]);

617 
	`‹¡_com´ess
 (
com´
, 
com´L’
, 
uncom´
, 
uncom´L’
);

619 
	`‹¡_gzio
 ((
¬gc
 > 1 ? 
¬gv
[1] : 
TESTFILE
), 
uncom´
, 
uncom´L’
);

622 
	`‹¡_deæ©e
 (
com´
, 
com´L’
);

623 
	`‹¡_šæ©e
 (
com´
, 
com´L’
, 
uncom´
, 
uncom´L’
);

625 
	`‹¡_Ïrge_deæ©e
 (
com´
, 
com´L’
, 
uncom´
, 
uncom´L’
);

626 
	`‹¡_Ïrge_šæ©e
 (
com´
, 
com´L’
, 
uncom´
, 
uncom´L’
);

628 
	`‹¡_æush
 (
com´
, &
com´L’
);

629 
	`‹¡_sync
 (
com´
, 
com´L’
, 
uncom´
, 
uncom´L’
);

630 
com´L’
 = 
uncom´L’
;

632 
	`‹¡_diù_deæ©e
 (
com´
, 
com´L’
);

633 
	`‹¡_diù_šæ©e
 (
com´
, 
com´L’
, 
uncom´
, 
uncom´L’
);

635 
	`ä“
 (
com´
);

636 
	`ä“
 (
uncom´
);

639 
	}
}

	@test/infcover.c

8 
	~<¡dio.h
>

9 
	~<¡dlib.h
>

10 
	~<¡ršg.h
>

11 
	~<as£¹.h
>

12 
	~"zlib.h
"

16 
	#ZLIB_INTERNAL


	)

17 
	~"šá»es.h
"

18 
	~"šæ©e.h
"

20 
	#loÿl
 

	)

56 
	smem_™em


58 *
	m±r
;

59 
size_t
 
	msize
;

60 
mem_™em
 *
	mÃxt
;

64 
	smem_zÚe


66 
mem_™em
 *
	mfœ¡
;

67 
size_t
 
	mtÙ®
, 
	mhighw©”
;

68 
size_t
 
	mlim™
;

69 
	mnÙlifo
, 
	mrogue
;

73 
loÿl
 *

74 
	$mem_®loc
 (*
mem
, 
couÁ
, 
size
)

76 *
±r
;

77 
mem_™em
 *
™em
;

78 
mem_zÚe
 *
zÚe
 = 
mem
;

79 
size_t
 
Ën
 = 
couÁ
 * (size_tè
size
;

82 ià(
zÚe
 =ğ
NULL
 || (zÚe->
lim™
 && zÚe->
tÙ®
 + 
Ën
 > zone->limit))

83  
NULL
;

87 
±r
 = 
	`m®loc
 (
Ën
);

88 ià(
±r
 =ğ
NULL
)

89  
NULL
;

90 
	`mem£t
 (
±r
, 0xa5, 
Ën
);

93 
™em
 = 
	`m®loc
 ( (
mem_™em
));

94 ià(
™em
 =ğ
NULL
)

96 
	`ä“
 (
±r
);

97  
NULL
;

99 
™em
->
±r
 =…tr;

100 
™em
->
size
 = 
Ën
;

103 
™em
->
Ãxt
 = 
zÚe
->
fœ¡
;

104 
zÚe
->
fœ¡
 = 
™em
;

107 
zÚe
->
tÙ®
 +ğ
™em
->
size
;

108 ià(
zÚe
->
tÙ®
 > zÚe->
highw©”
)

109 
zÚe
->
highw©”
 = zÚe->
tÙ®
;

112  
±r
;

113 
	}
}

116 
loÿl
 

117 
	$mem_ä“
 (*
mem
, *
±r
)

119 
mem_™em
 *
™em
, *
Ãxt
;

120 
mem_zÚe
 *
zÚe
 = 
mem
;

123 ià(
zÚe
 =ğ
NULL
)

125 
	`ä“
 (
±r
);

131 
Ãxt
 = 
zÚe
->
fœ¡
;

132 ià(
Ãxt
)

134 ià(
Ãxt
->
±r
 ==…tr)

135 
zÚe
->
fœ¡
 = 
Ãxt
->next;

140 
™em
 = 
Ãxt
;

141 
Ãxt
 = 
™em
->next;

143 
Ãxt
 !ğ
NULL
 &&‚ext->
±r
 !=…tr);

144 ià(
Ãxt
)

146 
™em
->
Ãxt
 =‚ext->next;

147 
zÚe
->
nÙlifo
++;

154 ià(
Ãxt
)

156 
zÚe
->
tÙ®
 -ğ
Ãxt
->
size
;

157 
	`ä“
 (
Ãxt
);

162 
zÚe
->
rogue
++;

165 
	`ä“
 (
±r
);

166 
	}
}

170 
loÿl
 

171 
	$mem_£tup
 (
z_¡»am
 * 
¡rm
)

173 
mem_zÚe
 *
zÚe
;

175 
zÚe
 = 
	`m®loc
 ( (
mem_zÚe
));

176 
	`as£¹
 (
zÚe
 !ğ
NULL
);

177 
zÚe
->
fœ¡
 = 
NULL
;

178 
zÚe
->
tÙ®
 = 0;

179 
zÚe
->
highw©”
 = 0;

180 
zÚe
->
lim™
 = 0;

181 
zÚe
->
nÙlifo
 = 0;

182 
zÚe
->
rogue
 = 0;

183 
¡rm
->
İaque
 = 
zÚe
;

184 
¡rm
->
z®loc
 = 
mem_®loc
;

185 
¡rm
->
zä“
 = 
mem_ä“
;

186 
	}
}

189 
loÿl
 

190 
	$mem_lim™
 (
z_¡»am
 * 
¡rm
, 
size_t
 
lim™
)

192 
mem_zÚe
 *
zÚe
 = 
¡rm
->
İaque
;

194 
zÚe
->
lim™
 =†imit;

195 
	}
}

198 
loÿl
 

199 
	$mem_u£d
 (
z_¡»am
 * 
¡rm
, *
´efix
)

201 
mem_zÚe
 *
zÚe
 = 
¡rm
->
İaque
;

203 
	`årštf
 (
¡d”r
, "%s: %lu‡Îoÿ‹d\n", 
´efix
, 
zÚe
->
tÙ®
);

204 
	}
}

207 
loÿl
 

208 
	$mem_high
 (
z_¡»am
 * 
¡rm
, *
´efix
)

210 
mem_zÚe
 *
zÚe
 = 
¡rm
->
İaque
;

212 
	`årštf
 (
¡d”r
, "%s: %lu high w©” m¬k\n", 
´efix
, 
zÚe
->
highw©”
);

213 
	}
}

216 
loÿl
 

217 
	$mem_dÚe
 (
z_¡»am
 * 
¡rm
, *
´efix
)

219 
couÁ
 = 0;

220 
mem_™em
 *
™em
, *
Ãxt
;

221 
mem_zÚe
 *
zÚe
 = 
¡rm
->
İaque
;

224 
	`mem_high
 (
¡rm
, 
´efix
);

227 
™em
 = 
zÚe
->
fœ¡
;

228 
™em
 !ğ
NULL
)

230 
	`ä“
 (
™em
->
±r
);

231 
Ãxt
 = 
™em
->next;

232 
	`ä“
 (
™em
);

233 
™em
 = 
Ãxt
;

234 
couÁ
++;

238 ià(
couÁ
 || 
zÚe
->
tÙ®
)

239 
	`årštf
 (
¡d”r
, "** %s: %lu bytes in %d blocks‚ot freed\n",

240 
´efix
, 
zÚe
->
tÙ®
, 
couÁ
);

241 ià(
zÚe
->
nÙlifo
)

242 
	`årštf
 (
¡d”r
, "** %s: %d f»e nÙ LIFO\n", 
´efix
, 
zÚe
->
nÙlifo
);

243 ià(
zÚe
->
rogue
)

244 
	`årštf
 (
¡d”r
, "** %s: %d f»e nÙ„ecognized\n", 
´efix
, 
zÚe
->
rogue
);

247 
	`ä“
 (
zÚe
);

248 
¡rm
->
İaque
 = 
Z_NULL
;

249 
¡rm
->
z®loc
 = 
Z_NULL
;

250 
¡rm
->
zä“
 = 
Z_NULL
;

251 
	}
}

262 
loÿl
 *

263 
	$h2b
 (cÚ¡ *
hex
, *
Ën
)

265 *
š
;

266 
Ãxt
, 
v®
;

268 
š
 = 
	`m®loc
 ((
	`¡¾’
 (
hex
) + 1) >> 1);

269 ià(
š
 =ğ
NULL
)

270  
NULL
;

271 
Ãxt
 = 0;

272 
v®
 = 1;

275 ià(*
hex
 >= '0' && *hex <= '9')

276 
v®
 = (v® << 4è+ *
hex
 - '0';

277 ià(*
hex
 >= 'A' && *hex <= 'F')

278 
v®
 = (v® << 4è+ *
hex
 - 'A' + 10;

279 ià(*
hex
 >= 'a' && *hex <= 'f')

280 
v®
 = (v® << 4è+ *
hex
 - 'a' + 10;

281 ià(
v®
 != 1 && val < 32)

282 
v®
 += 240;

283 ià(
v®
 > 255)

285 
š
[
Ãxt
++] = 
v®
 & 0xff;

286 
v®
 = 1;

289 *
hex
++);

290 ià(
Ën
 !ğ
NULL
)

291 *
Ën
 = 
Ãxt
;

292 
š
 = 
	`»®locf
 (š, 
Ãxt
);

293  
š
;

294 
	}
}

305 
loÿl
 

306 
	$šf
 (*
hex
, *
wh©
, 
¡•
, 
wš
, 
Ën
, 
”r
)

308 
»t
;

309 
have
;

310 *
š
, *
out
;

311 
z_¡»am
 
¡rm
, 
cİy
;

312 
gz_h—d”
 
h—d
;

314 
	`mem_£tup
 (&
¡rm
);

315 
¡rm
.
ava_š
 = 0;

316 
¡rm
.
Ãxt_š
 = 
Z_NULL
;

317 
»t
 = 
	`šæ©eIn™2
 (&
¡rm
, 
wš
);

318 ià(
»t
 !ğ
Z_OK
)

320 
	`mem_dÚe
 (&
¡rm
, 
wh©
);

323 
out
 = 
	`m®loc
 (
Ën
);

324 
	`as£¹
 (
out
 !ğ
NULL
);

325 ià(
wš
 == 47)

327 
h—d
.
exŒa
 = 
out
;

328 
h—d
.
exŒa_max
 = 
Ën
;

329 
h—d
.
Çme
 = 
out
;

330 
h—d
.
Çme_max
 = 
Ën
;

331 
h—d
.
comm’t
 = 
out
;

332 
h—d
.
comm_max
 = 
Ën
;

333 
»t
 = 
	`šæ©eG‘H—d”
 (&
¡rm
, &
h—d
);

334 
	`as£¹
 (
»t
 =ğ
Z_OK
);

336 
š
 = 
	`h2b
 (
hex
, &
have
);

337 
	`as£¹
 (
š
 !ğ
NULL
);

338 ià(
¡•
 =ğ0 || s‹°> 
have
)

339 
¡•
 = 
have
;

340 
¡rm
.
ava_š
 = 
¡•
;

341 
have
 -ğ
¡•
;

342 
¡rm
.
Ãxt_š
 = 
š
;

345 
¡rm
.
ava_out
 = 
Ën
;

346 
¡rm
.
Ãxt_out
 = 
out
;

347 
»t
 = 
	`šæ©e
 (&
¡rm
, 
Z_NO_FLUSH
);

348 
	`as£¹
 (
”r
 =ğ9 || 
»t
 ==ƒrr);

349 ià(
»t
 !ğ
Z_OK
 &&„‘ !ğ
Z_BUF_ERROR
 &&„‘ !ğ
Z_NEED_DICT
)

351 ià(
»t
 =ğ
Z_NEED_DICT
)

353 
»t
 = 
	`šæ©eS‘DiùiÚ¬y
 (&
¡rm
, 
š
, 1);

354 
	`as£¹
 (
»t
 =ğ
Z_DATA_ERROR
);

355 
	`mem_lim™
 (&
¡rm
, 1);

356 
»t
 = 
	`šæ©eS‘DiùiÚ¬y
 (&
¡rm
, 
out
, 0);

357 
	`as£¹
 (
»t
 =ğ
Z_MEM_ERROR
);

358 
	`mem_lim™
 (&
¡rm
, 0);

359 ((
šæ©e_¡©e
 *è
¡rm
.
¡©e
)->
mode
 = 
DICT
;

360 
»t
 = 
	`šæ©eS‘DiùiÚ¬y
 (&
¡rm
, 
out
, 0);

361 
	`as£¹
 (
»t
 =ğ
Z_OK
);

362 
»t
 = 
	`šæ©e
 (&
¡rm
, 
Z_NO_FLUSH
);

363 
	`as£¹
 (
»t
 =ğ
Z_BUF_ERROR
);

365 
»t
 = 
	`šæ©eCİy
 (&
cİy
, &
¡rm
);

366 
	`as£¹
 (
»t
 =ğ
Z_OK
);

367 
»t
 = 
	`šæ©eEnd
 (&
cİy
);

368 
	`as£¹
 (
»t
 =ğ
Z_OK
);

369 
”r
 = 9;

370 
have
 +ğ
¡rm
.
ava_š
;

371 
¡rm
.
ava_š
 = 
¡•
 > 
have
 ? have : step;

372 
have
 -ğ
¡rm
.
ava_š
;

374 
¡rm
.
ava_š
);

375 
	`ä“
 (
š
);

376 
	`ä“
 (
out
);

377 
»t
 = 
	`šæ©eRe£t2
 (&
¡rm
, -8);

378 
	`as£¹
 (
»t
 =ğ
Z_OK
);

379 
»t
 = 
	`šæ©eEnd
 (&
¡rm
);

380 
	`as£¹
 (
»t
 =ğ
Z_OK
);

381 
	`mem_dÚe
 (&
¡rm
, 
wh©
);

382 
	}
}

385 
loÿl
 

386 
	$cov”_suµÜt
 ()

388 
»t
;

389 
z_¡»am
 
¡rm
;

391 
	`mem_£tup
 (&
¡rm
);

392 
¡rm
.
ava_š
 = 0;

393 
¡rm
.
Ãxt_š
 = 
Z_NULL
;

394 
»t
 = 
	`šæ©eIn™
 (&
¡rm
);

395 
	`as£¹
 (
»t
 =ğ
Z_OK
);

396 
	`mem_u£d
 (&
¡rm
, "inflate init");

397 
»t
 = 
	`šæ©ePrime
 (&
¡rm
, 5, 31);

398 
	`as£¹
 (
»t
 =ğ
Z_OK
);

399 
»t
 = 
	`šæ©ePrime
 (&
¡rm
, -1, 0);

400 
	`as£¹
 (
»t
 =ğ
Z_OK
);

401 
»t
 = 
	`šæ©eS‘DiùiÚ¬y
 (&
¡rm
, 
Z_NULL
, 0);

402 
	`as£¹
 (
»t
 =ğ
Z_STREAM_ERROR
);

403 
»t
 = 
	`šæ©eEnd
 (&
¡rm
);

404 
	`as£¹
 (
»t
 =ğ
Z_OK
);

405 
	`mem_dÚe
 (&
¡rm
, "prime");

407 
	`šf
 ("63 0", "fÜû wšdow‡ÎoÿtiÚ", 0, -15, 1, 
Z_OK
);

408 
	`šf
 ("63 18 5", "fÜû wšdow„•Ïûm’t", 0, -8, 259, 
Z_OK
);

409 
	`šf
 ("63 18 68 30 d0 0 0", "fÜû s¶™ wšdow upd©e", 4, -8, 259, 
Z_OK
);

410 
	`šf
 ("3 0", "u£ fixed blocks", 0, -15, 1, 
Z_STREAM_END
);

411 
	`šf
 ("", "bad wšdow size", 0, 1, 0, 
Z_STREAM_ERROR
);

413 
	`mem_£tup
 (&
¡rm
);

414 
¡rm
.
ava_š
 = 0;

415 
¡rm
.
Ãxt_š
 = 
Z_NULL
;

416 
»t
 = 
	`šæ©eIn™_
 (&
¡rm
, 
ZLIB_VERSION
 - 1, (è (
z_¡»am
));

417 
	`as£¹
 (
»t
 =ğ
Z_VERSION_ERROR
);

418 
	`mem_dÚe
 (&
¡rm
, "wrong version");

420 
¡rm
.
ava_š
 = 0;

421 
¡rm
.
Ãxt_š
 = 
Z_NULL
;

422 
»t
 = 
	`šæ©eIn™
 (&
¡rm
);

423 
	`as£¹
 (
»t
 =ğ
Z_OK
);

424 
»t
 = 
	`šæ©eEnd
 (&
¡rm
);

425 
	`as£¹
 (
»t
 =ğ
Z_OK
);

426 
	`åuts
 ("šæ©but-š memÜy„outšes\n", 
¡d”r
);

427 
	}
}

430 
loÿl
 

431 
	$cov”_w¿p
 ()

433 
»t
;

434 
z_¡»am
 
¡rm
, 
cİy
;

435 
diù
[257];

437 
»t
 = 
	`šæ©e
 (
Z_NULL
, 0);

438 
	`as£¹
 (
»t
 =ğ
Z_STREAM_ERROR
);

439 
»t
 = 
	`šæ©eEnd
 (
Z_NULL
);

440 
	`as£¹
 (
»t
 =ğ
Z_STREAM_ERROR
);

441 
»t
 = 
	`šæ©eCİy
 (
Z_NULL
, Z_NULL);

442 
	`as£¹
 (
»t
 =ğ
Z_STREAM_ERROR
);

443 
	`åuts
 ("šæ©bad…¬am‘”s\n", 
¡d”r
);

445 
	`šf
 ("1à8b 0 0", "bad gz m‘hod", 0, 31, 0, 
Z_DATA_ERROR
);

446 
	`šf
 ("1à8b 8 80", "bad gz fÏgs", 0, 31, 0, 
Z_DATA_ERROR
);

447 
	`šf
 ("77 85", "bad zlib m‘hod", 0, 15, 0, 
Z_DATA_ERROR
);

448 
	`šf
 ("8 99", "£ˆwšdow sizäom h—d”", 0, 0, 0, 
Z_OK
);

449 
	`šf
 ("78 9c", "bad zlib wšdow size", 0, 8, 0, 
Z_DATA_ERROR
);

450 
	`šf
 ("78 9ø63 0 0 0 1 0 1", "check‡dËr32", 0, 15, 1, 
Z_STREAM_END
);

451 
	`šf
 ("1f 8b 8 1e 0 0 0 0 0 0 1 0 0 0 0 0 0", "bad header crc", 0, 47, 1,

452 
Z_DATA_ERROR
);

453 
	`šf
 ("1f 8b 8 2 0 0 0 0 0 0 1d 26 3 0 0 0 0 0 0 0 0 0", "check gzip†ength",

454 0, 47, 0, 
Z_STREAM_END
);

455 
	`šf
 ("78 90", "bad zlib h—d” check", 0, 47, 0, 
Z_DATA_ERROR
);

456 
	`šf
 ("8 b8 0 0 0 1", "Ãed diùiÚ¬y", 0, 8, 0, 
Z_NEED_DICT
);

457 
	`šf
 ("78 9ø63 0", "compu‹‡dËr32", 0, 15, 1, 
Z_OK
);

459 
	`mem_£tup
 (&
¡rm
);

460 
¡rm
.
ava_š
 = 0;

461 
¡rm
.
Ãxt_š
 = 
Z_NULL
;

462 
»t
 = 
	`šæ©eIn™2
 (&
¡rm
, -8);

463 
¡rm
.
ava_š
 = 2;

464 
¡rm
.
Ãxt_š
 = (*) "\x63";

465 
¡rm
.
ava_out
 = 1;

466 
¡rm
.
Ãxt_out
 = (*è&
»t
;

467 
	`mem_lim™
 (&
¡rm
, 1);

468 
»t
 = 
	`šæ©e
 (&
¡rm
, 
Z_NO_FLUSH
);

469 
	`as£¹
 (
»t
 =ğ
Z_MEM_ERROR
);

470 
»t
 = 
	`šæ©e
 (&
¡rm
, 
Z_NO_FLUSH
);

471 
	`as£¹
 (
»t
 =ğ
Z_MEM_ERROR
);

472 
	`mem_lim™
 (&
¡rm
, 0);

473 
	`mem£t
 (
diù
, 0, 257);

474 
»t
 = 
	`šæ©eS‘DiùiÚ¬y
 (&
¡rm
, 
diù
, 257);

475 
	`as£¹
 (
»t
 =ğ
Z_OK
);

476 
	`mem_lim™
 (&
¡rm
, ( (
šæ©e_¡©e
) << 1) + 256);

477 
»t
 = 
	`šæ©ePrime
 (&
¡rm
, 16, 0);

478 
	`as£¹
 (
»t
 =ğ
Z_OK
);

479 
¡rm
.
ava_š
 = 2;

480 
¡rm
.
Ãxt_š
 = (*) "\x80";

481 
»t
 = 
	`šæ©eSync
 (&
¡rm
);

482 
	`as£¹
 (
»t
 =ğ
Z_DATA_ERROR
);

483 
»t
 = 
	`šæ©e
 (&
¡rm
, 
Z_NO_FLUSH
);

484 
	`as£¹
 (
»t
 =ğ
Z_STREAM_ERROR
);

485 
¡rm
.
ava_š
 = 4;

486 
¡rm
.
Ãxt_š
 = (*) "\0\0\xff\xff";

487 
»t
 = 
	`šæ©eSync
 (&
¡rm
);

488 
	`as£¹
 (
»t
 =ğ
Z_OK
);

489 (è
	`šæ©eSyncPošt
 (&
¡rm
);

490 
»t
 = 
	`šæ©eCİy
 (&
cİy
, &
¡rm
);

491 
	`as£¹
 (
»t
 =ğ
Z_MEM_ERROR
);

492 
	`mem_lim™
 (&
¡rm
, 0);

493 
»t
 = 
	`šæ©eUnd”mše
 (&
¡rm
, 1);

494 
	`as£¹
 (
»t
 =ğ
Z_DATA_ERROR
);

495 (è
	`šæ©eM¬k
 (&
¡rm
);

496 
»t
 = 
	`šæ©eEnd
 (&
¡rm
);

497 
	`as£¹
 (
»t
 =ğ
Z_OK
);

498 
	`mem_dÚe
 (&
¡rm
, "miscellaneous, force memoryƒrrors");

499 
	}
}

502 
loÿl
 

503 
	$puÎ
 (*
desc
, **
buf
)

505 
Ãxt
 = 0;

506 
d©
[] = { 0x63, 0, 2, 0 };

507 
šæ©e_¡©e
 *
¡©e
;

509 ià(
desc
 =ğ
Z_NULL
)

511 
Ãxt
 = 0;

514 
¡©e
 = (*è((
z_¡»am
 *è
desc
)->state;

515 ià(
¡©e
 !ğ
Z_NULL
)

516 
¡©e
->
mode
 = 
SYNC
;

517  
Ãxt
 <  (
d©
è? (*
buf
 = dat +‚ext++, 1) : 0;

518 
	}
}

520 
loÿl
 

521 
	$push
 (*
desc
, *
buf
, 
Ën
)

523 
buf
 +ğ
Ën
;

524  
desc
 !ğ
Z_NULL
;

525 
	}
}

528 
loÿl
 

529 
	$cov”_back
 ()

531 
»t
;

532 
z_¡»am
 
¡rm
;

533 
wš
[32768];

535 
»t
 = 
	`šæ©eBackIn™_
 (
Z_NULL
, 0, 
wš
, 0, 0);

536 
	`as£¹
 (
»t
 =ğ
Z_VERSION_ERROR
);

537 
»t
 = 
	`šæ©eBackIn™
 (
Z_NULL
, 0, 
wš
);

538 
	`as£¹
 (
»t
 =ğ
Z_STREAM_ERROR
);

539 
»t
 = 
	`šæ©eBack
 (
Z_NULL
, Z_NULL, Z_NULL, Z_NULL, Z_NULL);

540 
	`as£¹
 (
»t
 =ğ
Z_STREAM_ERROR
);

541 
»t
 = 
	`šæ©eBackEnd
 (
Z_NULL
);

542 
	`as£¹
 (
»t
 =ğ
Z_STREAM_ERROR
);

543 
	`åuts
 ("šæ©eBack bad…¬am‘”s\n", 
¡d”r
);

545 
	`mem_£tup
 (&
¡rm
);

546 
»t
 = 
	`šæ©eBackIn™
 (&
¡rm
, 15, 
wš
);

547 
	`as£¹
 (
»t
 =ğ
Z_OK
);

548 
¡rm
.
ava_š
 = 2;

549 
¡rm
.
Ãxt_š
 = (*) "\x03";

550 
»t
 = 
	`šæ©eBack
 (&
¡rm
, 
puÎ
, 
Z_NULL
, 
push
, Z_NULL);

551 
	`as£¹
 (
»t
 =ğ
Z_STREAM_END
);

553 
¡rm
.
ava_š
 = 3;

554 
¡rm
.
Ãxt_š
 = (*) "\x63\x00";

555 
»t
 = 
	`šæ©eBack
 (&
¡rm
, 
puÎ
, 
Z_NULL
, 
push
, &strm);

556 
	`as£¹
 (
»t
 =ğ
Z_BUF_ERROR
);

558 
»t
 = 
	`šæ©eBack
 (&
¡rm
, 
puÎ
, &¡rm, 
push
, 
Z_NULL
);

559 
	`as£¹
 (
»t
 =ğ
Z_STREAM_ERROR
);

560 
»t
 = 
	`šæ©eBackEnd
 (&
¡rm
);

561 
	`as£¹
 (
»t
 =ğ
Z_OK
);

562 
	`mem_dÚe
 (&
¡rm
, "inflateBack bad state");

564 
»t
 = 
	`šæ©eBackIn™
 (&
¡rm
, 15, 
wš
);

565 
	`as£¹
 (
»t
 =ğ
Z_OK
);

566 
»t
 = 
	`šæ©eBackEnd
 (&
¡rm
);

567 
	`as£¹
 (
»t
 =ğ
Z_OK
);

568 
	`åuts
 ("šæ©eBack but-š memÜy„outšes\n", 
¡d”r
);

569 
	}
}

572 
loÿl
 

573 
	$Œy
 (*
hex
, *
id
, 
”r
)

575 
»t
;

576 
Ën
, 
size
;

577 *
š
, *
out
, *
wš
;

578 *
´efix
;

579 
z_¡»am
 
¡rm
;

582 
š
 = 
	`h2b
 (
hex
, &
Ën
);

583 
	`as£¹
 (
š
 !ğ
NULL
);

586 
size
 = 
Ën
 << 3;

587 
out
 = 
	`m®loc
 (
size
);

588 
	`as£¹
 (
out
 !ğ
NULL
);

589 
wš
 = 
	`m®loc
 (32768);

590 
	`as£¹
 (
wš
 !ğ
NULL
);

591 
´efix
 = 
	`m®loc
 (
	`¡¾’
 (
id
) + 6);

592 
	`as£¹
 (
´efix
 !ğ
NULL
);

595 
	`¡rıy
 (
´efix
, 
id
);

596 
	`¡rÿt
 (
´efix
, "-late");

597 
	`mem_£tup
 (&
¡rm
);

598 
¡rm
.
ava_š
 = 0;

599 
¡rm
.
Ãxt_š
 = 
Z_NULL
;

600 
»t
 = 
	`šæ©eIn™2
 (&
¡rm
, 
”r
 < 0 ? 47 : -15);

601 
	`as£¹
 (
»t
 =ğ
Z_OK
);

602 
¡rm
.
ava_š
 = 
Ën
;

603 
¡rm
.
Ãxt_š
 = 
š
;

606 
¡rm
.
ava_out
 = 
size
;

607 
¡rm
.
Ãxt_out
 = 
out
;

608 
»t
 = 
	`šæ©e
 (&
¡rm
, 
Z_TREES
);

609 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
 &&„‘ !ğ
Z_MEM_ERROR
);

610 ià(
»t
 =ğ
Z_DATA_ERROR
 ||„‘ =ğ
Z_NEED_DICT
)

613 
¡rm
.
ava_š
 || sŒm.
ava_out
 == 0);

614 ià(
”r
)

616 
	`as£¹
 (
»t
 =ğ
Z_DATA_ERROR
);

617 
	`as£¹
 (
	`¡rcmp
 (
id
, 
¡rm
.
msg
) == 0);

619 
	`šæ©eEnd
 (&
¡rm
);

620 
	`mem_dÚe
 (&
¡rm
, 
´efix
);

623 ià(
”r
 >= 0)

625 
	`¡rıy
 (
´efix
, 
id
);

626 
	`¡rÿt
 (
´efix
, "-back");

627 
	`mem_£tup
 (&
¡rm
);

628 
»t
 = 
	`šæ©eBackIn™
 (&
¡rm
, 15, 
wš
);

629 
	`as£¹
 (
»t
 =ğ
Z_OK
);

630 
¡rm
.
ava_š
 = 
Ën
;

631 
¡rm
.
Ãxt_š
 = 
š
;

632 
»t
 = 
	`šæ©eBack
 (&
¡rm
, 
puÎ
, 
Z_NULL
, 
push
, Z_NULL);

633 
	`as£¹
 (
»t
 !ğ
Z_STREAM_ERROR
);

634 ià(
”r
)

636 
	`as£¹
 (
»t
 =ğ
Z_DATA_ERROR
);

637 
	`as£¹
 (
	`¡rcmp
 (
id
, 
¡rm
.
msg
) == 0);

639 
	`šæ©eBackEnd
 (&
¡rm
);

640 
	`mem_dÚe
 (&
¡rm
, 
´efix
);

644 
	`ä“
 (
´efix
);

645 
	`ä“
 (
wš
);

646 
	`ä“
 (
out
);

647 
	`ä“
 (
š
);

648  
»t
;

649 
	}
}

652 
loÿl
 

653 
	$cov”_šæ©e
 ()

655 
	`Œy
 ("0 0 0 0 0", "invalid stored block†engths", 1);

656 
	`Œy
 ("3 0", "fixed", 0);

657 
	`Œy
 ("6", "invalid blockype", 1);

658 
	`Œy
 ("1 1 0 fe ff 0", "stored", 0);

659 
	`Œy
 ("fc 0 0", "too many†ength or distance symbols", 1);

660 
	`Œy
 ("4 0 fe ff", "invalid code†engths set", 1);

661 
	`Œy
 ("4 0 24 49 0", "invalid bit†ength„epeat", 1);

662 
	`Œy
 ("4 0 24ƒ9 ff ff", "invalid bit†ength„epeat", 1);

663 
	`Œy
 ("4 0 24ƒ9 ff 6d", "invalid code -- missingƒnd-of-block", 1);

664 
	`Œy
 ("4 80 49 92 24 49 92 24 71 ff ff 93 11 0",

666 
	`Œy
 ("4 80 49 92 24 49 92 24 f b4 ff ff c3 84", "invalid distances set", 1);

667 
	`Œy
 ("4 c0 81 8 0 0 0 0 20 7fƒb b 0 0", "invalid†iteral/length code", 1);

668 
	`Œy
 ("2 7e ff ff", "invalid distance code", 1);

669 
	`Œy
 ("c c0 81 0 0 0 0 0 90 ff 6b 4 0", "invalid distanceoo far back", 1);

672 
	`Œy
 ("1f 8b 8 0 0 0 0 0 0 0 3 0 0 0 0 1", "incorrect data check", -1);

673 
	`Œy
 ("1f 8b 8 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0 0 1",

675 
	`Œy
 ("5 c0 21 d 0 0 0 80 b0 fe 6d 2f 91 6c", "pull 17", 0);

676 
	`Œy
 ("5ƒ0 81 91 24 cb b2 2c 49ƒ2 f 2e 8b 9a 47 56 9f fb feƒc d2 ff 1f",

678 
	`Œy
 ("ed c0 1 1 0 0 0 40 20 ff 57 1b 42 2c 4f", "lengthƒxtra", 0);

679 
	`Œy
 ("ed cf c1 b1 2c 47 10 c4 30 fa 6f 35 1d 1 82 59 3d fb be 2e 2a fc f c",

681 
	`Œy
 ("ed c0 81 0 0 0 0 80‡0 fd‡9 17‡9 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "

683 
	`šf
 ("2 8 20 80 0 3 0", "inflate_fast TYPE„eturn", 0, -15, 258,

684 
Z_STREAM_END
);

685 
	`šf
 ("63 18 5 40 c 0", "wšdow w¿p", 3, -8, 300, 
Z_OK
);

686 
	}
}

689 
loÿl
 

690 
	$cov”_Œ“s
 ()

692 
»t
;

693 
b™s
;

694 
Ëns
[16], 
wÜk
[16];

695 
code
 *
Ãxt
, 
bË
[
ENOUGH_DISTS
];

699 
b™s
 = 0; bits < 15; bits++)

700 
Ëns
[
b™s
] = () (bits + 1);

701 
Ëns
[15] = 15;

702 
Ãxt
 = 
bË
;

703 
b™s
 = 15;

704 
»t
 = 
	`šæ©e_bË
 (
DISTS
, 
Ëns
, 16, &
Ãxt
, &
b™s
, 
wÜk
);

705 
	`as£¹
 (
»t
 == 1);

706 
Ãxt
 = 
bË
;

707 
b™s
 = 1;

708 
»t
 = 
	`šæ©e_bË
 (
DISTS
, 
Ëns
, 16, &
Ãxt
, &
b™s
, 
wÜk
);

709 
	`as£¹
 (
»t
 == 1);

710 
	`åuts
 ("šæ©e_bË‚Ùƒnoughƒ¼Üs\n", 
¡d”r
);

711 
	}
}

714 
loÿl
 

715 
	$cov”_ç¡
 ()

717 
	`šf
 ("e5ƒ0 81‡d 6d cb b2 2c c9 01 1e 59 63‡e 7dƒe fb 4d fd b5 35 41 68"

718 " fà7à0à0 0 0", "ç¡†’gthƒxŒ¨b™s", 0, -8, 258, 
Z_DATA_ERROR
);

719 
	`šf
 ("25 fd 81 b5 6d 59 b6 6a 49ƒa‡f 35 6 34ƒb 8c b9 f6 b9 1eƒf 67 49"

721 
Z_DATA_ERROR
);

722 
	`šf
 ("3 7e 0 0 0 0 0", "fast invalid distance code", 0, -8, 258,

723 
Z_DATA_ERROR
);

724 
	`šf
 ("1b 7 0 0 0 0 0", "fast invalid†iteral/length code", 0, -8, 258,

725 
Z_DATA_ERROR
);

726 
	`šf
 ("d c7 1‡eƒb 38 c 4 41‡0 87 72 de df fb 1f b8 36 b1 38 5d ff ff 0",

727 "ç¡ 2nd†ev– code ªdoØç¸back", 0, -8, 258, 
Z_DATA_ERROR
);

728 
	`šf
 ("63 18 5 8ø10 8 0 0 0 0", "v”y commÚ ca£", 0, -8, 259, 
Z_OK
);

729 
	`šf
 ("63 60 60 18 c9 0 8 18 18 18 26 c0 28 0 29 0 0 0",

730 "cÚtiguou ªd w¿°¬ound wšdow", 6, -8, 259, 
Z_OK
);

731 
	`šf
 ("63 0 3 0 0 0 0 0", "copy direct from output", 0, -8, 259,

732 
Z_STREAM_END
);

733 
	}
}

736 
	$maš
 ()

738 
	`årštf
 (
¡d”r
, "%s\n", 
	`zlibV”siÚ
 ());

739 
	`cov”_suµÜt
 ();

740 
	`cov”_w¿p
 ();

741 
	`cov”_back
 ();

742 
	`cov”_šæ©e
 ();

743 
	`cov”_Œ“s
 ();

744 
	`cov”_ç¡
 ();

746 
	}
}

	@test/minigzip.c

18 
	~"zlib.h
"

19 
	~<¡dio.h
>

21 #ifdeà
STDC


22 
	~<¡ršg.h
>

23 
	~<¡dlib.h
>

26 #ifdeà
USE_MMAP


27 
	~<sys/ty³s.h
>

28 
	~<sys/mmª.h
>

29 
	~<sys/¡©.h
>

32 #ià
defšed
(
MSDOS
è|| defšed(
OS2
è|| defšed(
WIN32
è|| defšed(
__CYGWIN__
)

33 
	~<fú.h
>

34 
	~<io.h
>

35 #ifdeà
UNDER_CE


36 
	~<¡dlib.h
>

38 
	#SET_BINARY_MODE
(
fe
è
	`£tmode
(
	`f’o
(fe), 
O_BINARY
)

	)

40 
	#SET_BINARY_MODE
(
fe
)

	)

43 #ifdeà
_MSC_VER


44 
	#¢´štf
 
_¢´štf


	)

47 #ifdeà
VMS


48 
	#uÆšk
 
d–‘e


	)

49 
	#GZ_SUFFIX
 "-gz"

	)

51 #ifdeà
RISCOS


52 
	#uÆšk
 
»move


	)

53 
	#GZ_SUFFIX
 "-gz"

	)

54 
	#f’o
(
fe
èfe->
__fe


	)

56 #ià
defšed
(
__MWERKS__
è&& 
__de¡_os
 !ğ
__be_os
 && __de¡_o !ğ
__wš32_os


57 
	~<unix.h
>

60 #ià!
defšed
(
Z_HAVE_UNISTD_H
è&& !defšed(
_LARGEFILE64_SOURCE
)

61 #iâdeà
WIN32


62 
uÆšk
 
OF
 ((const *));

66 #ià
defšed
(
UNDER_CE
)

67 
	~<wšdows.h
>

68 
	#³¼Ü
(
s
è
	`pwš”rÜ
(s)

	)

81 
	$¡rwš”rÜ
 (
”rÜ
)

82 
DWORD
 
”rÜ
;

84 
buf
[1024];

86 
wch¬_t
 *
msgbuf
;

87 
DWORD
 
Ï¡”r
 = 
	`G‘La¡E¼Ü
 ();

88 
DWORD
 
ch¬s
 = 
	`FÜm©Mes§ge
 (
FORMAT_MESSAGE_FROM_SYSTEM


89 | 
FORMAT_MESSAGE_ALLOCATE_BUFFER
,

90 
NULL
,

91 
”rÜ
,

93 (
LPVOID
è& 
msgbuf
,

95 
NULL
);

96 ià(
ch¬s
 != 0)

99 ià(
ch¬s
 >= 2

100 && 
msgbuf
[
ch¬s
 - 2] == '\r' && msgbuf[chars - 1] == '\n')

102 
ch¬s
 -= 2;

103 
msgbuf
[
ch¬s
] = 0;

106 ià(
ch¬s
 >  (
buf
) - 1)

108 
ch¬s
 =  (
buf
) - 1;

109 
msgbuf
[
ch¬s
] = 0;

112 
	`wc¡ombs
 (
buf
, 
msgbuf
, 
ch¬s
 + 1);

113 
	`LoÿlF»e
 (
msgbuf
);

117 
	`¥rštf
 (
buf
, "unknowÀwš32ƒ¼Ü (%ld)", 
”rÜ
);

120 
	`S‘La¡E¼Ü
 (
Ï¡”r
);

121  
buf
;

122 
	}
}

125 
	$pwš”rÜ
 (
s
)

126 cÚ¡ *
s
;

128 ià(
s
 && *s)

129 
	`årštf
 (
¡d”r
, "%s: %s\n", 
s
, 
	`¡rwš”rÜ
 (
	`G‘La¡E¼Ü
 ()));

131 
	`årštf
 (
¡d”r
, "%s\n", 
	`¡rwš”rÜ
 (
	`G‘La¡E¼Ü
 ()));

132 
	}
}

136 #iâdeà
GZ_SUFFIX


137 
	#GZ_SUFFIX
 ".gz"

	)

139 
	#SUFFIX_LEN
 ((
GZ_SUFFIX
)-1)

	)

141 
	#BUFLEN
 16384

	)

142 
	#MAX_NAME_LEN
 1024

	)

144 #ifdeà
MAXSEG_64K


145 
	#loÿl
 

	)

148 
	#loÿl


	)

151 #ifdeà
Z_SOLO


154 #ià
defšed
(
Z_HAVE_UNISTD_H
è|| defšed(
Z_LARGE
)

155 
	~<uni¡d.h
>

158 *
my®loc
 
OF
 ((*, , ));

159 
myä“
 
OF
 ((*, *));

162 
	$my®loc
 (
q
, 
n
, 
m
)

163 *
q
;

164 
n
, 
m
;

166 
q
 = 
Z_NULL
;

167  
	`ÿÎoc
 (
n
, 
m
);

168 
	}
}

171 
	$myä“
 (
q
, 
p
)

172 *
q
, *
p
;

174 
q
 = 
Z_NULL
;

175 
	`ä“
 (
p
);

176 
	}
}

178 
	sgzFe_s


180 
FILE
 *
	mfe
;

181 
	mwr™e
;

182 
	m”r
;

183 *
	mmsg
;

184 
z_¡»am
 
	m¡rm
;

185 } *
	tgzFe
;

187 
gzFe
 
gzİ’
 
OF
 ((const *, const *));

188 
gzFe
 
gzdİ’
 
OF
 ((, const *));

189 
gzFe
 
gz_İ’
 
OF
 ((const *, , const *));

191 
gzFe


192 
	$gzİ’
 (
·th
, 
mode
)

193 cÚ¡ *
·th
;

194 cÚ¡ *
mode
;

196  
	`gz_İ’
 (
·th
, -1, 
mode
);

197 
	}
}

199 
gzFe


200 
	$gzdİ’
 (
fd
, 
mode
)

201 
fd
;

202 cÚ¡ *
mode
;

204  
	`gz_İ’
 (
NULL
, 
fd
, 
mode
);

205 
	}
}

207 
gzFe


208 
	$gz_İ’
 (
·th
, 
fd
, 
mode
)

209 cÚ¡ *
·th
;

210 
fd
;

211 cÚ¡ *
mode
;

213 
gzFe
 
gz
;

214 
»t
;

216 
gz
 = 
	`m®loc
 ( (
gzFe_s
));

217 ià(
gz
 =ğ
NULL
)

218  
NULL
;

219 
gz
->
wr™e
 = 
	`¡rchr
 (
mode
, 'w'è!ğ
NULL
;

220 
gz
->
¡rm
.
z®loc
 = 
my®loc
;

221 
gz
->
¡rm
.
zä“
 = 
myä“
;

222 
gz
->
¡rm
.
İaque
 = 
Z_NULL
;

223 ià(
gz
->
wr™e
)

224 
»t
 = 
	`deæ©eIn™2
 (&(
gz
->
¡rm
), -1, 8, 15 + 16, 8, 0);

227 
gz
->
¡rm
.
Ãxt_š
 = 0;

228 
gz
->
¡rm
.
ava_š
 = 
Z_NULL
;

229 
»t
 = 
	`šæ©eIn™2
 (&(
gz
->
¡rm
), 15 + 16);

231 ià(
»t
 !ğ
Z_OK
)

233 
	`ä“
 (
gz
);

234  
NULL
;

236 
gz
->
fe
 = 
·th
 =ğ
NULL
 ? 
	`fdİ’
 (
fd
, gz->
wr™e
 ? "wb" : "rb") :

237 
	`fİ’
 (
·th
, 
gz
->
wr™e
 ? "wb" : "rb");

238 ià(
gz
->
fe
 =ğ
NULL
)

240 
gz
->
wr™e
 ? 
	`deæ©eEnd
 (&(gz->
¡rm
)è: 
	`šæ©eEnd
 (&(gz->strm));

241 
	`ä“
 (
gz
);

242  
NULL
;

244 
gz
->
”r
 = 0;

245 
gz
->
msg
 = "";

246  
gz
;

247 
	}
}

249 
gzwr™e
 
OF
 ((
gzFe
, const *, ));

252 
	$gzwr™e
 (
gz
, 
buf
, 
Ën
)

253 
gzFe
 
gz
;

254 cÚ¡ *
buf
;

255 
Ën
;

257 
z_¡»am
 *
¡rm
;

258 
out
[
BUFLEN
];

260 ià(
gz
 =ğ
NULL
 || !gz->
wr™e
)

262 
¡rm
 = &(
gz
->strm);

263 
¡rm
->
Ãxt_š
 = (*è
buf
;

264 
¡rm
->
ava_š
 = 
Ën
;

267 
¡rm
->
Ãxt_out
 = 
out
;

268 
¡rm
->
ava_out
 = 
BUFLEN
;

269 (è
	`deæ©e
 (
¡rm
, 
Z_NO_FLUSH
);

270 
	`fwr™e
 (
out
, 1, 
BUFLEN
 - 
¡rm
->
ava_out
, 
gz
->
fe
);

272 
¡rm
->
ava_out
 == 0);

273  
Ën
;

274 
	}
}

276 
gz»ad
 
OF
 ((
gzFe
, *, ));

279 
	$gz»ad
 (
gz
, 
buf
, 
Ën
)

280 
gzFe
 
gz
;

281 *
buf
;

282 
Ën
;

284 
»t
;

285 
gÙ
;

286 
š
[1];

287 
z_¡»am
 *
¡rm
;

289 ià(
gz
 =ğ
NULL
 || gz->
wr™e
)

291 ià(
gz
->
”r
)

293 
¡rm
 = &(
gz
->strm);

294 
¡rm
->
Ãxt_out
 = (*è
buf
;

295 
¡rm
->
ava_out
 = 
Ën
;

298 
gÙ
 = 
	`ä—d
 (
š
, 1, 1, 
gz
->
fe
);

299 ià(
gÙ
 == 0)

301 
¡rm
->
Ãxt_š
 = 
š
;

302 
¡rm
->
ava_š
 = 1;

303 
»t
 = 
	`šæ©e
 (
¡rm
, 
Z_NO_FLUSH
);

304 ià(
»t
 =ğ
Z_DATA_ERROR
)

306 
gz
->
”r
 = 
Z_DATA_ERROR
;

307 
gz
->
msg
 = 
¡rm
->msg;

310 ià(
»t
 =ğ
Z_STREAM_END
)

311 
	`šæ©eRe£t
 (
¡rm
);

313 
¡rm
->
ava_out
);

314  
Ën
 - 
¡rm
->
ava_out
;

315 
	}
}

317 
gzşo£
 
OF
 ((
gzFe
));

320 
	$gzşo£
 (
gz
)

321 
gzFe
 
gz
;

323 
z_¡»am
 *
¡rm
;

324 
out
[
BUFLEN
];

326 ià(
gz
 =ğ
NULL
)

327  
Z_STREAM_ERROR
;

328 
¡rm
 = &(
gz
->strm);

329 ià(
gz
->
wr™e
)

331 
¡rm
->
Ãxt_š
 = 
Z_NULL
;

332 
¡rm
->
ava_š
 = 0;

335 
¡rm
->
Ãxt_out
 = 
out
;

336 
¡rm
->
ava_out
 = 
BUFLEN
;

337 (è
	`deæ©e
 (
¡rm
, 
Z_FINISH
);

338 
	`fwr™e
 (
out
, 1, 
BUFLEN
 - 
¡rm
->
ava_out
, 
gz
->
fe
);

340 
¡rm
->
ava_out
 == 0);

341 
	`deæ©eEnd
 (
¡rm
);

344 
	`šæ©eEnd
 (
¡rm
);

345 
	`fşo£
 (
gz
->
fe
);

346 
	`ä“
 (
gz
);

347  
Z_OK
;

348 
	}
}

350 cÚ¡ *
gz”rÜ
 
OF
 ((
gzFe
, *));

353 
	$gz”rÜ
 (
gz
, 
”r
)

354 
gzFe
 
gz
;

355 *
”r
;

357 *
”r
 = 
gz
->err;

358  
gz
->
msg
;

359 
	}
}

363 *
	g´og
;

365 
”rÜ
 
OF
 ((cÚ¡ *
msg
));

366 
gz_com´ess
 
OF
 ((
FILE
 * 
š
, 
gzFe
 
out
));

367 #ifdeà
USE_MMAP


368 
gz_com´ess_mm­
 
OF
 ((
FILE
 * 
š
, 
gzFe
 
out
));

370 
gz_uncom´ess
 
OF
 ((
gzFe
 
š
, 
FILE
 * 
out
));

371 
fe_com´ess
 
OF
 ((*
fe
, *
mode
));

372 
fe_uncom´ess
 
OF
 ((*
fe
));

373 
maš
 
OF
 ((
¬gc
, *
¬gv
[]));

379 
	$”rÜ
 (cÚ¡ *
msg
)

381 
	`årštf
 (
¡d”r
, "%s: %s\n", 
´og
, 
msg
);

382 
	`ex™
 (1);

383 
	}
}

390 
	$gz_com´ess
 (
FILE
 * 
š
, 
gzFe
 
out
)

392 
loÿl
 
buf
[
BUFLEN
];

393 
Ën
;

394 
”r
;

396 #ifdeà
USE_MMAP


400 ià(
	`gz_com´ess_mm­
 (
š
, 
out
è=ğ
Z_OK
)

405 
Ën
 = (è
	`ä—d
 (
buf
, 1,  (buf), 
š
);

406 ià(
	`ã¼Ü
 (
š
))

408 
	`³¼Ü
 ("fread");

409 
	`ex™
 (1);

411 ià(
Ën
 == 0)

414 ià(
	`gzwr™e
 (
out
, 
buf
, (è
Ën
) !=†en)

415 
	`”rÜ
 (
	`gz”rÜ
 (
out
, &
”r
));

417 
	`fşo£
 (
š
);

418 ià(
	`gzşo£
 (
out
è!ğ
Z_OK
)

419 
	`”rÜ
 ("failed gzclose");

420 
	}
}

422 #ifdeà
USE_MMAP


428 
	$gz_com´ess_mm­
 (
FILE
 * 
š
, 
gzFe
 
out
)

430 
Ën
;

431 
”r
;

432 
ifd
 = 
	`f’o
 (
š
);

433 
ÿddr_t
 
buf
;

434 
off_t
 
buf_Ën
;

435 
¡©
 
sb
;

438 ià(
	`f¡©
 (
ifd
, &
sb
) < 0)

439  
Z_ERRNO
;

440 
buf_Ën
 = 
sb
.
¡_size
;

441 ià(
buf_Ën
 <= 0)

442  
Z_ERRNO
;

445 
buf
 = 
	`mm­
 ((
ÿddr_t
è0, 
buf_Ën
, 
PROT_READ
, 
MAP_SHARED
, 
ifd
, (
off_t
) 0);

446 ià(
buf
 =ğ(
ÿddr_t
) (-1))

447  
Z_ERRNO
;

450 
Ën
 = 
	`gzwr™e
 (
out
, (*è
buf
, (è
buf_Ën
);

452 ià(
Ën
 !ğ(è
buf_Ën
)

453 
	`”rÜ
 (
	`gz”rÜ
 (
out
, &
”r
));

455 
	`munm­
 (
buf
, 
buf_Ën
);

456 
	`fşo£
 (
š
);

457 ià(
	`gzşo£
 (
out
è!ğ
Z_OK
)

458 
	`”rÜ
 ("failed gzclose");

459  
Z_OK
;

460 
	}
}

467 
	$gz_uncom´ess
 (
gzFe
 
š
, 
FILE
 * 
out
)

469 
loÿl
 
buf
[
BUFLEN
];

470 
Ën
;

471 
”r
;

475 
Ën
 = 
	`gz»ad
 (
š
, 
buf
,  (buf));

476 ià(
Ën
 < 0)

477 
	`”rÜ
 (
	`gz”rÜ
 (
š
, &
”r
));

478 ià(
Ën
 == 0)

481 ià((è
	`fwr™e
 (
buf
, 1, (è
Ën
, 
out
) !=†en)

483 
	`”rÜ
 ("failed fwrite");

486 ià(
	`fşo£
 (
out
))

487 
	`”rÜ
 ("failed fclose");

489 ià(
	`gzşo£
 (
š
è!ğ
Z_OK
)

490 
	`”rÜ
 ("failed gzclose");

491 
	}
}

499 
	$fe_com´ess
 (*
fe
, *
mode
)

501 
loÿl
 
outfe
[
MAX_NAME_LEN
];

502 
FILE
 *
š
;

503 
gzFe
 
out
;

505 ià(
	`¡¾’
 (
fe
è+ sŒËÀ(
GZ_SUFFIX
è>ğ (
outfe
))

507 
	`årštf
 (
¡d”r
, "%s: f’amtoØlÚg\n", 
´og
);

508 
	`ex™
 (1);

511 #ià!
	`defšed
(
NO_¢´štf
è&& !defšed(
NO_v¢´štf
)

512 
	`¢´štf
 (
outfe
,  (outfe), "%s%s", 
fe
, 
GZ_SUFFIX
);

514 
	`¡rıy
 (
outfe
, 
fe
);

515 
	`¡rÿt
 (
outfe
, 
GZ_SUFFIX
);

518 
š
 = 
	`fİ’
 (
fe
, "rb");

519 ià(
š
 =ğ
NULL
)

521 
	`³¼Ü
 (
fe
);

522 
	`ex™
 (1);

524 
out
 = 
	`gzİ’
 (
outfe
, 
mode
);

525 ià(
out
 =ğ
NULL
)

527 
	`årštf
 (
¡d”r
, "%s: cª'ˆgzİ’ %s\n", 
´og
, 
outfe
);

528 
	`ex™
 (1);

530 
	`gz_com´ess
 (
š
, 
out
);

532 
	`uÆšk
 (
fe
);

533 
	}
}

540 
	$fe_uncom´ess
 (*
fe
)

542 
loÿl
 
buf
[
MAX_NAME_LEN
];

543 *
šfe
, *
outfe
;

544 
FILE
 *
out
;

545 
gzFe
 
š
;

546 
size_t
 
Ën
 = 
	`¡¾’
 (
fe
);

548 ià(
Ën
 + 
	`¡¾’
 (
GZ_SUFFIX
è>ğ (
buf
))

550 
	`årštf
 (
¡d”r
, "%s: f’amtoØlÚg\n", 
´og
);

551 
	`ex™
 (1);

554 #ià!
	`defšed
(
NO_¢´štf
è&& !defšed(
NO_v¢´štf
)

555 
	`¢´štf
 (
buf
,  (buf), "%s", 
fe
);

557 
	`¡rıy
 (
buf
, 
fe
);

560 ià(
Ën
 > 
SUFFIX_LEN
 && 
	`¡rcmp
 (
fe
 +†’ - SUFFIX_LEN, 
GZ_SUFFIX
) == 0)

562 
šfe
 = 
fe
;

563 
outfe
 = 
buf
;

564 
outfe
[
Ën
 - 3] = '\0';

568 
outfe
 = 
fe
;

569 
šfe
 = 
buf
;

570 #ià!
	`defšed
(
NO_¢´štf
è&& !defšed(
NO_v¢´štf
)

571 
	`¢´štf
 (
buf
 + 
Ën
,  (bufè-†’, "%s", 
GZ_SUFFIX
);

573 
	`¡rÿt
 (
šfe
, 
GZ_SUFFIX
);

576 
š
 = 
	`gzİ’
 (
šfe
, "rb");

577 ià(
š
 =ğ
NULL
)

579 
	`årštf
 (
¡d”r
, "%s: cª'ˆgzİ’ %s\n", 
´og
, 
šfe
);

580 
	`ex™
 (1);

582 
out
 = 
	`fİ’
 (
outfe
, "wb");

583 ià(
out
 =ğ
NULL
)

585 
	`³¼Ü
 (
fe
);

586 
	`ex™
 (1);

589 
	`gz_uncom´ess
 (
š
, 
out
);

591 
	`uÆšk
 (
šfe
);

592 
	}
}

606 
	$maš
 (
¬gc
, *
¬gv
[])

608 
cİyout
 = 0;

609 
uncom´
 = 0;

610 
gzFe
 
fe
;

611 *
bÇme
, 
outmode
[20];

613 #ià!
	`defšed
(
NO_¢´štf
è&& !defšed(
NO_v¢´štf
)

614 
	`¢´štf
 (
outmode
,  (outmode), "%s", "wb6 ");

616 
	`¡rıy
 (
outmode
, "wb6 ");

619 
´og
 = 
¬gv
[0];

620 
bÇme
 = 
	`¡¼chr
 (
¬gv
[0], '/');

621 ià(
bÇme
)

622 
bÇme
++;

624 
bÇme
 = 
¬gv
[0];

625 
¬gc
--, 
¬gv
++;

627 ià(!
	`¡rcmp
 (
bÇme
, "gunzip"))

628 
uncom´
 = 1;

629 ià(!
	`¡rcmp
 (
bÇme
, "zcat"))

630 
cİyout
 = 
uncom´
 = 1;

632 
¬gc
 > 0)

634 ià(
	`¡rcmp
 (*
¬gv
, "-c") == 0)

635 
cİyout
 = 1;

636 ià(
	`¡rcmp
 (*
¬gv
, "-d") == 0)

637 
uncom´
 = 1;

638 ià(
	`¡rcmp
 (*
¬gv
, "-f") == 0)

639 
outmode
[3] = 'f';

640 ià(
	`¡rcmp
 (*
¬gv
, "-h") == 0)

641 
outmode
[3] = 'h';

642 ià(
	`¡rcmp
 (*
¬gv
, "-r") == 0)

643 
outmode
[3] = 'R';

644 ià((*
¬gv
)[0] == '-' && (*argv)[1] >= '1' && (*argv)[1] <= '9' &&

645 (*
¬gv
)[2] == 0)

646 
outmode
[2] = (*
¬gv
)[1];

649 
¬gc
--, 
¬gv
++;

651 ià(
outmode
[3] == ' ')

652 
outmode
[3] = 0;

653 ià(
¬gc
 == 0)

655 
	`SET_BINARY_MODE
 (
¡dš
);

656 
	`SET_BINARY_MODE
 (
¡dout
);

657 ià(
uncom´
)

659 
fe
 = 
	`gzdİ’
 (
	`f’o
 (
¡dš
), "rb");

660 ià(
fe
 =ğ
NULL
)

661 
	`”rÜ
 ("can't gzdopen stdin");

662 
	`gz_uncom´ess
 (
fe
, 
¡dout
);

666 
fe
 = 
	`gzdİ’
 (
	`f’o
 (
¡dout
), 
outmode
);

667 ià(
fe
 =ğ
NULL
)

668 
	`”rÜ
 ("can't gzdopen stdout");

669 
	`gz_com´ess
 (
¡dš
, 
fe
);

674 ià(
cİyout
)

676 
	`SET_BINARY_MODE
 (
¡dout
);

680 ià(
uncom´
)

682 ià(
cİyout
)

684 
fe
 = 
	`gzİ’
 (*
¬gv
, "rb");

685 ià(
fe
 =ğ
NULL
)

686 
	`årštf
 (
¡d”r
, "%s: cª'ˆgzİ’ %s\n", 
´og
, *
¬gv
);

688 
	`gz_uncom´ess
 (
fe
, 
¡dout
);

692 
	`fe_uncom´ess
 (*
¬gv
);

697 ià(
cİyout
)

699 
FILE
 *
š
 = 
	`fİ’
 (*
¬gv
, "rb");

701 ià(
š
 =ğ
NULL
)

703 
	`³¼Ü
 (*
¬gv
);

707 
fe
 = 
	`gzdİ’
 (
	`f’o
 (
¡dout
), 
outmode
);

708 ià(
fe
 =ğ
NULL
)

709 
	`”rÜ
 ("can't gzdopen stdout");

711 
	`gz_com´ess
 (
š
, 
fe
);

717 
	`fe_com´ess
 (*
¬gv
, 
outmode
);

721 
¬gv
++, --
¬gc
);

724 
	}
}

	@trees.c

37 
	~"deæ©e.h
"

39 #ifdeà
DEBUG


40 
	~<ùy³.h
>

47 
	#MAX_BL_BITS
 7

	)

50 
	#END_BLOCK
 256

	)

53 
	#REP_3_6
 16

	)

56 
	#REPZ_3_10
 17

	)

59 
	#REPZ_11_138
 18

	)

62 
loÿl
 cÚ¡ 
	gexŒa_lb™s
[
LENGTH_CODES
]

66 
loÿl
 cÚ¡ 
	gexŒa_db™s
[
D_CODES
]

70 
loÿl
 cÚ¡ 
	gexŒa_blb™s
[
BL_CODES
]

73 
loÿl
 cÚ¡ 
uch
 
	gbl_Üd”
[
BL_CODES
]

83 
	#DIST_CODE_LEN
 512

	)

85 #ià
defšed
(
GEN_TREES_H
è|| !defšed(
STDC
)

88 
loÿl
 
ù_d©a
 
	g¡©ic_É»e
[
L_CODES
 + 2];

95 
loÿl
 
ù_d©a
 
	g¡©ic_dŒ“
[
D_CODES
];

100 
uch
 
	g_di¡_code
[
DIST_CODE_LEN
];

106 
uch
 
	g_Ëngth_code
[
MAX_MATCH
 - 
MIN_MATCH
 + 1];

109 
loÿl
 
	gba£_Ëngth
[
LENGTH_CODES
];

112 
loÿl
 
	gba£_di¡
[
D_CODES
];

116 
	~"Œ“s.h
"

119 
	s¡©ic_Œ“_desc_s


121 cÚ¡ 
ù_d©a
 *
	m¡©ic_Œ“
;

122 cÚ¡ 
štf
 *
	mexŒa_b™s
;

123 
	mexŒa_ba£
;

124 
	m–ems
;

125 
	mmax_Ëngth
;

128 
loÿl
 
¡©ic_Œ“_desc
 
	g¡©ic_l_desc
 =

129 { 
¡©ic_É»e
, 
exŒa_lb™s
, 
LITERALS
 + 1, 
L_CODES
, 
MAX_BITS
 };

131 
loÿl
 
¡©ic_Œ“_desc
 
	g¡©ic_d_desc
 =

132 { 
¡©ic_dŒ“
, 
exŒa_db™s
, 0, 
D_CODES
, 
MAX_BITS
 };

134 
loÿl
 
¡©ic_Œ“_desc
 
	g¡©ic_bl_desc
 =

135 { (cÚ¡ 
ù_d©a
 *è0, 
exŒa_blb™s
, 0, 
BL_CODES
, 
MAX_BL_BITS
 };

141 
loÿl
 
Œ_¡©ic_š™
 
OF
 (());

142 
loÿl
 
š™_block
 
OF
 ((
deæ©e_¡©e
 * 
s
));

143 
loÿl
 
pqdownh—p
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
ù_d©a
 * 
Œ“
, 
k
));

144 
loÿl
 
g’_b™Ën
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
Œ“_desc
 * 
desc
));

145 
loÿl
 
g’_codes
 
OF
 ((
ù_d©a
 * 
Œ“
, 
max_code
, 
ushf
 * 
bl_couÁ
));

146 
loÿl
 
bud_Œ“
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
Œ“_desc
 * 
desc
));

147 
loÿl
 
sÿn_Œ“
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
ù_d©a
 * 
Œ“
, 
max_code
));

148 
loÿl
 
£nd_Œ“
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
ù_d©a
 * 
Œ“
, 
max_code
));

149 
loÿl
 
bud_bl_Œ“
 
OF
 ((
deæ©e_¡©e
 * 
s
));

150 
loÿl
 
£nd_®l_Œ“s
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
lcodes
, 
dcodes
,

151 
blcodes
));

152 
loÿl
 
com´ess_block
 
OF
 ((
deæ©e_¡©e
 * 
s
, cÚ¡ 
ù_d©a
 * 
É»e
,

153 cÚ¡ 
ù_d©a
 * 
dŒ“
));

154 
loÿl
 
d‘eù_d©a_ty³
 
OF
 ((
deæ©e_¡©e
 * 
s
));

155 
loÿl
 
bi_»v”£
 
OF
 ((
v®ue
, 
Ëngth
));

156 
loÿl
 
bi_wšdup
 
OF
 ((
deæ©e_¡©e
 * 
s
));

157 
loÿl
 
bi_æush
 
OF
 ((
deæ©e_¡©e
 * 
s
));

158 
loÿl
 
cİy_block
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
ch¬f
 * 
buf
, 
Ën
,

159 
h—d”
));

161 #ifdeà
GEN_TREES_H


162 
loÿl
 
g’_Œ“s_h—d”
 
OF
 (());

165 #iâdeà
DEBUG


166 
	#£nd_code
(
s
, 
c
, 
Œ“
è
	`£nd_b™s
(s,»e[c].
Code
,»e[c].
L’
)

	)

170 
	#£nd_code
(
s
, 
c
, 
Œ“
) \

171 { ià(
z_v”bo£
>2è
	`årštf
(
¡d”r
,"\ncd %3d ",(
c
)); \

172 
	`£nd_b™s
(
s
, 
Œ“
[
c
].
Code
,»e[c].
L’
); }

	)

179 
	#put_shÜt
(
s
, 
w
) { \

180 
	`put_by‹
(
s
, (
uch
)((
w
) & 0xff)); \

181 
	`put_by‹
(
s
, (
uch
)((
ush
)(
w
) >> 8)); \

182 }

	)

188 #ifdeà
DEBUG


189 
loÿl
 
£nd_b™s
 
OF
 ((
deæ©e_¡©e
 * 
s
, 
v®ue
, 
Ëngth
));

191 
loÿl
 

192 
	$£nd_b™s
 (
deæ©e_¡©e
 * 
s
, 
v®ue
, 
Ëngth
)

195 
	`T¿ûvv
 ((
¡d”r
, "† %2d v %4x ", 
Ëngth
, 
v®ue
));

196 
	`As£¹
 (
Ëngth
 > 0 &&†ength <= 15, "invalid†ength");

197 
s
->
b™s_£Á
 +ğ(
ulg
è
Ëngth
;

203 ià(
s
->
bi_v®id
 > (è
Buf_size
 - 
Ëngth
)

205 
s
->
bi_buf
 |ğ(
ush
è
v®ue
 << s->
bi_v®id
;

206 
	`put_shÜt
 (
s
, s->
bi_buf
);

207 
s
->
bi_buf
 = (
ush
è
v®ue
 >> (
Buf_size
 - s->
bi_v®id
);

208 
s
->
bi_v®id
 +ğ
Ëngth
 - 
Buf_size
;

212 
s
->
bi_buf
 |ğ(
ush
è
v®ue
 << s->
bi_v®id
;

213 
s
->
bi_v®id
 +ğ
Ëngth
;

215 
	}
}

218 
	#£nd_b™s
(
s
, 
v®ue
, 
Ëngth
) \

219 { 
Ën
 = 
Ëngth
;\

220 ià(
s
->
bi_v®id
 > ()
Buf_size
 - 
Ën
) {\

221 
v®
 = 
v®ue
;\

222 
s
->
bi_buf
 |ğ(
ush
)
v®
 << s->
bi_v®id
;\

223 
	`put_shÜt
(
s
, s->
bi_buf
);\

224 
s
->
bi_buf
 = (
ush
)
v®
 >> (
Buf_size
 - s->
bi_v®id
);\

225 
s
->
bi_v®id
 +ğ
Ën
 - 
Buf_size
;\

227 
s
->
bi_buf
 |ğ(
ush
)(
v®ue
è<< s->
bi_v®id
;\

228 
s
->
bi_v®id
 +ğ
Ën
;\

230 }

	)

239 
loÿl
 

240 
	$Œ_¡©ic_š™
 ()

242 #ià
	`defšed
(
GEN_TREES_H
è|| !defšed(
STDC
)

243 
¡©ic_š™_dÚe
 = 0;

244 
n
;

245 
b™s
;

246 
Ëngth
;

247 
code
;

248 
di¡
;

249 
ush
 
bl_couÁ
[
MAX_BITS
 + 1];

252 ià(
¡©ic_š™_dÚe
)

256 #ifdeà
NO_INIT_GLOBAL_POINTERS


257 
¡©ic_l_desc
.
¡©ic_Œ“
 = 
¡©ic_É»e
;

258 
¡©ic_l_desc
.
exŒa_b™s
 = 
exŒa_lb™s
;

259 
¡©ic_d_desc
.
¡©ic_Œ“
 = 
¡©ic_dŒ“
;

260 
¡©ic_d_desc
.
exŒa_b™s
 = 
exŒa_db™s
;

261 
¡©ic_bl_desc
.
exŒa_b™s
 = 
exŒa_blb™s
;

265 
Ëngth
 = 0;

266 
code
 = 0; cod< 
LENGTH_CODES
 - 1; code++)

268 
ba£_Ëngth
[
code
] = 
Ëngth
;

269 
n
 = 0;‚ < (1 << 
exŒa_lb™s
[
code
]);‚++)

271 
_Ëngth_code
[
Ëngth
++] = (
uch
è
code
;

274 
	`As£¹
 (
Ëngth
 == 256, "tr_static_init:†ength != 256");

279 
_Ëngth_code
[
Ëngth
 - 1] = (
uch
è
code
;

282 
di¡
 = 0;

283 
code
 = 0; code < 16; code++)

285 
ba£_di¡
[
code
] = 
di¡
;

286 
n
 = 0;‚ < (1 << 
exŒa_db™s
[
code
]);‚++)

288 
_di¡_code
[
di¡
++] = (
uch
è
code
;

291 
	`As£¹
 (
di¡
 == 256, "tr_static_init: dist != 256");

292 
di¡
 >>= 7;

293 ; 
code
 < 
D_CODES
; code++)

295 
ba£_di¡
[
code
] = 
di¡
 << 7;

296 
n
 = 0;‚ < (1 << (
exŒa_db™s
[
code
] - 7));‚++)

298 
_di¡_code
[256 + 
di¡
++] = (
uch
è
code
;

301 
	`As£¹
 (
di¡
 == 256, "tr_static_init: 256+dist != 512");

304 
b™s
 = 0; b™ <ğ
MAX_BITS
; bits++)

305 
bl_couÁ
[
b™s
] = 0;

306 
n
 = 0;

307 
n
 <= 143)

308 
¡©ic_É»e
[
n
++].
L’
 = 8, 
bl_couÁ
[8]++;

309 
n
 <= 255)

310 
¡©ic_É»e
[
n
++].
L’
 = 9, 
bl_couÁ
[9]++;

311 
n
 <= 279)

312 
¡©ic_É»e
[
n
++].
L’
 = 7, 
bl_couÁ
[7]++;

313 
n
 <= 287)

314 
¡©ic_É»e
[
n
++].
L’
 = 8, 
bl_couÁ
[8]++;

319 
	`g’_codes
 ((
ù_d©a
 *è
¡©ic_É»e
, 
L_CODES
 + 1, 
bl_couÁ
);

322 
n
 = 0;‚ < 
D_CODES
;‚++)

324 
¡©ic_dŒ“
[
n
].
L’
 = 5;

325 
¡©ic_dŒ“
[
n
].
Code
 = 
	`bi_»v”£
 (()‚, 5);

327 
¡©ic_š™_dÚe
 = 1;

329 #ifdeà
GEN_TREES_H


330 
	`g’_Œ“s_h—d”
 ();

333 
	}
}

338 #ifdeà
GEN_TREES_H


339 #iâdeà
DEBUG


340 
	~<¡dio.h
>

343 
	#SEPARATOR
(
i
, 
Ï¡
, 
width
) \

344 ((
i
è=ğ(
Ï¡
)? "\n};\n\n" : \

345 ((
i
è% (
width
è=ğ(width)-1 ? ",\n" : ", "))

	)

348 
	$g’_Œ“s_h—d”
 ()

350 
FILE
 *
h—d”
 = 
	`fİ’
 ("trees.h", "w");

351 
i
;

353 
	`As£¹
 (
h—d”
 !ğ
NULL
, "Can't openrees.h");

354 
	`årštf
 (
h—d”
,

357 
	`årštf
 (
h—d”
, "local const ct_data static_ltree[L_CODES+2] = {\n");

358 
i
 = 0; i < 
L_CODES
 + 2; i++)

360 
	`årštf
 (
h—d”
, "{{%3u},{%3u}}%s", 
¡©ic_É»e
[
i
].
Code
,

361 
¡©ic_É»e
[
i
].
L’
, 
	`SEPARATOR
 (i, 
L_CODES
 + 1, 5));

364 
	`årštf
 (
h—d”
, "local const ct_data static_dtree[D_CODES] = {\n");

365 
i
 = 0; i < 
D_CODES
; i++)

367 
	`årštf
 (
h—d”
, "{{%2u},{%2u}}%s", 
¡©ic_dŒ“
[
i
].
Code
,

368 
¡©ic_dŒ“
[
i
].
L’
, 
	`SEPARATOR
 (i, 
D_CODES
 - 1, 5));

371 
	`årštf
 (
h—d”
, "const uch ZLIB_INTERNAL _dist_code[DIST_CODE_LEN] = {\n");

372 
i
 = 0; i < 
DIST_CODE_LEN
; i++)

374 
	`årštf
 (
h—d”
, "%2u%s", 
_di¡_code
[
i
],

375 
	`SEPARATOR
 (
i
, 
DIST_CODE_LEN
 - 1, 20));

378 
	`årštf
 (
h—d”
,

380 
i
 = 0; i < 
MAX_MATCH
 - 
MIN_MATCH
 + 1; i++)

382 
	`årštf
 (
h—d”
, "%2u%s", 
_Ëngth_code
[
i
],

383 
	`SEPARATOR
 (
i
, 
MAX_MATCH
 - 
MIN_MATCH
, 20));

386 
	`årštf
 (
h—d”
, "local const int base_length[LENGTH_CODES] = {\n");

387 
i
 = 0; i < 
LENGTH_CODES
; i++)

389 
	`årštf
 (
h—d”
, "%1u%s", 
ba£_Ëngth
[
i
],

390 
	`SEPARATOR
 (
i
, 
LENGTH_CODES
 - 1, 20));

393 
	`årštf
 (
h—d”
, "local const int base_dist[D_CODES] = {\n");

394 
i
 = 0; i < 
D_CODES
; i++)

396 
	`årštf
 (
h—d”
, "%5u%s", 
ba£_di¡
[
i
], 
	`SEPARATOR
 (i, 
D_CODES
 - 1, 10));

399 
	`fşo£
 (
h—d”
);

400 
	}
}

406 
ZLIB_INTERNAL


407 
	$_Œ_š™
 (
deæ©e_¡©e
 * 
s
)

409 
	`Œ_¡©ic_š™
 ();

411 
s
->
l_desc
.
dyn_Œ“
 = s->
dyn_É»e
;

412 
s
->
l_desc
.
¡©_desc
 = &
¡©ic_l_desc
;

414 
s
->
d_desc
.
dyn_Œ“
 = s->
dyn_dŒ“
;

415 
s
->
d_desc
.
¡©_desc
 = &
¡©ic_d_desc
;

417 
s
->
bl_desc
.
dyn_Œ“
 = s->
bl_Œ“
;

418 
s
->
bl_desc
.
¡©_desc
 = &
¡©ic_bl_desc
;

420 
s
->
bi_buf
 = 0;

421 
s
->
bi_v®id
 = 0;

422 #ifdeà
DEBUG


423 
s
->
com´es£d_Ën
 = 0L;

424 
s
->
b™s_£Á
 = 0L;

428 
	`š™_block
 (
s
);

429 
	}
}

434 
loÿl
 

435 
	$š™_block
 (
deæ©e_¡©e
 * 
s
)

437 
n
;

440 
n
 = 0;‚ < 
L_CODES
;‚++)

441 
s
->
dyn_É»e
[
n
].
F»q
 = 0;

442 
n
 = 0;‚ < 
D_CODES
;‚++)

443 
s
->
dyn_dŒ“
[
n
].
F»q
 = 0;

444 
n
 = 0;‚ < 
BL_CODES
;‚++)

445 
s
->
bl_Œ“
[
n
].
F»q
 = 0;

447 
s
->
dyn_É»e
[
END_BLOCK
].
F»q
 = 1;

448 
s
->
İt_Ën
 = s->
¡©ic_Ën
 = 0L;

449 
s
->
Ï¡_l™
 = s->
m©ches
 = 0;

450 
	}
}

452 
	#SMALLEST
 1

	)

460 
	#pq»move
(
s
, 
Œ“
, 
tİ
) \

462 
tİ
 = 
s
->
h—p
[
SMALLEST
]; \

463 
s
->
h—p
[
SMALLEST
] = s->h—p[s->
h—p_Ën
--]; \

464 
	`pqdownh—p
(
s
, 
Œ“
, 
SMALLEST
); \

465 }

	)

471 
	#sm®Ër
(
Œ“
, 
n
, 
m
, 
d•th
) \

472 (
Œ“
[
n
].
F»q
 <»e[
m
].Freq || \

473 (
Œ“
[
n
].
F»q
 =ğŒ“[
m
].F»q && 
d•th
[n] <ğd•th[m]))

	)

481 
loÿl
 

482 
	$pqdownh—p
 (
deæ©e_¡©e
 * 
s
, 
ù_d©a
 * 
Œ“


483 , 
k
 )

485 
v
 = 
s
->
h—p
[
k
];

486 
j
 = 
k
 << 1;

487 
j
 <ğ
s
->
h—p_Ën
)

490 ià(
j
 < 
s
->
h—p_Ën
 &&

491 
	`sm®Ër
 (
Œ“
, 
s
->
h—p
[
j
 + 1], s->h—p[j], s->
d•th
))

493 
j
++;

496 ià(
	`sm®Ër
 (
Œ“
, 
v
, 
s
->
h—p
[
j
], s->
d•th
))

500 
s
->
h—p
[
k
] = s->h—p[
j
];

501 
k
 = 
j
;

504 
j
 <<= 1;

506 
s
->
h—p
[
k
] = 
v
;

507 
	}
}

519 
loÿl
 

520 
	$g’_b™Ën
 (
deæ©e_¡©e
 * 
s
, 
Œ“_desc
 * 
desc


523 
ù_d©a
 *
Œ“
 = 
desc
->
dyn_Œ“
;

524 
max_code
 = 
desc
->max_code;

525 cÚ¡ 
ù_d©a
 *
¡»e
 = 
desc
->
¡©_desc
->
¡©ic_Œ“
;

526 cÚ¡ 
štf
 *
exŒa
 = 
desc
->
¡©_desc
->
exŒa_b™s
;

527 
ba£
 = 
desc
->
¡©_desc
->
exŒa_ba£
;

528 
max_Ëngth
 = 
desc
->
¡©_desc
->max_length;

529 
h
;

530 
n
, 
m
;

531 
b™s
;

532 
xb™s
;

533 
ush
 
f
;

534 
ov”æow
 = 0;

536 
b™s
 = 0; b™ <ğ
MAX_BITS
; bits++)

537 
s
->
bl_couÁ
[
b™s
] = 0;

542 
Œ“
[
s
->
h—p
[s->
h—p_max
]].
L’
 = 0;

544 
h
 = 
s
->
h—p_max
 + 1; h < 
HEAP_SIZE
; h++)

546 
n
 = 
s
->
h—p
[
h
];

547 
b™s
 = 
Œ“
[Œ“[
n
].
Dad
].
L’
 + 1;

548 ià(
b™s
 > 
max_Ëngth
)

549 
b™s
 = 
max_Ëngth
, 
ov”æow
++;

550 
Œ“
[
n
].
L’
 = (
ush
è
b™s
;

553 ià(
n
 > 
max_code
)

556 
s
->
bl_couÁ
[
b™s
]++;

557 
xb™s
 = 0;

558 ià(
n
 >ğ
ba£
)

559 
xb™s
 = 
exŒa
[
n
 - 
ba£
];

560 
f
 = 
Œ“
[
n
].
F»q
;

561 
s
->
İt_Ën
 +ğ(
ulg
è
f
 *(
b™s
 + 
xb™s
);

562 ià(
¡»e
)

563 
s
->
¡©ic_Ën
 +ğ(
ulg
è
f
 *(
¡»e
[
n
].
L’
 + 
xb™s
);

565 ià(
ov”æow
 == 0)

568 
	`T¿û
 ((
¡d”r
, "\nbit†ength overflow\n"));

574 
b™s
 = 
max_Ëngth
 - 1;

575 
s
->
bl_couÁ
[
b™s
] == 0)

576 
b™s
--;

577 
s
->
bl_couÁ
[
b™s
]--;

578 
s
->
bl_couÁ
[
b™s
 + 1] += 2;

579 
s
->
bl_couÁ
[
max_Ëngth
]--;

583 
ov”æow
 -= 2;

585 
ov”æow
 > 0);

592 
b™s
 = 
max_Ëngth
; bits != 0; bits--)

594 
n
 = 
s
->
bl_couÁ
[
b™s
];

595 
n
 != 0)

597 
m
 = 
s
->
h—p
[--
h
];

598 ià(
m
 > 
max_code
)

600 ià((è
Œ“
[
m
].
L’
 !ğ(è
b™s
)

602 
	`T¿û
 ((
¡d”r
, "cod%d b™ %d->%d\n", 
m
, 
Œ“
[m].
L’
, 
b™s
));

603 
s
->
İt_Ën
 +ğ((è
b™s
 - (è
Œ“
[
m
].
L’
)

604 * (è
Œ“
[
m
].
F»q
;

605 
Œ“
[
m
].
L’
 = (
ush
è
b™s
;

607 
n
--;

610 
	}
}

620 
loÿl
 

621 
	$g’_codes
 (
ù_d©a
 * 
Œ“


622 , 
max_code


623 , 
ushf
 * 
bl_couÁ
 )

625 
ush
 
Ãxt_code
[
MAX_BITS
 + 1];

626 
ush
 
code
 = 0;

627 
b™s
;

628 
n
;

633 
b™s
 = 1; b™ <ğ
MAX_BITS
; bits++)

635 
Ãxt_code
[
b™s
] = 
code
 = (cod+ 
bl_couÁ
[bits - 1]) << 1;

640 
	`As£¹
 (
code
 + 
bl_couÁ
[
MAX_BITS
] - 1 == (1 << MAX_BITS) - 1,

642 
	`T¿ûv
 ((
¡d”r
, "\ng’_codes: max_cod%d ", 
max_code
));

644 
n
 = 0;‚ <ğ
max_code
;‚++)

646 
Ën
 = 
Œ“
[
n
].
L’
;

647 ià(
Ën
 == 0)

650 
Œ“
[
n
].
Code
 = 
	`bi_»v”£
 (
Ãxt_code
[
Ën
]++,†en);

652 
	`T¿ûcv
 (
Œ“
 !ğ
¡©ic_É»e
, (
¡d”r
, "\nn %3d %c† %2d c %4x (%x) ",

653 
n
, (
	`isg¿ph
 (nè?‚ : ' '), 
Ën
,

654 
Œ“
[
n
].
Code
, 
Ãxt_code
[
Ën
] - 1));

656 
	}
}

666 
loÿl
 

667 
	$bud_Œ“
 (
deæ©e_¡©e
 * 
s
, 
Œ“_desc
 * 
desc


670 
ù_d©a
 *
Œ“
 = 
desc
->
dyn_Œ“
;

671 cÚ¡ 
ù_d©a
 *
¡»e
 = 
desc
->
¡©_desc
->
¡©ic_Œ“
;

672 
–ems
 = 
desc
->
¡©_desc
->elems;

673 
n
, 
m
;

674 
max_code
 = -1;

675 
node
;

681 
s
->
h—p_Ën
 = 0, s->
h—p_max
 = 
HEAP_SIZE
;

683 
n
 = 0;‚ < 
–ems
;‚++)

685 ià(
Œ“
[
n
].
F»q
 != 0)

687 
s
->
h—p
[++(s->
h—p_Ën
)] = 
max_code
 = 
n
;

688 
s
->
d•th
[
n
] = 0;

692 
Œ“
[
n
].
L’
 = 0;

701 
s
->
h—p_Ën
 < 2)

703 
node
 = 
s
->
h—p
[++(s->
h—p_Ën
)] = (
max_code
 < 2 ? ++max_code : 0);

704 
Œ“
[
node
].
F»q
 = 1;

705 
s
->
d•th
[
node
] = 0;

706 
s
->
İt_Ën
--;

707 ià(
¡»e
)

708 
s
->
¡©ic_Ën
 -ğ
¡»e
[
node
].
L’
;

711 
desc
->
max_code
 = max_code;

716 
n
 = 
s
->
h—p_Ën
 / 2;‚ >= 1;‚--)

717 
	`pqdownh—p
 (
s
, 
Œ“
, 
n
);

722 
node
 = 
–ems
;

725 
	`pq»move
 (
s
, 
Œ“
, 
n
);

726 
m
 = 
s
->
h—p
[
SMALLEST
];

728 
s
->
h—p
[--(s->
h—p_max
)] = 
n
;

729 
s
->
h—p
[--(s->
h—p_max
)] = 
m
;

732 
Œ“
[
node
].
F»q
 =»e[
n
].F»q +»e[
m
].Freq;

733 
s
->
d•th
[
node
] = (
uch
è((s->d•th[
n
] >ğs->d•th[
m
] ?

734 
s
->
d•th
[
n
] : s->d•th[
m
]) + 1);

735 
Œ“
[
n
].
Dad
 =»e[
m
].Dad = (
ush
è
node
;

736 #ifdeà
DUMP_BL_TREE


737 ià(
Œ“
 =ğ
s
->
bl_Œ“
)

739 
	`årštf
 (
¡d”r
, "\nnode %d(%d), sons %d(%d) %d(%d)",

740 
node
, 
Œ“
[node].
F»q
, 
n
,»e[n].F»q, 
m
,ree[m].Freq);

744 
s
->
h—p
[
SMALLEST
] = 
node
++;

745 
	`pqdownh—p
 (
s
, 
Œ“
, 
SMALLEST
);

748 
s
->
h—p_Ën
 >= 2);

750 
s
->
h—p
[--(s->
h—p_max
)] = s->h—p[
SMALLEST
];

755 
	`g’_b™Ën
 (
s
, (
Œ“_desc
 *è
desc
);

758 
	`g’_codes
 ((
ù_d©a
 *è
Œ“
, 
max_code
, 
s
->
bl_couÁ
);

759 
	}
}

765 
loÿl
 

766 
	$sÿn_Œ“
 (
deæ©e_¡©e
 * 
s
, 
ù_d©a
 * 
Œ“


767 , 
max_code


770 
n
;

771 
´evËn
 = -1;

772 
cu¾’
;

773 
Ãx’
 = 
Œ“
[0].
L’
;

774 
couÁ
 = 0;

775 
max_couÁ
 = 7;

776 
mš_couÁ
 = 4;

778 ià(
Ãx’
 == 0)

779 
max_couÁ
 = 138, 
mš_couÁ
 = 3;

780 
Œ“
[
max_code
 + 1].
L’
 = (
ush
) 0xffff;

782 
n
 = 0;‚ <ğ
max_code
;‚++)

784 
cu¾’
 = 
Ãx’
;

785 
Ãx’
 = 
Œ“
[
n
 + 1].
L’
;

786 ià(++
couÁ
 < 
max_couÁ
 && 
cu¾’
 =ğ
Ãx’
)

790 ià(
couÁ
 < 
mš_couÁ
)

792 
s
->
bl_Œ“
[
cu¾’
].
F»q
 +ğ
couÁ
;

794 ià(
cu¾’
 != 0)

796 ià(
cu¾’
 !ğ
´evËn
)

797 
s
->
bl_Œ“
[
cu¾’
].
F»q
++;

798 
s
->
bl_Œ“
[
REP_3_6
].
F»q
++;

800 ià(
couÁ
 <= 10)

802 
s
->
bl_Œ“
[
REPZ_3_10
].
F»q
++;

806 
s
->
bl_Œ“
[
REPZ_11_138
].
F»q
++;

808 
couÁ
 = 0;

809 
´evËn
 = 
cu¾’
;

810 ià(
Ãx’
 == 0)

812 
max_couÁ
 = 138, 
mš_couÁ
 = 3;

814 ià(
cu¾’
 =ğ
Ãx’
)

816 
max_couÁ
 = 6, 
mš_couÁ
 = 3;

820 
max_couÁ
 = 7, 
mš_couÁ
 = 4;

823 
	}
}

829 
loÿl
 

830 
	$£nd_Œ“
 (
deæ©e_¡©e
 * 
s
, 
ù_d©a
 * 
Œ“


832 , 
max_code


835 
n
;

836 
´evËn
 = -1;

837 
cu¾’
;

838 
Ãx’
 = 
Œ“
[0].
L’
;

839 
couÁ
 = 0;

840 
max_couÁ
 = 7;

841 
mš_couÁ
 = 4;

844 ià(
Ãx’
 == 0)

845 
max_couÁ
 = 138, 
mš_couÁ
 = 3;

847 
n
 = 0;‚ <ğ
max_code
;‚++)

849 
cu¾’
 = 
Ãx’
;

850 
Ãx’
 = 
Œ“
[
n
 + 1].
L’
;

851 ià(++
couÁ
 < 
max_couÁ
 && 
cu¾’
 =ğ
Ãx’
)

855 ià(
couÁ
 < 
mš_couÁ
)

859 
	`£nd_code
 (
s
, 
cu¾’
, s->
bl_Œ“
);

861 --
couÁ
 != 0);

864 ià(
cu¾’
 != 0)

866 ià(
cu¾’
 !ğ
´evËn
)

868 
	`£nd_code
 (
s
, 
cu¾’
, s->
bl_Œ“
);

869 
couÁ
--;

871 
	`As£¹
 (
couÁ
 >= 3 && count <= 6, " 3_6?");

872 
	`£nd_code
 (
s
, 
REP_3_6
, s->
bl_Œ“
);

873 
	`£nd_b™s
 (
s
, 
couÁ
 - 3, 2);

876 ià(
couÁ
 <= 10)

878 
	`£nd_code
 (
s
, 
REPZ_3_10
, s->
bl_Œ“
);

879 
	`£nd_b™s
 (
s
, 
couÁ
 - 3, 3);

884 
	`£nd_code
 (
s
, 
REPZ_11_138
, s->
bl_Œ“
);

885 
	`£nd_b™s
 (
s
, 
couÁ
 - 11, 7);

887 
couÁ
 = 0;

888 
´evËn
 = 
cu¾’
;

889 ià(
Ãx’
 == 0)

891 
max_couÁ
 = 138, 
mš_couÁ
 = 3;

893 ià(
cu¾’
 =ğ
Ãx’
)

895 
max_couÁ
 = 6, 
mš_couÁ
 = 3;

899 
max_couÁ
 = 7, 
mš_couÁ
 = 4;

902 
	}
}

908 
loÿl
 

909 
	$bud_bl_Œ“
 (
deæ©e_¡©e
 * 
s
)

911 
max_blšdex
;

914 
	`sÿn_Œ“
 (
s
, (
ù_d©a
 *ès->
dyn_É»e
, s->
l_desc
.
max_code
);

915 
	`sÿn_Œ“
 (
s
, (
ù_d©a
 *ès->
dyn_dŒ“
, s->
d_desc
.
max_code
);

918 
	`bud_Œ“
 (
s
, (
Œ“_desc
 *è(&(s->
bl_desc
)));

927 
max_blšdex
 = 
BL_CODES
 - 1; max_blindex >= 3; max_blindex--)

929 ià(
s
->
bl_Œ“
[
bl_Üd”
[
max_blšdex
]].
L’
 != 0)

933 
s
->
İt_Ën
 +ğ3 * (
max_blšdex
 + 1) + 5 + 5 + 4;

934 
	`T¿ûv
 ((
¡d”r
, "\ndynrees: dyn %ld, stat %ld",

935 
s
->
İt_Ën
, s->
¡©ic_Ën
));

937  
max_blšdex
;

938 
	}
}

945 
loÿl
 

946 
	$£nd_®l_Œ“s
 (
deæ©e_¡©e
 * 
s
, 
lcodes
, 
dcodes
, 
blcodes


949 
¿nk
;

951 
	`As£¹
 (
lcodes
 >ğ257 && 
dcodes
 >ğ1 && 
blcodes
 >= 4, "notƒnough codes");

952 
	`As£¹
 (
lcodes
 <ğ
L_CODES
 && 
dcodes
 <ğ
D_CODES
 && 
blcodes
 <ğ
BL_CODES
,

954 
	`T¿ûv
 ((
¡d”r
, "\nbl counts: "));

955 
	`£nd_b™s
 (
s
, 
lcodes
 - 257, 5);

956 
	`£nd_b™s
 (
s
, 
dcodes
 - 1, 5);

957 
	`£nd_b™s
 (
s
, 
blcodes
 - 4, 4);

958 
¿nk
 = 0;„ªk < 
blcodes
;„ank++)

960 
	`T¿ûv
 ((
¡d”r
, "\nbÈcod%2d ", 
bl_Üd”
[
¿nk
]));

961 
	`£nd_b™s
 (
s
, s->
bl_Œ“
[
bl_Üd”
[
¿nk
]].
L’
, 3);

963 
	`T¿ûv
 ((
¡d”r
, "\nbÈŒ“: s’ˆ%ld", 
s
->
b™s_£Á
));

965 
	`£nd_Œ“
 (
s
, (
ù_d©a
 *ès->
dyn_É»e
, 
lcodes
 - 1);

966 
	`T¿ûv
 ((
¡d”r
, "\Æ™»e: s’ˆ%ld", 
s
->
b™s_£Á
));

968 
	`£nd_Œ“
 (
s
, (
ù_d©a
 *ès->
dyn_dŒ“
, 
dcodes
 - 1);

969 
	`T¿ûv
 ((
¡d”r
, "\ndi¡»e: s’ˆ%ld", 
s
->
b™s_£Á
));

970 
	}
}

975 
ZLIB_INTERNAL


976 
	$_Œ_¡Üed_block
 (
deæ©e_¡©e
 * 
s
, 
ch¬f
 * 
buf


977 , 
ulg
 
¡Üed_Ën


978 , 
Ï¡
 )

980 
	`£nd_b™s
 (
s
, (
STORED_BLOCK
 << 1è+ 
Ï¡
, 3);

981 #ifdeà
DEBUG


982 
s
->
com´es£d_Ën
 = (s->com´es£d_ËÀ+ 3 + 7è& (
ulg
) ~ 7L;

983 
s
->
com´es£d_Ën
 +ğ(
¡Üed_Ën
 + 4) << 3;

985 
	`cİy_block
 (
s
, 
buf
, (è
¡Üed_Ën
, 1);

986 
	}
}

991 
ZLIB_INTERNAL


992 
	$_Œ_æush_b™s
 (
deæ©e_¡©e
 * 
s
)

994 
	`bi_æush
 (
s
);

995 
	}
}

1001 
ZLIB_INTERNAL


1002 
	$_Œ_®ign
 (
deæ©e_¡©e
 * 
s
)

1004 
	`£nd_b™s
 (
s
, 
STATIC_TREES
 << 1, 3);

1005 
	`£nd_code
 (
s
, 
END_BLOCK
, 
¡©ic_É»e
);

1006 #ifdeà
DEBUG


1007 
s
->
com´es£d_Ën
 += 10L;

1009 
	`bi_æush
 (
s
);

1010 
	}
}

1016 
ZLIB_INTERNAL


1017 
	$_Œ_æush_block
 (
deæ©e_¡©e
 * 
s
, 
ch¬f
 * 
buf


1018 , 
ulg
 
¡Üed_Ën


1019 , 
Ï¡
 )

1021 
ulg
 
İt_Ënb
, 
¡©ic_Ënb
;

1022 
max_blšdex
 = 0;

1025 ià(
s
->
Ëv–
 > 0)

1029 ià(
s
->
¡rm
->
d©a_ty³
 =ğ
Z_UNKNOWN
)

1030 
s
->
¡rm
->
d©a_ty³
 = 
	`d‘eù_d©a_ty³
 (s);

1033 
	`bud_Œ“
 (
s
, (
Œ“_desc
 *è(&(s->
l_desc
)));

1034 
	`T¿ûv
 ((
¡d”r
, "\Æ™ d©a: dyÀ%ld, sˆ%ld", 
s
->
İt_Ën
,

1035 
s
->
¡©ic_Ën
));

1037 
	`bud_Œ“
 (
s
, (
Œ“_desc
 *è(&(s->
d_desc
)));

1038 
	`T¿ûv
 ((
¡d”r
, "\ndi¡ d©a: dyÀ%ld, sˆ%ld", 
s
->
İt_Ën
,

1039 
s
->
¡©ic_Ën
));

1047 
max_blšdex
 = 
	`bud_bl_Œ“
 (
s
);

1050 
İt_Ënb
 = (
s
->
İt_Ën
 + 3 + 7) >> 3;

1051 
¡©ic_Ënb
 = (
s
->
¡©ic_Ën
 + 3 + 7) >> 3;

1053 
	`T¿ûv
 ((
¡d”r
, "\nopt %lu(%lu) stat %lu(%lu) stored %lu†it %u ",

1054 
İt_Ënb
, 
s
->
İt_Ën
, 
¡©ic_Ënb
, s->
¡©ic_Ën
, 
¡Üed_Ën
,

1055 
s
->
Ï¡_l™
));

1057 ià(
¡©ic_Ënb
 <ğ
İt_Ënb
)

1058 
İt_Ënb
 = 
¡©ic_Ënb
;

1063 
	`As£¹
 (
buf
 != (*) 0, "lost buf");

1064 
İt_Ënb
 = 
¡©ic_Ënb
 = 
¡Üed_Ën
 + 5;

1067 #ifdeà
FORCE_STORED


1068 ià(
buf
 != (*) 0)

1071 ià(
¡Üed_Ën
 + 4 <ğ
İt_Ënb
 && 
buf
 != (*) 0)

1081 
	`_Œ_¡Üed_block
 (
s
, 
buf
, 
¡Üed_Ën
, 
Ï¡
);

1083 #ifdeà
FORCE_STATIC


1085 ià(
¡©ic_Ënb
 >= 0)

1089 ià(
s
->
¡¿‹gy
 =ğ
Z_FIXED
 || 
¡©ic_Ënb
 =ğ
İt_Ënb
)

1092 
	`£nd_b™s
 (
s
, (
STATIC_TREES
 << 1è+ 
Ï¡
, 3);

1093 
	`com´ess_block
 (
s
, (cÚ¡ 
ù_d©a
 *è
¡©ic_É»e
,

1094 (cÚ¡ 
ù_d©a
 *è
¡©ic_dŒ“
);

1095 #ifdeà
DEBUG


1096 
s
->
com´es£d_Ën
 +ğ3 + s->
¡©ic_Ën
;

1101 
	`£nd_b™s
 (
s
, (
DYN_TREES
 << 1è+ 
Ï¡
, 3);

1102 
	`£nd_®l_Œ“s
 (
s
, s->
l_desc
.
max_code
 + 1, s->
d_desc
.max_code + 1,

1103 
max_blšdex
 + 1);

1104 
	`com´ess_block
 (
s
, (cÚ¡ 
ù_d©a
 *ès->
dyn_É»e
,

1105 (cÚ¡ 
ù_d©a
 *è
s
->
dyn_dŒ“
);

1106 #ifdeà
DEBUG


1107 
s
->
com´es£d_Ën
 +ğ3 + s->
İt_Ën
;

1110 
	`As£¹
 (
s
->
com´es£d_Ën
 =ğs->
b™s_£Á
, "bad compressed size");

1114 
	`š™_block
 (
s
);

1116 ià(
Ï¡
)

1118 
	`bi_wšdup
 (
s
);

1119 #ifdeà
DEBUG


1120 
s
->
com´es£d_Ën
 += 7;

1123 
	`T¿ûv
 ((
¡d”r
, "\ncom´ËÀ%lu(%luè", 
s
->
com´es£d_Ën
 >> 3,

1124 
s
->
com´es£d_Ën
 - 7 * 
Ï¡
));

1125 
	}
}

1131 
ZLIB_INTERNAL


1132 
	$_Œ_Îy
 (
deæ©e_¡©e
 * 
s
, 
di¡


1134 
lc


1137 
s
->
d_buf
[s->
Ï¡_l™
] = (
ush
è
di¡
;

1138 
s
->
l_buf
[s->
Ï¡_l™
++] = (
uch
è
lc
;

1139 ià(
di¡
 == 0)

1142 
s
->
dyn_É»e
[
lc
].
F»q
++;

1146 
s
->
m©ches
++;

1148 
di¡
--;

1149 
	`As£¹
 ((
ush
è
di¡
 < (ushè
	`MAX_DIST
 (
s
) &&

1150 (
ush
è
lc
 <ğ(ushè(
MAX_MATCH
 - 
MIN_MATCH
) &&

1151 (
ush
è
	`d_code
 (
di¡
è< (ushè
D_CODES
, "_tr_tally: bad match");

1153 
s
->
dyn_É»e
[
_Ëngth_code
[
lc
] + 
LITERALS
 + 1].
F»q
++;

1154 
s
->
dyn_dŒ“
[
	`d_code
 (
di¡
)].
F»q
++;

1157 #ifdeà
TRUNCATE_BLOCK


1159 ià((
s
->
Ï¡_l™
 & 0x1fffè=ğ0 && s->
Ëv–
 > 2)

1162 
ulg
 
out_Ëngth
 = (ulgè
s
->
Ï¡_l™
 * 8L;

1163 
ulg
 
š_Ëngth
 = (ulgè((è
s
->
¡r¡¬t
 - s->
block_¡¬t
);

1164 
dcode
;

1165 
dcode
 = 0; dcod< 
D_CODES
; dcode++)

1167 
out_Ëngth
 +ğ(
ulg
è
s
->
dyn_dŒ“
[
dcode
].
F»q
 *

1168 (5L + 
exŒa_db™s
[
dcode
]);

1170 
out_Ëngth
 >>= 3;

1171 
	`T¿ûv
 ((
¡d”r
, "\nlast_lit %u, in %ld, out ~%ld(%ld%%) ",

1172 
s
->
Ï¡_l™
, 
š_Ëngth
, 
out_Ëngth
,

1173 100L - 
out_Ëngth
 * 100L / 
š_Ëngth
));

1174 ià(
s
->
m©ches
 < s->
Ï¡_l™
 / 2 && 
out_Ëngth
 < 
š_Ëngth
 / 2)

1178  (
s
->
Ï¡_l™
 =ğs->
l™_bufsize
 - 1);

1183 
	}
}

1188 
loÿl
 

1189 
	$com´ess_block
 (
deæ©e_¡©e
 * 
s
, cÚ¡ 
ù_d©a
 * 
É»e


1190 , cÚ¡ 
ù_d©a
 * 
dŒ“
 )

1192 
di¡
;

1193 
lc
;

1194 
lx
 = 0;

1195 
code
;

1196 
exŒa
;

1198 ià(
s
->
Ï¡_l™
 != 0)

1201 
di¡
 = 
s
->
d_buf
[
lx
];

1202 
lc
 = 
s
->
l_buf
[
lx
++];

1203 ià(
di¡
 == 0)

1205 
	`£nd_code
 (
s
, 
lc
, 
É»e
);

1206 
	`T¿ûcv
 (
	`isg¿ph
 (
lc
), (
¡d”r
, " '%c' ",†c));

1211 
code
 = 
_Ëngth_code
[
lc
];

1212 
	`£nd_code
 (
s
, 
code
 + 
LITERALS
 + 1, 
É»e
);

1213 
exŒa
 = 
exŒa_lb™s
[
code
];

1214 ià(
exŒa
 != 0)

1216 
lc
 -ğ
ba£_Ëngth
[
code
];

1217 
	`£nd_b™s
 (
s
, 
lc
, 
exŒa
);

1219 
di¡
--;

1220 
code
 = 
	`d_code
 (
di¡
);

1221 
	`As£¹
 (
code
 < 
D_CODES
, "bad d_code");

1223 
	`£nd_code
 (
s
, 
code
, 
dŒ“
);

1224 
exŒa
 = 
exŒa_db™s
[
code
];

1225 ià(
exŒa
 != 0)

1227 
di¡
 -ğ
ba£_di¡
[
code
];

1228 
	`£nd_b™s
 (
s
, 
di¡
, 
exŒa
);

1233 
	`As£¹
 ((
uIÁ
è(
s
->
³ndšg
è< s->
l™_bufsize
 + 2 * 
lx
,

1237 
lx
 < 
s
->
Ï¡_l™
);

1239 
	`£nd_code
 (
s
, 
END_BLOCK
, 
É»e
);

1240 
	}
}

1255 
loÿl
 

1256 
	$d‘eù_d©a_ty³
 (
deæ©e_¡©e
 * 
s
)

1262 
bÏck_mask
 = 0xf3ffc07fUL;

1263 
n
;

1266 
n
 = 0;‚ <ğ31;‚++, 
bÏck_mask
 >>= 1)

1267 ià((
bÏck_mask
 & 1è&& (
s
->
dyn_É»e
[
n
].
F»q
 != 0))

1268  
Z_BINARY
;

1271 ià(
s
->
dyn_É»e
[9].
F»q
 != 0 || s->dyn_ltree[10].Freq != 0

1272 || 
s
->
dyn_É»e
[13].
F»q
 != 0)

1273  
Z_TEXT
;

1274 
n
 = 32;‚ < 
LITERALS
;‚++)

1275 ià(
s
->
dyn_É»e
[
n
].
F»q
 != 0)

1276  
Z_TEXT
;

1281  
Z_BINARY
;

1282 
	}
}

1289 
loÿl
 

1290 
	$bi_»v”£
 (
code


1291 , 
Ën
 )

1293 
»s
 = 0;

1296 
»s
 |ğ
code
 & 1;

1297 
code
 >>ğ1, 
»s
 <<= 1;

1299 --
Ën
 > 0);

1300  
»s
 >> 1;

1301 
	}
}

1306 
loÿl
 

1307 
	$bi_æush
 (
deæ©e_¡©e
 * 
s
)

1309 ià(
s
->
bi_v®id
 == 16)

1311 
	`put_shÜt
 (
s
, s->
bi_buf
);

1312 
s
->
bi_buf
 = 0;

1313 
s
->
bi_v®id
 = 0;

1315 ià(
s
->
bi_v®id
 >= 8)

1317 
	`put_by‹
 (
s
, (
By‹
ès->
bi_buf
);

1318 
s
->
bi_buf
 >>= 8;

1319 
s
->
bi_v®id
 -= 8;

1321 
	}
}

1326 
loÿl
 

1327 
	$bi_wšdup
 (
deæ©e_¡©e
 * 
s
)

1329 ià(
s
->
bi_v®id
 > 8)

1331 
	`put_shÜt
 (
s
, s->
bi_buf
);

1333 ià(
s
->
bi_v®id
 > 0)

1335 
	`put_by‹
 (
s
, (
By‹
ès->
bi_buf
);

1337 
s
->
bi_buf
 = 0;

1338 
s
->
bi_v®id
 = 0;

1339 #ifdeà
DEBUG


1340 
s
->
b™s_£Á
 = (s->bits_sent + 7) & ~7;

1342 
	}
}

1348 
loÿl
 

1349 
	$cİy_block
 (
deæ©e_¡©e
 * 
s
, 
ch¬f
 * 
buf


1350 , 
Ën


1351 , 
h—d”
 )

1353 
	`bi_wšdup
 (
s
);

1355 ià(
h—d”
)

1357 
	`put_shÜt
 (
s
, (
ush
è
Ën
);

1358 
	`put_shÜt
 (
s
, (
ush
è~ 
Ën
);

1359 #ifdeà
DEBUG


1360 
s
->
b™s_£Á
 += 2 * 16;

1363 #ifdeà
DEBUG


1364 
s
->
b™s_£Á
 +ğ(
ulg
è
Ën
 << 3;

1366 
Ën
--)

1368 
	`put_by‹
 (
s
, *
buf
++);

1370 
	}
}

	@trees.h

3 
loÿl
 cÚ¡ 
ù_d©a
 
	g¡©ic_É»e
[
L_CODES
+2] = {

64 
loÿl
 cÚ¡ 
ù_d©a
 
	g¡©ic_dŒ“
[
D_CODES
] = {

73 cÚ¡ 
uch
 
ZLIB_INTERNAL
 
	g_di¡_code
[
DIST_CODE_LEN
] = {

102 cÚ¡ 
uch
 
ZLIB_INTERNAL
 
	g_Ëngth_code
[
MAX_MATCH
-
MIN_MATCH
+1]= {

118 
loÿl
 cÚ¡ 
	gba£_Ëngth
[
LENGTH_CODES
] = {

123 
loÿl
 cÚ¡ 
	gba£_di¡
[
D_CODES
] = {

	@uncompr.c

8 
	#ZLIB_INTERNAL


	)

9 
	~"zlib.h
"

24 
ZEXPORT


25 
	$uncom´ess
 (
By‹f
 * 
de¡
, 
uLÚgf
 * 
de¡L’
, cÚ¡ By‹à* 
sourû
,

26 
uLÚg
 
sourûL’
)

28 
z_¡»am
 
¡»am
;

29 
”r
;

31 
¡»am
.
Ãxt_š
 = (
z_cÚ¡
 
By‹f
 *è
sourû
;

32 
¡»am
.
ava_š
 = (
uIÁ
è
sourûL’
;

34 ià((
uLÚg
è
¡»am
.
ava_š
 !ğ
sourûL’
)

35  
Z_BUF_ERROR
;

37 
¡»am
.
Ãxt_out
 = 
de¡
;

38 
¡»am
.
ava_out
 = (
uIÁ
è* 
de¡L’
;

39 ià((
uLÚg
è
¡»am
.
ava_out
 !ğ*
de¡L’
)

40  
Z_BUF_ERROR
;

42 
¡»am
.
z®loc
 = (
®loc_func
) 0;

43 
¡»am
.
zä“
 = (
ä“_func
) 0;

45 
”r
 = 
	`šæ©eIn™
 (&
¡»am
);

46 ià(
”r
 !ğ
Z_OK
)

47  
”r
;

49 
”r
 = 
	`šæ©e
 (&
¡»am
, 
Z_FINISH
);

50 ià(
”r
 !ğ
Z_STREAM_END
)

52 
	`šæ©eEnd
 (&
¡»am
);

53 ià(
”r
 =ğ
Z_NEED_DICT
 || (”¸=ğ
Z_BUF_ERROR
 && 
¡»am
.
ava_š
 == 0))

54  
Z_DATA_ERROR
;

55  
”r
;

57 *
de¡L’
 = 
¡»am
.
tÙ®_out
;

59 
”r
 = 
	`šæ©eEnd
 (&
¡»am
);

60  
”r
;

61 
	}
}

	@zconf.h

8 #iâdeà
ZCONF_H


9 
	#ZCONF_H


	)

17 #ifdeà
Z_PREFIX


18 
	#Z_PREFIX_SET


	)

21 
	#_di¡_code
 
z__di¡_code


	)

22 
	#_Ëngth_code
 
z__Ëngth_code


	)

23 
	#_Œ_®ign
 
z__Œ_®ign


	)

24 
	#_Œ_æush_b™s
 
z__Œ_æush_b™s


	)

25 
	#_Œ_æush_block
 
z__Œ_æush_block


	)

26 
	#_Œ_š™
 
z__Œ_š™


	)

27 
	#_Œ_¡Üed_block
 
z__Œ_¡Üed_block


	)

28 
	#_Œ_Îy
 
z__Œ_Îy


	)

29 
	#adËr32
 
z_adËr32


	)

30 
	#adËr32_combše
 
z_adËr32_combše


	)

31 
	#adËr32_combše64
 
z_adËr32_combše64


	)

32 #iâdeà
Z_SOLO


33 
	#com´ess
 
z_com´ess


	)

34 
	#com´ess2
 
z_com´ess2


	)

35 
	#com´essBound
 
z_com´essBound


	)

37 
	#üc32
 
z_üc32


	)

38 
	#üc32_combše
 
z_üc32_combše


	)

39 
	#üc32_combše64
 
z_üc32_combše64


	)

40 
	#deæ©e
 
z_deæ©e


	)

41 
	#deæ©eBound
 
z_deæ©eBound


	)

42 
	#deæ©eCİy
 
z_deæ©eCİy


	)

43 
	#deæ©eEnd
 
z_deæ©eEnd


	)

44 
	#deæ©eIn™2_
 
z_deæ©eIn™2_


	)

45 
	#deæ©eIn™_
 
z_deæ©eIn™_


	)

46 
	#deæ©eP¬ams
 
z_deæ©eP¬ams


	)

47 
	#deæ©eP’dšg
 
z_deæ©eP’dšg


	)

48 
	#deæ©ePrime
 
z_deæ©ePrime


	)

49 
	#deæ©eRe£t
 
z_deæ©eRe£t


	)

50 
	#deæ©eRe£tK“p
 
z_deæ©eRe£tK“p


	)

51 
	#deæ©eS‘DiùiÚ¬y
 
z_deæ©eS‘DiùiÚ¬y


	)

52 
	#deæ©eS‘H—d”
 
z_deæ©eS‘H—d”


	)

53 
	#deæ©eTuÃ
 
z_deæ©eTuÃ


	)

54 
	#deæ©e_cİyright
 
z_deæ©e_cİyright


	)

55 
	#g‘_üc_bË
 
z_g‘_üc_bË


	)

56 #iâdeà
Z_SOLO


57 
	#gz_”rÜ
 
z_gz_”rÜ


	)

58 
	#gz_štmax
 
z_gz_štmax


	)

59 
	#gz_¡rwš”rÜ
 
z_gz_¡rwš”rÜ


	)

60 
	#gzbufãr
 
z_gzbufãr


	)

61 
	#gzş—»¼
 
z_gzş—»¼


	)

62 
	#gzşo£
 
z_gzşo£


	)

63 
	#gzşo£_r
 
z_gzşo£_r


	)

64 
	#gzşo£_w
 
z_gzşo£_w


	)

65 
	#gzdœeù
 
z_gzdœeù


	)

66 
	#gzdİ’
 
z_gzdİ’


	)

67 
	#gzeof
 
z_gzeof


	)

68 
	#gz”rÜ
 
z_gz”rÜ


	)

69 
	#gzæush
 
z_gzæush


	)

70 
	#gzg‘c
 
z_gzg‘c


	)

71 
	#gzg‘c_
 
z_gzg‘c_


	)

72 
	#gzg‘s
 
z_gzg‘s


	)

73 
	#gzoff£t
 
z_gzoff£t


	)

74 
	#gzoff£t64
 
z_gzoff£t64


	)

75 
	#gzİ’
 
z_gzİ’


	)

76 
	#gzİ’64
 
z_gzİ’64


	)

77 #ifdeà
_WIN32


78 
	#gzİ’_w
 
z_gzİ’_w


	)

80 
	#gz´štf
 
z_gz´štf


	)

81 
	#gzv´štf
 
z_gzv´štf


	)

82 
	#gzputc
 
z_gzputc


	)

83 
	#gzputs
 
z_gzputs


	)

84 
	#gz»ad
 
z_gz»ad


	)

85 
	#gz»wšd
 
z_gz»wšd


	)

86 
	#gz£ek
 
z_gz£ek


	)

87 
	#gz£ek64
 
z_gz£ek64


	)

88 
	#gz£¬ams
 
z_gz£¬ams


	)

89 
	#gz‹Î
 
z_gz‹Î


	)

90 
	#gz‹Î64
 
z_gz‹Î64


	)

91 
	#gzung‘c
 
z_gzung‘c


	)

92 
	#gzwr™e
 
z_gzwr™e


	)

94 
	#šæ©e
 
z_šæ©e


	)

95 
	#šæ©eBack
 
z_šæ©eBack


	)

96 
	#šæ©eBackEnd
 
z_šæ©eBackEnd


	)

97 
	#šæ©eBackIn™_
 
z_šæ©eBackIn™_


	)

98 
	#šæ©eCİy
 
z_šæ©eCİy


	)

99 
	#šæ©eEnd
 
z_šæ©eEnd


	)

100 
	#šæ©eG‘H—d”
 
z_šæ©eG‘H—d”


	)

101 
	#šæ©eIn™2_
 
z_šæ©eIn™2_


	)

102 
	#šæ©eIn™_
 
z_šæ©eIn™_


	)

103 
	#šæ©eM¬k
 
z_šæ©eM¬k


	)

104 
	#šæ©ePrime
 
z_šæ©ePrime


	)

105 
	#šæ©eRe£t
 
z_šæ©eRe£t


	)

106 
	#šæ©eRe£t2
 
z_šæ©eRe£t2


	)

107 
	#šæ©eS‘DiùiÚ¬y
 
z_šæ©eS‘DiùiÚ¬y


	)

108 
	#šæ©eG‘DiùiÚ¬y
 
z_šæ©eG‘DiùiÚ¬y


	)

109 
	#šæ©eSync
 
z_šæ©eSync


	)

110 
	#šæ©eSyncPošt
 
z_šæ©eSyncPošt


	)

111 
	#šæ©eUnd”mše
 
z_šæ©eUnd”mše


	)

112 
	#šæ©eRe£tK“p
 
z_šæ©eRe£tK“p


	)

113 
	#šæ©e_cİyright
 
z_šæ©e_cİyright


	)

114 
	#šæ©e_ç¡
 
z_šæ©e_ç¡


	)

115 
	#šæ©e_bË
 
z_šæ©e_bË


	)

116 #iâdeà
Z_SOLO


117 
	#uncom´ess
 
z_uncom´ess


	)

119 
	#zE¼Ü
 
z_zE¼Ü


	)

120 #iâdeà
Z_SOLO


121 
	#zÿÎoc
 
z_zÿÎoc


	)

122 
	#zcä“
 
z_zcä“


	)

124 
	#zlibCompeFÏgs
 
z_zlibCompeFÏgs


	)

125 
	#zlibV”siÚ
 
z_zlibV”siÚ


	)

128 
	#By‹
 
z_By‹


	)

129 
	#By‹f
 
z_By‹f


	)

130 
	#®loc_func
 
z_®loc_func


	)

131 
	#ch¬f
 
z_ch¬f


	)

132 
	#ä“_func
 
z_ä“_func


	)

133 #iâdeà
Z_SOLO


134 
	#gzFe
 
z_gzFe


	)

136 
	#gz_h—d”
 
z_gz_h—d”


	)

137 
	#gz_h—d”p
 
z_gz_h—d”p


	)

138 
	#š_func
 
z_š_func


	)

139 
	#štf
 
z_štf


	)

140 
	#out_func
 
z_out_func


	)

141 
	#uIÁ
 
z_uIÁ


	)

142 
	#uIÁf
 
z_uIÁf


	)

143 
	#uLÚg
 
z_uLÚg


	)

144 
	#uLÚgf
 
z_uLÚgf


	)

145 
	#voidp
 
z_voidp


	)

146 
	#voidpc
 
z_voidpc


	)

147 
	#voidpf
 
z_voidpf


	)

150 
	#gz_h—d”_s
 
z_gz_h—d”_s


	)

151 
	#š‹º®_¡©e
 
z_š‹º®_¡©e


	)

155 #ià
defšed
(
__MSDOS__
è&& !defšed(
MSDOS
)

156 
	#MSDOS


	)

158 #ià(
defšed
(
OS_2
è|| defšed(
__OS2__
)è&& !defšed(
OS2
)

159 
	#OS2


	)

161 #ià
defšed
(
_WINDOWS
è&& !defšed(
WINDOWS
)

162 
	#WINDOWS


	)

164 #ià
defšed
(
_WIN32
è|| defšed(
_WIN32_WCE
è|| defšed(
__WIN32__
)

165 #iâdeà
WIN32


166 
	#WIN32


	)

169 #ià(
defšed
(
MSDOS
è|| defšed(
OS2
è|| defšed(
WINDOWS
)è&& !defšed(
WIN32
)

170 #ià!
defšed
(
__GNUC__
è&& !defšed(
__FLAT__
è&& !defšed(
__386__
)

171 #iâdeà
SYS16BIT


172 
	#SYS16BIT


	)

181 #ifdeà
SYS16BIT


182 
	#MAXSEG_64K


	)

184 #ifdeà
MSDOS


185 
	#UNALIGNED_OK


	)

188 #ifdeà
__STDC_VERSION__


189 #iâdeà
STDC


190 
	#STDC


	)

192 #ià
__STDC_VERSION__
 >= 199901L

193 #iâdeà
STDC99


194 
	#STDC99


	)

198 #ià!
defšed
(
STDC
è&& (defšed(
__STDC__
è|| defšed(
__ılu¥lus
))

199 
	#STDC


	)

201 #ià!
defšed
(
STDC
è&& (defšed(
__GNUC__
è|| defšed(
__BORLANDC__
))

202 
	#STDC


	)

204 #ià!
defšed
(
STDC
è&& (defšed(
MSDOS
è|| defšed(
WINDOWS
è|| defšed(
WIN32
))

205 
	#STDC


	)

207 #ià!
defšed
(
STDC
è&& (defšed(
OS2
è|| defšed(
__HOS_AIX__
))

208 
	#STDC


	)

211 #ià
defšed
(
__OS400__
è&& !defšed(
STDC
)

212 
	#STDC


	)

215 #iâdeà
STDC


217 cÚ¡

	)

221 #ià
defšed
(
ZLIB_CONST
è&& !defšed(
z_cÚ¡
)

222 
	#z_cÚ¡
 cÚ¡

	)

224 
	#z_cÚ¡


	)

228 #ià
defšed
(
__MWERKS__
)||defšed(
­¶ec
)||defšed(
THINK_C
)||defšed(
__SC__
)

229 
	#NO_DUMMY_DECL


	)

233 #iâdeà
MAX_MEM_LEVEL


234 #ifdeà
MAXSEG_64K


235 
	#MAX_MEM_LEVEL
 8

	)

237 
	#MAX_MEM_LEVEL
 9

	)

246 #iâdeà
MAX_WBITS


247 
	#MAX_WBITS
 15

	)

265 #iâdeà
OF


266 #ifdeà
STDC


267 
	#OF
(
¬gs
è
	)
args

269 
	#OF
(
¬gs
è()

	)

273 #iâdeà
Z_ARG


274 #ià
defšed
(
STDC
è|| defšed(
Z_HAVE_STDARG_H
)

275 
	#Z_ARG
(
¬gs
è
	)
args

277 
	#Z_ARG
(
¬gs
è()

	)

287 #ifdeà
SYS16BIT


288 #ià
defšed
(
M_I86SM
è|| defšed(
M_I86MM
)

290 
	#SMALL_MEDIUM


	)

291 #ifdeà
_MSC_VER


292 
	#FAR
 
_çr


	)

294 
	#FAR
 
çr


	)

297 #ià(
defšed
(
__SMALL__
è|| defšed(
__MEDIUM__
))

299 
	#SMALL_MEDIUM


	)

300 #ifdeà
__BORLANDC__


301 
	#FAR
 
_çr


	)

303 
	#FAR
 
çr


	)

308 #ià
defšed
(
WINDOWS
è|| defšed(
WIN32
)

312 #ifdeà
ZLIB_DLL


313 #ià
defšed
(
WIN32
è&& (!defšed(
__BORLANDC__
) || (__BORLANDC__ >= 0x500))

314 #ifdeà
ZLIB_INTERNAL


315 
	#ZEXTERN
 
	`__deş¥ec
(
dÎexpÜt
)

	)

317 
	#ZEXTERN
 
	`__deş¥ec
(
dÎimpÜt
)

	)

325 #ifdeà
ZLIB_WINAPI


326 #ifdeà
FAR


327 #undeà
FAR


329 
	~<wšdows.h
>

332 
	#ZEXPORT
 
WINAPI


	)

333 #ifdeà
WIN32


334 
	#ZEXPORTVA
 
WINAPIV


	)

336 
	#ZEXPORTVA
 
FAR
 
CDECL


	)

341 #ià
defšed
 (
__BEOS__
)

342 #ifdeà
ZLIB_DLL


343 #ifdeà
ZLIB_INTERNAL


344 
	#ZEXPORT
 
	`__deş¥ec
(
dÎexpÜt
)

	)

345 
	#ZEXPORTVA
 
	`__deş¥ec
(
dÎexpÜt
)

	)

347 
	#ZEXPORT
 
	`__deş¥ec
(
dÎimpÜt
)

	)

348 
	#ZEXPORTVA
 
	`__deş¥ec
(
dÎimpÜt
)

	)

353 #iâdeà
ZEXTERN


354 
	#ZEXTERN
 

	)

356 #iâdeà
ZEXPORT


357 
	#ZEXPORT


	)

359 #iâdeà
ZEXPORTVA


360 
	#ZEXPORTVA


	)

363 #iâdeà
FAR


364 
	#FAR


	)

367 #ià!
defšed
(
__MACTYPES__
)

368 
	tBy‹
;

370 
	tuIÁ
;

371 
	tuLÚg
;

373 #ifdeà
SMALL_MEDIUM


375 
	#By‹f
 
By‹
 
FAR


	)

377 
By‹
 
	tFAR
 
	tBy‹f
;

379 
	tFAR
 
	tch¬f
;

380 
	tFAR
 
	tštf
;

381 
uIÁ
 
	tFAR
 
	tuIÁf
;

382 
uLÚg
 
	tFAR
 
	tuLÚgf
;

384 #ifdeà
STDC


385 cÚ¡ *
	tvoidpc
;

386 
	tFAR
 *
	tvoidpf
;

387 *
	tvoidp
;

389 
By‹
 cÚ¡ *
	tvoidpc
;

390 
By‹
 
	tFAR
 *
	tvoidpf
;

391 
By‹
 *
	tvoidp
;

394 #ià!
defšed
(
Z_U4
è&& !defšed(
Z_SOLO
è&& defšed(
STDC
)

395 
	~<lim™s.h
>

396 #ià(
UINT_MAX
 == 0xffffffffUL)

397 
	#Z_U4
 

	)

398 #–ià(
ULONG_MAX
 == 0xffffffffUL)

399 
	#Z_U4
 

	)

400 #–ià(
USHRT_MAX
 == 0xffffffffUL)

401 
	#Z_U4
 

	)

405 #ifdeà
Z_U4


406 
Z_U4
 
	tz_üc_t
;

408 
	tz_üc_t
;

412 
	#Z_HAVE_UNISTD_H


	)

416 
	#Z_HAVE_STDARG_H


	)

419 #ifdeà
STDC


420 #iâdeà
Z_SOLO


421 
	~<sys/ty³s.h
>

425 #ià
defšed
(
STDC
è|| defšed(
Z_HAVE_STDARG_H
)

426 #iâdeà
Z_SOLO


427 
	~<¡d¬g.h
>

431 #ifdeà
_WIN32


432 #iâdeà
Z_SOLO


433 
	~<¡ddef.h
>

443 #ià
defšed
(
_LARGEFILE64_SOURCE
) && -_LARGEFILE64_SOURCE - -1 == 1

444 #undeà
_LARGEFILE64_SOURCE


447 #ià
defšed
(
__WATCOMC__
è&& !defšed(
Z_HAVE_UNISTD_H
)

448 
	#Z_HAVE_UNISTD_H


	)

450 #iâdeà
Z_SOLO


451 #ià
defšed
(
Z_HAVE_UNISTD_H
è|| defšed(
_LARGEFILE64_SOURCE
)

452 
	~<uni¡d.h
>

453 #ifdeà
VMS


454 
	~<unixio.h
>

456 #iâdeà
z_off_t


457 
	#z_off_t
 
off_t


	)

462 #ià
defšed
(
_LFS64_LARGEFILE
) && _LFS64_LARGEFILE-0

463 
	#Z_LFS64


	)

466 #ià
defšed
(
_LARGEFILE64_SOURCE
è&& defšed(
Z_LFS64
)

467 
	#Z_LARGE64


	)

470 #ià
defšed
(
_FILE_OFFSET_BITS
è&& _FILE_OFFSET_BITS-0 =ğ64 && defšed(
Z_LFS64
)

471 
	#Z_WANT64


	)

474 #ià!
defšed
(
SEEK_SET
è&& !defšed(
Z_SOLO
)

475 
	#SEEK_SET
 0

	)

476 
	#SEEK_CUR
 1

	)

477 
	#SEEK_END
 2

	)

480 #iâdeà
z_off_t


481 
	#z_off_t
 

	)

484 #ià!
defšed
(
_WIN32
è&& defšed(
Z_LARGE64
)

485 
	#z_off64_t
 
off64_t


	)

487 #ià
defšed
(
_WIN32
è&& !defšed(
__GNUC__
è&& !defšed(
Z_SOLO
)

488 
	#z_off64_t
 
__št64


	)

490 
	#z_off64_t
 
z_off_t


	)

495 #ià
defšed
(
__MVS__
)

496 #´agm¨
m­
(
deæ©eIn™_
,"DEIN")

497 #´agm¨
m­
(
deæ©eIn™2_
,"DEIN2")

498 #´agm¨
m­
(
deæ©eEnd
,"DEEND")

499 #´agm¨
m­
(
deæ©eBound
,"DEBND")

500 #´agm¨
m­
(
šæ©eIn™_
,"ININ")

501 #´agm¨
m­
(
šæ©eIn™2_
,"ININ2")

502 #´agm¨
m­
(
šæ©eEnd
,"INEND")

503 #´agm¨
m­
(
šæ©eSync
,"INSY")

504 #´agm¨
m­
(
šæ©eS‘DiùiÚ¬y
,"INSEDI")

505 #´agm¨
m­
(
com´essBound
,"CMBND")

506 #´agm¨
m­
(
šæ©e_bË
,"INTABL")

507 #´agm¨
m­
(
šæ©e_ç¡
,"INFA")

508 #´agm¨
m­
(
šæ©e_cİyright
,"INCOPY")

	@zlib.h

31 #iâdeà
ZLIB_H


32 
	#ZLIB_H


	)

34 
	~"zcÚf.h
"

36 #ifdeà
__ılu¥lus


40 
	#ZLIB_VERSION
 "1.2.8"

	)

41 
	#ZLIB_VERNUM
 0x1280

	)

42 
	#ZLIB_VER_MAJOR
 1

	)

43 
	#ZLIB_VER_MINOR
 2

	)

44 
	#ZLIB_VER_REVISION
 8

	)

45 
	#ZLIB_VER_SUBREVISION
 0

	)

80 
voidpf
 (*
	t®loc_func
è
	tOF
((
	tvoidpf
 
	tİaque
, 
	tuIÁ
 
	t™ems
, uIÁ 
	tsize
));

81 (*
ä“_func
è
	tOF
((
	tvoidpf
 
	tİaque
, voidpà
	tadd»ss
));

83 
š‹º®_¡©e
;

85 
	sz_¡»am_s
 {

86 
z_cÚ¡
 
By‹f
 *
Ãxt_š
;

87 
uIÁ
 
ava_š
;

88 
uLÚg
 
tÙ®_š
;

90 
By‹f
 *
Ãxt_out
;

91 
uIÁ
 
ava_out
;

92 
uLÚg
 
tÙ®_out
;

94 
z_cÚ¡
 *
msg
;

95 
š‹º®_¡©e
 
FAR
 *
¡©e
;

97 
®loc_func
 
z®loc
;

98 
ä“_func
 
zä“
;

99 
voidpf
 
İaque
;

101 
d©a_ty³
;

102 
uLÚg
 
adËr
;

103 
uLÚg
 
»£rved
;

104 } 
	tz_¡»am
;

106 
z_¡»am
 
	tFAR
 *
	tz_¡»amp
;

112 
	sgz_h—d”_s
 {

113 
‹xt
;

114 
uLÚg
 
time
;

115 
xæags
;

116 
os
;

117 
By‹f
 *
exŒa
;

118 
uIÁ
 
exŒa_Ën
;

119 
uIÁ
 
exŒa_max
;

120 
By‹f
 *
Çme
;

121 
uIÁ
 
Çme_max
;

122 
By‹f
 *
comm’t
;

123 
uIÁ
 
comm_max
;

124 
hüc
;

125 
dÚe
;

127 } 
	tgz_h—d”
;

129 
gz_h—d”
 
	tFAR
 *
	tgz_h—d”p
;

164 
	#Z_NO_FLUSH
 0

	)

165 
	#Z_PARTIAL_FLUSH
 1

	)

166 
	#Z_SYNC_FLUSH
 2

	)

167 
	#Z_FULL_FLUSH
 3

	)

168 
	#Z_FINISH
 4

	)

169 
	#Z_BLOCK
 5

	)

170 
	#Z_TREES
 6

	)

173 
	#Z_OK
 0

	)

174 
	#Z_STREAM_END
 1

	)

175 
	#Z_NEED_DICT
 2

	)

176 
	#Z_ERRNO
 (-1)

	)

177 
	#Z_STREAM_ERROR
 (-2)

	)

178 
	#Z_DATA_ERROR
 (-3)

	)

179 
	#Z_MEM_ERROR
 (-4)

	)

180 
	#Z_BUF_ERROR
 (-5)

	)

181 
	#Z_VERSION_ERROR
 (-6)

	)

186 
	#Z_NO_COMPRESSION
 0

	)

187 
	#Z_BEST_SPEED
 1

	)

188 
	#Z_BEST_COMPRESSION
 9

	)

189 
	#Z_DEFAULT_COMPRESSION
 (-1)

	)

192 
	#Z_FILTERED
 1

	)

193 
	#Z_HUFFMAN_ONLY
 2

	)

194 
	#Z_RLE
 3

	)

195 
	#Z_FIXED
 4

	)

196 
	#Z_DEFAULT_STRATEGY
 0

	)

199 
	#Z_BINARY
 0

	)

200 
	#Z_TEXT
 1

	)

201 
	#Z_ASCII
 
Z_TEXT


	)

202 
	#Z_UNKNOWN
 2

	)

205 
	#Z_DEFLATED
 8

	)

208 
	#Z_NULL
 0

	)

210 
	#zlib_v”siÚ
 
	`zlibV”siÚ
()

	)

216 
ZEXTERN
 cÚ¡ * 
ZEXPORT
 
zlibV”siÚ
 
OF
(());

246 
ZEXTERN
 
ZEXPORT
 
deæ©e
 
OF
((
z_¡»amp
 
¡rm
, 
æush
));

353 
ZEXTERN
 
ZEXPORT
 
deæ©eEnd
 
OF
((
z_¡»amp
 
¡rm
));

392 
ZEXTERN
 
ZEXPORT
 
šæ©e
 
OF
((
z_¡»amp
 
¡rm
, 
æush
));

508 
ZEXTERN
 
ZEXPORT
 
šæ©eEnd
 
OF
((
z_¡»amp
 
¡rm
));

587 
ZEXTERN
 
ZEXPORT
 
deæ©eS‘DiùiÚ¬y
 
OF
((
z_¡»amp
 
¡rm
,

588 cÚ¡ 
By‹f
 *
diùiÚ¬y
,

589 
uIÁ
 
diùL’gth
));

631 
ZEXTERN
 
ZEXPORT
 
deæ©eCİy
 
OF
((
z_¡»amp
 
de¡
,

632 
z_¡»amp
 
sourû
));

649 
ZEXTERN
 
ZEXPORT
 
deæ©eRe£t
 
OF
((
z_¡»amp
 
¡rm
));

660 
ZEXTERN
 
ZEXPORT
 
deæ©eP¬ams
 
OF
((
z_¡»amp
 
¡rm
,

661 
Ëv–
,

662 
¡¿‹gy
));

681 
ZEXTERN
 
ZEXPORT
 
deæ©eTuÃ
 
OF
((
z_¡»amp
 
¡rm
,

682 
good_Ëngth
,

683 
max_Ïzy
,

684 
niû_Ëngth
,

685 
max_chaš
));

698 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
deæ©eBound
 
OF
((
z_¡»amp
 
¡rm
,

699 
uLÚg
 
sourûL’
));

713 
ZEXTERN
 
ZEXPORT
 
deæ©eP’dšg
 
OF
((
z_¡»amp
 
¡rm
,

714 *
³ndšg
,

715 *
b™s
));

728 
ZEXTERN
 
ZEXPORT
 
deæ©ePrime
 
OF
((
z_¡»amp
 
¡rm
,

729 
b™s
,

730 
v®ue
));

745 
ZEXTERN
 
ZEXPORT
 
deæ©eS‘H—d”
 
OF
((
z_¡»amp
 
¡rm
,

746 
gz_h—d”p
 
h—d
));

819 
ZEXTERN
 
ZEXPORT
 
šæ©eS‘DiùiÚ¬y
 
OF
((
z_¡»amp
 
¡rm
,

820 cÚ¡ 
By‹f
 *
diùiÚ¬y
,

821 
uIÁ
 
diùL’gth
));

842 
ZEXTERN
 
ZEXPORT
 
šæ©eG‘DiùiÚ¬y
 
OF
((
z_¡»amp
 
¡rm
,

843 
By‹f
 *
diùiÚ¬y
,

844 
uIÁ
 *
diùL’gth
));

857 
ZEXTERN
 
ZEXPORT
 
šæ©eSync
 
OF
((
z_¡»amp
 
¡rm
));

876 
ZEXTERN
 
ZEXPORT
 
šæ©eCİy
 
OF
((
z_¡»amp
 
de¡
,

877 
z_¡»amp
 
sourû
));

892 
ZEXTERN
 
ZEXPORT
 
šæ©eRe£t
 
OF
((
z_¡»amp
 
¡rm
));

902 
ZEXTERN
 
ZEXPORT
 
šæ©eRe£t2
 
OF
((
z_¡»amp
 
¡rm
,

903 
wšdowB™s
));

914 
ZEXTERN
 
ZEXPORT
 
šæ©ePrime
 
OF
((
z_¡»amp
 
¡rm
,

915 
b™s
,

916 
v®ue
));

935 
ZEXTERN
 
ZEXPORT
 
šæ©eM¬k
 
OF
((
z_¡»amp
 
¡rm
));

963 
ZEXTERN
 
ZEXPORT
 
šæ©eG‘H—d”
 
OF
((
z_¡»amp
 
¡rm
,

964 
gz_h—d”p
 
h—d
));

1025 (*
š_func
è
	tOF
((
	tFAR
 *,

1026 
	tz_cÚ¡
 
	tFAR
 * FAR *));

1027 (*
out_func
è
	tOF
((
	tFAR
 *, FAR *, ));

1029 
ZEXTERN
 
ZEXPORT
 
šæ©eBack
 
OF
((
z_¡»amp
 
¡rm
,

1030 
š_func
 
š
, 
FAR
 *
š_desc
,

1031 
out_func
 
out
, 
FAR
 *
out_desc
));

1099 
ZEXTERN
 
ZEXPORT
 
šæ©eBackEnd
 
OF
((
z_¡»amp
 
¡rm
));

1107 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
zlibCompeFÏgs
 
OF
(());

1148 #iâdeà
Z_SOLO


1160 
ZEXTERN
 
ZEXPORT
 
com´ess
 
OF
((
By‹f
 *
de¡
, 
uLÚgf
 *
de¡L’
,

1161 cÚ¡ 
By‹f
 *
sourû
, 
uLÚg
 
sourûL’
));

1174 
ZEXTERN
 
ZEXPORT
 
com´ess2
 
OF
((
By‹f
 *
de¡
, 
uLÚgf
 *
de¡L’
,

1175 cÚ¡ 
By‹f
 *
sourû
, 
uLÚg
 
sourûL’
,

1176 
Ëv–
));

1190 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
com´essBound
 
OF
((uLÚg 
sourûL’
));

1197 
ZEXTERN
 
ZEXPORT
 
uncom´ess
 
OF
((
By‹f
 *
de¡
, 
uLÚgf
 *
de¡L’
,

1198 cÚ¡ 
By‹f
 *
sourû
, 
uLÚg
 
sourûL’
));

1224 
gzFe_s
 *
	tgzFe
;

1264 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzdİ’
 
OF
((
fd
, cÚ¡ *
mode
));

1287 
ZEXTERN
 
ZEXPORT
 
gzbufãr
 
OF
((
gzFe
 
fe
, 
size
));

1304 
ZEXTERN
 
ZEXPORT
 
gz£¬ams
 
OF
((
gzFe
 
fe
, 
Ëv–
, 
¡¿‹gy
));

1313 
ZEXTERN
 
ZEXPORT
 
gz»ad
 
OF
((
gzFe
 
fe
, 
voidp
 
buf
, 
Ën
));

1341 
ZEXTERN
 
ZEXPORT
 
gzwr™e
 
OF
((
gzFe
 
fe
,

1342 
voidpc
 
buf
, 
Ën
));

1349 
ZEXTERN
 
ZEXPORTVA
 
gz´štf
 
Z_ARG
((
gzFe
 
fe
, cÚ¡ *
fÜm©
, ...));

1364 
ZEXTERN
 
ZEXPORT
 
gzputs
 
OF
((
gzFe
 
fe
, cÚ¡ *
s
));

1372 
ZEXTERN
 * 
ZEXPORT
 
gzg‘s
 
OF
((
gzFe
 
fe
, *
buf
, 
Ën
));

1385 
ZEXTERN
 
ZEXPORT
 
gzputc
 
OF
((
gzFe
 
fe
, 
c
));

1391 
ZEXTERN
 
ZEXPORT
 
gzg‘c
 
OF
((
gzFe
 
fe
));

1400 
ZEXTERN
 
ZEXPORT
 
gzung‘c
 
OF
((
c
, 
gzFe
 
fe
));

1412 
ZEXTERN
 
ZEXPORT
 
gzæush
 
OF
((
gzFe
 
fe
, 
æush
));

1447 
ZEXTERN
 
ZEXPORT
 
gz»wšd
 
OF
((
gzFe
 
fe
));

1475 
ZEXTERN
 
ZEXPORT
 
gzeof
 
OF
((
gzFe
 
fe
));

1490 
ZEXTERN
 
ZEXPORT
 
gzdœeù
 
OF
((
gzFe
 
fe
));

1511 
ZEXTERN
 
ZEXPORT
 
gzşo£
 
OF
((
gzFe
 
fe
));

1524 
ZEXTERN
 
ZEXPORT
 
gzşo£_r
 
OF
((
gzFe
 
fe
));

1525 
ZEXTERN
 
ZEXPORT
 
gzşo£_w
 
OF
((
gzFe
 
fe
));

1536 
ZEXTERN
 cÚ¡ * 
ZEXPORT
 
gz”rÜ
 
OF
((
gzFe
 
fe
, *
”ºum
));

1552 
ZEXTERN
 
ZEXPORT
 
gzş—»¼
 
OF
((
gzFe
 
fe
));

1569 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32
 
OF
((uLÚg 
adËr
, cÚ¡ 
By‹f
 *
buf
, 
uIÁ
 
Ën
));

1600 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32
 
OF
((uLÚg 
üc
, cÚ¡ 
By‹f
 *
buf
, 
uIÁ
 
Ën
));

1633 
ZEXTERN
 
ZEXPORT
 
deæ©eIn™_
 
OF
((
z_¡»amp
 
¡rm
, 
Ëv–
,

1634 cÚ¡ *
v”siÚ
, 
¡»am_size
));

1635 
ZEXTERN
 
ZEXPORT
 
šæ©eIn™_
 
OF
((
z_¡»amp
 
¡rm
,

1636 cÚ¡ *
v”siÚ
, 
¡»am_size
));

1637 
ZEXTERN
 
ZEXPORT
 
deæ©eIn™2_
 
OF
((
z_¡»amp
 
¡rm
, 
Ëv–
, 
m‘hod
,

1638 
wšdowB™s
, 
memLev–
,

1639 
¡¿‹gy
, cÚ¡ *
v”siÚ
,

1640 
¡»am_size
));

1641 
ZEXTERN
 
ZEXPORT
 
šæ©eIn™2_
 
OF
((
z_¡»amp
 
¡rm
, 
wšdowB™s
,

1642 cÚ¡ *
v”siÚ
, 
¡»am_size
));

1643 
ZEXTERN
 
ZEXPORT
 
šæ©eBackIn™_
 
OF
((
z_¡»amp
 
¡rm
, 
wšdowB™s
,

1644 
FAR
 *
wšdow
,

1645 cÚ¡ *
v”siÚ
,

1646 
¡»am_size
));

1647 
	#deæ©eIn™
(
¡rm
, 
Ëv–
) \

1648 
	`deæ©eIn™_
((
¡rm
), (
Ëv–
), 
ZLIB_VERSION
, ()(
z_¡»am
))

	)

1649 
	#šæ©eIn™
(
¡rm
) \

1650 
	`šæ©eIn™_
((
¡rm
), 
ZLIB_VERSION
, ()(
z_¡»am
))

	)

1651 
	#deæ©eIn™2
(
¡rm
, 
Ëv–
, 
m‘hod
, 
wšdowB™s
, 
memLev–
, 
¡¿‹gy
) \

1652 
	`deæ©eIn™2_
((
¡rm
),(
Ëv–
),(
m‘hod
),(
wšdowB™s
),(
memLev–
),\

1653 (
¡¿‹gy
), 
ZLIB_VERSION
, ()(
z_¡»am
))

	)

1654 
	#šæ©eIn™2
(
¡rm
, 
wšdowB™s
) \

1655 
	`šæ©eIn™2_
((
¡rm
), (
wšdowB™s
), 
ZLIB_VERSION
, \

1656 ()(
z_¡»am
))

	)

1657 
	#šæ©eBackIn™
(
¡rm
, 
wšdowB™s
, 
wšdow
) \

1658 
	`šæ©eBackIn™_
((
¡rm
), (
wšdowB™s
), (
wšdow
), \

1659 
ZLIB_VERSION
, ()(
z_¡»am
))

	)

1661 #iâdeà
Z_SOLO


1670 
	sgzFe_s
 {

1671 
have
;

1672 *
Ãxt
;

1673 
z_off64_t
 
pos
;

1675 
ZEXTERN
 
ZEXPORT
 
gzg‘c_
 
OF
((
gzFe
 
fe
));

1676 #ifdeà
Z_PREFIX_SET


1677 #undeà
z_gzg‘c


1678 
	#z_gzg‘c
(
g
) \

1679 ((
g
)->
have
 ? ((g)->have--, (g)->
pos
++, *((g)->
Ãxt
)++è: 
	`gzg‘c
(g))

	)

1681 
	#gzg‘c
(
g
) \

1682 ((
g
)->
have
 ? ((g)->have--, (g)->
pos
++, *((g)->
Ãxt
)++è: 
	`gzg‘c
(g))

	)

1691 #ifdeà
Z_LARGE64


1692 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’64
 
OF
((const *, const *));

1693 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gz£ek64
 
OF
((
gzFe
, z_off64_t, ));

1694 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gz‹Î64
 
OF
((
gzFe
));

1695 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gzoff£t64
 
OF
((
gzFe
));

1696 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše64
 
OF
((uLÚg, uLÚg, 
z_off64_t
));

1697 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše64
 
OF
((uLÚg, uLÚg, 
z_off64_t
));

1700 #ià!
defšed
(
ZLIB_INTERNAL
è&& defšed(
Z_WANT64
)

1701 #ifdeà
Z_PREFIX_SET


1702 
	#z_gzİ’
 
z_gzİ’64


	)

1703 
	#z_gz£ek
 
z_gz£ek64


	)

1704 
	#z_gz‹Î
 
z_gz‹Î64


	)

1705 
	#z_gzoff£t
 
z_gzoff£t64


	)

1706 
	#z_adËr32_combše
 
z_adËr32_combše64


	)

1707 
	#z_üc32_combše
 
z_üc32_combše64


	)

1709 
	#gzİ’
 
gzİ’64


	)

1710 
	#gz£ek
 
gz£ek64


	)

1711 
	#gz‹Î
 
gz‹Î64


	)

1712 
	#gzoff£t
 
gzoff£t64


	)

1713 
	#adËr32_combše
 
adËr32_combše64


	)

1714 
	#üc32_combše
 
üc32_combše64


	)

1716 #iâdeà
Z_LARGE64


1717 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’64
 
OF
((const *, const *));

1718 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz£ek64
 
OF
((
gzFe
, z_off_t, ));

1719 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz‹Î64
 
OF
((
gzFe
));

1720 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gzoff£t64
 
OF
((
gzFe
));

1721 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše64
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1722 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše64
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1725 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’
 
OF
((const *, const *));

1726 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz£ek
 
OF
((
gzFe
, z_off_t, ));

1727 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz‹Î
 
OF
((
gzFe
));

1728 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gzoff£t
 
OF
((
gzFe
));

1729 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1730 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1735 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1736 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1741 #ià!
defšed
(
ZUTIL_H
è&& !defšed(
NO_DUMMY_DECL
)

1742 
	sš‹º®_¡©e
 {
dummy
;};

1746 
ZEXTERN
 cÚ¡ * 
ZEXPORT
 
zE¼Ü
 
OF
(());

1747 
ZEXTERN
 
ZEXPORT
 
šæ©eSyncPošt
 
OF
((
z_¡»amp
));

1748 
ZEXTERN
 cÚ¡ 
z_üc_t
 
FAR
 * 
ZEXPORT
 
g‘_üc_bË
 
OF
(());

1749 
ZEXTERN
 
ZEXPORT
 
šæ©eUnd”mše
 
OF
((
z_¡»amp
, ));

1750 
ZEXTERN
 
ZEXPORT
 
šæ©eRe£tK“p
 
OF
((
z_¡»amp
));

1751 
ZEXTERN
 
ZEXPORT
 
deæ©eRe£tK“p
 
OF
((
z_¡»amp
));

1752 #ià
defšed
(
_WIN32
è&& !defšed(
Z_SOLO
)

1753 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’_w
 
OF
((cÚ¡ 
wch¬_t
 *
·th
,

1754 cÚ¡ *
mode
));

1756 #ià
defšed
(
STDC
è|| defšed(
Z_HAVE_STDARG_H
)

1757 #iâdeà
Z_SOLO


1758 
ZEXTERN
 
ZEXPORTVA
 
gzv´štf
 
Z_ARG
((
gzFe
 
fe
,

1759 cÚ¡ *
fÜm©
,

1760 
va_li¡
 
va
));

1764 #ifdeà
__ılu¥lus


	@zutil.c

8 
	~"zut.h
"

9 #iâdeà
Z_SOLO


10 
	~"gzguts.h
"

13 #iâdeà
NO_DUMMY_DECL


14 
	sš‹º®_¡©e


16 
	mdummy
;

20 
z_cÚ¡
 *cÚ¡ 
	gz_”rmsg
[10] = {

21 (
z_cÚ¡
 *const) "need dictionary",

22 (
z_cÚ¡
 *const) "streamƒnd",

23 (
z_cÚ¡
 *const) "",

24 (
z_cÚ¡
 *const) "fileƒrror",

25 (
z_cÚ¡
 *const) "streamƒrror",

26 (
z_cÚ¡
 *const) "dataƒrror",

27 (
z_cÚ¡
 *const) "insufficient memory",

28 (
z_cÚ¡
 *const) "bufferƒrror",

29 (
z_cÚ¡
 *const) "incompatible version",

30 (
z_cÚ¡
 *const) ""

34 cÚ¡ *
ZEXPORT


35 
	$zlibV”siÚ
 ()

37  
ZLIB_VERSION
;

38 
	}
}

40 
uLÚg
 
ZEXPORT


41 
	$zlibCompeFÏgs
 ()

43 
uLÚg
 
æags
;

45 
æags
 = 0;

46 (è( (
uIÁ
)))

51 
æags
 += 1;

54 
æags
 += 2;

57 
æags
 += 3;

59 (è( (
uLÚg
)))

64 
æags
 += 1 << 2;

67 
æags
 += 2 << 2;

70 
æags
 += 3 << 2;

72 (è( (
voidpf
)))

77 
æags
 += 1 << 4;

80 
æags
 += 2 << 4;

83 
æags
 += 3 << 4;

85 (è( (
z_off_t
)))

90 
æags
 += 1 << 6;

93 
æags
 += 2 << 6;

96 
æags
 += 3 << 6;

98 #ifdeà
DEBUG


99 
æags
 += 1 << 8;

101 #ià
	`defšed
(
ASMV
è|| defšed(
ASMINF
)

102 
æags
 += 1 << 9;

104 #ifdeà
ZLIB_WINAPI


105 
æags
 += 1 << 10;

107 #ifdeà
BUILDFIXED


108 
æags
 += 1 << 12;

110 #ifdeà
DYNAMIC_CRC_TABLE


111 
æags
 += 1 << 13;

113 #ifdeà
NO_GZCOMPRESS


114 
æags
 += 1L << 16;

116 #ifdeà
NO_GZIP


117 
æags
 += 1L << 17;

119 #ifdeà
PKZIP_BUG_WORKAROUND


120 
æags
 += 1L << 20;

122 #ifdeà
FASTEST


123 
æags
 += 1L << 21;

125 #ià
	`defšed
(
STDC
è|| defšed(
Z_HAVE_STDARG_H
)

126 #ifdeà
NO_v¢´štf


127 
æags
 += 1L << 25;

128 #ifdeà
HAS_v¥rštf_void


129 
æags
 += 1L << 26;

132 #ifdeà
HAS_v¢´štf_void


133 
æags
 += 1L << 26;

137 
æags
 += 1L << 24;

138 #ifdeà
NO_¢´štf


139 
æags
 += 1L << 25;

140 #ifdeà
HAS_¥rštf_void


141 
æags
 += 1L << 26;

144 #ifdeà
HAS_¢´štf_void


145 
æags
 += 1L << 26;

149  
æags
;

150 
	}
}

152 #ifdeà
DEBUG


154 #iâdeà
v”bo£


155 
	#v”bo£
 0

	)

157 
ZLIB_INTERNAL
 
	gz_v”bo£
 = 
v”bo£
;

159 
ZLIB_INTERNAL


160 
	$z_”rÜ
 (
m
)

161 *
m
;

163 
	`årštf
 (
¡d”r
, "%s\n", 
m
);

164 
	`ex™
 (1);

165 
	}
}

171 cÚ¡ *
ZEXPORT


172 
	$zE¼Ü
 (
”r
)

174  
	`ERR_MSG
 (
”r
);

175 
	}
}

177 #ià
defšed
(
_WIN32_WCE
)

182 
	g”ºo
 = 0;

185 #iâdeà
HAVE_MEMCPY


187 
ZLIB_INTERNAL


188 
	$zmemıy
 (
By‹f
 * 
de¡
, cÚ¡ By‹à* 
sourû
, 
uIÁ
 
Ën
)

190 ià(
Ën
 == 0)

194 *
de¡
++ = *
sourû
++;

196 --
Ën
 != 0);

197 
	}
}

199 
ZLIB_INTERNAL


200 
	$zmemcmp
 (cÚ¡ 
By‹f
 * 
s1
, cÚ¡ By‹à* 
s2
, 
uIÁ
 
Ën
)

202 
uIÁ
 
j
;

204 
j
 = 0; j < 
Ën
; j++)

206 ià(
s1
[
j
] !ğ
s2
[j])

207  2 * (
s1
[
j
] > 
s2
[j]) - 1;

210 
	}
}

212 
ZLIB_INTERNAL


213 
	$zmemz”o
 (
By‹f
 * 
de¡
, 
uIÁ
 
Ën
)

215 ià(
Ën
 == 0)

219 *
de¡
++ = 0;

221 --
Ën
 != 0);

222 
	}
}

225 #iâdeà
Z_SOLO


227 #ifdeà
SYS16BIT


229 #ifdeà
__TURBOC__


232 
	#MY_ZCALLOC


	)

240 
	#MAX_PTR
 10

	)

243 
loÿl
 
	gÃxt_±r
 = 0;

245 
	s±r_bË_s


247 
voidpf
 
	mÜg_±r
;

248 
voidpf
 
	mÃw_±r
;

249 } 
	t±r_bË
;

251 
loÿl
 
±r_bË
 
	gbË
[
MAX_PTR
];

259 
voidpf
 
ZLIB_INTERNAL


260 
	$zÿÎoc
 (
voidpf
 
İaque
, 
™ems
, 
size
)

262 
voidpf
 
buf
 = 
İaque
;

263 
ulg
 
bsize
 = (ulgè
™ems
 * 
size
;

268 ià(
bsize
 < 65520L)

270 
buf
 = 
	`çrm®loc
 (
bsize
);

271 ià(*(
ush
 *è& 
buf
 != 0)

272  
buf
;

276 
buf
 = 
	`çrm®loc
 (
bsize
 + 16L);

278 ià(
buf
 =ğ
NULL
 || 
Ãxt_±r
 >ğ
MAX_PTR
)

279  
NULL
;

280 
bË
[
Ãxt_±r
].
Üg_±r
 = 
buf
;

283 *((
ush
 *è& 
buf
 + 1è+ğ((ushè((
uch
 *) buf - 0) + 15) >> 4;

284 *(
ush
 *è& 
buf
 = 0;

285 
bË
[
Ãxt_±r
++].
Ãw_±r
 = 
buf
;

286  
buf
;

287 
	}
}

289 
ZLIB_INTERNAL


290 
	$zcä“
 (
voidpf
 
İaque
, voidpà
±r
)

292 
n
;

293 ià(*(
ush
 *è& 
±r
 != 0)

295 
	`çrä“
 (
±r
);

299 
n
 = 0;‚ < 
Ãxt_±r
;‚++)

301 ià(
±r
 !ğ
bË
[
n
].
Ãw_±r
)

304 
	`çrä“
 (
bË
[
n
].
Üg_±r
);

305 ++
n
 < 
Ãxt_±r
)

307 
bË
[
n
 - 1] =able[n];

309 
Ãxt_±r
--;

312 
±r
 = 
İaque
;

313 
	`As£¹
 (0, "zcfree:…tr‚ot found");

314 
	}
}

319 #ifdeà
M_I86


322 
	#MY_ZCALLOC


	)

324 #ià(!
defšed
(
_MSC_VER
) || (_MSC_VER <= 600))

325 
	#_h®loc
 
h®loc


	)

326 
	#_hä“
 
hä“


	)

329 
voidpf
 
ZLIB_INTERNAL


330 
	$zÿÎoc
 (
voidpf
 
İaque
, 
uIÁ
 
™ems
, uIÁ 
size
)

332 ià(
İaque
)

333 
İaque
 = 0;

334  
	`_h®loc
 ((è
™ems
, 
size
);

335 
	}
}

337 
ZLIB_INTERNAL


338 
	$zcä“
 (
voidpf
 
İaque
, voidpà
±r
)

340 ià(
İaque
)

341 
İaque
 = 0;

342 
	`_hä“
 (
±r
);

343 
	}
}

350 #iâdeà
MY_ZCALLOC


352 #iâdeà
STDC


353 
voidp
 
m®loc
 
OF
 ((
uIÁ
 
size
));

354 
voidp
 
ÿÎoc
 
OF
 ((
uIÁ
 
™ems
, uIÁ 
size
));

355 
ä“
 
OF
 ((
voidpf
 
±r
));

358 
voidpf
 
ZLIB_INTERNAL


359 
	$zÿÎoc
 (
voidpf
 
İaque
, 
™ems
, 
size
)

361 ià(
İaque
)

362 
™ems
 +ğ
size
 - size;

363   (
uIÁ
è> 2 ? (
voidpf
è
	`m®loc
 (
™ems
 * 
size
) :

364 (
voidpf
è
	`ÿÎoc
 (
™ems
, 
size
);

365 
	}
}

367 
ZLIB_INTERNAL


368 
	$zcä“
 (
voidpf
 
İaque
, voidpà
±r
)

370 
	`ä“
 (
±r
);

371 ià(
İaque
)

373 
	}
}

	@zutil.h

13 #iâdeà
ZUTIL_H


14 
	#ZUTIL_H


	)

16 #ifdeà
HAVE_HIDDEN


17 
	#ZLIB_INTERNAL
 
	`__©Œibu‹__
((
	`visib™y
 ("hidd’")))

	)

19 
	#ZLIB_INTERNAL


	)

22 
	~"zlib.h
"

24 #ià
defšed
(
STDC
è&& !defšed(
Z_SOLO
)

25 #ià!(
defšed
(
_WIN32_WCE
è&& defšed(
_MSC_VER
))

26 
	~<¡ddef.h
>

28 
	~<¡ršg.h
>

29 
	~<¡dlib.h
>

32 #ifdeà
Z_SOLO


33 
	t±rdiff_t
;

36 #iâdeà
loÿl


37 
	#loÿl
 

	)

41 
	tuch
;

42 
uch
 
	tFAR
 
	tuchf
;

43 
	tush
;

44 
ush
 
	tFAR
 
	tushf
;

45 
	tulg
;

47 
z_cÚ¡
 * cÚ¡ 
z_”rmsg
[10];

50 
	#ERR_MSG
(
”r
è
z_”rmsg
[
Z_NEED_DICT
-Ó¼)]

	)

52 
	#ERR_RETURN
(
¡rm
,
”r
) \

53  (
¡rm
->
msg
 = 
	`ERR_MSG
(
”r
), (”r))

	)

58 #iâdeà
DEF_WBITS


59 
	#DEF_WBITS
 
MAX_WBITS


	)

63 #ià
MAX_MEM_LEVEL
 >= 8

64 
	#DEF_MEM_LEVEL
 8

	)

66 
	#DEF_MEM_LEVEL
 
MAX_MEM_LEVEL


	)

70 
	#STORED_BLOCK
 0

	)

71 
	#STATIC_TREES
 1

	)

72 
	#DYN_TREES
 2

	)

75 
	#MIN_MATCH
 3

	)

76 
	#MAX_MATCH
 258

	)

79 
	#PRESET_DICT
 0x20

	)

83 #ià
defšed
(
MSDOS
è|| (defšed(
WINDOWS
è&& !defšed(
WIN32
))

84 
	#OS_CODE
 0x00

	)

85 #iâdeà
Z_SOLO


86 #ià
defšed
(
__TURBOC__
è|| defšed(
__BORLANDC__
)

87 #ià(
__STDC__
 =ğ1è&& (
defšed
(
__LARGE__
è|| defšed(
__COMPACT__
))

89 
_Cdeş
 
çrä“
Ğ*
block
 );

90 *
_Cdeş
 
çrm®loc
Ğ
nby‹s
 );

92 
	~<®loc.h
>

95 
	~<m®loc.h
>

100 #ifdeà
AMIGA


101 
	#OS_CODE
 0x01

	)

104 #ià
defšed
(
VAXC
è|| defšed(
VMS
)

105 
	#OS_CODE
 0x02

	)

106 
	#F_OPEN
(
Çme
, 
mode
) \

107 
	`fİ’
((
Çme
), (
mode
), "mbc=60", "ùx=¡m", "rfm=fix", "mrs=512")

	)

110 #ià
defšed
(
ATARI
è|| defšed(
©¬i¡
)

111 
	#OS_CODE
 0x05

	)

114 #ifdeà
OS2


115 
	#OS_CODE
 0x06

	)

116 #ià
defšed
(
M_I86
è&& !defšed(
Z_SOLO
)

117 
	~<m®loc.h
>

121 #ià
defšed
(
MACOS
è|| defšed(
TARGET_OS_MAC
)

122 
	#OS_CODE
 0x07

	)

123 #iâdeà
Z_SOLO


124 #ià
defšed
(
__MWERKS__
è&& 
__de¡_os
 !ğ
__be_os
 && __de¡_o !ğ
__wš32_os


125 
	~<unix.h
>

127 #iâdeà
fdİ’


128 
	#fdİ’
(
fd
,
mode
è
NULL


	)

134 #ifdeà
TOPS20


135 
	#OS_CODE
 0x0a

	)

138 #ifdeà
WIN32


139 #iâdeà
__CYGWIN__


140 
	#OS_CODE
 0x0b

	)

144 #ifdeà
__50SERIES


145 
	#OS_CODE
 0x0f

	)

148 #ià
defšed
(
_BEOS_
è|| defšed(
RISCOS
)

149 
	#fdİ’
(
fd
,
mode
è
NULL


	)

152 #ià(
defšed
(
_MSC_VER
è&& (_MSC_VER > 600)è&& !defšed 
__INTERIX


153 #ià
defšed
(
_WIN32_WCE
)

154 
	#fdİ’
(
fd
,
mode
è
NULL


	)

155 #iâdeà
_PTRDIFF_T_DEFINED


156 
	t±rdiff_t
;

157 
	#_PTRDIFF_T_DEFINED


	)

160 
	#fdİ’
(
fd
,
ty³
è
	`_fdİ’
(fd,ty³)

	)

164 #ià
defšed
(
__BORLANDC__
è&& !defšed(
MSDOS
)

165 #´agm¨
w¬n
 -8004

166 #´agm¨
w¬n
 -8008

167 #´agm¨
w¬n
 -8066

171 #ià!
defšed
(
_WIN32
) && \

172 (!
defšed
(
_LARGEFILE64_SOURCE
è|| 
	g_LFS64_LARGEFILE
-0 == 0)

173 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše64
 
OF
((uLÚg, uLÚg, 
z_off_t
));

174 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše64
 
OF
((uLÚg, uLÚg, 
z_off_t
));

179 #iâdeà
OS_CODE


180 
	#OS_CODE
 0x03

	)

183 #iâdeà
F_OPEN


184 
	#F_OPEN
(
Çme
, 
mode
è
	`fİ’
(Òame), (mode))

	)

189 #ià
defšed
(
pyr
è|| defšed(
Z_SOLO
)

190 
	#NO_MEMCPY


	)

192 #ià
defšed
(
SMALL_MEDIUM
è&& !defšed(
_MSC_VER
è&& !defšed(
__SC__
)

197 
	#NO_MEMCPY


	)

199 #ià
defšed
(
STDC
è&& !defšed(
HAVE_MEMCPY
è&& !defšed(
NO_MEMCPY
)

200 
	#HAVE_MEMCPY


	)

202 #ifdeà
HAVE_MEMCPY


203 #ifdeà
SMALL_MEDIUM


204 
	#zmemıy
 
_fmemıy


	)

205 
	#zmemcmp
 
_fmemcmp


	)

206 
	#zmemz”o
(
de¡
, 
Ën
è
	`_fmem£t
(de¡, 0,†’)

	)

208 
	#zmemıy
 
memıy


	)

209 
	#zmemcmp
 
memcmp


	)

210 
	#zmemz”o
(
de¡
, 
Ën
è
	`mem£t
(de¡, 0,†’)

	)

213 
ZLIB_INTERNAL
 
zmemıy
 
OF
((
By‹f
* 
de¡
, cÚ¡ By‹f* 
sourû
, 
uIÁ
 
Ën
));

214 
ZLIB_INTERNAL
 
zmemcmp
 
OF
((cÚ¡ 
By‹f
* 
s1
, cÚ¡ By‹f* 
s2
, 
uIÁ
 
Ën
));

215 
ZLIB_INTERNAL
 
zmemz”o
 
OF
((
By‹f
* 
de¡
, 
uIÁ
 
Ën
));

219 #ifdeà
DEBUG


220 
	~<¡dio.h
>

221 
ZLIB_INTERNAL
 
z_v”bo£
;

222 
ZLIB_INTERNAL
 
z_”rÜ
 
OF
((*
m
));

223 
	#As£¹
(
cÚd
,
msg
è{if(!(cÚd)è
	`z_”rÜ
(msg);}

	)

224 
	#T¿û
(
x
è{ià(
z_v”bo£
>=0è
årštf
 x ;}

	)

225 
	#T¿ûv
(
x
è{ià(
z_v”bo£
>0è
årštf
 x ;}

	)

226 
	#T¿ûvv
(
x
è{ià(
z_v”bo£
>1è
årštf
 x ;}

	)

227 
	#T¿ûc
(
c
,
x
è{ià(
z_v”bo£
>0 && (c)è
årštf
 x ;}

	)

228 
	#T¿ûcv
(
c
,
x
è{ià(
z_v”bo£
>1 && (c)è
årštf
 x ;}

	)

230 
	#As£¹
(
cÚd
,
msg
)

	)

231 
	#T¿û
(
x
)

	)

232 
	#T¿ûv
(
x
)

	)

233 
	#T¿ûvv
(
x
)

	)

234 
	#T¿ûc
(
c
,
x
)

	)

235 
	#T¿ûcv
(
c
,
x
)

	)

238 #iâdeà
Z_SOLO


239 
voidpf
 
ZLIB_INTERNAL
 
zÿÎoc
 
OF
((voidpà
İaque
, 
™ems
,

240 
size
));

241 
ZLIB_INTERNAL
 
zcä“
 
OF
((
voidpf
 
İaque
, voidpà
±r
));

244 
	#ZALLOC
(
¡rm
, 
™ems
, 
size
) \

245 (*((
¡rm
)->
z®loc
))((¡rm)->
İaque
, (
™ems
), (
size
))

	)

246 
	#ZFREE
(
¡rm
, 
addr
è(*((¡rm)->
zä“
))((¡rm)->
İaque
, (
voidpf
)×ddr))

	)

247 
	#TRY_FREE
(
s
, 
p
è{iàÕè
	`ZFREE
(s,…);}

	)

250 
	#ZSWAP32
(
q
) ((((q) >> 24) & 0xff) + (((q) >> 8) & 0xff00) + \

251 (((
q
è& 0xff00è<< 8è+ (((qè& 0xffè<< 24))

	)

	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #undeà
_ASSERT_H


25 #undeà
as£¹


26 #undeà
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #undeà
as£¹_³¼Ü


34 
	#_ASSERT_H
 1

	)

35 
	~<ã©u»s.h
>

37 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

64 #iâdeà
_ASSERT_H_DECLS


65 
	#_ASSERT_H_DECLS


	)

66 
__BEGIN_DECLS


69 
	$__as£¹_ç
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
,

70 
__lše
, cÚ¡ *
__funùiÚ
)

71 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

74 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, cÚ¡ *
__fe
,

75 
__lše
, cÚ¡ *
__funùiÚ
)

76 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

81 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

82 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

85 
__END_DECLS


88 
	#as£¹
(
ex´
) \

89 ((
ex´
) \

90 ? 
	`__ASSERT_VOID_CAST
 (0) \

91 : 
	`__as£¹_ç
 (
	`__STRING
(
ex´
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

93 #ifdef 
__USE_GNU


94 
	#as£¹_³¼Ü
(
”ºum
) \

95 (!(
”ºum
) \

96 ? 
	`__ASSERT_VOID_CAST
 (0) \

97 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

105 #ià
defšed
 
__ılu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

106 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

108 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

109 
	#__ASSERT_FUNCTION
 
__func__


	)

111 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

118 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ılu¥lus


120 #undeà
¡©ic_as£¹


121 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/crypt.h

24 #iâdeà
_CRYPT_H


25 
	#_CRYPT_H
 1

	)

27 
	~<ã©u»s.h
>

29 
__BEGIN_DECLS


32 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

33 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

36 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

40 
	$’üy±
 (*
__glibc_block
, 
__edæag
)

41 
__THROW
 
	`__nÚnuÎ
 ((1));

43 #ifdeà
__USE_GNU


46 
	süy±_d©a


48 
keysched
[16 * 8];

49 
sb0
[32768];

50 
sb1
[32768];

51 
sb2
[32768];

52 
sb3
[32768];

54 
üy±_3_buf
[14];

55 
cu¼’t_§É
[2];

56 
cu¼’t_§Éb™s
;

57 
dœeùiÚ
, 
š™Ÿlized
;

60 *
	$üy±_r
 (cÚ¡ *
__key
, cÚ¡ *
__§É
,

61 
üy±_d©a
 * 
__»¡riù
 
__d©a
)

62 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

64 
	$£tkey_r
 (cÚ¡ *
__key
,

65 
üy±_d©a
 * 
__»¡riù
 
__d©a
)

66 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

68 
	$’üy±_r
 (*
__glibc_block
, 
__edæag
,

69 
üy±_d©a
 * 
__»¡riù
 
__d©a
)

70 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

73 
__END_DECLS


	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/errno.h

22 #iâdef 
_ERRNO_H


26 #iâdef 
__Ãed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<ã©u»s.h
>

31 
	g__BEGIN_DECLS


35 
	~<b™s/”ºo.h
>

36 #undeà
__Ãed_Em©h


38 #ifdef 
_ERRNO_H


45 #iâdef 
”ºo


46 
”ºo
;

49 #ifdeà
__USE_GNU


54 *
´og¿m_švoÿtiÚ_Çme
, *
´og¿m_švoÿtiÚ_shÜt_Çme
;

58 
	g__END_DECLS


66 #ià
defšed
 
__USE_GNU
 || defšed 
__Ãed_”rÜ_t


67 #iâdeà
__”rÜ_t_defšed


68 
	t”rÜ_t
;

69 
	#__”rÜ_t_defšed
 1

	)

71 #undeà
__Ãed_”rÜ_t


	@/usr/include/fcntl.h

22 #iâdef 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	~<b™s/ty³s.h
>

35 
	~<b™s/fú.h
>

40 #iâdeà
__mode_t_defšed


41 
__mode_t
 
	tmode_t
;

42 
	#__mode_t_defšed


	)

45 #iâdeà
__off_t_defšed


46 #iâdeà
__USE_FILE_OFFSET64


47 
__off_t
 
	toff_t
;

49 
__off64_t
 
	toff_t
;

51 
	#__off_t_defšed


	)

54 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


55 
__off64_t
 
	toff64_t
;

56 
	#__off64_t_defšed


	)

59 #iâdeà
__pid_t_defšed


60 
__pid_t
 
	tpid_t
;

61 
	#__pid_t_defšed


	)

65 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


66 
	#__Ãed_time¥ec


	)

67 
	~<time.h
>

68 
	~<b™s/¡©.h
>

70 
	#S_IFMT
 
__S_IFMT


	)

71 
	#S_IFDIR
 
__S_IFDIR


	)

72 
	#S_IFCHR
 
__S_IFCHR


	)

73 
	#S_IFBLK
 
__S_IFBLK


	)

74 
	#S_IFREG
 
__S_IFREG


	)

75 #ifdeà
__S_IFIFO


76 
	#S_IFIFO
 
__S_IFIFO


	)

78 #ifdeà
__S_IFLNK


79 
	#S_IFLNK
 
__S_IFLNK


	)

81 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
è&& defšed 
__S_IFSOCK


82 
	#S_IFSOCK
 
__S_IFSOCK


	)

87 
	#S_ISUID
 
__S_ISUID


	)

88 
	#S_ISGID
 
__S_ISGID


	)

90 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


92 
	#S_ISVTX
 
__S_ISVTX


	)

95 
	#S_IRUSR
 
__S_IREAD


	)

96 
	#S_IWUSR
 
__S_IWRITE


	)

97 
	#S_IXUSR
 
__S_IEXEC


	)

99 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

101 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

102 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

103 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

105 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

107 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

108 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

109 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

111 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

114 #ifdef 
__USE_MISC


115 #iâdeà
R_OK


118 
	#R_OK
 4

	)

119 
	#W_OK
 2

	)

120 
	#X_OK
 1

	)

121 
	#F_OK
 0

	)

126 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


127 
	#SEEK_SET
 0

	)

128 
	#SEEK_CUR
 1

	)

129 
	#SEEK_END
 2

	)

137 
fú
 (
__fd
, 
__cmd
, ...);

145 #iâdeà
__USE_FILE_OFFSET64


146 
	$İ’
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

148 #ifdeà
__REDIRECT


149 
	`__REDIRECT
 (
İ’
, (cÚ¡ *
__fe
, 
__oæag
, ...), 
İ’64
)

150 
	`__nÚnuÎ
 ((1));

152 
	#İ’
 
İ’64


	)

155 #ifdeà
__USE_LARGEFILE64


156 
	$İ’64
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

159 #ifdeà
__USE_ATFILE


169 #iâdeà
__USE_FILE_OFFSET64


170 
	$İ’©
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

171 
	`__nÚnuÎ
 ((2));

173 #ifdeà
__REDIRECT


174 
	`__REDIRECT
 (
İ’©
, (
__fd
, cÚ¡ *
__fe
, 
__oæag
,

175 ...), 
İ’©64
è
	`__nÚnuÎ
 ((2));

177 
	#İ’©
 
İ’©64


	)

180 #ifdeà
__USE_LARGEFILE64


181 
	$İ’©64
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

182 
	`__nÚnuÎ
 ((2));

191 #iâdeà
__USE_FILE_OFFSET64


192 
	$ü—t
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

194 #ifdeà
__REDIRECT


195 
	`__REDIRECT
 (
ü—t
, (cÚ¡ *
__fe
, 
mode_t
 
__mode
),

196 
ü—t64
è
	`__nÚnuÎ
 ((1));

198 
	#ü—t
 
ü—t64


	)

201 #ifdeà
__USE_LARGEFILE64


202 
	$ü—t64
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

205 #ià!
defšed
 
F_LOCK
 && (defšed 
__USE_MISC
 || (defšed 
__USE_XOPEN_EXTENDED
 \

206 && !
defšed
 
__USE_POSIX
))

215 
	#F_ULOCK
 0

	)

216 
	#F_LOCK
 1

	)

217 
	#F_TLOCK
 2

	)

218 
	#F_TEST
 3

	)

220 #iâdeà
__USE_FILE_OFFSET64


221 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Ën
);

223 #ifdeà
__REDIRECT


224 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
), 
lockf64
);

226 
	#lockf
 
lockf64


	)

229 #ifdeà
__USE_LARGEFILE64


230 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Ën
);

234 #ifdeà
__USE_XOPEN2K


237 #iâdeà
__USE_FILE_OFFSET64


238 
	$posix_çdvi£
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
,

239 
__advi£
è
__THROW
;

241 #ifdeà
__REDIRECT_NTH


242 
	`__REDIRECT_NTH
 (
posix_çdvi£
, (
__fd
, 
__off64_t
 
__off£t
,

243 
__off64_t
 
__Ën
, 
__advi£
),

244 
posix_çdvi£64
);

246 
	#posix_çdvi£
 
posix_çdvi£64


	)

249 #ifdeà
__USE_LARGEFILE64


250 
	$posix_çdvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
,

251 
__advi£
è
__THROW
;

259 #iâdeà
__USE_FILE_OFFSET64


260 
	`posix_çÎoÿ‹
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
);

262 #ifdeà
__REDIRECT


263 
	`__REDIRECT
 (
posix_çÎoÿ‹
, (
__fd
, 
__off64_t
 
__off£t
,

264 
__off64_t
 
__Ën
),

265 
posix_çÎoÿ‹64
);

267 
	#posix_çÎoÿ‹
 
posix_çÎoÿ‹64


	)

270 #ifdeà
__USE_LARGEFILE64


271 
	`posix_çÎoÿ‹64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
);

277 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
 \

278 && 
defšed
 
__va_¬g_·ck_Ën


279 
	~<b™s/fú2.h
>

282 
__END_DECLS


	@/usr/include/limits.h

22 #iâdeà
_LIBC_LIMITS_H_


23 
	#_LIBC_LIMITS_H_
 1

	)

25 
	~<ã©u»s.h
>

31 
	#MB_LEN_MAX
 16

	)

36 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

41 #iâdeà
_LIMITS_H


42 
	#_LIMITS_H
 1

	)

44 
	~<b™s/wÜdsize.h
>

53 
	#CHAR_BIT
 8

	)

56 
	#SCHAR_MIN
 (-128)

	)

57 
	#SCHAR_MAX
 127

	)

60 
	#UCHAR_MAX
 255

	)

63 #ifdeà
__CHAR_UNSIGNED__


64 
	#CHAR_MIN
 0

	)

65 
	#CHAR_MAX
 
UCHAR_MAX


	)

67 
	#CHAR_MIN
 
SCHAR_MIN


	)

68 
	#CHAR_MAX
 
SCHAR_MAX


	)

72 
	#SHRT_MIN
 (-32768)

	)

73 
	#SHRT_MAX
 32767

	)

76 
	#USHRT_MAX
 65535

	)

79 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

80 
	#INT_MAX
 2147483647

	)

83 
	#UINT_MAX
 4294967295U

	)

86 #ià
__WORDSIZE
 == 64

87 
	#LONG_MAX
 9223372036854775807L

	)

89 
	#LONG_MAX
 2147483647L

	)

91 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

94 #ià
__WORDSIZE
 == 64

95 
	#ULONG_MAX
 18446744073709551615UL

	)

97 
	#ULONG_MAX
 4294967295UL

	)

100 #ifdeà
__USE_ISOC99


103 
	#LLONG_MAX
 9223372036854775807LL

	)

104 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

107 
	#ULLONG_MAX
 18446744073709551615ULL

	)

121 #ià
defšed
 
__GNUC__
 && !defšed 
_GCC_LIMITS_H_


123 #šşude_Ãxˆ<
lim™s
.
h
>

129 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__


130 #iâdeà
LLONG_MIN


131 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

133 #iâdeà
LLONG_MAX


134 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

136 #iâdeà
ULLONG_MAX


137 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

141 #ifdef 
__USE_POSIX


143 
	~<b™s/posix1_lim.h
>

146 #ifdef 
__USE_POSIX2


147 
	~<b™s/posix2_lim.h
>

150 #ifdef 
__USE_XOPEN


151 
	~<b™s/xİ’_lim.h
>

	@/usr/include/malloc.h

19 #iâdeà
_MALLOC_H


20 
	#_MALLOC_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<¡ddef.h
>

24 
	~<¡dio.h
>

26 #ifdeà
_LIBC


27 
	#__MALLOC_HOOK_VOLATILE


	)

28 
	#__MALLOC_DEPRECATED


	)

30 
	#__MALLOC_HOOK_VOLATILE
 vŞ©e

	)

31 
	#__MALLOC_DEPRECATED
 
__©Œibu‹_d•»ÿ‹d__


	)

35 
__BEGIN_DECLS


38 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

41 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

42 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

49 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

50 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

53 
	$ä“
 (*
__±r
è
__THROW
;

56 
	$cä“
 (*
__±r
è
__THROW
;

59 *
	$mem®ign
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

60 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

63 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

67 *
	$pv®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

71 *(*
__mÜecÜe
è(
±rdiff_t
 
__size
);

74 *
	$__deçuÉ_mÜecÜe
 (
±rdiff_t
 
__size
)

75 
__THROW
 
__©Œibu‹_m®loc__
;

79 
	sm®lšfo


81 
¬’a
;

82 
Üdblks
;

83 
smblks
;

84 
hblks
;

85 
hblkhd
;

86 
usmblks
;

87 
fsmblks
;

88 
uÜdblks
;

89 
fÜdblks
;

90 
k“pco¡
;

94 
m®lšfo
 
	$m®lšfo
 (è
__THROW
;

97 #iâdeà
M_MXFAST


98 
	#M_MXFAST
 1

	)

100 #iâdeà
M_NLBLKS


101 
	#M_NLBLKS
 2

	)

103 #iâdeà
M_GRAIN


104 
	#M_GRAIN
 3

	)

106 #iâdeà
M_KEEP


107 
	#M_KEEP
 4

	)

111 
	#M_TRIM_THRESHOLD
 -1

	)

112 
	#M_TOP_PAD
 -2

	)

113 
	#M_MMAP_THRESHOLD
 -3

	)

114 
	#M_MMAP_MAX
 -4

	)

115 
	#M_CHECK_ACTION
 -5

	)

116 
	#M_PERTURB
 -6

	)

117 
	#M_ARENA_TEST
 -7

	)

118 
	#M_ARENA_MAX
 -8

	)

121 
	$m®lİt
 (
__·¿m
, 
__v®
è
__THROW
;

125 
	$m®loc_Œim
 (
size_t
 
__·d
è
__THROW
;

129 
size_t
 
	$m®loc_u§bË_size
 (*
__±r
è
__THROW
;

132 
	$m®loc_¡©s
 (è
__THROW
;

135 
	$m®loc_šfo
 (
__İtiÚs
, 
FILE
 *
__å
è
__THROW
;

138 *
	$m®loc_g‘_¡©e
 (è
__THROW
;

142 
	$m®loc_£t_¡©e
 (*
__±r
è
__THROW
;

147 (*
__MALLOC_HOOK_VOLATILE
 
__m®loc_š™Ÿlize_hook
) ()

148 
__MALLOC_DEPRECATED
;

150 (*
__MALLOC_HOOK_VOLATILE
 
__ä“_hook
è(*
__±r
,

152 
__MALLOC_DEPRECATED
;

153 *(*
__MALLOC_HOOK_VOLATILE
 
__m®loc_hook
)(
size_t
 
__size
,

155 
__MALLOC_DEPRECATED
;

156 *(*
__MALLOC_HOOK_VOLATILE
 
__»®loc_hook
)(*
__±r
,

157 
size_t
 
__size
,

159 
__MALLOC_DEPRECATED
;

160 *(*
__MALLOC_HOOK_VOLATILE
 
__mem®ign_hook
)(
size_t
 
__®ignm’t
,

161 
size_t
 
__size
,

163 
__MALLOC_DEPRECATED
;

164 (*
__MALLOC_HOOK_VOLATILE
 
__aá”_mÜecÜe_hook
) ();

167 
	$__m®loc_check_š™
 (è
__THROW
 
__MALLOC_DEPRECATED
;

170 
__END_DECLS


	@/usr/include/math.h

23 #iâdef 
_MATH_H


24 
	#_MATH_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


32 
	~<b™s/huge_v®.h
>

33 #ifdeà
__USE_ISOC99


34 
	~<b™s/huge_v®f.h
>

35 
	~<b™s/huge_v®l.h
>

38 
	~<b™s/šf.h
>

41 
	~<b™s/Çn.h
>

45 
	~<b™s/m©hdef.h
>

52 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

53 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

54 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

55 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

56 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

57 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

58 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

59 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

60 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

61 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

62 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

63 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

65 
	#_MdoubË_
 

	)

66 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

67 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

68 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

69 
	~<b™s/m©hÿÎs.h
>

70 #undeà
_MdoubË_


71 #undeà
_MdoubË_BEGIN_NAMESPACE


72 #undeà
_MdoubË_END_NAMESPACE


73 #undeà
__MATH_PRECNAME


75 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


81 #iâdeà
_Mæßt_


82 
	#_Mæßt_
 

	)

84 
	#_MdoubË_
 
_Mæßt_


	)

85 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

86 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

87 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

88 
	~<b™s/m©hÿÎs.h
>

89 #undeà
_MdoubË_


90 #undeà
_MdoubË_BEGIN_NAMESPACE


91 #undeà
_MdoubË_END_NAMESPACE


92 #undeà
__MATH_PRECNAME


94 #ià!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

95 || 
defšed
 
__LDBL_COMPAT


96 #ifdeà
__LDBL_COMPAT


98 #ifdeà
__USE_ISOC99


99 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

100 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

101 #ifdeà
__REDIRECT_NTH


102 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

103 
__Ædbl_Ãx‰ow¬df
)

104 
	`__©Œibu‹__
 ((
__cÚ¡__
));

105 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

106 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

107 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

108 (
__x
, 
__y
),

109 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

113 #undeà
__MATHDECL_1


114 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

115 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

116 
¬gs
, 
®Ÿs
)

	)

117 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

118 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

124 #iâdeà
_MlÚg_doubË_


125 
	#_MlÚg_doubË_
 

	)

127 
	#_MdoubË_
 
_MlÚg_doubË_


	)

128 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

129 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

130 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

131 
	#__MATH_DECLARE_LDOUBLE
 1

	)

132 
	~<b™s/m©hÿÎs.h
>

133 #undeà
_MdoubË_


134 #undeà
_MdoubË_BEGIN_NAMESPACE


135 #undeà
_MdoubË_END_NAMESPACE


136 #undeà
__MATH_PRECNAME


141 #undeà
__MATHDECL_1


142 #undeà
__MATHDECL


143 #undeà
__MATHCALL


146 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


148 
signgam
;

153 #ifdeà
__USE_ISOC99


191 
FP_NAN
 =

192 
	#FP_NAN
 0

	)

193 
FP_NAN
,

194 
FP_INFINITE
 =

195 
	#FP_INFINITE
 1

	)

196 
FP_INFINITE
,

197 
FP_ZERO
 =

198 
	#FP_ZERO
 2

	)

199 
FP_ZERO
,

200 
FP_SUBNORMAL
 =

201 
	#FP_SUBNORMAL
 3

	)

202 
FP_SUBNORMAL
,

203 
FP_NORMAL
 =

204 
	#FP_NORMAL
 4

	)

205 
FP_NORMAL


209 #ifdeà
__NO_LONG_DOUBLE_MATH


210 
	#åşassify
(
x
) \

211 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

213 
	#åşassify
(
x
) \

214 ( (
x
) ==  () \

215 ? 
	`__åşassifyf
 (
x
) \

216 :  (
x
) ==  () \

217 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

221 #ifdeà
__NO_LONG_DOUBLE_MATH


222 
	#signb™
(
x
) \

223 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

225 
	#signb™
(
x
) \

226 ( (
x
) ==  () \

227 ? 
	`__signb™f
 (
x
) \

228 :  (
x
) ==  () \

229 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

233 #ifdeà
__NO_LONG_DOUBLE_MATH


234 
	#isfš™e
(
x
) \

235 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

237 
	#isfš™e
(
x
) \

238 ( (
x
) ==  () \

239 ? 
	`__fš™ef
 (
x
) \

240 :  (
x
) ==  () \

241 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

245 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

249 #ifdeà
__NO_LONG_DOUBLE_MATH


250 
	#i¢ª
(
x
) \

251 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

253 
	#i¢ª
(
x
) \

254 ( (
x
) ==  () \

255 ? 
	`__i¢ªf
 (
x
) \

256 :  (
x
) ==  () \

257 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

261 #ifdeà
__NO_LONG_DOUBLE_MATH


262 
	#isšf
(
x
) \

263 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

265 
	#isšf
(
x
) \

266 ( (
x
) ==  () \

267 ? 
	`__isšff
 (
x
) \

268 :  (
x
) ==  () \

269 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

273 
	#MATH_ERRNO
 1

	)

274 
	#MATH_ERREXCEPT
 2

	)

279 #iâdeà
__FAST_MATH__


280 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

285 #ifdeà
__USE_GNU


287 #ifdeà
__NO_LONG_DOUBLE_MATH


288 
	#issigÇlšg
(
x
) \

289 ( (
x
è=ğ (è? 
	`__issigÇlšgf
 (xè: 
	`__issigÇlšg
 (x))

	)

291 
	#issigÇlšg
(
x
) \

292 ( (
x
) ==  () \

293 ? 
	`__issigÇlšgf
 (
x
) \

294 :  (
x
) ==  () \

295 ? 
	`__issigÇlšg
 (
x
è: 
	`__issigÇlšgl
 (x))

	)

299 #ifdef 
__USE_MISC


303 
_IEEE_
 = -1,

304 
_SVID_
,

305 
_XOPEN_
,

306 
_POSIX_
,

307 
_ISOC_


308 } 
	t_LIB_VERSION_TYPE
;

313 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

317 #ifdeà
__USE_SVID


323 #ifdeà
__ılu¥lus


324 
__exû±iÚ


326 
exû±iÚ


329 
ty³
;

330 *
Çme
;

331 
¬g1
;

332 
¬g2
;

333 
»tv®
;

334 
	}
};

336 #ifdeà
__ılu¥lus


337 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

339 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

342 
	#X_TLOSS
 1.41484755040568800000e+16

	)

345 
	#DOMAIN
 1

	)

346 
	#SING
 2

	)

347 
	#OVERFLOW
 3

	)

348 
	#UNDERFLOW
 4

	)

349 
	#TLOSS
 5

	)

350 
	#PLOSS
 6

	)

353 
	#HUGE
 3.40282347e+38F

	)

357 #ifdeà
__USE_XOPEN


359 
	#MAXFLOAT
 3.40282347e+38F

	)

366 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


367 
	#M_E
 2.7182818284590452354

	)

368 
	#M_LOG2E
 1.4426950408889634074

	)

369 
	#M_LOG10E
 0.43429448190325182765

	)

370 
	#M_LN2
 0.69314718055994530942

	)

371 
	#M_LN10
 2.30258509299404568402

	)

372 
	#M_PI
 3.14159265358979323846

	)

373 
	#M_PI_2
 1.57079632679489661923

	)

374 
	#M_PI_4
 0.78539816339744830962

	)

375 
	#M_1_PI
 0.31830988618379067154

	)

376 
	#M_2_PI
 0.63661977236758134308

	)

377 
	#M_2_SQRTPI
 1.12837916709551257390

	)

378 
	#M_SQRT2
 1.41421356237309504880

	)

379 
	#M_SQRT1_2
 0.70710678118654752440

	)

385 #ifdeà
__USE_GNU


386 
	#M_El
 2.718281828459045235360287471352662498L

	)

387 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

388 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

389 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

390 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

391 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

392 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

393 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

394 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

395 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

396 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

397 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

398 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

405 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


406 
	#__NO_MATH_INLINES
 1

	)

409 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

416 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

417 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

418 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

419 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

420 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

421 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

425 #ifdeà
__USE_EXTERN_INLINES


426 
	~<b™s/m©hšlše.h
>

431 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

432 
	~<b™s/m©h-fš™e.h
>

435 #ifdeà
__USE_ISOC99


439 #iâdeà
isg»©”


440 
	#isg»©”
(
x
, 
y
) \

441 (
__ex‹nsiÚ__
 \

442 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

443 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

447 #iâdeà
isg»©”equ®


448 
	#isg»©”equ®
(
x
, 
y
) \

449 (
__ex‹nsiÚ__
 \

450 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

451 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

455 #iâdeà
i¦ess


456 
	#i¦ess
(
x
, 
y
) \

457 (
__ex‹nsiÚ__
 \

458 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

459 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

463 #iâdeà
i¦es£qu®


464 
	#i¦es£qu®
(
x
, 
y
) \

465 (
__ex‹nsiÚ__
 \

466 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

467 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

471 #iâdeà
i¦essg»©”


472 
	#i¦essg»©”
(
x
, 
y
) \

473 (
__ex‹nsiÚ__
 \

474 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

475 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

479 #iâdeà
isunÜd”ed


480 
	#isunÜd”ed
(
u
, 
v
) \

481 (
__ex‹nsiÚ__
 \

482 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

483 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

488 
	g__END_DECLS


	@/usr/include/setjmp.h

22 #iâdef 
_SETJMP_H


23 
	#_SETJMP_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/£tjmp.h
>

30 
	~<b™s/sig£t.h
>

34 
	s__jmp_buf_g


40 
__jmp_buf
 
	m__jmpbuf
;

41 
	m__mask_was_§ved
;

42 
__sig£t_t
 
	m__§ved_mask
;

46 
__BEGIN_NAMESPACE_STD


48 
__jmp_buf_g
 
	tjmp_buf
[1];

52 
	$£tjmp
 (
jmp_buf
 
__’v
è
__THROWNL
;

54 
__END_NAMESPACE_STD


59 
	$__sig£tjmp
 (
__jmp_buf_g
 
__’v
[1], 
__§vemask
è
__THROWNL
;

63 
	$_£tjmp
 (
__jmp_buf_g
 
__’v
[1]è
__THROWNL
;

67 
	#£tjmp
(
’v
è
	`_£tjmp
 (’v)

	)

70 
__BEGIN_NAMESPACE_STD


74 
	$lÚgjmp
 (
__jmp_buf_g
 
__’v
[1], 
__v®
)

75 
__THROWNL
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

77 
__END_NAMESPACE_STD


79 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


83 
	$_lÚgjmp
 (
__jmp_buf_g
 
__’v
[1], 
__v®
)

84 
__THROWNL
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

88 #ifdef 
__USE_POSIX


92 
__jmp_buf_g
 
	tsigjmp_buf
[1];

96 
	#sig£tjmp
(
’v
, 
§vemask
è
	`__sig£tjmp
 (’v, savemask)

	)

102 
	$siglÚgjmp
 (
sigjmp_buf
 
__’v
, 
__v®
)

103 
__THROWNL
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

108 #ià
__USE_FORTIFY_LEVEL
 > 0

109 
	~<b™s/£tjmp2.h
>

112 
__END_DECLS


	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/wch¬.h
>

27 
	~<b™s/wÜdsize.h
>

34 #iâdeà
__št8_t_defšed


35 
	#__št8_t_defšed


	)

36 sigÃd 
	tšt8_t
;

37 
	tšt16_t
;

38 
	tšt32_t
;

39 #ià
__WORDSIZE
 == 64

40 
	tšt64_t
;

42 
__ex‹nsiÚ__


43 
	tšt64_t
;

48 
	tušt8_t
;

49 
	tušt16_t
;

50 #iâdeà
__ušt32_t_defšed


51 
	tušt32_t
;

52 
	#__ušt32_t_defšed


	)

54 #ià
__WORDSIZE
 == 64

55 
	tušt64_t
;

57 
__ex‹nsiÚ__


58 
	tušt64_t
;

65 sigÃd 
	tšt_Ëa¡8_t
;

66 
	tšt_Ëa¡16_t
;

67 
	tšt_Ëa¡32_t
;

68 #ià
__WORDSIZE
 == 64

69 
	tšt_Ëa¡64_t
;

71 
__ex‹nsiÚ__


72 
	tšt_Ëa¡64_t
;

76 
	tušt_Ëa¡8_t
;

77 
	tušt_Ëa¡16_t
;

78 
	tušt_Ëa¡32_t
;

79 #ià
__WORDSIZE
 == 64

80 
	tušt_Ëa¡64_t
;

82 
__ex‹nsiÚ__


83 
	tušt_Ëa¡64_t
;

90 sigÃd 
	tšt_ç¡8_t
;

91 #ià
__WORDSIZE
 == 64

92 
	tšt_ç¡16_t
;

93 
	tšt_ç¡32_t
;

94 
	tšt_ç¡64_t
;

96 
	tšt_ç¡16_t
;

97 
	tšt_ç¡32_t
;

98 
__ex‹nsiÚ__


99 
	tšt_ç¡64_t
;

103 
	tušt_ç¡8_t
;

104 #ià
__WORDSIZE
 == 64

105 
	tušt_ç¡16_t
;

106 
	tušt_ç¡32_t
;

107 
	tušt_ç¡64_t
;

109 
	tušt_ç¡16_t
;

110 
	tušt_ç¡32_t
;

111 
__ex‹nsiÚ__


112 
	tušt_ç¡64_t
;

117 #ià
__WORDSIZE
 == 64

118 #iâdeà
__šŒ_t_defšed


119 
	tšŒ_t
;

120 
	#__šŒ_t_defšed


	)

122 
	tušŒ_t
;

124 #iâdeà
__šŒ_t_defšed


125 
	tšŒ_t
;

126 
	#__šŒ_t_defšed


	)

128 
	tušŒ_t
;

133 #ià
__WORDSIZE
 == 64

134 
	tštmax_t
;

135 
	tuštmax_t
;

137 
__ex‹nsiÚ__


138 
	tštmax_t
;

139 
__ex‹nsiÚ__


140 
	tuštmax_t
;

144 #ià
__WORDSIZE
 == 64

145 
	#__INT64_C
(
c
èø## 
L


	)

146 
	#__UINT64_C
(
c
èø## 
UL


	)

148 
	#__INT64_C
(
c
èø## 
LL


	)

149 
	#__UINT64_C
(
c
èø## 
ULL


	)

155 
	#INT8_MIN
 (-128)

	)

156 
	#INT16_MIN
 (-32767-1)

	)

157 
	#INT32_MIN
 (-2147483647-1)

	)

158 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

160 
	#INT8_MAX
 (127)

	)

161 
	#INT16_MAX
 (32767)

	)

162 
	#INT32_MAX
 (2147483647)

	)

163 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

166 
	#UINT8_MAX
 (255)

	)

167 
	#UINT16_MAX
 (65535)

	)

168 
	#UINT32_MAX
 (4294967295U)

	)

169 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

173 
	#INT_LEAST8_MIN
 (-128)

	)

174 
	#INT_LEAST16_MIN
 (-32767-1)

	)

175 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

176 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

178 
	#INT_LEAST8_MAX
 (127)

	)

179 
	#INT_LEAST16_MAX
 (32767)

	)

180 
	#INT_LEAST32_MAX
 (2147483647)

	)

181 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

184 
	#UINT_LEAST8_MAX
 (255)

	)

185 
	#UINT_LEAST16_MAX
 (65535)

	)

186 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

187 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

191 
	#INT_FAST8_MIN
 (-128)

	)

192 #ià
__WORDSIZE
 == 64

193 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

194 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

196 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

197 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

199 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

201 
	#INT_FAST8_MAX
 (127)

	)

202 #ià
__WORDSIZE
 == 64

203 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

204 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

206 
	#INT_FAST16_MAX
 (2147483647)

	)

207 
	#INT_FAST32_MAX
 (2147483647)

	)

209 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINT_FAST8_MAX
 (255)

	)

213 #ià
__WORDSIZE
 == 64

214 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

215 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

217 
	#UINT_FAST16_MAX
 (4294967295U)

	)

218 
	#UINT_FAST32_MAX
 (4294967295U)

	)

220 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

224 #ià
__WORDSIZE
 == 64

225 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

226 
	#INTPTR_MAX
 (9223372036854775807L)

	)

227 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

229 
	#INTPTR_MIN
 (-2147483647-1)

	)

230 
	#INTPTR_MAX
 (2147483647)

	)

231 
	#UINTPTR_MAX
 (4294967295U)

	)

236 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

238 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

241 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

247 #ià
__WORDSIZE
 == 64

248 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

249 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

251 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

252 
	#PTRDIFF_MAX
 (2147483647)

	)

256 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

257 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

260 #ià
__WORDSIZE
 == 64

261 
	#SIZE_MAX
 (18446744073709551615UL)

	)

263 
	#SIZE_MAX
 (4294967295U)

	)

267 #iâdeà
WCHAR_MIN


269 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

270 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

274 
	#WINT_MIN
 (0u)

	)

275 
	#WINT_MAX
 (4294967295u)

	)

278 
	#INT8_C
(
c
è
	)
c

279 
	#INT16_C
(
c
è
	)
c

280 
	#INT32_C
(
c
è
	)
c

281 #ià
__WORDSIZE
 == 64

282 
	#INT64_C
(
c
èø## 
L


	)

284 
	#INT64_C
(
c
èø## 
LL


	)

288 
	#UINT8_C
(
c
è
	)
c

289 
	#UINT16_C
(
c
è
	)
c

290 
	#UINT32_C
(
c
èø## 
U


	)

291 #ià
__WORDSIZE
 == 64

292 
	#UINT64_C
(
c
èø## 
UL


	)

294 
	#UINT64_C
(
c
èø## 
ULL


	)

298 #ià
__WORDSIZE
 == 64

299 
	#INTMAX_C
(
c
èø## 
L


	)

300 
	#UINTMAX_C
(
c
èø## 
UL


	)

302 
	#INTMAX_C
(
c
èø## 
LL


	)

303 
	#UINTMAX_C
(
c
èø## 
ULL


	)

	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ifdeà
__USE_XOPEN2K8


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

101 #iâdeà
__ssize_t_defšed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_defšed


	)

108 
__BEGIN_NAMESPACE_STD


109 #iâdeà
__USE_FILE_OFFSET64


110 
_G_åos_t
 
	tåos_t
;

112 
_G_åos64_t
 
	tåos_t
;

114 
__END_NAMESPACE_STD


115 #ifdeà
__USE_LARGEFILE64


116 
_G_åos64_t
 
	tåos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #iâdeà
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #iâdeà
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifdeà
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


151 
	#P_tmpdœ
 "/tmp"

	)

164 
	~<b™s/¡dio_lim.h
>

168 
_IO_FILE
 *
¡dš
;

169 
_IO_FILE
 *
¡dout
;

170 
_IO_FILE
 *
¡d”r
;

172 
	#¡dš
 
¡dš


	)

173 
	#¡dout
 
¡dout


	)

174 
	#¡d”r
 
¡d”r


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

180 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifdeà
__USE_ATFILE


185 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

186 cÚ¡ *
__Ãw
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #iâdeà
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfe
 (è
__wur
;

197 #ifdeà
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

200 
	#tmpfe
 
tmpfe64


	)

204 #ifdeà
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfe64
 (è
__wur
;

209 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifdeà
__USE_MISC


215 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

219 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


227 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

228 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`fşo£
 (
FILE
 *
__¡»am
);

242 
	`fæush
 (
FILE
 *
__¡»am
);

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_MISC


252 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

255 #ifdeà
__USE_GNU


262 
	`fşo£®l
 ();

266 
__BEGIN_NAMESPACE_STD


267 #iâdeà
__USE_FILE_OFFSET64


272 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

278 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

279 cÚ¡ *
__»¡riù
 
__modes
,

280 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

282 #ifdeà
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

289 
__wur
;

291 
	#fİ’
 
fİ’64


	)

292 
	#äeİ’
 
äeİ’64


	)

295 
__END_NAMESPACE_STD


296 #ifdeà
__USE_LARGEFILE64


297 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

298 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

299 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
,

301 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

313 cÚ¡ *
__»¡riù
 
__modes
,

314 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

317 #ifdeà
__USE_XOPEN2K8


319 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

337 
__modes
, 
size_t
 
__n
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

344 
size_t
 
__size
è
__THROW
;

347 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

357 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

362 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	$¥rštf
 (*
__»¡riù
 
__s
,

365 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

371 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

372 
_G_va_li¡
 
__¬g
);

377 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

379 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

380 
_G_va_li¡
 
__¬g
è
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

387 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

388 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

390 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

391 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifdeà
__USE_GNU


399 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

400 
_G_va_li¡
 
__¬g
)

401 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

402 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

403 cÚ¡ *
__»¡riù
 
__fmt
, ...)

404 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

405 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

406 cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

410 #ifdeà
__USE_XOPEN2K8


412 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

413 
_G_va_li¡
 
__¬g
)

414 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

415 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

426 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

431 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

434 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

436 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

437 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

438 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

439 #ifdeà
__REDIRECT


443 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

445 
__isoc99_fsÿnf
è
__wur
;

446 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_sÿnf
è
__wur
;

448 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

449 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

450 
__isoc99_ssÿnf
);

452 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

454 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

455 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

456 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

457 
	#fsÿnf
 
__isoc99_fsÿnf


	)

458 
	#sÿnf
 
__isoc99_sÿnf


	)

459 
	#ssÿnf
 
__isoc99_ssÿnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

472 
_G_va_li¡
 
__¬g
)

473 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

479 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

483 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

484 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

485 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

487 #ià!
defšed
 
__USE_GNU
 \

488 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

489 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

490 #ifdeà
__REDIRECT


494 
	`__REDIRECT
 (
vfsÿnf
,

495 (
FILE
 *
__»¡riù
 
__s
,

496 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

497 
__isoc99_vfsÿnf
)

498 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

499 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

501 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

502 
	`__REDIRECT_NTH
 (
vssÿnf
,

503 (cÚ¡ *
__»¡riù
 
__s
,

504 cÚ¡ *
__»¡riù
 
__fÜm©
,

505 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

506 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

508 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

509 cÚ¡ *
__»¡riù
 
__fÜm©
,

510 
_G_va_li¡
 
__¬g
è
__wur
;

511 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

514 cÚ¡ *
__»¡riù
 
__fÜm©
,

515 
_G_va_li¡
 
__¬g
è
__THROW
;

516 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

517 
	#vsÿnf
 
__isoc99_vsÿnf


	)

518 
	#vssÿnf
 
__isoc99_vssÿnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fg‘c
 (
FILE
 *
__¡»am
);

532 
	`g‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘ch¬
 ();

539 
__END_NAMESPACE_STD


543 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

545 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


550 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

551 
	`g‘ch¬_uÆocked
 ();

554 #ifdeà
__USE_MISC


561 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

565 
__BEGIN_NAMESPACE_STD


573 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putch¬
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

587 #ifdeà
__USE_MISC


594 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

597 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


602 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 
	`putch¬_uÆocked
 (
__c
);

607 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

608 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

610 
	`g‘w
 (
FILE
 *
__¡»am
);

613 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

623 
__wur
;

625 #ià!
defšed
 
__USE_ISOC11
 \

626 || (
defšed
 
__ılu¥lus
 && __cplusplus <= 201103L)

638 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

640 
__END_NAMESPACE_STD


642 #ifdeà
__USE_GNU


649 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

650 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

668 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

669 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

670 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

678 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

679 
size_t
 *
__»¡riù
 
__n
,

680 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

695 
	`puts
 (cÚ¡ *
__s
);

702 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

709 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

715 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

716 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifdeà
__USE_GNU


726 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

727 
FILE
 *
__»¡riù
 
__¡»am
);

730 #ifdeà
__USE_MISC


737 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

754 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

759 
	`»wšd
 (
FILE
 *
__¡»am
);

760 
__END_NAMESPACE_STD


767 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


768 #iâdeà
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

778 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

780 #ifdeà
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#á–lo
 
á–lo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #iâdeà
__USE_FILE_OFFSET64


798 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

803 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

805 #ifdeà
__REDIRECT


806 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

807 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

808 
	`__REDIRECT
 (
f£os
,

809 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

811 
	#fg‘pos
 
fg‘pos64


	)

812 
	#f£os
 
f£os64


	)

815 
__END_NAMESPACE_STD


817 #ifdeà
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

819 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

820 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

821 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

828 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

830 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifdeà
__USE_MISC


835 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

836 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

837 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`³¼Ü
 (cÚ¡ *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<b™s/sys_”¾i¡.h
>

856 #ifdef 
__USE_POSIX


858 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

861 #ifdeà
__USE_MISC


863 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

867 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

868 
defšed
 
__USE_MISC
)

873 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

879 
	`pşo£
 (
FILE
 *
__¡»am
);

883 #ifdef 
__USE_POSIX


885 *
	$ù”mid
 (*
__s
è
__THROW
;

889 #ifdeà
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob¡ack
;

899 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

900 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

901 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

902 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

903 cÚ¡ *
__»¡riù
 
__fÜm©
,

904 
_G_va_li¡
 
__¬gs
)

905 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

909 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


913 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

917 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

920 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

923 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


927 
	#__Ãed_g‘İt


	)

928 
	~<g‘İt.h
>

933 #ifdeà
__USE_EXTERN_INLINES


934 
	~<b™s/¡dio.h
>

936 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


937 
	~<b™s/¡dio2.h
>

939 #ifdeà
__LDBL_COMPAT


940 
	~<b™s/¡dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_BSD


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifdeà
__USE_BSD


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__ex‹nsiÚ__
 
__a
;

423 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

424 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

425 
	$”ªd48_r
 (
__xsubi
[3],

426 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

427 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

431 *
__»¡riù
 
__»suÉ
)

432 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

433 
	$Äªd48_r
 (
__xsubi
[3],

434 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

435 *
__»¡riù
 
__»suÉ
)

436 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

439 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

442 
	$j¿nd48_r
 (
__xsubi
[3],

443 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

444 *
__»¡riù
 
__»suÉ
)

445 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

448 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

449 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$lcÚg48_r
 (
__·¿m
[7],

455 
d¿nd48_d©a
 *
__bufãr
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

462 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


463 
	#__m®loc_ªd_ÿÎoc_defšed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

468 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

469 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

483 
	$ä“
 (*
__±r
è
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$cä“
 (*
__±r
è
__THROW
;

491 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


492 
	~<®loÿ.h
>

495 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

496 || 
defšed
 
__USE_BSD


498 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

501 #ifdeà
__USE_XOPEN2K


503 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

507 #ifdeà
__USE_ISOC11


509 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

510 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

521 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


523 #ifdeà
__ılu¥lus


524 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


549 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

551 
__END_NAMESPACE_STD


553 #ifdeà
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

565 
__END_NAMESPACE_STD


567 #ifdeà
__USE_GNU


570 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

571 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


584 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 \

600 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

609 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

610 || 
defšed
 
__USE_XOPEN2K8


619 #iâdeà
__USE_FILE_OFFSET64


620 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

622 #ifdeà
__REDIRECT


623 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

624 
	`__nÚnuÎ
 ((1)è
__wur
;

626 
	#mk¡emp
 
mk¡emp64


	)

629 #ifdeà
__USE_LARGEFILE64


630 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

634 #ifdeà
__USE_MISC


641 #iâdeà
__USE_FILE_OFFSET64


642 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

644 #ifdeà
__REDIRECT


645 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

646 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

648 
	#mk¡emps
 
mk¡emps64


	)

651 #ifdeà
__USE_LARGEFILE64


652 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

653 
	`__nÚnuÎ
 ((1)è
__wur
;

657 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


663 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

666 #ifdeà
__USE_GNU


673 #iâdeà
__USE_FILE_OFFSET64


674 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

676 #ifdeà
__REDIRECT


677 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

678 
	`__nÚnuÎ
 ((1)è
__wur
;

680 
	#mko¡emp
 
mko¡emp64


	)

683 #ifdeà
__USE_LARGEFILE64


684 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

693 #iâdeà
__USE_FILE_OFFSET64


694 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 #ifdeà
__REDIRECT


698 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

699 
__æags
), 
mko¡emps64
)

700 
	`__nÚnuÎ
 ((1)è
__wur
;

702 
	#mko¡emps
 
mko¡emps64


	)

705 #ifdeà
__USE_LARGEFILE64


706 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

707 
	`__nÚnuÎ
 ((1)è
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

725 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

728 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


734 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

735 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

740 #iâdeà
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com·r_â_t
) (const *, const *);

744 #ifdef 
__USE_GNU


745 
__com·r_â_t
 
	tcom·risÚ_â_t
;

748 #ifdeà
__USE_GNU


749 (*
	t__com·r_d_â_t
) (const *, const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

756 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

757 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

759 #ifdeà
__USE_EXTERN_INLINES


760 
	~<b™s/¡dlib-b£¬ch.h
>

765 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

766 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

767 #ifdeà
__USE_GNU


768 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

769 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

770 
	`__nÚnuÎ
 ((1, 4));

775 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

777 
__END_NAMESPACE_STD


779 #ifdeà
__USE_ISOC99


780 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

781 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

785 
__BEGIN_NAMESPACE_STD


789 
div_t
 
	$div
 (
__num”
, 
__d’om
)

790 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

791 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

792 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

793 
__END_NAMESPACE_STD


795 #ifdeà
__USE_ISOC99


796 
__BEGIN_NAMESPACE_C99


797 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

798 
__d’om
)

799 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

800 
__END_NAMESPACE_C99


804 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

805 || 
defšed
 
__USE_SVID


812 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

813 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

818 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

819 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

824 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

825 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

828 #ifdeà
__USE_MISC


830 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

831 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

832 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

833 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

834 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

835 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

836 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

837 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

842 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

843 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

844 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

845 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

846 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

847 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

849 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

850 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

851 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

852 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

853 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

854 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

855 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

856 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

860 
__BEGIN_NAMESPACE_STD


863 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

866 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

867 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

870 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

874 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

875 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

877 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

878 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

879 
__THROW
;

880 
__END_NAMESPACE_STD


883 #ifdeà
__USE_SVID


888 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

892 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


899 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

900 *cÚ¡ *
__»¡riù
 
__tok’s
,

901 **
__»¡riù
 
__v®u•
)

902 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

906 #ifdeà
__USE_XOPEN


908 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

914 #ifdeà
__USE_XOPEN2KXSI


916 
	$posix_İ’±
 (
__oæag
è
__wur
;

919 #ifdeà
__USE_XOPEN


924 
	$g¿Á±
 (
__fd
è
__THROW
;

928 
	$uÆock±
 (
__fd
è
__THROW
;

933 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

936 #ifdeà
__USE_GNU


940 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

941 
__THROW
 
	`__nÚnuÎ
 ((2));

944 
	`g‘±
 ();

947 #ifdeà
__USE_BSD


951 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

952 
__THROW
 
	`__nÚnuÎ
 ((1));

955 
	~<b™s/¡dlib-æßt.h
>

958 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


959 
	~<b™s/¡dlib.h
>

961 #ifdeà
__LDBL_COMPAT


962 
	~<b™s/¡dlib-ldbl.h
>

966 #undeà
__Ãed_m®loc_ªd_ÿÎoc


968 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

39 #ià
defšed
 
__ılu¥lus
 && (__ılu¥lu >ğ199711L || 
__GNUC_PREREQ
 (4, 4))

40 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

44 
__BEGIN_NAMESPACE_STD


46 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

47 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

50 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

51 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

52 
__END_NAMESPACE_STD


57 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


58 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

59 
__c
, 
size_t
 
__n
)

60 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

64 
__BEGIN_NAMESPACE_STD


66 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

69 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

70 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

73 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


76 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

77 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

79 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ifdeà
__OPTIMIZE__


82 
__ex‹º_®ways_šlše
 *

83 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


85  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

88 
__ex‹º_®ways_šlše
 const *

89 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


91  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

94 
	}
}

96 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

97 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

99 
__END_NAMESPACE_STD


101 #ifdeà
__USE_GNU


104 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


105 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

106 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

107 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

108 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

110 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

111 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

115 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


116 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

117 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

118 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

119 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

121 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

122 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

127 
__BEGIN_NAMESPACE_STD


129 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

132 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

133 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

137 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

138 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

141 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

144 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

151 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

152 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

154 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

155 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

156 
__THROW
 
	`__nÚnuÎ
 ((2));

157 
__END_NAMESPACE_STD


159 #ifdeà
__USE_XOPEN2K8


163 
	~<xloÿË.h
>

166 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

167 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

169 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

170 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

173 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

174 || 
defšed
 
__USE_XOPEN2K8


176 *
	$¡rdup
 (cÚ¡ *
__s
)

177 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

183 #ià
defšed
 
__USE_XOPEN2K8


184 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

185 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

188 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


190 
	#¡rdu·
(
s
) \

191 (
__ex‹nsiÚ__
 \

193 cÚ¡ *
__Şd
 = (
s
); \

194 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

195 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

196 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

197 
	}
}))

	)

200 
	#¡ºdu·
(
s
, 
n
) \

201 (
__ex‹nsiÚ__
 \

203 cÚ¡ *
__Şd
 = (
s
); \

204 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

205 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

206 
__Ãw
[
__Ën
] = '\0'; \

207 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

208 }))

	)

211 
	g__BEGIN_NAMESPACE_STD


213 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


216 *
¡rchr
 (*
__s
, 
__c
)

217 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

218 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

219 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

221 #ifdeà
__OPTIMIZE__


222 
__ex‹º_®ways_šlše
 *

223 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


225  
__butš_¡rchr
 (
__s
, 
__c
);

228 
__ex‹º_®ways_šlše
 const *

229 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


231  
__butš_¡rchr
 (
__s
, 
__c
);

236 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

237 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

240 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


243 *
	`¡¼chr
 (*
__s
, 
__c
)

244 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

245 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

246 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

248 #ifdeà
__OPTIMIZE__


249 
__ex‹º_®ways_šlše
 *

250 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


252  
	`__butš_¡¼chr
 (
__s
, 
__c
);

255 
__ex‹º_®ways_šlše
 const *

256 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


258  
	`__butš_¡¼chr
 (
__s
, 
__c
);

261 
	}
}

263 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

264 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

266 
__END_NAMESPACE_STD


268 #ifdeà
__USE_GNU


271 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


272 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

273 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

274 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

275 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

277 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

278 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

282 
__BEGIN_NAMESPACE_STD


285 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

286 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

289 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

290 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

292 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


295 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

296 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

297 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

298 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

300 #ifdeà
__OPTIMIZE__


301 
__ex‹º_®ways_šlše
 *

302 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


304  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

307 
__ex‹º_®ways_šlše
 const *

308 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


310  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

313 
	}
}

315 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

316 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

319 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


322 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

323 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

324 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

325 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

327 #ifdeà
__OPTIMIZE__


328 
__ex‹º_®ways_šlše
 *

329 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


331  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

334 
__ex‹º_®ways_šlše
 const *

335 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


337  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

340 
	}
}

342 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

343 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

348 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

349 
__THROW
 
	`__nÚnuÎ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

355 cÚ¡ *
__»¡riù
 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

358 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


359 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

360 **
__»¡riù
 
__§ve_±r
)

361 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

364 #ifdeà
__USE_GNU


366 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

368 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

370 cÚ¡ *
__ÃedË
)

371 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

373 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

374 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

378 #ifdeà
__USE_GNU


382 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

383 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

384 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

388 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

389 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

390 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

391 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

392 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

400 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

407 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

414 
__END_NAMESPACE_STD


415 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


423 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


426 #ifdeà
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

428 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

429 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

431 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

433 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

438 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

439 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

443 #ifdeà
__USE_XOPEN2K8


445 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

451 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

453 #ifdeà
__USE_BSD


455 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

462 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

466 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`šdex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

471 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

474 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__ex‹º_®ways_šlše
 *

476 
	`šdex
 (*
__s
, 
__c
è
__THROW


478  
	`__butš_šdex
 (
__s
, 
__c
);

481 
__ex‹º_®ways_šlše
 const *

482 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


484  
	`__butš_šdex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

490 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

494 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`ršdex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

499 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

502 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__ex‹º_®ways_šlše
 *

504 
	`ršdex
 (*
__s
, 
__c
è
__THROW


506  
	`__butš_ršdex
 (
__s
, 
__c
);

509 
__ex‹º_®ways_šlše
 const *

510 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


512  
	`__butš_ršdex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

518 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

523 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

527 #ifdef 
__USE_GNU


528 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

529 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

530 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

534 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

535 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

538 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

539 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

542 #ifdef 
__USE_GNU


545 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

546 
__loÿË_t
 
__loc
)

547 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

549 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

550 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

551 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

554 #ifdef 
__USE_BSD


557 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

558 cÚ¡ *
__»¡riù
 
__d–im
)

559 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

562 #ifdef 
__USE_XOPEN2K8


564 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

567 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

568 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

569 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

570 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

574 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

575 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

576 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

577 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

578 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

582 #ifdef 
__USE_GNU


584 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

585 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

588 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

593 #iâdeà
ba£Çme


598 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


599 "C++" *
	$ba£Çme
 (*
__f’ame
)

600 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

601 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

602 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

604 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

610 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

611 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

612 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


632 
	~<b™s/¡ršg.h
>

635 
	~<b™s/¡ršg2.h
>

638 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


640 
	~<b™s/¡ršg3.h
>

644 
__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_SVID


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

71 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

75 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

79 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

83 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

86 #ifdeà
__USE_XOPEN2K8


87 
	#_XOPEN_VERSION
 700

	)

88 #–ià
defšed
 
__USE_XOPEN2K


89 
	#_XOPEN_VERSION
 600

	)

90 #–ià
defšed
 
__USE_UNIX98


91 
	#_XOPEN_VERSION
 500

	)

93 
	#_XOPEN_VERSION
 4

	)

97 
	#_XOPEN_XCU_VERSION
 4

	)

100 
	#_XOPEN_XPG2
 1

	)

101 
	#_XOPEN_XPG3
 1

	)

102 
	#_XOPEN_XPG4
 1

	)

105 
	#_XOPEN_UNIX
 1

	)

108 
	#_XOPEN_CRYPT
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<b™s/posix_İt.h
>

205 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


206 
	~<b™s/’vœÚm’ts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<b™s/ty³s.h
>

219 #iâdef 
__ssize_t_defšed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_defšed


	)

224 
	#__Ãed_size_t


	)

225 
	#__Ãed_NULL


	)

226 
	~<¡ddef.h
>

228 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


231 #iâdeà
__gid_t_defšed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_defšed


	)

236 #iâdeà
__uid_t_defšed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_defšed


	)

241 #iâdeà
__off_t_defšed


242 #iâdeà
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_defšed


	)

249 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_defšed


	)

254 #iâdeà
__u£cÚds_t_defšed


255 
__u£cÚds_t
 
	tu£cÚds_t
;

256 
	#__u£cÚds_t_defšed


	)

259 #iâdeà
__pid_t_defšed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_defšed


	)

265 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


266 #iâdeà
__šŒ_t_defšed


267 
__šŒ_t
 
	tšŒ_t
;

268 
	#__šŒ_t_defšed


	)

272 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


273 #iâdeà
__sockËn_t_defšed


274 
__sockËn_t
 
	tsockËn_t
;

275 
	#__sockËn_t_defšed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

289 #ifdeà
__USE_GNU


292 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

293 
__THROW
 
	`__nÚnuÎ
 ((1));

296 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

297 
__THROW
 
	`__nÚnuÎ
 ((1));

300 #ifdeà
__USE_ATFILE


304 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

305 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

310 #iâdef 
_STDIO_H


311 
	#SEEK_SET
 0

	)

312 
	#SEEK_CUR
 1

	)

313 
	#SEEK_END
 2

	)

314 #ifdeà
__USE_GNU


315 
	#SEEK_DATA
 3

	)

316 
	#SEEK_HOLE
 4

	)

320 #ià
defšed
 
__USE_BSD
 && !defšed 
L_SET


322 
	#L_SET
 
SEEK_SET


	)

323 
	#L_INCR
 
SEEK_CUR


	)

324 
	#L_XTND
 
SEEK_END


	)

333 #iâdeà
__USE_FILE_OFFSET64


334 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

336 #ifdeà
__REDIRECT_NTH


337 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

338 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

339 
l£ek64
);

341 
	#l£ek
 
l£ek64


	)

344 #ifdeà
__USE_LARGEFILE64


345 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

346 
__THROW
;

353 
	`şo£
 (
__fd
);

360 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

366 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur
;

368 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


369 #iâdeà
__USE_FILE_OFFSET64


376 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

377 
__off_t
 
__off£t
è
__wur
;

384 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

385 
__off_t
 
__off£t
è
__wur
;

387 #ifdeà
__REDIRECT


388 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

389 
__off64_t
 
__off£t
),

390 
´—d64
è
__wur
;

391 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

392 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

393 
pwr™e64
è
__wur
;

395 
	#´—d
 
´—d64


	)

396 
	#pwr™e
 
pwr™e64


	)

400 #ifdeà
__USE_LARGEFILE64


404 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

405 
__off64_t
 
__off£t
è
__wur
;

408 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

409 
__off64_t
 
__off£t
è
__wur
;

417 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

419 #ifdeà
__USE_GNU


422 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

432 
	$®¬m
 (
__£cÚds
è
__THROW
;

444 
	`¦“p
 (
__£cÚds
);

446 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

447 || 
defšed
 
__USE_BSD


452 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

453 
__THROW
;

460 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

469 
	`·u£
 ();

473 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

474 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

476 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


478 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

483 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

484 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

488 #ifdeà
__USE_ATFILE


491 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

492 
__gid_t
 
__group
, 
__æag
)

493 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

497 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

499 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


501 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

511 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

513 #ifdef 
__USE_GNU


517 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

520 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

521 || 
defšed
 
__USE_BSD


525 *
	$g‘wd
 (*
__buf
)

526 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

531 
	$dup
 (
__fd
è
__THROW
 
__wur
;

534 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

536 #ifdeà
__USE_GNU


539 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

543 **
__’vœÚ
;

544 #ifdeà
__USE_GNU


545 **
’vœÚ
;

551 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

552 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

554 #ifdeà
__USE_XOPEN2K8


557 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

558 
__THROW
 
	`__nÚnuÎ
 ((2));

563 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

564 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

568 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

569 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

573 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

578 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

584 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

585 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

587 #ifdeà
__USE_GNU


590 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

591 *cÚ¡ 
__’vp
[])

592 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

596 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


598 
	$niû
 (
__šc
è
__THROW
 
__wur
;

603 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

609 
	~<b™s/cÚâame.h
>

612 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

613 
__THROW
 
	`__nÚnuÎ
 ((1));

616 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

619 
	$syscÚf
 (
__Çme
è
__THROW
;

621 #ifdef 
__USE_POSIX2


623 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

628 
__pid_t
 
	$g‘pid
 (è
__THROW
;

631 
__pid_t
 
	$g‘µid
 (è
__THROW
;

634 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

637 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

638 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


639 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

646 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

648 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


660 
	$£g½
 (è
__THROW
;

667 
__pid_t
 
	$£tsid
 (è
__THROW
;

669 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


671 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

675 
__uid_t
 
	$g‘uid
 (è
__THROW
;

678 
__uid_t
 
	$g‘euid
 (è
__THROW
;

681 
__gid_t
 
	$g‘gid
 (è
__THROW
;

684 
__gid_t
 
	$g‘egid
 (è
__THROW
;

689 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

691 #ifdef 
__USE_GNU


693 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

700 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

702 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


705 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

708 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


710 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

717 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

719 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


722 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

725 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


727 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

730 #ifdeà
__USE_GNU


733 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

734 
__THROW
;

738 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

739 
__THROW
;

743 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

744 
__THROW
 
__wur
;

748 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

749 
__THROW
 
__wur
;

756 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

758 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

759 || 
defšed
 
__USE_BSD


764 
__pid_t
 
	$vfÜk
 (è
__THROW
;

770 *
	$‰yÇme
 (
__fd
è
__THROW
;

774 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

775 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

779 
	$i§‰y
 (
__fd
è
__THROW
;

781 #ià
defšed
 
__USE_BSD
 \

782 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_UNIX98
)

785 
	$‰y¦Ù
 (è
__THROW
;

790 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

791 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

793 #ifdeà
__USE_ATFILE


796 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

797 cÚ¡ *
__to
, 
__æags
)

798 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

801 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


803 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

804 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

809 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

810 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

811 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

814 #ifdeà
__USE_ATFILE


816 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

817 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

820 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

821 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

822 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

826 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

828 #ifdeà
__USE_ATFILE


830 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

831 
__THROW
 
	`__nÚnuÎ
 ((2));

835 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

839 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

842 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

849 *
	`g‘logš
 ();

850 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


857 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

860 #ifdef 
__USE_BSD


862 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

866 #ifdef 
__USE_POSIX2


870 
	#__Ãed_g‘İt


	)

871 
	~<g‘İt.h
>

875 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


879 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

883 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

886 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

887 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

891 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

897 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

898 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

899 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

900 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

906 
	$vhªgup
 (è
__THROW
;

909 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

917 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

918 
size_t
 
__off£t
, 
__sÿË
)

919 
__THROW
 
	`__nÚnuÎ
 ((1));

925 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

929 *
	$g‘u£rsh–l
 (è
__THROW
;

930 
	$’du£rsh–l
 (è
__THROW
;

931 
	$£tu£rsh–l
 (è
__THROW
;

937 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

941 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

944 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

948 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

956 
	`fsync
 (
__fd
);

959 #ifdeà
__USE_GNU


962 
	$syncfs
 (
__fd
è
__THROW
;

966 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


969 
	`g‘ho¡id
 ();

972 
	$sync
 (è
__THROW
;

975 #ià
defšed
 
__USE_BSD
 || !defšed 
__USE_XOPEN2K


978 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

983 
	$g‘dbËsize
 (è
__THROW
;

989 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


992 #iâdeà
__USE_FILE_OFFSET64


993 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

994 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

996 #ifdeà
__REDIRECT_NTH


997 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

998 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

999 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1001 
	#Œunÿ‹
 
Œunÿ‹64


	)

1004 #ifdeà
__USE_LARGEFILE64


1005 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1006 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1011 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_POSIX199309
 \

1012 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1015 #iâdeà
__USE_FILE_OFFSET64


1016 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1018 #ifdeà
__REDIRECT_NTH


1019 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1020 
árunÿ‹64
è
__wur
;

1022 
	#árunÿ‹
 
árunÿ‹64


	)

1025 #ifdeà
__USE_LARGEFILE64


1026 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1032 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1033 || 
defšed
 
__USE_MISC


1037 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1043 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1047 #ifdeà
__USE_MISC


1058 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1063 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1075 
	#F_ULOCK
 0

	)

1076 
	#F_LOCK
 1

	)

1077 
	#F_TLOCK
 2

	)

1078 
	#F_TEST
 3

	)

1080 #iâdeà
__USE_FILE_OFFSET64


1081 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1083 #ifdeà
__REDIRECT


1084 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1085 
lockf64
è
__wur
;

1087 
	#lockf
 
lockf64


	)

1090 #ifdeà
__USE_LARGEFILE64


1091 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1096 #ifdeà
__USE_GNU


1101 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1102 (
__ex‹nsiÚ__
 \

1103 ({ 
__»suÉ
; \

1104 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1105 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1106 
__»suÉ
; 
	}
}))

	)

1109 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1112 
fd©async
 (
__fdes
);

1118 #ifdef 
__USE_XOPEN


1120 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1121 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1125 
	$’üy±
 (*
__glibc_block
, 
__edæag
)

1126 
__THROW
 
	`__nÚnuÎ
 ((1));

1133 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1134 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1140 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1142 *
	$ù”mid
 (*
__s
è
__THROW
;

1147 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1148 
	~<b™s/uni¡d.h
>

1151 
__END_DECLS


	@/usr/include/utime.h

22 #iâdef 
_UTIME_H


23 
	#_UTIME_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/ty³s.h
>

31 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


32 
	#__Ãed_time_t


	)

33 
	~<time.h
>

37 
	sutimbuf


39 
__time_t
 
	maùime
;

40 
__time_t
 
	mmodtime
;

45 
	$utime
 (cÚ¡ *
__fe
,

46 cÚ¡ 
utimbuf
 *
__fe_times
)

47 
__THROW
 
	`__nÚnuÎ
 ((1));

49 
__END_DECLS


	@culzss.h

1 #iâdeà
ZLIB_CULZSS_H


2 
	#ZLIB_CULZSS_H


	)

4 
	~"deæ©e.h
"

6 
š‹º®_¡©e
 
	tdeæ©e_¡©e
;

10 
	mdi¡
;

11 
	mËn
;

12 } 
	tculzss_’coded_¡ršg_t
;

15 cÚ¡ 
	gCULZSS_WINDOW_BITS
 = 12;

16 cÚ¡ 
	gCULZSS_WINDOW_SIZE
 = (1 << 
CULZSS_WINDOW_BITS
);

18 cÚ¡ 
	gCULZSS_HASH_SHIFT
 = 5;

19 cÚ¡ 
	gCULZSS_HASH_BITS
 = 13;

20 cÚ¡ 
	gCULZSS_HASH_SIZE
 = (1 << 
CULZSS_HASH_BITS
);

21 cÚ¡ 
	gCULZSS_HASH_MASK
 = (
CULZSS_HASH_SIZE
 - 1);

23 cÚ¡ 
	gCULZSS_LENGTH_BITS
 = 2;

24 cÚ¡ 
	gCULZSS_MIN_MATCH
 = 3;

25 cÚ¡ 
	gCULZSS_MAX_MATCH
 = (1 << 
CULZSS_LENGTH_BITS
è+ 
MIN_MATCH
 - 1;

27 cÚ¡ 
	gCULZSS_MAX_PROCESS_SIZE
 = (16 * 1024 * 1024);

28 cÚ¡ 
	gCULZSS_EXTRA_BUF
 = (2 * 
CULZSS_WINDOW_SIZE
);

31 cÚ¡ 
	gCULZSS_UNCODED
 = 1;

32 cÚ¡ 
	gCULZSS_ENCODED
 = 0;

34 cÚ¡ 
	gCULZSS_CUDA_BLOCK_SIZE
 = (1 * 1024 * 1024);

36 cÚ¡ 
	gCULZSS_CUDA_NUM_BLOCKS
 = 1;

42 cÚ¡ 
	gCULZSS_CUDA_NUM_STREAMS
 = (
CULZSS_MAX_PROCESS_SIZE
 / 
CULZSS_CUDA_BLOCK_SIZE
) + 1;

44 
culzss_š™
 (
deæ©e_¡©e
 *
s
);

45 
culzss_de¡roy
 (
deæ©e_¡©e
 *
s
);

46 
block_¡©e
 
culzss_lÚge¡_m©ch
 (
deæ©e_¡©e
 *
s
, 
size
, 
is_fœ¡block
, 
æush
);

	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_BSD
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

101 #undeà
__USE_ISOC11


102 #undeà
__USE_ISOC99


103 #undeà
__USE_ISOC95


104 #undeà
__USE_ISOCXX11


105 #undeà
__USE_POSIX


106 #undeà
__USE_POSIX2


107 #undeà
__USE_POSIX199309


108 #undeà
__USE_POSIX199506


109 #undeà
__USE_XOPEN


110 #undeà
__USE_XOPEN_EXTENDED


111 #undeà
__USE_UNIX98


112 #undeà
__USE_XOPEN2K


113 #undeà
__USE_XOPEN2KXSI


114 #undeà
__USE_XOPEN2K8


115 #undeà
__USE_XOPEN2K8XSI


116 #undeà
__USE_LARGEFILE


117 #undeà
__USE_LARGEFILE64


118 #undeà
__USE_FILE_OFFSET64


119 #undeà
__USE_BSD


120 #undeà
__USE_SVID


121 #undeà
__USE_MISC


122 #undeà
__USE_ATFILE


123 #undeà
__USE_GNU


124 #undeà
__USE_REENTRANT


125 #undeà
__USE_FORTIFY_LEVEL


126 #undeà
__KERNEL_STRICT_NAMES


130 #iâdeà
_LOOSE_KERNEL_NAMES


131 
	#__KERNEL_STRICT_NAMES


	)

141 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


142 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

143 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

145 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

150 #ifdeà
_GNU_SOURCE


151 #undeà
_ISOC95_SOURCE


152 
	#_ISOC95_SOURCE
 1

	)

153 #undeà
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #undeà
_ISOC11_SOURCE


156 
	#_ISOC11_SOURCE
 1

	)

157 #undeà
_POSIX_SOURCE


158 
	#_POSIX_SOURCE
 1

	)

159 #undeà
_POSIX_C_SOURCE


160 
	#_POSIX_C_SOURCE
 200809L

	)

161 #undeà
_XOPEN_SOURCE


162 
	#_XOPEN_SOURCE
 700

	)

163 #undeà
_XOPEN_SOURCE_EXTENDED


164 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

165 #undeà
_LARGEFILE64_SOURCE


166 
	#_LARGEFILE64_SOURCE
 1

	)

167 #undeà
_DEFAULT_SOURCE


168 
	#_DEFAULT_SOURCE
 1

	)

169 #undeà
_BSD_SOURCE


170 
	#_BSD_SOURCE
 1

	)

171 #undeà
_SVID_SOURCE


172 
	#_SVID_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(
defšed
 
_DEFAULT_SOURCE
 \

180 || (!
defšed
 
	g__STRICT_ANSI__
 \

181 && !
defšed
 
	g_ISOC99_SOURCE
 \

182 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

183 && !
defšed
 
	g_XOPEN_SOURCE
 \

184 && !
defšed
 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
))

185 #undeà
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

187 #undeà
_BSD_SOURCE


188 
	#_BSD_SOURCE
 1

	)

189 #undeà
_SVID_SOURCE


190 
	#_SVID_SOURCE
 1

	)

194 #ià(
defšed
 
_ISOC11_SOURCE
 \

195 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

196 
	#__USE_ISOC11
 1

	)

200 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

201 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

202 
	#__USE_ISOC99
 1

	)

206 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

207 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

208 
	#__USE_ISOC95
 1

	)

215 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

216 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

217 
	#__USE_ISOCXX11
 1

	)

223 #ifdeà
_DEFAULT_SOURCE


224 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


225 
	#__USE_POSIX_IMPLICITLY
 1

	)

227 #undeà
_POSIX_SOURCE


228 
	#_POSIX_SOURCE
 1

	)

229 #undeà
_POSIX_C_SOURCE


230 
	#_POSIX_C_SOURCE
 200809L

	)

232 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

233 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

234 
	#_POSIX_SOURCE
 1

	)

235 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

236 
	#_POSIX_C_SOURCE
 2

	)

237 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

238 
	#_POSIX_C_SOURCE
 199506L

	)

239 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

240 
	#_POSIX_C_SOURCE
 200112L

	)

242 
	#_POSIX_C_SOURCE
 200809L

	)

244 
	#__USE_POSIX_IMPLICITLY
 1

	)

247 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


248 
	#__USE_POSIX
 1

	)

251 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


252 
	#__USE_POSIX2
 1

	)

255 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

256 
	#__USE_POSIX199309
 1

	)

259 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

260 
	#__USE_POSIX199506
 1

	)

263 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

264 
	#__USE_XOPEN2K
 1

	)

265 #undeà
__USE_ISOC95


266 
	#__USE_ISOC95
 1

	)

267 #undeà
__USE_ISOC99


268 
	#__USE_ISOC99
 1

	)

271 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

272 
	#__USE_XOPEN2K8
 1

	)

273 #undeà
_ATFILE_SOURCE


274 
	#_ATFILE_SOURCE
 1

	)

277 #ifdef 
_XOPEN_SOURCE


278 
	#__USE_XOPEN
 1

	)

279 #ià(
_XOPEN_SOURCE
 - 0) >= 500

280 
	#__USE_XOPEN_EXTENDED
 1

	)

281 
	#__USE_UNIX98
 1

	)

282 #undeà
_LARGEFILE_SOURCE


283 
	#_LARGEFILE_SOURCE
 1

	)

284 #ià(
_XOPEN_SOURCE
 - 0) >= 600

285 #ià(
_XOPEN_SOURCE
 - 0) >= 700

286 
	#__USE_XOPEN2K8
 1

	)

287 
	#__USE_XOPEN2K8XSI
 1

	)

289 
	#__USE_XOPEN2K
 1

	)

290 
	#__USE_XOPEN2KXSI
 1

	)

291 #undeà
__USE_ISOC95


292 
	#__USE_ISOC95
 1

	)

293 #undeà
__USE_ISOC99


294 
	#__USE_ISOC99
 1

	)

297 #ifdeà
_XOPEN_SOURCE_EXTENDED


298 
	#__USE_XOPEN_EXTENDED
 1

	)

303 #ifdeà
_LARGEFILE_SOURCE


304 
	#__USE_LARGEFILE
 1

	)

307 #ifdeà
_LARGEFILE64_SOURCE


308 
	#__USE_LARGEFILE64
 1

	)

311 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

312 
	#__USE_FILE_OFFSET64
 1

	)

315 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


316 
	#__USE_MISC
 1

	)

319 #ifdef 
_BSD_SOURCE


320 
	#__USE_BSD
 1

	)

323 #ifdef 
_SVID_SOURCE


324 
	#__USE_SVID
 1

	)

327 #ifdef 
_ATFILE_SOURCE


328 
	#__USE_ATFILE
 1

	)

331 #ifdef 
_GNU_SOURCE


332 
	#__USE_GNU
 1

	)

335 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


336 
	#__USE_REENTRANT
 1

	)

339 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

340 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

341 #ià
_FORTIFY_SOURCE
 > 1

342 
	#__USE_FORTIFY_LEVEL
 2

	)

344 
	#__USE_FORTIFY_LEVEL
 1

	)

347 
	#__USE_FORTIFY_LEVEL
 0

	)

352 
	~<¡dc-´edef.h
>

360 #undeà
__GNU_LIBRARY__


361 
	#__GNU_LIBRARY__
 6

	)

365 
	#__GLIBC__
 2

	)

366 
	#__GLIBC_MINOR__
 19

	)

368 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

369 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

372 #iâdeà
__ASSEMBLER__


373 #iâdeà
_SYS_CDEFS_H


374 
	~<sys/cdefs.h
>

379 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


380 
	#__USE_LARGEFILE
 1

	)

381 
	#__USE_LARGEFILE64
 1

	)

387 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

388 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

389 && 
defšed
 
	g__ex‹º_šlše


390 
	#__USE_EXTERN_INLINES
 1

	)

398 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

19 #iâdeà
_GETOPT_H


21 #iâdeà
__Ãed_g‘İt


22 
	#_GETOPT_H
 1

	)

32 #ià!
defšed
 
__GNU_LIBRARY__


33 
	~<ùy³.h
>

36 #iâdeà
__THROW


37 #iâdeà
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

40 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__ılu¥lus


57 *
İrg
;

71 
İtšd
;

76 
İ‹¼
;

80 
İtİt
;

82 #iâdeà
__Ãed_g‘İt


104 
	sİtiÚ


106 cÚ¡ *
	gÇme
;

109 
	ghas_¬g
;

110 *
	gæag
;

111 
	gv®
;

116 
	#no_¬gum’t
 0

	)

117 
	#»quœed_¬gum’t
 1

	)

118 
	#İtiÚ®_¬gum’t
 2

	)

146 #ifdeà
__GNU_LIBRARY__


150 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

151 
__THROW
;

153 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

154 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


158 #ifdeà
__REDIRECT


159 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

160 cÚ¡ *
__shÜtİts
),

161 
__posix_g‘İt
);

163 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

164 cÚ¡ *
__shÜtİts
è
__THROW
;

165 
	#g‘İt
 
__posix_g‘İt


	)

169 
g‘İt
 ();

172 #iâdeà
__Ãed_g‘İt


173 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

174 cÚ¡ *
__shÜtİts
,

175 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

176 
__THROW
;

177 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

178 cÚ¡ *
__shÜtİts
,

179 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

180 
__THROW
;

184 #ifdef 
__ılu¥lus


189 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

28 #iâdeà
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_cÚfig.h
>

33 
	#_IO_åos_t
 
_G_åos_t


	)

34 
	#_IO_åos64_t
 
_G_åos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li¡
 
_G_va_li¡


	)

45 
	#_IO_wšt_t
 
wšt_t


	)

48 
	#__Ãed___va_li¡


	)

49 
	~<¡d¬g.h
>

50 #ifdeà
__GNUC_VA_LIST


51 #undeà
_IO_va_li¡


52 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

55 #iâdeà
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #iâdeà
EOF


62 
	#EOF
 (-1)

	)

64 #iâdeà
NULL


65 #ià
defšed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuÎ
)

	)

69 #ià!
defšed
(
__ılu¥lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifdeà
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifdeà
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifdeà
_IO_MTSAFE_IO


148 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

149 
	~<b™s/¡dio-lock.h
>

154 
	t_IO_lock_t
;

160 
	s_IO_m¬k”
 {

161 
_IO_m¬k”
 *
	m_Ãxt
;

162 
_IO_FILE
 *
	m_sbuf
;

166 
	m_pos
;

168 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

169 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

170 
	mpublic
:

171 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

172 ~
¡»amm¬k”
();

173 
§všg
(è{  
	m_¥os
 == -2; }

174 
d–
(
¡»amm¬k”
&);

175 
d–
();

180 
	e__codecvt_»suÉ


182 
	m__codecvt_ok
,

183 
	m__codecvt_·¹Ÿl
,

184 
	m__codecvt_”rÜ
,

185 
	m__codecvt_nocÚv


188 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


191 
	s_IO_codecvt


193 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

194 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

195 
	m__mb¡©e_t
 *,

196 cÚ¡ 
	mwch¬_t
 *,

197 cÚ¡ 
	mwch¬_t
 *,

198 cÚ¡ 
	mwch¬_t
 **, *,

200 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

201 
	m__mb¡©e_t
 *, *,

203 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

204 
	m__mb¡©e_t
 *,

206 cÚ¡ **, 
	mwch¬_t
 *,

207 
	mwch¬_t
 *, wchar_t **);

208 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

209 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

211 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

212 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

214 
_IO_icÚv_t
 
	m__cd_š
;

215 
_IO_icÚv_t
 
	m__cd_out
;

219 
	s_IO_wide_d©a


221 
wch¬_t
 *
	m_IO_»ad_±r
;

222 
wch¬_t
 *
	m_IO_»ad_’d
;

223 
wch¬_t
 *
	m_IO_»ad_ba£
;

224 
wch¬_t
 *
	m_IO_wr™e_ba£
;

225 
wch¬_t
 *
	m_IO_wr™e_±r
;

226 
wch¬_t
 *
	m_IO_wr™e_’d
;

227 
wch¬_t
 *
	m_IO_buf_ba£
;

228 
wch¬_t
 *
	m_IO_buf_’d
;

230 
wch¬_t
 *
	m_IO_§ve_ba£
;

231 
wch¬_t
 *
	m_IO_backup_ba£
;

233 
wch¬_t
 *
	m_IO_§ve_’d
;

235 
__mb¡©e_t
 
	m_IO_¡©e
;

236 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

237 
_IO_codecvt
 
	m_codecvt
;

239 
wch¬_t
 
	m_shÜtbuf
[1];

241 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

245 
	s_IO_FILE
 {

246 
	m_æags
;

247 
	#_IO_fe_æags
 
_æags


	)

251 * 
	m_IO_»ad_±r
;

252 * 
	m_IO_»ad_’d
;

253 * 
	m_IO_»ad_ba£
;

254 * 
	m_IO_wr™e_ba£
;

255 * 
	m_IO_wr™e_±r
;

256 * 
	m_IO_wr™e_’d
;

257 * 
	m_IO_buf_ba£
;

258 * 
	m_IO_buf_’d
;

260 *
	m_IO_§ve_ba£
;

261 *
	m_IO_backup_ba£
;

262 *
	m_IO_§ve_’d
;

264 
_IO_m¬k”
 *
	m_m¬k”s
;

266 
_IO_FILE
 *
	m_chaš
;

268 
	m_f’o
;

270 
	m_blksize
;

272 
	m_æags2
;

274 
_IO_off_t
 
	m_Şd_off£t
;

276 
	#__HAVE_COLUMN


	)

278 
	m_cur_cŞumn
;

279 sigÃd 
	m_vbË_off£t
;

280 
	m_shÜtbuf
[1];

284 
_IO_lock_t
 *
	m_lock
;

285 #ifdeà
_IO_USE_OLD_IO_FILE


288 
	s_IO_FILE_com¶‘e


290 
_IO_FILE
 
	m_fe
;

292 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

293 
_IO_off64_t
 
	m_off£t
;

294 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


296 
_IO_codecvt
 *
	m_codecvt
;

297 
_IO_wide_d©a
 *
	m_wide_d©a
;

298 
_IO_FILE
 *
	m_ä“»s_li¡
;

299 *
	m_ä“»s_buf
;

300 
size_t
 
	m_ä“»s_size
;

302 *
	m__·d1
;

303 *
	m__·d2
;

304 *
	m__·d3
;

305 *
	m__·d4
;

306 
size_t
 
	m__·d5
;

308 
	m_mode
;

310 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

314 #iâdeà
__ılu¥lus


315 
_IO_FILE
 
	t_IO_FILE
;

318 
	g_IO_FILE_¶us
;

320 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

321 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

322 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

323 #iâdeà
_LIBC


324 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

325 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

326 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

328 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

329 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

330 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

338 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

346 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

347 
	tsize_t
 
	t__n
);

355 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

358 
	t__io_şo£_â
 (*
	t__cook›
);

361 #ifdeà
_GNU_SOURCE


363 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

364 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

365 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

366 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

371 
__io_»ad_â
 *
	m»ad
;

372 
__io_wr™e_â
 *
	mwr™e
;

373 
__io_£ek_â
 *
	m£ek
;

374 
__io_şo£_â
 *
	mşo£
;

375 } 
	t_IO_cook›_io_funùiÚs_t
;

376 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

378 
	g_IO_cook›_fe
;

381 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

382 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

386 #ifdeà
__ılu¥lus


390 
__und”æow
 (
_IO_FILE
 *);

391 
__uæow
 (
_IO_FILE
 *);

392 
__ov”æow
 (
_IO_FILE
 *, );

393 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


394 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

395 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

396 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

399 #ià 
__GNUC__
 >= 3

400 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

402 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

405 
	#_IO_g‘c_uÆocked
(
_å
) \

406 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

407 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

408 
	#_IO_³ekc_uÆocked
(
_å
) \

409 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

410 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

411 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

412 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

413 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

414 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

415 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

417 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


418 
	#_IO_g‘wc_uÆocked
(
_å
) \

419 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

420 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

421 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

422 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

423 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

424 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

425 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

426 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

427 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

428 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

431 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

432 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

434 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

435 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

436 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

437 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

439 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

442 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

443 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

445 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

446 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

447 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

449 #ifdeà
_IO_MTSAFE_IO


450 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

451 
	#_IO_æockfe
(
_å
) \

452 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

453 
	#_IO_fuÆockfe
(
_å
) \

454 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

456 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

457 
	#_IO_æockfe
(
_å
è

	)

458 
	#_IO_fuÆockfe
(
_å
è

	)

459 
	#_IO_árylockfe
(
_å
è

	)

460 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

461 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

464 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

465 
_IO_va_li¡
, *
__»¡riù
);

466 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

467 
_IO_va_li¡
);

468 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

469 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

471 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

472 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

474 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

476 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


477 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

478 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

479 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

480 #ià
__GNUC__
 >= 2

483 #ià
defšed
 
_LIBC
 && defšed 
SHARED


484 
	~<shlib-com·t.h
>

485 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

486 
	#_IO_fwide_maybe_šcom·tibË
 \

487 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

488 cÚ¡ 
_IO_¡dš_u£d
;

489 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

492 #iâdeà
_IO_fwide_maybe_šcom·tibË


493 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

497 
	#_IO_fwide
(
__å
, 
__mode
) \

498 ({ 
__»suÉ
 = (
__mode
); \

499 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

501 ià((
__å
)->
_mode
 == 0) \

503 (
__å
)->
_mode
 = -1; \

504 
__»suÉ
 = (
__å
)->
_mode
; \

506 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

507 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

509 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

510 
__»suÉ
; })

	)

513 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

514 
_IO_va_li¡
, *
__»¡riù
);

515 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

516 
_IO_va_li¡
);

517 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

518 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

521 #ifdeà
__LDBL_COMPAT


522 
	~<b™s/libio-ldbl.h
>

525 #ifdeà
__ılu¥lus


	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

54 
	#__STDC_ISO_10646__
 201103L

	)

57 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
) (*, const *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 cÚ¡ *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

150 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

151 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

158 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

159 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

164 
__THROW
 
__©Œibu‹_pu»__
;

166 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©Œibu‹_pu»__
;

168 
__END_NAMESPACE_STD


170 #ifdeà
__USE_XOPEN2K8


172 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

175 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

176 
size_t
 
__n
è
__THROW
;

180 
	~<xloÿË.h
>

182 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

183 
__loÿË_t
 
__loc
è
__THROW
;

185 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

196 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

197 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifdeà
__USE_XOPEN2K8


206 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

207 
__loÿË_t
 
__loc
è
__THROW
;

212 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

213 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

216 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
__©Œibu‹_pu»__
;

231 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

233 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
__©Œibu‹_pu»__
;

240 
__END_NAMESPACE_STD


242 #ifdeà
__USE_GNU


245 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

246 
__THROW
 
__©Œibu‹_pu»__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

253 
__THROW
 
__©Œibu‹_pu»__
;

256 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

257 
__THROW
 
__©Œibu‹_pu»__
;

259 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

262 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

263 cÚ¡ 
wch¬_t
 *
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

266 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

267 
__THROW
 
__©Œibu‹_pu»__
;

270 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

273 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

274 cÚ¡ 
wch¬_t
 *
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

277 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

278 
__THROW
 
__©Œibu‹_pu»__
;

282 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

283 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

284 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

287 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

288 
__END_NAMESPACE_STD


290 #ifdeà
__USE_XOPEN


292 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

295 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

296 cÚ¡ 
wch¬_t
 *
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

299 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

300 
__THROW
 
__©Œibu‹_pu»__
;

304 #ifdeà
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

307 
__THROW
 
__©Œibu‹_pu»__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

316 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

320 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©Œibu‹_pu»__
;

325 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©Œibu‹_pu»__
;

329 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

330 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

334 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdeà
__USE_GNU


344 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

345 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

357 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

361 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

365 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

366 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

367 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

370 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

371 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

377 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifdeà
__USE_EXTERN_INLINES


386 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

387 
__ex‹º_šlše
 
wšt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

392 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

393 
__ex‹º_šlše
 

394 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

395 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

396 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

398 
__ex‹º_šlše
 
size_t


399 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

400 
mb¡©e_t
 *
__»¡riù
 
__ps
))

401 {  (
__ps
 !ğ
NULL


402 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

409 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

410 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

415 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

416 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

424 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

425 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

429 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

430 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

431 
size_t
 
__nwc
, size_ˆ
__Ën
,

432 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

437 #ifdeà
__USE_XOPEN


439 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

443 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

451 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifdeà
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

460 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

469 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

473 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

474 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ifdeà
__USE_ISOC99


479 
__BEGIN_NAMESPACE_C99


482 
__ex‹nsiÚ__


483 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

484 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

485 
__THROW
;

489 
__ex‹nsiÚ__


490 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

491 
wch¬_t
 **
__»¡riù
 
__’d±r
,

492 
__ba£
è
__THROW
;

493 
__END_NAMESPACE_C99


496 #ifdeà
__USE_GNU


499 
__ex‹nsiÚ__


500 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

501 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

502 
__THROW
;

506 
__ex‹nsiÚ__


507 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

508 
wch¬_t
 **
__»¡riù
 
__’d±r
,

509 
__ba£
è
__THROW
;

512 #ifdeà
__USE_GNU


526 
	~<xloÿË.h
>

530 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

531 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

532 
__loÿË_t
 
__loc
è
__THROW
;

534 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

535 
wch¬_t
 **
__»¡riù
 
__’d±r
,

536 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

538 
__ex‹nsiÚ__


539 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

540 
wch¬_t
 **
__»¡riù
 
__’d±r
,

541 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

543 
__ex‹nsiÚ__


544 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

545 
wch¬_t
 **
__»¡riù
 
__’d±r
,

546 
__ba£
, 
__loÿË_t
 
__loc
)

547 
__THROW
;

549 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

550 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

551 
__THROW
;

553 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

554 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

555 
__THROW
;

557 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

558 
wch¬_t
 **
__»¡riù
 
__’d±r
,

559 
__loÿË_t
 
__loc
è
__THROW
;

563 #ifdeà
__USE_XOPEN2K8


566 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

567 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

571 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

572 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

583 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

594 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

595 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

601 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

605 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

606 
__THROW
 ;

612 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

613 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

614 
__gnuc_va_li¡
 
__¬g
)

620 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

621 
__gnuc_va_li¡
 
__¬g
)

625 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

626 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

627 
__gnuc_va_li¡
 
__¬g
)

628 
__THROW
 ;

635 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

636 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

642 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

646 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

647 
__THROW
 ;

649 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

650 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

651 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

652 #ifdeà
__REDIRECT


656 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

657 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

658 
__isoc99_fwsÿnf
)

660 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_wsÿnf
)

663 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

664 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

665 ...), 
__isoc99_swsÿnf
)

668 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

669 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

670 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

671 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

673 
__THROW
;

674 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

675 
	#wsÿnf
 
__isoc99_wsÿnf


	)

676 
	#swsÿnf
 
__isoc99_swsÿnf


	)

680 
__END_NAMESPACE_STD


683 #ifdeà
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

690 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

691 
__gnuc_va_li¡
 
__¬g
)

697 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

698 
__gnuc_va_li¡
 
__¬g
)

701 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

702 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

703 
__gnuc_va_li¡
 
__¬g
)

704 
__THROW
 ;

706 #ià!
defšed
 
__USE_GNU
 \

707 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

708 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

709 #ifdeà
__REDIRECT


710 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

711 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

712 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

714 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

717 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

718 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

719 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

722 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

723 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

726 
__gnuc_va_li¡
 
__¬g
);

727 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

728 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

730 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

731 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

732 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

746 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

752 
wšt_t
 
	`g‘wch¬
 ();

759 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

760 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

766 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

774 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

775 
__FILE
 *
__»¡riù
 
__¡»am
);

781 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

782 
__FILE
 *
__»¡riù
 
__¡»am
);

789 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

790 
__END_NAMESPACE_STD


793 #ifdeà
__USE_GNU


801 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

802 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

810 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

818 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

827 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

828 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

837 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

838 
__FILE
 *
__»¡riù
 
__¡»am
);

846 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

847 
__FILE
 *
__»¡riù
 
__¡»am
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

856 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

857 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifdeà
__USE_GNU


861 
	~<xloÿË.h
>

865 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

866 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

867 cÚ¡ 
tm
 *
__»¡riù
 
__
,

868 
__loÿË_t
 
__loc
è
__THROW
;

877 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


878 
	#__Ãed_iswxxx


	)

879 
	~<wùy³.h
>

883 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


884 
	~<b™s/wch¬2.h
>

887 #ifdeà
__LDBL_COMPAT


888 
	~<b™s/wch¬-ldbl.h
>

891 
__END_DECLS


899 #undeà
__Ãed_mb¡©e_t


900 #undeà
__Ãed_wšt_t


	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´İ”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
104
2015
adler32.c
compress.c
contrib/blast/blast.c
contrib/blast/blast.h
contrib/infback9/infback9.c
contrib/infback9/infback9.h
contrib/infback9/inffix9.h
contrib/infback9/inflate9.h
contrib/infback9/inftree9.c
contrib/infback9/inftree9.h
contrib/inflate86/inffas86.c
contrib/iostream/test.cpp
contrib/iostream/zfstream.cpp
contrib/iostream/zfstream.h
contrib/iostream2/zstream.h
contrib/iostream2/zstream_test.cpp
contrib/iostream3/test.cc
contrib/iostream3/zfstream.cc
contrib/iostream3/zfstream.h
contrib/masmx64/inffas8664.c
contrib/minizip/crypt.h
contrib/minizip/ioapi.c
contrib/minizip/ioapi.h
contrib/minizip/iowin32.c
contrib/minizip/iowin32.h
contrib/minizip/miniunz.c
contrib/minizip/minizip.c
contrib/minizip/mztools.c
contrib/minizip/mztools.h
contrib/minizip/unzip.c
contrib/minizip/unzip.h
contrib/minizip/zip.c
contrib/minizip/zip.h
contrib/puff/puff.c
contrib/puff/puff.h
contrib/puff/pufftest.c
contrib/testzlib/testzlib.c
contrib/untgz/untgz.c
crc32.c
crc32.h
cuda_hello_world.h
deflate.c
deflate.h
deflateCuda.h
examples/enough.c
examples/fitblk.c
examples/gun.c
examples/gzappend.c
examples/gzjoin.c
examples/gzlog.c
examples/gzlog.h
examples/zpipe.c
examples/zran.c
gzclose.c
gzguts.h
gzlib.c
gzread.c
gzwrite.c
infback.c
inffast.c
inffast.h
inffixed.h
inflate.c
inflate.h
inftrees.c
inftrees.h
test/example.c
test/infcover.c
test/minigzip.c
trees.c
trees.h
uncompr.c
zconf.h
zlib.h
zutil.c
zutil.h
/usr/include/assert.h
/usr/include/crypt.h
/usr/include/ctype.h
/usr/include/errno.h
/usr/include/fcntl.h
/usr/include/limits.h
/usr/include/malloc.h
/usr/include/math.h
/usr/include/setjmp.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/utime.h
culzss.h
/usr/include/alloca.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/stdc-predef.h
/usr/include/gconv.h
/usr/include/wchar.h
/usr/include/wctype.h
